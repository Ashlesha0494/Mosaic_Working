var pz=Object.create;var A_=Object.defineProperty;var mz=Object.getOwnPropertyDescriptor;var yz=Object.getOwnPropertyNames;var gz=Object.getPrototypeOf,xz=Object.prototype.hasOwnProperty;var OD=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Mr=(e,t)=>{for(var n in t)A_(e,n,{get:t[n],enumerable:!0})},bz=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of yz(t))!xz.call(e,i)&&i!==n&&A_(e,i,{get:()=>t[i],enumerable:!(r=mz(t,i))||r.enumerable});return e};var wz=(e,t,n)=>(n=e!=null?pz(gz(e)):{},bz(t||!e||!e.__esModule?A_(n,"default",{value:e,enumerable:!0}):n,e));var fP=OD((Q9t,uP)=>{"use strict";function met(e,t,n,r,i){for(var o=i+1;r<=i;){var s=r+i>>>1,a=e[s],c=n!==void 0?n(a,t):a-t;c>=0?(o=s,i=s-1):r=s+1}return o}function yet(e,t,n,r,i){for(var o=i+1;r<=i;){var s=r+i>>>1,a=e[s],c=n!==void 0?n(a,t):a-t;c>0?(o=s,i=s-1):r=s+1}return o}function get(e,t,n,r,i){for(var o=r-1;r<=i;){var s=r+i>>>1,a=e[s],c=n!==void 0?n(a,t):a-t;c<0?(o=s,r=s+1):i=s-1}return o}function xet(e,t,n,r,i){for(var o=r-1;r<=i;){var s=r+i>>>1,a=e[s],c=n!==void 0?n(a,t):a-t;c<=0?(o=s,r=s+1):i=s-1}return o}function bet(e,t,n,r,i){for(;r<=i;){var o=r+i>>>1,s=e[o],a=n!==void 0?n(s,t):s-t;if(a===0)return o;a<=0?r=o+1:i=o-1}return-1}function Py(e,t,n,r,i,o){return typeof n=="function"?o(e,t,n,r===void 0?0:r|0,i===void 0?e.length-1:i|0):o(e,t,void 0,n===void 0?0:n|0,r===void 0?e.length-1:r|0)}uP.exports={ge:function(e,t,n,r,i){return Py(e,t,n,r,i,met)},gt:function(e,t,n,r,i){return Py(e,t,n,r,i,yet)},lt:function(e,t,n,r,i){return Py(e,t,n,r,i,get)},le:function(e,t,n,r,i){return Py(e,t,n,r,i,xet)},eq:function(e,t,n,r,i){return Py(e,t,n,r,i,bet)}}});var bP=OD((K9t,xP)=>{"use strict";var Nv=fP(),dh=0,jl=1,Ev=2;xP.exports=vet;function O3(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}var Uy=O3.prototype;function N3(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function pP(e,t){var n=ph(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function hP(e,t){var n=e.intervals([]);n.push(t),pP(e,n)}function dP(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?dh:(n.splice(r,1),pP(e,n),jl)}Uy.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Uy.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?hP(this,e):this.left.insert(e):this.left=ph([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?hP(this,e):this.right.insert(e):this.right=ph([e]);else{var n=Nv.ge(this.leftPoints,e,B3),r=Nv.ge(this.rightPoints,e,L3);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}};Uy.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return dh;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return dP(this,e);var r=this.left.remove(e);return r===Ev?(this.left=null,this.count-=1,jl):(r===jl&&(this.count-=1),r)}else if(e[0]>this.mid){if(!this.right)return dh;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return dP(this,e);var r=this.right.remove(e);return r===Ev?(this.right=null,this.count-=1,jl):(r===jl&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===e?Ev:dh;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var o=this,s=this.left;s.right;)o=s,s=s.right;if(o===this)s.right=this.right;else{var a=this.left,r=this.right;o.count-=s.count,o.right=s.left,s.left=a,s.right=r}N3(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?N3(this,this.left):N3(this,this.right);return jl}for(var a=Nv.ge(this.leftPoints,e,B3);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var r=Nv.ge(this.rightPoints,e,L3);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),jl}return dh}};function mP(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function yP(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function gP(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}Uy.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return mP(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return yP(this.rightPoints,e,t)}else return gP(this.leftPoints,t)};Uy.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?mP(this.leftPoints,t,n):e>this.mid?yP(this.rightPoints,e,n):gP(this.leftPoints,n)};function wet(e,t){return e-t}function B3(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function L3(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function ph(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(wet);for(var r=t[t.length>>1],i=[],o=[],s=[],n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?o.push(a):s.push(a)}var c=s,l=s.slice();return c.sort(B3),l.sort(L3),new O3(r,ph(i),ph(o),c,l)}function D3(e){this.root=e}var mh=D3.prototype;mh.insert=function(e){this.root?this.root.insert(e):this.root=new O3(e[0],null,null,[e],[e])};mh.remove=function(e){if(this.root){var t=this.root.remove(e);return t===Ev&&(this.root=null),t!==dh}return!1};mh.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};mh.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(mh,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(mh,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function vet(e){return!e||e.length===0?new D3(null):new D3(ph(e))}});var BD={};function Ch(e,t=!1){let n,r,i=BD;function o(l){n=e(l).then(()=>{if(r){let{value:u}=r;r=null,o(u)}else n=null})}function s(l){r={event:l}}function a(l){n?s(l):o(l)}function c(l){i!==l&&requestAnimationFrame(()=>{let u=i;i=BD,a(u)}),i=l}return t?c:a}var fr=class{constructor(t){this._filterBy=t,this._requestUpdate=Ch(()=>this.requestQuery(),!0),this._coordinator=null}get coordinator(){return this._coordinator}set coordinator(t){this._coordinator=t}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(t){return this}query(t){return null}queryPending(){return this}queryResult(t){return this}queryError(t){return console.error(t),this}requestQuery(t){let n=t||this.query(this.filterBy?.predicate(this));return this._coordinator.requestQuery(this,n)}requestUpdate(){this._requestUpdate()}update(){return this}};function CD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function J(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function LD(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ft(e){return this instanceof Ft?(this.v=e,this):new Ft(e)}function Ar(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(d){return new Promise(function(p,m){o.push([h,d,p,m])>1||a(h,d)})})}function a(h,d){try{c(r[h](d))}catch(p){f(o[0][3],p)}}function c(h){h.value instanceof Ft?Promise.resolve(h.value.v).then(l,u):f(o[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function f(h,d){h(d),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Ql(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:Ft(e[i](s)),done:!1}:o?o(s):s}:o}}function Ii(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof LD=="function"?LD(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var B_={};Mr(B_,{compareArrayLike:()=>O_,joinUint8Arrays:()=>Er,memcpy:()=>Rh,rebaseValueOffsets:()=>Mg,toArrayBufferView:()=>Pt,toArrayBufferViewAsyncIterator:()=>Ai,toArrayBufferViewIterator:()=>Qi,toBigInt64Array:()=>Ig,toBigUint64Array:()=>Nz,toFloat32Array:()=>Dz,toFloat32ArrayAsyncIterator:()=>Xz,toFloat32ArrayIterator:()=>$z,toFloat64Array:()=>Oz,toFloat64ArrayAsyncIterator:()=>Wz,toFloat64ArrayIterator:()=>Pz,toInt16Array:()=>Az,toInt16ArrayAsyncIterator:()=>qz,toInt16ArrayIterator:()=>Cz,toInt32Array:()=>vc,toInt32ArrayAsyncIterator:()=>jz,toInt32ArrayIterator:()=>kz,toInt8Array:()=>Mz,toInt8ArrayAsyncIterator:()=>zz,toInt8ArrayIterator:()=>Lz,toUint16Array:()=>Tz,toUint16ArrayAsyncIterator:()=>Vz,toUint16ArrayIterator:()=>Fz,toUint32Array:()=>Ez,toUint32ArrayAsyncIterator:()=>Yz,toUint32ArrayIterator:()=>Rz,toUint8Array:()=>_t,toUint8ArrayAsyncIterator:()=>D_,toUint8ArrayIterator:()=>N_,toUint8ClampedArray:()=>Bz,toUint8ClampedArrayAsyncIterator:()=>Gz,toUint8ClampedArrayIterator:()=>Uz});var vz=new TextDecoder("utf-8"),kh=e=>vz.decode(e),_z=new TextEncoder,Ji=e=>_z.encode(e);var Sz=e=>typeof e=="number",kD=e=>typeof e=="boolean",en=e=>typeof e=="function",Xn=e=>e!=null&&Object(e)===e,Tr=e=>Xn(e)&&en(e.then);var Mi=e=>Xn(e)&&en(e[Symbol.iterator]),Gr=e=>Xn(e)&&en(e[Symbol.asyncIterator]),xg=e=>Xn(e)&&Xn(e.schema);var bg=e=>Xn(e)&&"done"in e&&"value"in e;var wg=e=>Xn(e)&&en(e.stat)&&Sz(e.fd);var vg=e=>Xn(e)&&Fh(e.body),_g=e=>"_getDOMStream"in e&&"_getNodeStream"in e,FD=e=>Xn(e)&&en(e.abort)&&en(e.getWriter)&&!_g(e),Fh=e=>Xn(e)&&en(e.cancel)&&en(e.getReader)&&!_g(e),RD=e=>Xn(e)&&en(e.end)&&en(e.write)&&kD(e.writable)&&!_g(e),Sg=e=>Xn(e)&&en(e.read)&&en(e.pipe)&&kD(e.readable)&&!_g(e),$D=e=>Xn(e)&&en(e.clear)&&en(e.bytes)&&en(e.position)&&en(e.setPosition)&&en(e.capacity)&&en(e.getBufferIdentifier)&&en(e.createLong);var E_=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Iz(e){let t=e[0]?[e[0]]:[],n,r,i,o;for(let s,a,c=0,l=0,u=e.length;++c<u;){if(s=t[l],a=e[c],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=s,{byteOffset:r,byteLength:o}=a,n+i<r||r+o<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(s.buffer,n,r-n+o)}return t}function Rh(e,t,n=0,r=t.byteLength){let i=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,i),s=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return o.set(s,n),e}function Er(e,t){let n=Iz(e),r=n.reduce((u,f)=>u+f.byteLength,0),i,o,s,a=0,c=-1,l=Math.min(t||Number.POSITIVE_INFINITY,r);for(let u=n.length;++c<u;){if(i=n[c],o=i.subarray(0,Math.min(i.length,l-a)),l<=a+o.length){o.length<i.length?n[c]=i.subarray(o.length):o.length===i.length&&c++,s?Rh(s,o,a):s=o;break}Rh(s||(s=new Uint8Array(l)),o,a),a+=o.length}return[s||new Uint8Array(0),n.slice(c),r-(s?s.byteLength:0)]}function Pt(e,t){let n=bg(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Ji(n)),n instanceof ArrayBuffer?new e(n):n instanceof E_?new e(n):$D(n)?Pt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}var Mz=e=>Pt(Int8Array,e),Az=e=>Pt(Int16Array,e),vc=e=>Pt(Int32Array,e),Ig=e=>Pt(BigInt64Array,e),_t=e=>Pt(Uint8Array,e),Tz=e=>Pt(Uint16Array,e),Ez=e=>Pt(Uint32Array,e),Nz=e=>Pt(BigUint64Array,e),Dz=e=>Pt(Float32Array,e),Oz=e=>Pt(Float64Array,e),Bz=e=>Pt(Uint8ClampedArray,e),T_=e=>(e.next(),e);function*Qi(e,t){let n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof E_?n(t):Mi(t)?t:n(t);return yield*T_(function*(i){let o=null;do o=i.next(yield Pt(e,o));while(!o.done)}(r[Symbol.iterator]())),new e}var Lz=e=>Qi(Int8Array,e),Cz=e=>Qi(Int16Array,e),kz=e=>Qi(Int32Array,e),N_=e=>Qi(Uint8Array,e),Fz=e=>Qi(Uint16Array,e),Rz=e=>Qi(Uint32Array,e),$z=e=>Qi(Float32Array,e),Pz=e=>Qi(Float64Array,e),Uz=e=>Qi(Uint8ClampedArray,e);function Ai(e,t){return Ar(this,arguments,function*(){if(Tr(t))return yield Ft(yield Ft(yield*Ql(Ii(Ai(e,yield Ft(t))))));let r=function(s){return Ar(this,arguments,function*(){yield yield Ft(yield Ft(s))})},i=function(s){return Ar(this,arguments,function*(){yield Ft(yield*Ql(Ii(T_(function*(a){let c=null;do c=a.next(yield c?.value);while(!c.done)}(s[Symbol.iterator]())))))})},o=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof E_?r(t):Mi(t)?i(t):Gr(t)?t:r(t);return yield Ft(yield*Ql(Ii(T_(function(s){return Ar(this,arguments,function*(){let a=null;do a=yield Ft(s.next(yield yield Ft(Pt(e,a))));while(!a.done)})}(o[Symbol.asyncIterator]()))))),yield Ft(new e)})}var zz=e=>Ai(Int8Array,e),qz=e=>Ai(Int16Array,e),jz=e=>Ai(Int32Array,e),D_=e=>Ai(Uint8Array,e),Vz=e=>Ai(Uint16Array,e),Yz=e=>Ai(Uint32Array,e),Xz=e=>Ai(Float32Array,e),Wz=e=>Ai(Float64Array,e),Gz=e=>Ai(Uint8ClampedArray,e);function Mg(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function O_(e,t){let n=0,r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}var wn={fromIterable(e){return Ag(Hz(e))},fromAsyncIterable(e){return Ag(Zz(e))},fromDOMStream(e){return Ag(Jz(e))},fromNodeStream(e){return Ag(Qz(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Ag=e=>(e.next(),e);function*Hz(e){let t,n=!1,r=[],i,o,s,a=0;function c(){return o==="peek"?Er(r,s)[0]:([i,r,a]=Er(r,s),i)}({cmd:o,size:s}=(yield null)||{cmd:"read",size:0});let l=N_(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(s-a)?l.next():l.next(s-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||s<=a)do({cmd:o,size:s}=yield c());while(s<a);while(!t)}catch(u){(n=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Zz(e){return Ar(this,arguments,function*(){let n,r=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?Er(i,a)[0]:([o,i,c]=Er(i,a),o)}({cmd:s,size:a}=(yield yield Ft(null))||{cmd:"read",size:0});let u=D_(e)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(a-c)?yield Ft(u.next()):yield Ft(u.next(a-c)),!n&&o.byteLength>0&&(i.push(o),c+=o.byteLength),n||a<=c)do({cmd:s,size:a}=yield yield Ft(l()));while(a<c);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield Ft(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield Ft(u.return(new Uint8Array(0))))}return yield Ft(null)})}function Jz(e){return Ar(this,arguments,function*(){let n=!1,r=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?Er(i,a)[0]:([o,i,c]=Er(i,a),o)}({cmd:s,size:a}=(yield yield Ft(null))||{cmd:"read",size:0});let u=new C_(e);try{do if({done:n,value:o}=Number.isNaN(a-c)?yield Ft(u.read()):yield Ft(u.read(a-c)),!n&&o.byteLength>0&&(i.push(_t(o)),c+=o.byteLength),n||a<=c)do({cmd:s,size:a}=yield yield Ft(l()));while(a<c);while(!n)}catch(f){(r=!0)&&(yield Ft(u.cancel(f)))}finally{r===!1?yield Ft(u.cancel()):e.locked&&u.releaseLock()}return yield Ft(null)})}var C_=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return J(this,void 0,void 0,function*(){let{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return J(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};let n=yield this.reader.read();return!n.done&&(n.value=_t(n)),n})}},L_=(e,t)=>{let n=i=>r([t,i]),r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Qz(e){return Ar(this,arguments,function*(){let n=[],r="error",i=!1,o=null,s,a,c=0,l=[],u;function f(){return s==="peek"?Er(l,a)[0]:([u,l,c]=Er(l,a),u)}if({cmd:s,size:a}=(yield yield Ft(null))||{cmd:"read",size:0},e.isTTY)return yield yield Ft(new Uint8Array(0)),yield Ft(null);try{n[0]=L_(e,"end"),n[1]=L_(e,"error");do{if(n[2]=L_(e,"readable"),[r,o]=yield Ft(Promise.race(n.map(d=>d[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-c)?(u=_t(e.read(a-c)),u.byteLength<a-c&&(u=_t(e.read()))):u=_t(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:s,size:a}=yield yield Ft(f()));while(a<c)}while(!i)}finally{yield Ft(h(n,r==="error"?o:null))}return yield Ft(null);function h(d,p){return u=l=null,new Promise((m,y)=>{for(let[g,x]of d)e.off(g,x);try{let g=e.destroy;g&&g.call(e,p),p=void 0}catch(g){p=g||p}finally{p!=null?y(p):m()}})}})}var ce;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ce||(ce={}));var ge;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ge||(ge={}));var de;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(de||(de={}));var Ve;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ve||(Ve={}));var ct;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ct||(ct={}));var cn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(cn||(cn={}));var Ki=new Int32Array(2),Tg=new Float32Array(Ki.buffer),Eg=new Float64Array(Ki.buffer),Kl=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var $h;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})($h||($h={}));var Nr=class e{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new e(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ki[0]=this.readInt32(t),Tg[0]}readFloat64(t){return Ki[Kl?0:1]=this.readInt32(t),Ki[Kl?1:0]=this.readInt32(t+4),Eg[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Tg[0]=n,this.writeInt32(t,Ki[0])}writeFloat64(t,n){Eg[0]=n,this.writeInt32(t,Ki[Kl?0:1]),this.writeInt32(t+4,Ki[Kl?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<4;n++)t+=String.fromCharCode(this.readInt8(this.position_+4+n));return t}__offset(t,n){let r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);let r=this.readInt32(t);t+=4;let i=this.bytes_.subarray(t,t+r);return n===$h.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=4)throw new Error("FlatBuffers: file identifier must be length "+4);for(let n=0;n<4;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+4+n))return!1;return!0}createScalarList(t,n){let r=[];for(let i=0;i<n;++i){let o=t(i);o!==null&&r.push(o)}return r}createObjList(t,n){let r=[];for(let i=0;i<n;++i){let o=t(i);o!==null&&r.push(o.unpack())}return r}};var _c=class e{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=Nr.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);let r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){let i=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){let n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let r=n<<1,i=Nr.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let t=this.offset(),n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);let r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);let i=2;this.addInt16(t-this.object_start);let o=(r+i)*2;this.addInt16(o);let s=0,a=this.space;t:for(n=0;n<this.vtables.length;n++){let c=this.bb.capacity()-this.vtables[n];if(o==this.bb.readInt16(c)){for(let l=2;l<o;l+=2)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;s=this.vtables[n];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){let i=r?4:0;if(n){let o=n;if(this.prep(this.minalign,8+i),o.length!=4)throw new TypeError("FlatBuffers: file identifier must be length "+4);for(let s=3;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){let r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(4,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);let n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,o=this.bb.bytes();r<n.length;r++)o[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){let n=[];for(let r=0;r<t.length;++r){let i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Ph;(function(e){e[e.BUFFER=0]="BUFFER"})(Ph||(Ph={}));var Uh;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Uh||(Uh={}));var Dg=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}codec(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Uh.LZ4_FRAME}method(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Ph.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Uh.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Ph.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return e.startBodyCompression(t),e.addCodec(t,n),e.addMethod(t,r),e.endBodyCompression(t)}};var tu=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}};var eu=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}};var Dr=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new eu).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new tu).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){let n=this.bb.__offset(this.bb_pos,10);return n?(t||new Dg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}};var rs=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){let n=this.bb.__offset(this.bb_pos,6);return n?(t||new Dr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var fa;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(fa||(fa={}));var zh;(function(e){e[e.DenseArray=0]="DenseArray"})(zh||(zh={}));var Ei=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return e.startInt(t),e.addBitWidth(t,n),e.addIsSigned(t,r),e.endInt(t)}};var to=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){let n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ei).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):zh.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,zh.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}};var nn=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return e.startKeyValue(t),e.addKey(t,n),e.addValue(t,r),e.endKeyValue(t)}};var qh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}};var jh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}};var ha=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ve.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Ve.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return e.startDate(t),e.addUnit(t,n),e.endDate(t)}};var eo=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return e.startDecimal(t),e.addPrecision(t,n),e.addScale(t,r),e.addBitWidth(t,i),e.endDecimal(t)}};var da=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ct.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ct.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return e.startDuration(t),e.addUnit(t,n),e.endDuration(t)}};var pa=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return e.startFixedSizeBinary(t),e.addByteWidth(t,n),e.endFixedSizeBinary(t)}};var ma=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return e.startFixedSizeList(t),e.addListSize(t,n),e.endFixedSizeList(t)}};var ya=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):de.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,de.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return e.startFloatingPoint(t),e.addPrecision(t,n),e.endFloatingPoint(t)}};var ga=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cn.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,cn.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return e.startInterval(t),e.addUnit(t,n),e.endInterval(t)}};var Vh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}};var Yh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}};var Xh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}};var xa=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return e.startMap(t),e.addKeysSorted(t,n),e.endMap(t)}};var Wh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}};var Gh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}};var is=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ct.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ct.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return e.startTime(t),e.addUnit(t,n),e.addBitWidth(t,r),e.endTime(t)}};var os=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ct.SECOND}timezone(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ct.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return e.startTimestamp(t),e.addUnit(t,n),e.addTimezone(t,r),e.endTimestamp(t)}};var Ni=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}mode(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ge.Sparse}typeIds(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,ge.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return e.startUnion(t),e.addMode(t,n),e.addTypeIds(t,r),e.endUnion(t)}};var Hh=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}};var pe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(pe||(pe={}));var Cn=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):pe.NONE}type(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){let n=this.bb.__offset(this.bb_pos,12);return n?(t||new to).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){let r=this.bb.__offset(this.bb_pos,14);return r?(n||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){let r=this.bb.__offset(this.bb_pos,16);return r?(n||new nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,pe.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}};var hr=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):fa.Little}fields(t,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new Cn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,fa.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,o){return e.startSchema(t),e.addEndianness(t,n),e.addFields(t,r),e.addCustomMetadata(t,i),e.addFeatures(t,o),e.endSchema(t)}};var qt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(qt||(qt={}));var L;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(L||(L={}));var Di;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Di||(Di={}));var K_={};Mr(K_,{clampIndex:()=>Pq,clampRange:()=>ld,createElementComparator:()=>va});var k_={};Mr(k_,{valueToString:()=>Oi});function Oi(e){if(e===null)return"null";if(e===void 0)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Oi(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}var R_={};Mr(R_,{BN:()=>Jh,bigNumToBigInt:()=>zD,bigNumToString:()=>iu,isArrowBigNumSymbol:()=>PD});var PD=Symbol.for("isArrowBigNum");function Bi(e,...t){return t.length===0?Object.setPrototypeOf(Pt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Bi.prototype[PD]=!0;Bi.prototype.toJSON=function(){return`"${iu(this)}"`};Bi.prototype.valueOf=function(){return UD(this)};Bi.prototype.toString=function(){return iu(this)};Bi.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return UD(this);case"string":return iu(this);case"default":return zD(this)}return iu(this)};function nu(...e){return Bi.apply(this,e)}function ru(...e){return Bi.apply(this,e)}function Zh(...e){return Bi.apply(this,e)}Object.setPrototypeOf(nu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ru.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Zh.prototype,Object.create(Uint32Array.prototype));Object.assign(nu.prototype,Bi.prototype,{constructor:nu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ru.prototype,Bi.prototype,{constructor:ru,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Zh.prototype,Bi.prototype,{constructor:Zh,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function UD(e){let{buffer:t,byteOffset:n,length:r,signed:i}=e,o=new BigUint64Array(t,n,r),s=i&&o.at(-1)&BigInt(1)<<BigInt(63),a=BigInt(s?1:0),c=BigInt(0);if(s){for(let l of o)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(let l of o)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}var iu=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return F_(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return F_(e);t=t.slice();let r=1;for(let o=0;o<t.length;o++){let s=t[o],a=~s+r;t[o]=a,r&=s===0?1:0}return`-${F_(t)}`},zD=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:iu(e);function F_(e){let t="",n=new Uint32Array(2),r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer),o=-1,s=r.length-1;do{for(n[0]=r[o=0];o<s;)r[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[o];r[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}var Jh=class e{static new(t,n){switch(n){case!0:return new nu(t);case!1:return new ru(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new nu(t)}return t.byteLength===16?new Zh(t):new ru(t)}static signed(t){return new nu(t)}static unsigned(t){return new ru(t)}static decimal(t){return new Zh(t)}constructor(t,n){return e.new(t,n)}};function De(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var qD,jD,VD,YD,XD,WD,GD,HD,ZD,JD,QD,KD,tO,eO,nO,rO,iO,oO,sO,aO,cO,lO,H=class e{static isNull(t){return t?.typeId===L.Null}static isInt(t){return t?.typeId===L.Int}static isFloat(t){return t?.typeId===L.Float}static isBinary(t){return t?.typeId===L.Binary}static isLargeBinary(t){return t?.typeId===L.LargeBinary}static isUtf8(t){return t?.typeId===L.Utf8}static isLargeUtf8(t){return t?.typeId===L.LargeUtf8}static isBool(t){return t?.typeId===L.Bool}static isDecimal(t){return t?.typeId===L.Decimal}static isDate(t){return t?.typeId===L.Date}static isTime(t){return t?.typeId===L.Time}static isTimestamp(t){return t?.typeId===L.Timestamp}static isInterval(t){return t?.typeId===L.Interval}static isDuration(t){return t?.typeId===L.Duration}static isList(t){return t?.typeId===L.List}static isStruct(t){return t?.typeId===L.Struct}static isUnion(t){return t?.typeId===L.Union}static isFixedSizeBinary(t){return t?.typeId===L.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===L.FixedSizeList}static isMap(t){return t?.typeId===L.Map}static isDictionary(t){return t?.typeId===L.Dictionary}static isDenseUnion(t){return e.isUnion(t)&&t.mode===ge.Dense}static isSparseUnion(t){return e.isUnion(t)&&t.mode===ge.Sparse}constructor(t){this.typeId=t}};qD=Symbol.toStringTag;H[qD]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(H.prototype);var kn=class extends H{constructor(){super(L.Null)}toString(){return"Null"}};jD=Symbol.toStringTag;kn[jD]=(e=>e[Symbol.toStringTag]="Null")(kn.prototype);var ke=class extends H{constructor(t,n){super(L.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};VD=Symbol.toStringTag;ke[VD]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ke.prototype);var Qh=class extends ke{constructor(){super(!0,8)}get ArrayType(){return Int8Array}},Kh=class extends ke{constructor(){super(!0,16)}get ArrayType(){return Int16Array}},Li=class extends ke{constructor(){super(!0,32)}get ArrayType(){return Int32Array}},td=class extends ke{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}},ed=class extends ke{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}},nd=class extends ke{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}},rd=class extends ke{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}},id=class extends ke{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(Qh.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Kh.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Li.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(td.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ed.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(nd.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rd.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(id.prototype,"ArrayType",{value:BigUint64Array});var Wn=class extends H{constructor(t){super(L.Float),this.precision=t}get ArrayType(){switch(this.precision){case de.HALF:return Uint16Array;case de.SINGLE:return Float32Array;case de.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};YD=Symbol.toStringTag;Wn[YD]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Wn.prototype);var od=class extends Wn{constructor(){super(de.HALF)}},sd=class extends Wn{constructor(){super(de.SINGLE)}},ad=class extends Wn{constructor(){super(de.DOUBLE)}};Object.defineProperty(od.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(sd.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(ad.prototype,"ArrayType",{value:Float64Array});var no=class extends H{constructor(){super(L.Binary)}toString(){return"Binary"}};XD=Symbol.toStringTag;no[XD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(no.prototype);var ro=class extends H{constructor(){super(L.LargeBinary)}toString(){return"LargeBinary"}};WD=Symbol.toStringTag;ro[WD]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(ro.prototype);var io=class extends H{constructor(){super(L.Utf8)}toString(){return"Utf8"}};GD=Symbol.toStringTag;io[GD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(io.prototype);var oo=class extends H{constructor(){super(L.LargeUtf8)}toString(){return"LargeUtf8"}};HD=Symbol.toStringTag;oo[HD]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(oo.prototype);var so=class extends H{constructor(){super(L.Bool)}toString(){return"Bool"}};ZD=Symbol.toStringTag;so[ZD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(so.prototype);var ao=class extends H{constructor(t,n,r=128){super(L.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};JD=Symbol.toStringTag;ao[JD]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ao.prototype);var co=class extends H{constructor(t){super(L.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Ve[this.unit]}>`}};QD=Symbol.toStringTag;co[QD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(co.prototype);var Zr=class extends H{constructor(t,n){super(L.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${ct[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};KD=Symbol.toStringTag;Zr[KD]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Zr.prototype);var lo=class extends H{constructor(t,n){super(L.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${ct[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};tO=Symbol.toStringTag;lo[tO]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(lo.prototype);var uo=class extends H{constructor(t){super(L.Interval),this.unit=t}toString(){return`Interval<${cn[this.unit]}>`}};eO=Symbol.toStringTag;uo[eO]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(uo.prototype);var fo=class extends H{constructor(t){super(L.Duration),this.unit=t}toString(){return`Duration<${ct[this.unit]}>`}};nO=Symbol.toStringTag;fo[nO]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(fo.prototype);var Jr=class extends H{constructor(t){super(L.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};rO=Symbol.toStringTag;Jr[rO]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Jr.prototype);var xe=class extends H{constructor(t){super(L.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};iO=Symbol.toStringTag;xe[iO]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(xe.prototype);var Qr=class extends H{constructor(t,n,r){super(L.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,o,s)=>(i[o]=s)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};oO=Symbol.toStringTag;Qr[oO]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Qr.prototype);var ho=class extends H{constructor(t){super(L.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};sO=Symbol.toStringTag;ho[sO]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(ho.prototype);var Kr=class extends H{constructor(t,n){super(L.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};aO=Symbol.toStringTag;Kr[aO]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Kr.prototype);var ti=class extends H{constructor(t,n=!1){var r,i,o;if(super(L.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t?.type)===null||r===void 0)&&r.children)){let s=(i=t?.type)===null||i===void 0?void 0:i.children[0];s&&(s.name="key");let a=(o=t?.type)===null||o===void 0?void 0:o.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};cO=Symbol.toStringTag;ti[cO]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(ti.prototype);var Kz=(e=>()=>++e)(-1),dr=class extends H{constructor(t,n,r,i){super(L.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Kz():De(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};lO=Symbol.toStringTag;dr[lO]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(dr.prototype);function Or(e){let t=e;switch(e.typeId){case L.Decimal:return e.bitWidth/32;case L.Timestamp:return 2;case L.Date:return 1+t.unit;case L.Interval:return 1+t.unit;case L.FixedSizeList:return t.listSize;case L.FixedSizeBinary:return t.byteWidth;default:return 1}}var mt=class{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(o=>o[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return tq(this,t,n)}getVisitFnByTypeId(t,n=!0){return ou(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function tq(e,t,n=!0){return typeof t=="number"?ou(e,t,n):typeof t=="string"&&t in L?ou(e,L[t],n):t&&t instanceof H?ou(e,uO(t),n):t?.type&&t.type instanceof H?ou(e,uO(t.type),n):ou(e,L.NONE,n)}function ou(e,t,n=!0){let r=null;switch(t){case L.Null:r=e.visitNull;break;case L.Bool:r=e.visitBool;break;case L.Int:r=e.visitInt;break;case L.Int8:r=e.visitInt8||e.visitInt;break;case L.Int16:r=e.visitInt16||e.visitInt;break;case L.Int32:r=e.visitInt32||e.visitInt;break;case L.Int64:r=e.visitInt64||e.visitInt;break;case L.Uint8:r=e.visitUint8||e.visitInt;break;case L.Uint16:r=e.visitUint16||e.visitInt;break;case L.Uint32:r=e.visitUint32||e.visitInt;break;case L.Uint64:r=e.visitUint64||e.visitInt;break;case L.Float:r=e.visitFloat;break;case L.Float16:r=e.visitFloat16||e.visitFloat;break;case L.Float32:r=e.visitFloat32||e.visitFloat;break;case L.Float64:r=e.visitFloat64||e.visitFloat;break;case L.Utf8:r=e.visitUtf8;break;case L.LargeUtf8:r=e.visitLargeUtf8;break;case L.Binary:r=e.visitBinary;break;case L.LargeBinary:r=e.visitLargeBinary;break;case L.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case L.Date:r=e.visitDate;break;case L.DateDay:r=e.visitDateDay||e.visitDate;break;case L.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case L.Timestamp:r=e.visitTimestamp;break;case L.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case L.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case L.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case L.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case L.Time:r=e.visitTime;break;case L.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case L.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case L.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case L.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case L.Decimal:r=e.visitDecimal;break;case L.List:r=e.visitList;break;case L.Struct:r=e.visitStruct;break;case L.Union:r=e.visitUnion;break;case L.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case L.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case L.Dictionary:r=e.visitDictionary;break;case L.Interval:r=e.visitInterval;break;case L.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case L.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case L.Duration:r=e.visitDuration;break;case L.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case L.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case L.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case L.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case L.FixedSizeList:r=e.visitFixedSizeList;break;case L.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${L[t]}'`)}function uO(e){switch(e.typeId){case L.Null:return L.Null;case L.Int:{let{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?L.Int8:L.Uint8;case 16:return n?L.Int16:L.Uint16;case 32:return n?L.Int32:L.Uint32;case 64:return n?L.Int64:L.Uint64}return L.Int}case L.Float:switch(e.precision){case de.HALF:return L.Float16;case de.SINGLE:return L.Float32;case de.DOUBLE:return L.Float64}return L.Float;case L.Binary:return L.Binary;case L.LargeBinary:return L.LargeBinary;case L.Utf8:return L.Utf8;case L.LargeUtf8:return L.LargeUtf8;case L.Bool:return L.Bool;case L.Decimal:return L.Decimal;case L.Time:switch(e.unit){case ct.SECOND:return L.TimeSecond;case ct.MILLISECOND:return L.TimeMillisecond;case ct.MICROSECOND:return L.TimeMicrosecond;case ct.NANOSECOND:return L.TimeNanosecond}return L.Time;case L.Timestamp:switch(e.unit){case ct.SECOND:return L.TimestampSecond;case ct.MILLISECOND:return L.TimestampMillisecond;case ct.MICROSECOND:return L.TimestampMicrosecond;case ct.NANOSECOND:return L.TimestampNanosecond}return L.Timestamp;case L.Date:switch(e.unit){case Ve.DAY:return L.DateDay;case Ve.MILLISECOND:return L.DateMillisecond}return L.Date;case L.Interval:switch(e.unit){case cn.DAY_TIME:return L.IntervalDayTime;case cn.YEAR_MONTH:return L.IntervalYearMonth}return L.Interval;case L.Duration:switch(e.unit){case ct.SECOND:return L.DurationSecond;case ct.MILLISECOND:return L.DurationMillisecond;case ct.MICROSECOND:return L.DurationMicrosecond;case ct.NANOSECOND:return L.DurationNanosecond}return L.Duration;case L.Map:return L.Map;case L.List:return L.List;case L.Struct:return L.Struct;case L.Union:switch(e.mode){case ge.Dense:return L.DenseUnion;case ge.Sparse:return L.SparseUnion}return L.Union;case L.FixedSizeBinary:return L.FixedSizeBinary;case L.FixedSizeList:return L.FixedSizeList;case L.Dictionary:return L.Dictionary}throw new Error(`Unrecognized type '${L[e.typeId]}'`)}mt.prototype.visitInt8=null;mt.prototype.visitInt16=null;mt.prototype.visitInt32=null;mt.prototype.visitInt64=null;mt.prototype.visitUint8=null;mt.prototype.visitUint16=null;mt.prototype.visitUint32=null;mt.prototype.visitUint64=null;mt.prototype.visitFloat16=null;mt.prototype.visitFloat32=null;mt.prototype.visitFloat64=null;mt.prototype.visitDateDay=null;mt.prototype.visitDateMillisecond=null;mt.prototype.visitTimestampSecond=null;mt.prototype.visitTimestampMillisecond=null;mt.prototype.visitTimestampMicrosecond=null;mt.prototype.visitTimestampNanosecond=null;mt.prototype.visitTimeSecond=null;mt.prototype.visitTimeMillisecond=null;mt.prototype.visitTimeMicrosecond=null;mt.prototype.visitTimeNanosecond=null;mt.prototype.visitDenseUnion=null;mt.prototype.visitSparseUnion=null;mt.prototype.visitIntervalDayTime=null;mt.prototype.visitIntervalYearMonth=null;mt.prototype.visitDuration=null;mt.prototype.visitDurationSecond=null;mt.prototype.visitDurationMillisecond=null;mt.prototype.visitDurationMicrosecond=null;mt.prototype.visitDurationNanosecond=null;var $_={};Mr($_,{float64ToUint16:()=>cd,uint16ToFloat64:()=>Og});var fO=new Float64Array(1),su=new Uint32Array(fO.buffer);function Og(e){let t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function cd(e){if(e!==e)return 32256;fO[0]=e;let t=(su[1]&2147483648)>>16&65535,n=su[1]&2146435072,r=0;return n>=1089470464?su[0]>0?n=31744:(n=(n&2080374784)>>16,r=(su[1]&1048575)>>10):n<=1056964608?(r=1048576+(su[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(su[1]&1048575)+512>>10),t|n|r&65535}var vt=class extends mt{};function Tt(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}var eq=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},P_=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},nq=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},rq=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},hO=(e,t,n,r)=>{if(n+1<t.length){let i=De(t[n]),o=De(t[n+1]);e.set(r.subarray(0,o-i),i)}},iq=({offset:e,values:t},n,r)=>{let i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ss=({values:e},t,n)=>{e[t]=n},U_=({values:e},t,n)=>{e[t]=n},dO=({values:e},t,n)=>{e[t]=cd(n)},oq=(e,t,n)=>{switch(e.type.precision){case de.HALF:return dO(e,t,n);case de.SINGLE:case de.DOUBLE:return U_(e,t,n)}},Bg=({values:e},t,n)=>{eq(e,t,n.valueOf())},Lg=({values:e},t,n)=>{P_(e,t*2,n.valueOf())},z_=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},pO=({values:e,valueOffsets:t},n,r)=>hO(e,t,n,r),mO=({values:e,valueOffsets:t},n,r)=>hO(e,t,n,Ji(r)),q_=(e,t,n)=>{e.type.unit===Ve.DAY?Bg(e,t,n):Lg(e,t,n)},Cg=({values:e},t,n)=>P_(e,t*2,n/1e3),kg=({values:e},t,n)=>P_(e,t*2,n),Fg=({values:e},t,n)=>nq(e,t*2,n),Rg=({values:e},t,n)=>rq(e,t*2,n),j_=(e,t,n)=>{switch(e.type.unit){case ct.SECOND:return Cg(e,t,n);case ct.MILLISECOND:return kg(e,t,n);case ct.MICROSECOND:return Fg(e,t,n);case ct.NANOSECOND:return Rg(e,t,n)}},$g=({values:e},t,n)=>{e[t]=n},Pg=({values:e},t,n)=>{e[t]=n},Ug=({values:e},t,n)=>{e[t]=n},zg=({values:e},t,n)=>{e[t]=n},V_=(e,t,n)=>{switch(e.type.unit){case ct.SECOND:return $g(e,t,n);case ct.MILLISECOND:return Pg(e,t,n);case ct.MICROSECOND:return Ug(e,t,n);case ct.NANOSECOND:return zg(e,t,n)}},Y_=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},sq=(e,t,n)=>{let r=e.children[0],i=e.valueOffsets,o=vn.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=i[t],c=i[t+1];a<c;)o(r,a++,n[++s]);else for(let s=-1,a=i[t],c=i[t+1];a<c;)o(r,a++,n.get(++s))},aq=(e,t,n)=>{let r=e.children[0],{valueOffsets:i}=e,o=vn.getVisitFn(r),{[t]:s,[t+1]:a}=i,c=n instanceof Map?n.entries():Object.entries(n);for(let l of c)if(o(r,s,l),++s>=a)break},cq=(e,t)=>(n,r,i,o)=>r&&n(r,e,t[o]),lq=(e,t)=>(n,r,i,o)=>r&&n(r,e,t.get(o)),uq=(e,t)=>(n,r,i,o)=>r&&n(r,e,t.get(i.name)),fq=(e,t)=>(n,r,i,o)=>r&&n(r,e,t[i.name]),hq=(e,t,n)=>{let r=e.type.children.map(o=>vn.getVisitFn(o.type)),i=n instanceof Map?uq(t,n):n instanceof Xt?lq(t,n):Array.isArray(n)?cq(t,n):fq(t,n);e.type.children.forEach((o,s)=>i(r[s],e.children[s],o,s))},dq=(e,t,n)=>{e.type.mode===ge.Dense?yO(e,t,n):gO(e,t,n)},yO=(e,t,n)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vn.visit(i,e.valueOffsets[t],n)},gO=(e,t,n)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];vn.visit(i,t,n)},pq=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},X_=(e,t,n)=>{e.type.unit===cn.DAY_TIME?qg(e,t,n):jg(e,t,n)},qg=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},jg=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Vg=({values:e},t,n)=>{e[t]=n},Yg=({values:e},t,n)=>{e[t]=n},Xg=({values:e},t,n)=>{e[t]=n},Wg=({values:e},t,n)=>{e[t]=n},W_=(e,t,n)=>{switch(e.type.unit){case ct.SECOND:return Vg(e,t,n);case ct.MILLISECOND:return Yg(e,t,n);case ct.MICROSECOND:return Xg(e,t,n);case ct.NANOSECOND:return Wg(e,t,n)}},mq=(e,t,n)=>{let{stride:r}=e,i=e.children[0],o=vn.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=t*r;++s<r;)o(i,a+s,n[s]);else for(let s=-1,a=t*r;++s<r;)o(i,a+s,n.get(s))};vt.prototype.visitBool=Tt(iq);vt.prototype.visitInt=Tt(ss);vt.prototype.visitInt8=Tt(ss);vt.prototype.visitInt16=Tt(ss);vt.prototype.visitInt32=Tt(ss);vt.prototype.visitInt64=Tt(ss);vt.prototype.visitUint8=Tt(ss);vt.prototype.visitUint16=Tt(ss);vt.prototype.visitUint32=Tt(ss);vt.prototype.visitUint64=Tt(ss);vt.prototype.visitFloat=Tt(oq);vt.prototype.visitFloat16=Tt(dO);vt.prototype.visitFloat32=Tt(U_);vt.prototype.visitFloat64=Tt(U_);vt.prototype.visitUtf8=Tt(mO);vt.prototype.visitLargeUtf8=Tt(mO);vt.prototype.visitBinary=Tt(pO);vt.prototype.visitLargeBinary=Tt(pO);vt.prototype.visitFixedSizeBinary=Tt(z_);vt.prototype.visitDate=Tt(q_);vt.prototype.visitDateDay=Tt(Bg);vt.prototype.visitDateMillisecond=Tt(Lg);vt.prototype.visitTimestamp=Tt(j_);vt.prototype.visitTimestampSecond=Tt(Cg);vt.prototype.visitTimestampMillisecond=Tt(kg);vt.prototype.visitTimestampMicrosecond=Tt(Fg);vt.prototype.visitTimestampNanosecond=Tt(Rg);vt.prototype.visitTime=Tt(V_);vt.prototype.visitTimeSecond=Tt($g);vt.prototype.visitTimeMillisecond=Tt(Pg);vt.prototype.visitTimeMicrosecond=Tt(Ug);vt.prototype.visitTimeNanosecond=Tt(zg);vt.prototype.visitDecimal=Tt(Y_);vt.prototype.visitList=Tt(sq);vt.prototype.visitStruct=Tt(hq);vt.prototype.visitUnion=Tt(dq);vt.prototype.visitDenseUnion=Tt(yO);vt.prototype.visitSparseUnion=Tt(gO);vt.prototype.visitDictionary=Tt(pq);vt.prototype.visitInterval=Tt(X_);vt.prototype.visitIntervalDayTime=Tt(qg);vt.prototype.visitIntervalYearMonth=Tt(jg);vt.prototype.visitDuration=Tt(W_);vt.prototype.visitDurationSecond=Tt(Vg);vt.prototype.visitDurationMillisecond=Tt(Yg);vt.prototype.visitDurationMicrosecond=Tt(Xg);vt.prototype.visitDurationNanosecond=Tt(Wg);vt.prototype.visitFixedSizeList=Tt(mq);vt.prototype.visitMap=Tt(aq);var vn=new vt;var Ci=Symbol.for("parent"),au=Symbol.for("rowIndex"),ba=class{constructor(t,n){return this[Ci]=t,this[au]=n,new Proxy(this,new H_)}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[au],n=this[Ci],r=n.type.children,i={};for(let o=-1,s=r.length;++o<s;)i[r[o].name]=Ye.visit(n.children[o],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Oi(t)}: ${Oi(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new G_(this[Ci],this[au])}},G_=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ye.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(ba.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ci]:{writable:!0,enumerable:!1,configurable:!1,value:null},[au]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});var H_=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ci].type.children.map(n=>n.name)}has(t,n){return t[Ci].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ci].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];let r=t[Ci].type.children.findIndex(i=>i.name===n);if(r!==-1){let i=Ye.visit(t[Ci].children[r],t[au]);return Reflect.set(t,n,i),i}}set(t,n,r){let i=t[Ci].type.children.findIndex(o=>o.name===n);return i!==-1?(vn.visit(t[Ci].children[i],t[au],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}};var yt=class extends mt{};function It(e){return(t,n)=>t.getValid(n)?e(t,n):null}var yq=(e,t)=>864e5*e[t],Z_=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),gq=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,xq=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,xO=e=>new Date(e),bq=(e,t)=>xO(yq(e,t)),wq=(e,t)=>xO(Z_(e,t)),vq=(e,t)=>null,bO=(e,t,n)=>{if(n+1>=t.length)return null;let r=De(t[n]),i=De(t[n+1]);return e.subarray(r,i)},_q=({offset:e,values:t},n)=>{let r=e+n;return(t[r>>3]&1<<r%8)!==0},wO=({values:e},t)=>bq(e,t),vO=({values:e},t)=>wq(e,t*2),wa=({stride:e,values:t},n)=>t[e*n],Sq=({stride:e,values:t},n)=>Og(t[e*n]),_O=({values:e},t)=>e[t],Iq=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),SO=({values:e,valueOffsets:t},n)=>bO(e,t,n),IO=({values:e,valueOffsets:t},n)=>{let r=bO(e,t,n);return r!==null?kh(r):null},Mq=({values:e},t)=>e[t],Aq=({type:e,values:t},n)=>e.precision!==de.HALF?t[n]:Og(t[n]),Tq=(e,t)=>e.type.unit===Ve.DAY?wO(e,t):vO(e,t),MO=({values:e},t)=>1e3*Z_(e,t*2),AO=({values:e},t)=>Z_(e,t*2),TO=({values:e},t)=>gq(e,t*2),EO=({values:e},t)=>xq(e,t*2),Eq=(e,t)=>{switch(e.type.unit){case ct.SECOND:return MO(e,t);case ct.MILLISECOND:return AO(e,t);case ct.MICROSECOND:return TO(e,t);case ct.NANOSECOND:return EO(e,t)}},NO=({values:e},t)=>e[t],DO=({values:e},t)=>e[t],OO=({values:e},t)=>e[t],BO=({values:e},t)=>e[t],Nq=(e,t)=>{switch(e.type.unit){case ct.SECOND:return NO(e,t);case ct.MILLISECOND:return DO(e,t);case ct.MICROSECOND:return OO(e,t);case ct.NANOSECOND:return BO(e,t)}},Dq=({values:e,stride:t},n)=>Jh.decimal(e.subarray(t*n,t*(n+1))),Oq=(e,t)=>{let{valueOffsets:n,stride:r,children:i}=e,{[t*r]:o,[t*r+1]:s}=n,c=i[0].slice(o,s-o);return new Xt([c])},Bq=(e,t)=>{let{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:o}=n,s=r[0];return new po(s.slice(i,o-i))},Lq=(e,t)=>new ba(e,t),Cq=(e,t)=>e.type.mode===ge.Dense?LO(e,t):CO(e,t),LO=(e,t)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ye.visit(r,e.valueOffsets[t])},CO=(e,t)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ye.visit(r,t)},kq=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Fq=(e,t)=>e.type.unit===cn.DAY_TIME?kO(e,t):FO(e,t),kO=({values:e},t)=>e.subarray(2*t,2*(t+1)),FO=({values:e},t)=>{let n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},RO=({values:e},t)=>e[t],$O=({values:e},t)=>e[t],PO=({values:e},t)=>e[t],UO=({values:e},t)=>e[t],Rq=(e,t)=>{switch(e.type.unit){case ct.SECOND:return RO(e,t);case ct.MILLISECOND:return $O(e,t);case ct.MICROSECOND:return PO(e,t);case ct.NANOSECOND:return UO(e,t)}},$q=(e,t)=>{let{stride:n,children:r}=e,o=r[0].slice(t*n,n);return new Xt([o])};yt.prototype.visitNull=It(vq);yt.prototype.visitBool=It(_q);yt.prototype.visitInt=It(Mq);yt.prototype.visitInt8=It(wa);yt.prototype.visitInt16=It(wa);yt.prototype.visitInt32=It(wa);yt.prototype.visitInt64=It(_O);yt.prototype.visitUint8=It(wa);yt.prototype.visitUint16=It(wa);yt.prototype.visitUint32=It(wa);yt.prototype.visitUint64=It(_O);yt.prototype.visitFloat=It(Aq);yt.prototype.visitFloat16=It(Sq);yt.prototype.visitFloat32=It(wa);yt.prototype.visitFloat64=It(wa);yt.prototype.visitUtf8=It(IO);yt.prototype.visitLargeUtf8=It(IO);yt.prototype.visitBinary=It(SO);yt.prototype.visitLargeBinary=It(SO);yt.prototype.visitFixedSizeBinary=It(Iq);yt.prototype.visitDate=It(Tq);yt.prototype.visitDateDay=It(wO);yt.prototype.visitDateMillisecond=It(vO);yt.prototype.visitTimestamp=It(Eq);yt.prototype.visitTimestampSecond=It(MO);yt.prototype.visitTimestampMillisecond=It(AO);yt.prototype.visitTimestampMicrosecond=It(TO);yt.prototype.visitTimestampNanosecond=It(EO);yt.prototype.visitTime=It(Nq);yt.prototype.visitTimeSecond=It(NO);yt.prototype.visitTimeMillisecond=It(DO);yt.prototype.visitTimeMicrosecond=It(OO);yt.prototype.visitTimeNanosecond=It(BO);yt.prototype.visitDecimal=It(Dq);yt.prototype.visitList=It(Oq);yt.prototype.visitStruct=It(Lq);yt.prototype.visitUnion=It(Cq);yt.prototype.visitDenseUnion=It(LO);yt.prototype.visitSparseUnion=It(CO);yt.prototype.visitDictionary=It(kq);yt.prototype.visitInterval=It(Fq);yt.prototype.visitIntervalDayTime=It(kO);yt.prototype.visitIntervalYearMonth=It(FO);yt.prototype.visitDuration=It(Rq);yt.prototype.visitDurationSecond=It(RO);yt.prototype.visitDurationMillisecond=It($O);yt.prototype.visitDurationMicrosecond=It(PO);yt.prototype.visitDurationNanosecond=It(UO);yt.prototype.visitFixedSizeList=It($q);yt.prototype.visitMap=It(Bq);var Ye=new yt;var ei=Symbol.for("keys"),cu=Symbol.for("vals"),po=class{constructor(t){return this[ei]=new Xt([t.children[0]]).memoize(),this[cu]=t.children[1],new Proxy(this,new Q_)}[Symbol.iterator](){return new J_(this[ei],this[cu])}get size(){return this[ei].length}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[ei],n=this[cu],r={};for(let i=-1,o=t.length;++i<o;)r[t.get(i)]=Ye.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Oi(t)}: ${Oi(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},J_=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){let t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ye.visit(this.vals,t)]})}},Q_=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ei].toArray().map(String)}has(t,n){return t[ei].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ei].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];let r=t[ei].indexOf(n);if(r!==-1){let i=Ye.visit(Reflect.get(t,cu),r);return Reflect.set(t,n,i),i}}set(t,n,r){let i=t[ei].indexOf(n);return i!==-1?(vn.visit(Reflect.get(t,cu),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}};Object.defineProperties(po.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ei]:{writable:!0,enumerable:!1,configurable:!1,value:null},[cu]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function Pq(e,t,n){let r=e.length,i=t>-1?t:r+t%r;return n?n(e,i):i}var zO;function ld(e,t,n,r){let{length:i=0}=e,o=typeof t!="number"?0:t,s=typeof n!="number"?i:n;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(zO=o,o=s,s=zO),s>i&&(s=i),r?r(e,o,s):[o,s]}var qO=e=>e!==e;function va(e){if(typeof e!=="object"||e===null)return qO(e)?qO:n=>n===e;if(e instanceof Date){let n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?O_(e,n):!1:e instanceof Map?zq(e):Array.isArray(e)?Uq(e):e instanceof Xt?qq(e):jq(e,!0)}function Uq(e){let t=[];for(let n=-1,r=e.length;++n<r;)t[n]=va(e[n]);return Gg(t)}function zq(e){let t=-1,n=[];for(let r of e.values())n[++t]=va(r);return Gg(n)}function qq(e){let t=[];for(let n=-1,r=e.length;++n<r;)t[n]=va(e.get(n));return Gg(t)}function jq(e,t=!1){let n=Object.keys(e);if(!t&&n.length===0)return()=>!1;let r=[];for(let i=-1,o=n.length;++i<o;)r[i]=va(e[n[i]]);return Gg(r,n)}function Gg(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Vq(e,n);case Map:return jO(e,n,n.keys());case po:case ba:case Object:case void 0:return jO(e,n,t||Object.keys(n))}return n instanceof Xt?Yq(e,n):!1}}function Vq(e,t){let n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Yq(e,t){let n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function jO(e,t,n){let r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),s=0,a=e.length,c=o.next(),l=r.next(),u=i.next();for(;s<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[s](c.value));++s,l=r.next(),u=i.next(),c=o.next());return s===a&&l.done&&u.done&&c.done?!0:(r.return&&r.return(),i.return&&i.return(),o.return&&o.return(),!1)}var t2={};Mr(t2,{BitIterator:()=>Sc,getBit:()=>VO,getBool:()=>Zg,packBools:()=>Mc,popcnt_array:()=>YO,popcnt_bit_range:()=>ud,popcnt_uint32:()=>Hg,setBool:()=>Xq,truncateBitmap:()=>Ic});function Zg(e,t,n,r){return(n&1<<r)!==0}function VO(e,t,n,r){return(n&1<<r)>>r}function Xq(e,t,n){return n?!!(e[t>>3]|=1<<t%8)||!0:!(e[t>>3]&=~(1<<t%8))&&!1}function Ic(e,t,n){let r=n.byteLength+7&-8;if(e>0||n.byteLength<r){let i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):Mc(new Sc(n,e,t,null,Zg)).subarray(0,r)),i}return n}function Mc(e){let t=[],n=0,r=0,i=0;for(let s of e)s&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);let o=new Uint8Array(t.length+7&-8);return o.set(t),o}var Sc=class{constructor(t,n,r,i,o){this.bytes=t,this.length=r,this.context=i,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function ud(e,t,n){if(n-t<=0)return 0;if(n-t<8){let o=0;for(let s of new Sc(e,t,n-t,e,VO))o+=s;return o}let r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return ud(e,t,i)+ud(e,r,n)+YO(e,i>>3,r-i>>3)}function YO(e,t,n){let r=0,i=Math.trunc(t),o=new DataView(e.buffer,e.byteOffset,e.byteLength),s=n===void 0?e.byteLength:i+n;for(;s-i>=4;)r+=Hg(o.getUint32(i)),i+=4;for(;s-i>=2;)r+=Hg(o.getUint16(i)),i+=2;for(;s-i>=1;)r+=Hg(o.getUint8(i)),i+=1;return r}function Hg(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}var Wq=-1,te=class e{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){let{type:t}=this;return H.isSparseUnion(t)?this.children.some(n=>n.nullable):H.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0,{valueOffsets:n,values:r,nullBitmap:i,typeIds:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),this.children.reduce((s,a)=>s+a.byteLength,t)}get nullCount(){if(H.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Wq&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-ud(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,o,s=[],a){this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;o instanceof e?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Or(t),o&&((c=o[0])&&(this.valueOffsets=c),(c=o[1])&&(this.values=c),(c=o[2])&&(this.nullBitmap=c),(c=o[3])&&(this.typeIds=c)))}getValid(t){let{type:n}=this;if(H.isUnion(n)){let r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],o=r.mode===ge.Dense?this.valueOffsets[t]:t;return i.getValid(o)}if(this.nullable&&this.nullCount>0){let r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r,{type:i}=this;if(H.isUnion(i)){let o=i,s=this.children[o.typeIdToChildIndex[this.typeIds[t]]],a=o.mode===ge.Dense?this.valueOffsets[t]:t;r=s.getValid(a),s.setValid(a,n)}else{let{nullBitmap:o}=this,{offset:s,length:a}=this,c=s+t,l=1<<c%8,u=c>>3;(!o||o.byteLength<=u)&&(o=new Uint8Array((s+a+63&-64)>>3).fill(255),this.nullCount>0&&o.set(Ic(s,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:o,_nullCount:-1}));let f=o[u];r=(f&l)!==0,n?o[u]=f|l:o[u]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,o=this,s=this.children){return new e(t,n,r,i,o,s,this.dictionary)}slice(t,n){let{stride:r,typeId:i,children:o}=this,s=+(this._nullCount===0)-1,a=i===16?r:1,c=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,s,c,o.length===0||this.valueOffsets?o:this._sliceChildren(o,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===L.Null)return this.clone(this.type,0,t,0);let{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Ic(this.offset,n,this.nullBitmap),0);let o=this.buffers;return o[Di.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),o)}_sliceBuffers(t,n,r,i){let o,{buffers:s}=this;return(o=s[Di.TYPE])&&(s[Di.TYPE]=o.subarray(t,t+n)),(o=s[Di.OFFSET])&&(s[Di.OFFSET]=o.subarray(t,t+n+1))||(o=s[Di.DATA])&&(s[Di.DATA]=i===6?o:o.subarray(r*t,r*(t+n))),s}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}};te.prototype.children=Object.freeze([]);var e2=class e extends mt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){let{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new te(n,r,i,i)}visitBool(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitInt(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitFloat(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitUtf8(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.data),o=_t(t.nullBitmap),s=vc(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,i,o])}visitLargeUtf8(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.data),o=_t(t.nullBitmap),s=Ig(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,i,o])}visitBinary(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.data),o=_t(t.nullBitmap),s=vc(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,i,o])}visitLargeBinary(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.data),o=_t(t.nullBitmap),s=Ig(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,i,o])}visitFixedSizeBinary(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitDate(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitTimestamp(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitTime(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitDecimal(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitList(t){let{["type"]:n,["offset"]:r=0,["child"]:i}=t,o=_t(t.nullBitmap),s=vc(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,void 0,o],[i])}visitStruct(t){let{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,o=_t(t.nullBitmap),{length:s=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,void 0,o],i)}visitUnion(t){let{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,o=Pt(n.ArrayType,t.typeIds),{["length"]:s=o.length,["nullCount"]:a=-1}=t;if(H.isSparseUnion(n))return new te(n,r,s,a,[void 0,void 0,void 0,o],i);let c=vc(t.valueOffsets);return new te(n,r,s,a,[c,void 0,void 0,o],i)}visitDictionary(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.indices.ArrayType,t.data),{["dictionary"]:s=new Xt([new e().visit({type:n.dictionary})])}=t,{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[void 0,o,i],[],s)}visitInterval(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitDuration(t){let{["type"]:n,["offset"]:r=0}=t,i=_t(t.nullBitmap),o=Pt(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,o,i])}visitFixedSizeList(t){let{["type"]:n,["offset"]:r=0,["child"]:i=new e().visit({type:n.valueType})}=t,o=_t(t.nullBitmap),{["length"]:s=i.length/Or(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new te(n,r,s,a,[void 0,void 0,o],[i])}visitMap(t){let{["type"]:n,["offset"]:r=0,["child"]:i=new e().visit({type:n.childType})}=t,o=_t(t.nullBitmap),s=vc(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new te(n,r,a,c,[s,void 0,o],[i])}},Gq=new e2;function Nt(e){return Gq.visit(e)}var fd=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function XO(e){return e.some(t=>t.nullable)}function Jg(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Qg(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Kg(e,t,n,r){let i=[];for(let o=-1,s=e.length;++o<s;){let a=e[o],c=t[o],{length:l}=a;if(c>=r)break;if(n>=c+l)continue;if(c>=n&&c+l<=r){i.push(a);continue}let u=Math.max(0,n-c),f=Math.min(r-c,l);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function n2(e,t,n,r){let i=0,o=0,s=t.length-1;do{if(i>=s-1)return n<t[s]?r(e,i,n-t[i]):null;o=i+Math.trunc((s-i)*.5),n<t[o]?s=o:i=o}while(i<s)}function hd(e,t){return e.getValid(t)}function lu(e){function t(n,r,i){return e(n[r],i)}return function(n){let r=this.data;return n2(r,this._offsets,n,t)}}function t0(e){let t;function n(r,i,o){return e(r[i],o,t)}return function(r,i){let o=this.data;t=i;let s=n2(o,this._offsets,r,n);return t=void 0,s}}function e0(e){let t;function n(r,i,o){let s=o,a=0,c=0;for(let l=i-1,u=r.length;++l<u;){let f=r[l];if(~(a=e(f,t,s)))return c+a;s=0,c+=f.length}return-1}return function(r,i){t=r;let o=this.data,s=typeof i!="number"?n(o,0,0):n2(o,this._offsets,i,n);return t=void 0,s}}var gt=class extends mt{};function Hq(e,t){return t===null&&e.length>0?0:-1}function Zq(e,t){let{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(let i of new Sc(n,e.offset+(t||0),e.length,n,Zg)){if(!i)return r;++r}return-1}function Dt(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case L.Union:break;case L.Dictionary:break;default:return Zq(e,n)}let r=Ye.getVisitFn(e),i=va(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(i(r(e,o)))return o;return-1}function WO(e,t,n){let r=Ye.getVisitFn(e),i=va(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(i(r(e,o)))return o;return-1}gt.prototype.visitNull=Hq;gt.prototype.visitBool=Dt;gt.prototype.visitInt=Dt;gt.prototype.visitInt8=Dt;gt.prototype.visitInt16=Dt;gt.prototype.visitInt32=Dt;gt.prototype.visitInt64=Dt;gt.prototype.visitUint8=Dt;gt.prototype.visitUint16=Dt;gt.prototype.visitUint32=Dt;gt.prototype.visitUint64=Dt;gt.prototype.visitFloat=Dt;gt.prototype.visitFloat16=Dt;gt.prototype.visitFloat32=Dt;gt.prototype.visitFloat64=Dt;gt.prototype.visitUtf8=Dt;gt.prototype.visitLargeUtf8=Dt;gt.prototype.visitBinary=Dt;gt.prototype.visitLargeBinary=Dt;gt.prototype.visitFixedSizeBinary=Dt;gt.prototype.visitDate=Dt;gt.prototype.visitDateDay=Dt;gt.prototype.visitDateMillisecond=Dt;gt.prototype.visitTimestamp=Dt;gt.prototype.visitTimestampSecond=Dt;gt.prototype.visitTimestampMillisecond=Dt;gt.prototype.visitTimestampMicrosecond=Dt;gt.prototype.visitTimestampNanosecond=Dt;gt.prototype.visitTime=Dt;gt.prototype.visitTimeSecond=Dt;gt.prototype.visitTimeMillisecond=Dt;gt.prototype.visitTimeMicrosecond=Dt;gt.prototype.visitTimeNanosecond=Dt;gt.prototype.visitDecimal=Dt;gt.prototype.visitList=Dt;gt.prototype.visitStruct=Dt;gt.prototype.visitUnion=Dt;gt.prototype.visitDenseUnion=WO;gt.prototype.visitSparseUnion=WO;gt.prototype.visitDictionary=Dt;gt.prototype.visitInterval=Dt;gt.prototype.visitIntervalDayTime=Dt;gt.prototype.visitIntervalYearMonth=Dt;gt.prototype.visitDuration=Dt;gt.prototype.visitDurationSecond=Dt;gt.prototype.visitDurationMillisecond=Dt;gt.prototype.visitDurationMicrosecond=Dt;gt.prototype.visitDurationNanosecond=Dt;gt.prototype.visitFixedSizeList=Dt;gt.prototype.visitMap=Dt;var Ac=new gt;var xt=class extends mt{};function Mt(e){let{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===L.Timestamp||t instanceof ke&&t.bitWidth!==64||t instanceof Zr&&t.bitWidth!==64||t instanceof Wn&&t.precision!==de.HALF))return new fd(e.data.length,r=>{let i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new fd(e.data.length,r=>{let o=e.data[r].length,s=e.slice(n,n+o);return n+=o,new r2(s)})}var r2=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};xt.prototype.visitNull=Mt;xt.prototype.visitBool=Mt;xt.prototype.visitInt=Mt;xt.prototype.visitInt8=Mt;xt.prototype.visitInt16=Mt;xt.prototype.visitInt32=Mt;xt.prototype.visitInt64=Mt;xt.prototype.visitUint8=Mt;xt.prototype.visitUint16=Mt;xt.prototype.visitUint32=Mt;xt.prototype.visitUint64=Mt;xt.prototype.visitFloat=Mt;xt.prototype.visitFloat16=Mt;xt.prototype.visitFloat32=Mt;xt.prototype.visitFloat64=Mt;xt.prototype.visitUtf8=Mt;xt.prototype.visitLargeUtf8=Mt;xt.prototype.visitBinary=Mt;xt.prototype.visitLargeBinary=Mt;xt.prototype.visitFixedSizeBinary=Mt;xt.prototype.visitDate=Mt;xt.prototype.visitDateDay=Mt;xt.prototype.visitDateMillisecond=Mt;xt.prototype.visitTimestamp=Mt;xt.prototype.visitTimestampSecond=Mt;xt.prototype.visitTimestampMillisecond=Mt;xt.prototype.visitTimestampMicrosecond=Mt;xt.prototype.visitTimestampNanosecond=Mt;xt.prototype.visitTime=Mt;xt.prototype.visitTimeSecond=Mt;xt.prototype.visitTimeMillisecond=Mt;xt.prototype.visitTimeMicrosecond=Mt;xt.prototype.visitTimeNanosecond=Mt;xt.prototype.visitDecimal=Mt;xt.prototype.visitList=Mt;xt.prototype.visitStruct=Mt;xt.prototype.visitUnion=Mt;xt.prototype.visitDenseUnion=Mt;xt.prototype.visitSparseUnion=Mt;xt.prototype.visitDictionary=Mt;xt.prototype.visitInterval=Mt;xt.prototype.visitIntervalDayTime=Mt;xt.prototype.visitIntervalYearMonth=Mt;xt.prototype.visitDuration=Mt;xt.prototype.visitDurationSecond=Mt;xt.prototype.visitDurationMillisecond=Mt;xt.prototype.visitDurationMicrosecond=Mt;xt.prototype.visitDurationNanosecond=Mt;xt.prototype.visitFixedSizeList=Mt;xt.prototype.visitMap=Mt;var uu=new xt;var GO,HO={},ZO={},Xt=class e{constructor(t){var n,r,i;let o=t[0]instanceof e?t.flatMap(a=>a.data):t;if(o.length===0||o.some(a=>!(a instanceof te)))throw new TypeError("Vector constructor expects an Array of Data instances.");let s=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{let{get:a,set:c,indexOf:l}=HO[s.typeId],u=o[0];this.isValid=f=>hd(u,f),this.get=f=>a(u,f),this.set=(f,h)=>c(u,f,h),this.indexOf=f=>l(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,ZO[s.typeId]),this._offsets=Qg(o);break}this.data=o,this.type=s,this.stride=Or(s),this.numChildren=(i=(r=s.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return XO(this.data)}get nullCount(){return Jg(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${L[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return uu.visit(this)}concat(...t){return new e(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new e(ld(this,t,n,({data:r,_offsets:i},o,s)=>Kg(r,i,o,s)))}toJSON(){return[...this]}toArray(){let{type:t,data:n,length:r,stride:i,ArrayType:o}=this;switch(t.typeId){case L.Int:case L.Float:case L.Decimal:case L.Time:case L.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((s,{values:a,length:c})=>(s.array.set(a.subarray(0,c*i),s.offset),s.offset+=c*i,s),{array:new o(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new e(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return H.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(H.isDictionary(this.type)){let t=new n0(this.data[0].dictionary),n=this.data.map(r=>{let i=r.clone();return i.dictionary=t,i});return new e(n)}return new n0(this)}unmemoize(){if(H.isDictionary(this.type)&&this.isMemoized){let t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{let i=r.clone();return i.dictionary=t,i});return new e(n)}return this}};GO=Symbol.toStringTag;Xt[GO]=(e=>{e.type=H.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;let t=Object.keys(L).map(n=>L[n]).filter(n=>typeof n=="number"&&n!==L.NONE);for(let n of t){let r=Ye.getVisitFnByTypeId(n),i=vn.getVisitFnByTypeId(n),o=Ac.getVisitFnByTypeId(n);HO[n]={get:r,set:i,indexOf:o},ZO[n]=Object.create(e,{isValid:{value:lu(hd)},get:{value:lu(Ye.getVisitFnByTypeId(n))},set:{value:t0(vn.getVisitFnByTypeId(n))},indexOf:{value:e0(Ac.getVisitFnByTypeId(n))}})}return"Vector"})(Xt.prototype);var n0=class e extends Xt{constructor(t){super(t.data);let n=this.get,r=this.set,i=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(s){let a=o[s];if(a!==void 0)return a;let c=n.call(this,s);return o[s]=c,c}}),Object.defineProperty(this,"set",{value(s,a){r.call(this,s,a),o[s]=a}}),Object.defineProperty(this,"slice",{value:(s,a)=>new e(i.call(this,s,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Xt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function JO(e){if(!e||e.length<=0)return function(i){return!0};let t="",n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Jq(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Jq(e){return typeof e!="bigint"?Oi(e):`${Oi(e)}n`}function i2(e,t){let n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function QO(e,t=0){return e.length>=t?e.subarray(0,t):Rh(new e.constructor(t),e,0)}var ki=class{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;let n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?i2(r*1,this.BYTES_PER_ELEMENT):i2(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=i2(t*this.stride,this.BYTES_PER_ELEMENT);let n=QO(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=QO(this.buffer,t)}},as=class extends ki{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}},fu=class extends as{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){let{buffer:r}=this.reserve(t-this.length+1),i=t>>3,o=t%8,s=r[i]>>o&1;return n?s===0&&(r[i]|=1<<o,++this.numValid):s===1&&(r[i]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}},hu=class extends as{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){let r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}};var ve=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Or(t),this._nulls=new fu,n&&n.length>0&&(this._isValid=JO(n))}toVector(){return new Xt([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0,{_offsets:n,_values:r,_nulls:i,_typeIds:o,children:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),s.reduce((a,c)=>a+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i,{type:o,length:s,nullCount:a,_typeIds:c,_offsets:l,_values:u,_nulls:f}=this;(n=c?.flush(s))?i=l?.flush(s):(i=l?.flush(s))?t=u?.flush(l.last()):t=u?.flush(s),a>0&&(r=f?.flush(s));let h=this.children.map(d=>d.flush());return this.clear(),Nt({type:o,length:s,nullCount:a,children:h,child:h[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(let t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(let o of this.children)o.clear();return this}};ve.prototype.length=1;ve.prototype.stride=1;ve.prototype.children=null;ve.prototype.finished=!1;ve.prototype.nullValues=null;ve.prototype._isValid=()=>!0;var Xe=class extends ve{constructor(t){super(t),this._values=new as(this.ArrayType,0,this.stride)}setValue(t,n){let r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}},pr=class extends ve{constructor(t){super(t),this._pendingLength=0,this._offsets=new hu(t.type)}setValue(t,n){let r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof po?n[ei].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}};var Tc=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}};var Br=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ce.V1}schema(t){let n=this.bb.__offset(this.bb_pos,6);return n?(t||new hr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new Tc).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){let r=this.bb.__offset(this.bb_pos,10);return r?(n||new Tc).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){let r=this.bb.__offset(this.bb_pos,12);return r?(n||new nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ce.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}};var oe=class e{constructor(t=[],n,r,i=ce.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=o2(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){let n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new e(r,this.metadata)}selectAt(t){let n=t.map(r=>this.fields[r]).filter(Boolean);return new e(n,this.metadata)}assign(...t){let n=t[0]instanceof e?t[0]:Array.isArray(t[0])?new e(t[0]):new e(t),r=[...this.fields],i=r0(r0(new Map,this.metadata),n.metadata),o=n.fields.filter(a=>{let c=r.findIndex(l=>l.name===a.name);return~c?(r[c]=a.clone({metadata:r0(r0(new Map,r[c].metadata),a.metadata)}))&&!1:!0}),s=o2(o,new Map);return new e([...r,...o],i,new Map([...this.dictionaries,...s]))}};oe.prototype.fields=null;oe.prototype.metadata=null;oe.prototype.dictionaries=null;var Ut=class e{static new(...t){let[n,r,i,o]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),o===void 0&&(o=t[0].metadata)),new e(`${n}`,r,i,o)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,o]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,o=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:o=this.metadata}=t[0],e.new(n,r,i,o)}};Ut.prototype.type=null;Ut.prototype.name=null;Ut.prototype.nullable=null;Ut.prototype.metadata=null;function r0(e,t){return new Map([...e||new Map,...t||new Map])}function o2(e,t=new Map){for(let n=-1,r=e.length;++n<r;){let o=e[n].type;if(H.isDictionary(o)){if(!t.has(o.id))t.set(o.id,o.dictionary);else if(t.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&o2(o.children,t)}return t}var Qq=_c,Kq=Nr,cs=class{static decode(t){t=new Kq(_t(t));let n=Br.getRootAsFooter(t),r=oe.decode(n.schema(),new Map,n.version());return new s2(r,n)}static encode(t){let n=new Qq,r=oe.encode(n,t.schema);Br.startRecordBatchesVector(n,t.numRecordBatches);for(let s of[...t.recordBatches()].slice().reverse())ls.encode(n,s);let i=n.endVector();Br.startDictionariesVector(n,t.numDictionaries);for(let s of[...t.dictionaryBatches()].slice().reverse())ls.encode(n,s);let o=n.endVector();return Br.startFooter(n),Br.addSchema(n,r),Br.addVersion(n,ce.V5),Br.addRecordBatches(n,i),Br.addDictionaries(n,o),Br.finishFooterBuffer(n,Br.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=ce.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}};var s2=class extends cs{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){let n=this._footer.recordBatches(t);if(n)return ls.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){let n=this._footer.dictionaries(t);if(n)return ls.decode(n)}return null}},ls=class e{static decode(t){return new e(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){let{metaDataLength:r}=n,i=BigInt(n.offset),o=BigInt(n.bodyLength);return Tc.createBlock(t,i,r,o)}constructor(t,n,r){this.metaDataLength=t,this.offset=De(r),this.bodyLength=De(n)}};var we=Object.freeze({done:!0,value:void 0}),dd=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},Ec=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},i0=class extends Ec{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return J(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){let{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(we);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return wn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return wn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return J(this,void 0,void 0,function*(){return yield this.abort(t),we})}return(t){return J(this,void 0,void 0,function*(){return yield this.close(),we})}read(t){return J(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return J(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(we)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}};var mo=class extends i0{write(t){if((t=_t(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?kh(this.toUint8Array(!0)):this.toUint8Array(!1).then(kh)}toUint8Array(t=!1){return t?Er(this._values)[0]:J(this,void 0,void 0,function*(){var n,r,i,o;let s=[],a=0;try{for(var c=!0,l=Ii(this),u;u=yield l.next(),n=u.done,!n;c=!0){o=u.value,c=!1;let f=o;s.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!c&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Er(s,a)[0]})}},yo=class{constructor(t){t&&(this.source=new a2(wn.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},ni=class e{constructor(t){t instanceof e?this.source=t.source:t instanceof mo?this.source=new us(wn.fromAsyncIterable(t)):Sg(t)?this.source=new us(wn.fromNodeStream(t)):Fh(t)?this.source=new us(wn.fromDOMStream(t)):vg(t)?this.source=new us(wn.fromDOMStream(t.body)):Mi(t)?this.source=new us(wn.fromIterable(t)):Tr(t)?this.source=new us(wn.fromAsyncIterable(t)):Gr(t)&&(this.source=new us(wn.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},a2=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||we)}return(t){return Object.create(this.source.return&&this.source.return(t)||we)}},us=class{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return J(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return J(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return J(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return J(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return J(this,void 0,void 0,function*(){let n=this.source.throw&&(yield this.source.throw(t))||we;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return J(this,void 0,void 0,function*(){let n=this.source.return&&(yield this.source.return(t))||we;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}};var pd=class extends yo{constructor(t,n){super(),this.position=0,this.buffer=_t(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){let{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){let{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){let r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},_a=class extends ni{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=J(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return J(this,void 0,void 0,function*(){let{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return J(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return J(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let o=i,s=0,a=0,c=Math.min(r,o+Math.min(r-o,t)),l=new Uint8Array(Math.max(0,(this.position=c)-o));for(;(o+=a)<c&&(s+=a)<l.byteLength;)({bytesRead:a}=yield n.read(l,s,l.byteLength-s,o));return l}return null})}readAt(t,n){return J(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:r,size:i}=this;if(r&&t+n<i){let o=Math.min(i,t+n),s=new Uint8Array(o-t);return(yield r.read(s,0,n,t)).buffer}return new Uint8Array(n)})}close(){return J(this,void 0,void 0,function*(){let t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return J(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return J(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};var l2={};Mr(l2,{BaseInt64:()=>md,Int128:()=>yd,Int64:()=>fs,Uint64:()=>Oe});function du(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}var pu=8,c2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],md=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){let n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]),i=n[3]*r[3];this.buffer[0]=i&65535;let o=i>>>16;return i=n[2]*r[3],o+=i,i=n[3]*r[2]>>>0,o+=i,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<i?65536:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){let n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${du(this.buffer[1])} ${du(this.buffer[0])}`}},Oe=class e extends md{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return e.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){let r=t.length,i=new e(n);for(let o=0;o<r;){let s=pu<r-o?pu:r-o,a=new e(new Uint32Array([Number.parseInt(t.slice(o,o+s),10),0])),c=new e(new Uint32Array([c2[s],0]));i.times(c),i.plus(a),o+=s}return i}static convertArray(t){let n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)e.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new e(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new e(new Uint32Array(t.buffer)).plus(n)}},fs=class e extends md{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){let n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return e.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){let r=t.startsWith("-"),i=t.length,o=new e(n);for(let s=r?1:0;s<i;){let a=pu<i-s?pu:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),l=new e(new Uint32Array([c2[a],0]));o.times(l),o.plus(c),s+=a}return r?o.negate():o}static convertArray(t){let n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)e.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new e(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new e(new Uint32Array(t.buffer)).plus(n)}},yd=class e{constructor(t){this.buffer=t}high(){return new fs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new fs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){let n=new Oe(new Uint32Array([this.buffer[3],0])),r=new Oe(new Uint32Array([this.buffer[2],0])),i=new Oe(new Uint32Array([this.buffer[1],0])),o=new Oe(new Uint32Array([this.buffer[0],0])),s=new Oe(new Uint32Array([t.buffer[3],0])),a=new Oe(new Uint32Array([t.buffer[2],0])),c=new Oe(new Uint32Array([t.buffer[1],0])),l=new Oe(new Uint32Array([t.buffer[0],0])),u=Oe.multiply(o,l);this.buffer[0]=u.low();let f=new Oe(new Uint32Array([u.high(),0]));return u=Oe.multiply(i,l),f.plus(u),u=Oe.multiply(o,c),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new Oe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Oe.multiply(r,l)).plus(Oe.multiply(i,c)).plus(Oe.multiply(o,a)),this.buffer[3]+=Oe.multiply(n,l).plus(Oe.multiply(r,c)).plus(Oe.multiply(i,a)).plus(Oe.multiply(o,s)).low(),this}plus(t){let n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${du(this.buffer[3])} ${du(this.buffer[2])} ${du(this.buffer[1])} ${du(this.buffer[0])}`}static multiply(t,n){return new e(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new e(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return e.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return e.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){let r=t.startsWith("-"),i=t.length,o=new e(n);for(let s=r?1:0;s<i;){let a=pu<i-s?pu:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0,0,0])),l=new e(new Uint32Array([c2[a],0,0,0]));o.times(l),o.plus(c),s+=a}return r?o.negate():o}static convertArray(t){let n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)e.from(t[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}};var gd=class extends mt{constructor(t,n,r,i,o=ce.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=o}visit(t){return super.visit(t instanceof Ut?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Nt({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<ce.V5&&this.readNullBitmap(t,r),t.mode===ge.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return Nt({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}},o0=class extends gd{constructor(t,n,r,i,o){super(new Uint8Array(0),n,r,i,o),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Mc(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return Pt(Uint8Array,Pt(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return Pt(Uint8Array,Pt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){let{sources:r}=this;return H.isTimestamp(t)?Pt(Uint8Array,fs.convertArray(r[n])):(H.isInt(t)||H.isTime(t))&&t.bitWidth===64||H.isDuration(t)?Pt(Uint8Array,fs.convertArray(r[n])):H.isDate(t)&&t.unit===Ve.MILLISECOND?Pt(Uint8Array,fs.convertArray(r[n])):H.isDecimal(t)?Pt(Uint8Array,yd.convertArray(r[n])):H.isBinary(t)||H.isLargeBinary(t)||H.isFixedSizeBinary(t)?tj(r[n]):H.isBool(t)?Mc(r[n]):H.isUtf8(t)||H.isLargeUtf8(t)?Ji(r[n].join("")):Pt(Uint8Array,Pt(t.ArrayType,r[n].map(i=>+i)))}};function tj(e){let t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}var mu=class extends pr{constructor(t){super(t),this._values=new ki(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,_t(n))}_flushPending(t,n){let r=this._offsets,i=this._values.reserve(n).buffer,o=0;for(let[s,a]of t)if(a===void 0)r.set(s,0);else{let c=a.length;i.set(a,o),r.set(s,c),o+=c}}};var yu=class extends pr{constructor(t){super(t),this._values=new ki(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,_t(n))}_flushPending(t,n){let r=this._offsets,i=this._values.reserve(n).buffer,o=0;for(let[s,a]of t)if(a===void 0)r.set(s,BigInt(0));else{let c=a.length;i.set(a,o),r.set(s,BigInt(c)),o+=c}}};var s0=class extends ve{constructor(t){super(t),this._values=new fu}setValue(t,n){this._values.set(t,+n)}};var Nc=class extends Xe{};Nc.prototype._setValue=q_;var xd=class extends Nc{};xd.prototype._setValue=Bg;var bd=class extends Nc{};bd.prototype._setValue=Lg;var wd=class extends Xe{};wd.prototype._setValue=Y_;var a0=class extends ve{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new dr(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Dc({type:this.type.indices,nullValues:n}),this.dictionary=Dc({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){let r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){let r=this._keysToIndices,i=this.valueToKey(n),o=r[i];return o===void 0&&(r[i]=o=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,o)}flush(){let t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}};var vd=class extends Xe{};vd.prototype._setValue=z_;var c0=class extends ve{setValue(t,n){let[r]=this.children,i=t*this.stride;for(let o=-1,s=n.length;++o<s;)r.set(i+o,n[o])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");let r=this.children.push(t);return this.type=new Kr(this.type.listSize,new Ut(n,t.type,!0)),r}};var Oc=class extends Xe{setValue(t,n){this._values.set(t,n)}},l0=class extends Oc{setValue(t,n){super.setValue(t,cd(n))}},u0=class extends Oc{},f0=class extends Oc{};var Bc=class extends Xe{};Bc.prototype._setValue=X_;var _d=class extends Bc{};_d.prototype._setValue=qg;var Sd=class extends Bc{};Sd.prototype._setValue=jg;var hs=class extends Xe{};hs.prototype._setValue=W_;var Id=class extends hs{};Id.prototype._setValue=Vg;var Md=class extends hs{};Md.prototype._setValue=Yg;var Ad=class extends hs{};Ad.prototype._setValue=Xg;var Td=class extends hs{};Td.prototype._setValue=Wg;var ri=class extends Xe{setValue(t,n){this._values.set(t,n)}},h0=class extends ri{},d0=class extends ri{},p0=class extends ri{},m0=class extends ri{},y0=class extends ri{},g0=class extends ri{},x0=class extends ri{},b0=class extends ri{};var w0=class extends pr{constructor(t){super(t),this._offsets=new hu(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Jr(new Ut(n,t.type,!0)),this.numChildren-1}_flushPending(t){let n=this._offsets,[r]=this.children;for(let[i,o]of t)if(typeof o>"u")n.set(i,0);else{let s=o,a=s.length,c=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(c+l,s[l])}}};var v0=class extends pr{set(t,n){return super.set(t,n)}setValue(t,n){let r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),o=i.get(t);o&&(this._pendingLength-=o.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ti(new Ut(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){let n=this._offsets,[r]=this.children;for(let[i,o]of t)if(o===void 0)n.set(i,0);else{let{[i]:s,[i+1]:a}=n.set(i,o.size).buffer;for(let c of o.entries())if(r.set(s,c),++s>=a)break}}};var _0=class extends ve{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}};var S0=class extends ve{setValue(t,n){let{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((o,s)=>r[s].set(t,n[s]));case Map:return i.children.forEach((o,s)=>r[s].set(t,n.get(o.name)));default:return i.children.forEach((o,s)=>r[s].set(t,n[o.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){let r=this.children.push(t);return this.type=new xe([...this.type.children,new Ut(n,t.type,!0)]),r}};var ds=class extends Xe{};ds.prototype._setValue=j_;var Ed=class extends ds{};Ed.prototype._setValue=Cg;var Nd=class extends ds{};Nd.prototype._setValue=kg;var Dd=class extends ds{};Dd.prototype._setValue=Fg;var Od=class extends ds{};Od.prototype._setValue=Rg;var ps=class extends Xe{};ps.prototype._setValue=V_;var Bd=class extends ps{};Bd.prototype._setValue=$g;var Ld=class extends ps{};Ld.prototype._setValue=Pg;var Cd=class extends ps{};Cd.prototype._setValue=Ug;var kd=class extends ps{};kd.prototype._setValue=zg;var gu=class extends ve{constructor(t){super(t),this._typeIds=new as(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);let i=this.type.typeIdToChildIndex[r],o=this.children[i];o?.set(t,n)}addChild(t,n=`${this.children.length}`){let r=this.children.push(t),{type:{children:i,mode:o,typeIds:s}}=this,a=[...i,new Ut(n,t.type)];return this.type=new Qr(o,[...s,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}},I0=class extends gu{},M0=class extends gu{constructor(t){super(t),this._offsets=new as(Int32Array)}setValue(t,n,r){let i=this._typeIds.set(t,r).buffer[t],o=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,o.length).buffer[t];o?.set(s,n)}};var Fd=class extends pr{constructor(t){super(t),this._values=new ki(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Ji(n))}_flushPending(t,n){}};Fd.prototype._flushPending=mu.prototype._flushPending;var Rd=class extends pr{constructor(t){super(t),this._values=new ki(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Ji(n))}_flushPending(t,n){}};Rd.prototype._flushPending=yu.prototype._flushPending;var u2=class extends mt{visitNull(){return _0}visitBool(){return s0}visitInt(){return ri}visitInt8(){return h0}visitInt16(){return d0}visitInt32(){return p0}visitInt64(){return m0}visitUint8(){return y0}visitUint16(){return g0}visitUint32(){return x0}visitUint64(){return b0}visitFloat(){return Oc}visitFloat16(){return l0}visitFloat32(){return u0}visitFloat64(){return f0}visitUtf8(){return Fd}visitLargeUtf8(){return Rd}visitBinary(){return mu}visitLargeBinary(){return yu}visitFixedSizeBinary(){return vd}visitDate(){return Nc}visitDateDay(){return xd}visitDateMillisecond(){return bd}visitTimestamp(){return ds}visitTimestampSecond(){return Ed}visitTimestampMillisecond(){return Nd}visitTimestampMicrosecond(){return Dd}visitTimestampNanosecond(){return Od}visitTime(){return ps}visitTimeSecond(){return Bd}visitTimeMillisecond(){return Ld}visitTimeMicrosecond(){return Cd}visitTimeNanosecond(){return kd}visitDecimal(){return wd}visitList(){return w0}visitStruct(){return S0}visitUnion(){return gu}visitDenseUnion(){return M0}visitSparseUnion(){return I0}visitDictionary(){return a0}visitInterval(){return Bc}visitIntervalDayTime(){return _d}visitIntervalYearMonth(){return Sd}visitDuration(){return hs}visitDurationSecond(){return Id}visitDurationMillisecond(){return Md}visitDurationMicrosecond(){return Ad}visitDurationNanosecond(){return Td}visitFixedSizeList(){return c0}visitMap(){return v0}},KO=new u2;var bt=class extends mt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Gn(e,t){return t instanceof e.constructor}function Lc(e,t){return e===t||Gn(e,t)}function ms(e,t){return e===t||Gn(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function A0(e,t){return e===t||Gn(e,t)&&e.precision===t.precision}function ej(e,t){return e===t||Gn(e,t)&&e.byteWidth===t.byteWidth}function f2(e,t){return e===t||Gn(e,t)&&e.unit===t.unit}function $d(e,t){return e===t||Gn(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Pd(e,t){return e===t||Gn(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function nj(e,t){return e===t||Gn(e,t)&&e.children.length===t.children.length&&go.compareManyFields(e.children,t.children)}function rj(e,t){return e===t||Gn(e,t)&&e.children.length===t.children.length&&go.compareManyFields(e.children,t.children)}function h2(e,t){return e===t||Gn(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&go.compareManyFields(e.children,t.children)}function ij(e,t){return e===t||Gn(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&go.visit(e.indices,t.indices)&&go.visit(e.dictionary,t.dictionary)}function d2(e,t){return e===t||Gn(e,t)&&e.unit===t.unit}function Ud(e,t){return e===t||Gn(e,t)&&e.unit===t.unit}function oj(e,t){return e===t||Gn(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&go.compareManyFields(e.children,t.children)}function sj(e,t){return e===t||Gn(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&go.compareManyFields(e.children,t.children)}bt.prototype.visitNull=Lc;bt.prototype.visitBool=Lc;bt.prototype.visitInt=ms;bt.prototype.visitInt8=ms;bt.prototype.visitInt16=ms;bt.prototype.visitInt32=ms;bt.prototype.visitInt64=ms;bt.prototype.visitUint8=ms;bt.prototype.visitUint16=ms;bt.prototype.visitUint32=ms;bt.prototype.visitUint64=ms;bt.prototype.visitFloat=A0;bt.prototype.visitFloat16=A0;bt.prototype.visitFloat32=A0;bt.prototype.visitFloat64=A0;bt.prototype.visitUtf8=Lc;bt.prototype.visitLargeUtf8=Lc;bt.prototype.visitBinary=Lc;bt.prototype.visitLargeBinary=Lc;bt.prototype.visitFixedSizeBinary=ej;bt.prototype.visitDate=f2;bt.prototype.visitDateDay=f2;bt.prototype.visitDateMillisecond=f2;bt.prototype.visitTimestamp=$d;bt.prototype.visitTimestampSecond=$d;bt.prototype.visitTimestampMillisecond=$d;bt.prototype.visitTimestampMicrosecond=$d;bt.prototype.visitTimestampNanosecond=$d;bt.prototype.visitTime=Pd;bt.prototype.visitTimeSecond=Pd;bt.prototype.visitTimeMillisecond=Pd;bt.prototype.visitTimeMicrosecond=Pd;bt.prototype.visitTimeNanosecond=Pd;bt.prototype.visitDecimal=Lc;bt.prototype.visitList=nj;bt.prototype.visitStruct=rj;bt.prototype.visitUnion=h2;bt.prototype.visitDenseUnion=h2;bt.prototype.visitSparseUnion=h2;bt.prototype.visitDictionary=ij;bt.prototype.visitInterval=d2;bt.prototype.visitIntervalDayTime=d2;bt.prototype.visitIntervalYearMonth=d2;bt.prototype.visitDuration=Ud;bt.prototype.visitDurationSecond=Ud;bt.prototype.visitDurationMillisecond=Ud;bt.prototype.visitDurationMicrosecond=Ud;bt.prototype.visitDurationNanosecond=Ud;bt.prototype.visitFixedSizeList=oj;bt.prototype.visitMap=sj;var go=new bt;function Cc(e,t){return go.compareSchemas(e,t)}function tB(e,t){return go.compareFields(e,t)}function eB(e,t){return go.visit(e,t)}function Dc(e){let t=e.type,n=new(KO.getVisitFn(t)())(e);if(t.children&&t.children.length>0){let r=e.children||[],i={nullValues:e.nullValues},o=Array.isArray(r)?(s,a)=>r[a]||i:({name:s})=>r[s]||i;for(let[s,a]of t.children.entries()){let{type:c}=a,l=o(a,s);n.children.push(Dc(Object.assign(Object.assign({},l),{type:c})))}}return n}function T0(e,t){return aj(e,t.map(n=>n.data.concat()))}function aj(e,t){let n=[...e.fields],r=[],i={numBatches:t.reduce((f,h)=>Math.max(f,h.length),0)},o=0,s=0,a=-1,c=t.length,l,u=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),s=Math.min(s,l?l.length:s);Number.isFinite(s)&&(u=cj(n,s,u,t,i),s>0&&(r[o++]=Nt({type:new xe(n),length:s,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new Fe(e,f))]}function cj(e,t,n,r,i){var o;let s=(t+63&-64)>>3;for(let a=-1,c=r.length;++a<c;){let l=n[a],u=l?.length;if(u>=t)u===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,u-t))));else{let f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(o=l?._changeLengthAndBackfillNullBitmap(t))!==null&&o!==void 0?o:Nt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return n}var nB,mr=class e{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new oe([]),this._offsets=[0],this;let i,o;t[0]instanceof oe&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(o=t.pop());let s=c=>{if(c){if(c instanceof Fe)return[c];if(c instanceof e)return c.batches;if(c instanceof te){if(c.type instanceof xe)return[new Fe(new oe(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>s(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>s(l));if(typeof c=="object"){let l=Object.keys(c),u=l.map(d=>new Xt([c[d]])),f=i??new oe(l.map((d,p)=>new Ut(String(d),u[p].type,u[p].nullable))),[,h]=T0(f,u);return h.length===0?[new Fe(c)]:h}}}return[]},a=t.flatMap(c=>s(c));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new oe([]),!(i instanceof oe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let c of a){if(!(c instanceof Fe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Cc(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=o??Qg(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Jg(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?uu.visit(new Xt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){let n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new e(n,r.map(i=>new Fe(n,i)))}slice(t,n){let r=this.schema;[t,n]=ld({length:this.numRows},t,n);let i=Kg(this.data,this._offsets,t,n);return new e(r,i.map(o=>new Fe(r,o)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){let n=this.data.map(r=>r.children[t]);if(n.length===0){let{type:r}=this.schema.fields[t],i=Nt({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Xt(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Xt([Nt({type:new kn,length:this.numRows})]));let o=r.fields.slice(),s=o[t].clone({type:n.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[o[t],a[t]]=[s,n],[r,i]=T0(r,a)}return new e(r,i)}select(t){let n=this.schema.fields.reduce((r,i,o)=>r.set(i.name,o),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){let n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new e(n,r)}assign(t){let n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,c,l)=>{let[u,f]=a,h=n.findIndex(d=>d.name===c.name);return~h?f[h]=l:u.push(l),a},[[],[]]),o=this.schema.assign(t.schema),s=[...n.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new e(...T0(o,s))}};nB=Symbol.toStringTag;mr[nB]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=lu(hd),e.get=lu(Ye.getVisitFn(L.Struct)),e.set=t0(vn.getVisitFn(L.Struct)),e.indexOf=e0(Ac.getVisitFn(L.Struct)),"Table"))(mr.prototype);var iB,Fe=class e{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof oe))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Nt({nullCount:0,type:new xe(this.schema.fields),children:this.schema.fields.map(n=>Nt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof te))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rB(this.schema,this.data.children);break}case 1:{let[n]=t,{fields:r,children:i,length:o}=Object.keys(n).reduce((c,l,u)=>(c.children[u]=n[l],c.length=Math.max(c.length,n[l].length),c.fields[u]=Ut.new({name:l,type:n[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),s=new oe(r),a=Nt({type:new xe(r),length:o,children:i,nullCount:0});[this.schema,this.data]=rB(s,a.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=oB(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ye.visit(this.data,t)}set(t,n){return vn.visit(this.data,t,n)}indexOf(t,n){return Ac.visit(this.data,t,n)}[Symbol.iterator](){return uu.visit(new Xt([this.data]))}toArray(){return[...this]}concat(...t){return new mr(this.schema,[this,...t])}slice(t,n){let[r]=new Xt([this.data]).slice(t,n).data;return new e(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Xt([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Xt([Nt({type:new kn,length:this.numRows})]));let o=r.fields.slice(),s=i.children.slice(),a=o[t].clone({type:n.type});[o[t],s[t]]=[a,n.data[0]],r=new oe(o,new Map(this.schema.metadata)),i=Nt({type:new xe(o),children:s})}return new e(r,i)}select(t){let n=this.schema.select(t),r=new xe(n.fields),i=[];for(let o of t){let s=this.schema.fields.findIndex(a=>a.name===o);~s&&(i[s]=this.data.children[s])}return new e(n,Nt({type:r,length:this.numRows,children:i}))}selectAt(t){let n=this.schema.selectAt(t),r=t.map(o=>this.data.children[o]).filter(Boolean),i=Nt({type:new xe(n.fields),length:this.numRows,children:r});return new e(n,i)}};iB=Symbol.toStringTag;Fe[iB]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Fe.prototype);function rB(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;let i=[...e.fields],o=[...t],s=(n+63&-64)>>3;for(let[a,c]of e.fields.entries()){let l=t[a];(!l||l.length!==n)&&(i[a]=c.clone({nullable:!0}),o[a]=(r=l?._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Nt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(s)}))}return[e.assign(i),Nt({type:new xe(i),length:n,children:o})]}function oB(e,t,n=new Map){var r,i;if(((r=e?.length)!==null&&r!==void 0?r:0)>0&&e?.length===t?.length)for(let o=-1,s=e.length;++o<s;){let{type:a}=e[o],c=t[o];for(let l of[c,...((i=c?.dictionary)===null||i===void 0?void 0:i.data)||[]])oB(a.children,l?.children,n);if(H.isDictionary(a)){let{id:l}=a;if(!n.has(l))c?.dictionary&&n.set(l,c.dictionary);else if(n.get(l)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}var kc=class extends Fe{constructor(t){let n=t.fields.map(i=>Nt({type:i.type})),r=Nt({type:new xe(t.fields),nullCount:0,children:n});super(t,r)}};var Fi=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ce.V1}headerType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):qt.NONE}header(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){let r=this.bb.__offset(this.bb_pos,12);return r?(n||new nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ce.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,qt.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,o,s){return e.startMessage(t),e.addVersion(t,n),e.addHeaderType(t,r),e.addHeader(t,i),e.addBodyLength(t,o),e.addCustomMetadata(t,s),e.endMessage(t)}};var p2=class extends mt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Wh.startNull(n),Wh.endNull(n)}visitInt(t,n){return Ei.startInt(n),Ei.addBitWidth(n,t.bitWidth),Ei.addIsSigned(n,t.isSigned),Ei.endInt(n)}visitFloat(t,n){return ya.startFloatingPoint(n),ya.addPrecision(n,t.precision),ya.endFloatingPoint(n)}visitBinary(t,n){return qh.startBinary(n),qh.endBinary(n)}visitLargeBinary(t,n){return Vh.startLargeBinary(n),Vh.endLargeBinary(n)}visitBool(t,n){return jh.startBool(n),jh.endBool(n)}visitUtf8(t,n){return Hh.startUtf8(n),Hh.endUtf8(n)}visitLargeUtf8(t,n){return Yh.startLargeUtf8(n),Yh.endLargeUtf8(n)}visitDecimal(t,n){return eo.startDecimal(n),eo.addScale(n,t.scale),eo.addPrecision(n,t.precision),eo.addBitWidth(n,t.bitWidth),eo.endDecimal(n)}visitDate(t,n){return ha.startDate(n),ha.addUnit(n,t.unit),ha.endDate(n)}visitTime(t,n){return is.startTime(n),is.addUnit(n,t.unit),is.addBitWidth(n,t.bitWidth),is.endTime(n)}visitTimestamp(t,n){let r=t.timezone&&n.createString(t.timezone)||void 0;return os.startTimestamp(n),os.addUnit(n,t.unit),r!==void 0&&os.addTimezone(n,r),os.endTimestamp(n)}visitInterval(t,n){return ga.startInterval(n),ga.addUnit(n,t.unit),ga.endInterval(n)}visitDuration(t,n){return da.startDuration(n),da.addUnit(n,t.unit),da.endDuration(n)}visitList(t,n){return Xh.startList(n),Xh.endList(n)}visitStruct(t,n){return Gh.startStruct_(n),Gh.endStruct_(n)}visitUnion(t,n){Ni.startTypeIdsVector(n,t.typeIds.length);let r=Ni.createTypeIdsVector(n,t.typeIds);return Ni.startUnion(n),Ni.addMode(n,t.mode),Ni.addTypeIds(n,r),Ni.endUnion(n)}visitDictionary(t,n){let r=this.visit(t.indices,n);return to.startDictionaryEncoding(n),to.addId(n,BigInt(t.id)),to.addIsOrdered(n,t.isOrdered),r!==void 0&&to.addIndexType(n,r),to.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return pa.startFixedSizeBinary(n),pa.addByteWidth(n,t.byteWidth),pa.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return ma.startFixedSizeList(n),ma.addListSize(n,t.listSize),ma.endFixedSizeList(n)}visitMap(t,n){return xa.startMap(n),xa.addKeysSorted(n,t.keysSorted),xa.endMap(n)}},E0=new p2;function lB(e,t=new Map){return new oe(uj(e,t),N0(e.metadata),t)}function m2(e){return new _n(e.count,fB(e.columns),hB(e.columns))}function uB(e){return new gr(m2(e.data),e.id,e.isDelta)}function uj(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ut.fromJSON(n,t))}function sB(e,t){return(e.children||[]).filter(Boolean).map(n=>Ut.fromJSON(n,t))}function fB(e){return(e||[]).reduce((t,n)=>[...t,new ii(n.count,fj(n.VALIDITY)),...fB(n.children)],[])}function hB(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){let i=e[n];i.VALIDITY&&t.push(new yr(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new yr(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new yr(t.length,i.OFFSET.length)),i.DATA&&t.push(new yr(t.length,i.DATA.length)),t=hB(i.children,t)}return t}function fj(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function dB(e,t){let n,r,i,o,s,a;return!t||!(o=e.dictionary)?(s=cB(e,sB(e,t)),i=new Ut(e.name,s,e.nullable,N0(e.metadata))):t.has(n=o.id)?(r=(r=o.indexType)?aB(r):new Li,a=new dr(t.get(n),r,n,o.isOrdered),i=new Ut(e.name,a,e.nullable,N0(e.metadata))):(r=(r=o.indexType)?aB(r):new Li,t.set(n,s=cB(e,sB(e,t))),a=new dr(s,r,n,o.isOrdered),i=new Ut(e.name,a,e.nullable,N0(e.metadata))),i||null}function N0(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function aB(e){return new ke(e.isSigned,e.bitWidth)}function cB(e,t){let n=e.type.name;switch(n){case"NONE":return new kn;case"null":return new kn;case"binary":return new no;case"largebinary":return new ro;case"utf8":return new io;case"largeutf8":return new oo;case"bool":return new so;case"list":return new Jr((t||[])[0]);case"struct":return new xe(t||[]);case"struct_":return new xe(t||[])}switch(n){case"int":{let r=e.type;return new ke(r.isSigned,r.bitWidth)}case"floatingpoint":{let r=e.type;return new Wn(de[r.precision])}case"decimal":{let r=e.type;return new ao(r.scale,r.precision,r.bitWidth)}case"date":{let r=e.type;return new co(Ve[r.unit])}case"time":{let r=e.type;return new Zr(ct[r.unit],r.bitWidth)}case"timestamp":{let r=e.type;return new lo(ct[r.unit],r.timezone)}case"interval":{let r=e.type;return new uo(cn[r.unit])}case"duration":{let r=e.type;return new fo(ct[r.unit])}case"union":{let r=e.type,[i,...o]=(r.mode+"").toLowerCase(),s=i.toUpperCase()+o.join("");return new Qr(ge[s],r.typeIds||[],t||[])}case"fixedsizebinary":{let r=e.type;return new ho(r.byteWidth)}case"fixedsizelist":{let r=e.type;return new Kr(r.listSize,(t||[])[0])}case"map":{let r=e.type;return new ti((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var hj=_c,dj=Nr,xr=class e{static fromJSON(t,n){let r=new e(0,ce.V5,n);return r._createHeader=pj(t,n),r}static decode(t){t=new dj(_t(t));let n=Fi.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),o=n.headerType(),s=new e(r,i,o);return s._createHeader=mj(n,o),s}static encode(t){let n=new hj,r=-1;return t.isSchema()?r=oe.encode(n,t.header()):t.isRecordBatch()?r=_n.encode(n,t.header()):t.isDictionaryBatch()&&(r=gr.encode(n,t.header())),Fi.startMessage(n),Fi.addVersion(n,ce.V5),Fi.addHeader(n,r),Fi.addHeaderType(n,t.headerType),Fi.addBodyLength(n,BigInt(t.bodyLength)),Fi.finishMessageBuffer(n,Fi.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof oe)return new e(0,ce.V5,qt.Schema,t);if(t instanceof _n)return new e(n,ce.V5,qt.RecordBatch,t);if(t instanceof gr)return new e(n,ce.V5,qt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===qt.Schema}isRecordBatch(){return this.headerType===qt.RecordBatch}isDictionaryBatch(){return this.headerType===qt.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=De(t)}},_n=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=De(t)}},gr=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=De(n)}},yr=class{constructor(t,n){this.offset=De(t),this.length=De(n)}},ii=class{constructor(t,n){this.length=De(t),this.nullCount=De(n)}};function pj(e,t){return()=>{switch(t){case qt.Schema:return oe.fromJSON(e);case qt.RecordBatch:return _n.fromJSON(e);case qt.DictionaryBatch:return gr.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${qt[t]}, type: ${t} }`)}}function mj(e,t){return()=>{switch(t){case qt.Schema:return oe.decode(e.header(new hr),new Map,e.version());case qt.RecordBatch:return _n.decode(e.header(new Dr),e.version());case qt.DictionaryBatch:return gr.decode(e.header(new rs),e.version())}throw new Error(`Unrecognized Message type: { name: ${qt[t]}, type: ${t} }`)}}Ut.encode=Aj;Ut.decode=Ij;Ut.fromJSON=dB;oe.encode=Mj;oe.decode=yj;oe.fromJSON=lB;_n.encode=Tj;_n.decode=gj;_n.fromJSON=m2;gr.encode=Ej;gr.decode=xj;gr.fromJSON=uB;ii.encode=Nj;ii.decode=wj;yr.encode=Dj;yr.decode=bj;function yj(e,t=new Map,n=ce.V5){let r=Sj(e,t);return new oe(r,D0(e),t,n)}function gj(e,t=ce.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new _n(e.length(),vj(e),_j(e,t))}function xj(e,t=ce.V5){return new gr(_n.decode(e.data(),t),e.id(),e.isDelta())}function bj(e){return new yr(e.offset(),e.length())}function wj(e){return new ii(e.length(),e.nullCount())}function vj(e){let t=[];for(let n,r=-1,i=-1,o=e.nodesLength();++r<o;)(n=e.nodes(r))&&(t[++i]=ii.decode(n));return t}function _j(e,t){let n=[];for(let r,i=-1,o=-1,s=e.buffersLength();++i<s;)(r=e.buffers(i))&&(t<ce.V4&&(r.bb_pos+=8*(i+1)),n[++o]=yr.decode(r));return n}function Sj(e,t){let n=[];for(let r,i=-1,o=-1,s=e.fieldsLength();++i<s;)(r=e.fields(i))&&(n[++o]=Ut.decode(r,t));return n}function pB(e,t){let n=[];for(let r,i=-1,o=-1,s=e.childrenLength();++i<s;)(r=e.children(i))&&(n[++o]=Ut.decode(r,t));return n}function Ij(e,t){let n,r,i,o,s,a;return!t||!(a=e.dictionary())?(i=yB(e,pB(e,t)),r=new Ut(e.name(),i,e.nullable(),D0(e))):t.has(n=De(a.id()))?(o=(o=a.indexType())?mB(o):new Li,s=new dr(t.get(n),o,n,a.isOrdered()),r=new Ut(e.name(),s,e.nullable(),D0(e))):(o=(o=a.indexType())?mB(o):new Li,t.set(n,i=yB(e,pB(e,t))),s=new dr(i,o,n,a.isOrdered()),r=new Ut(e.name(),s,e.nullable(),D0(e))),r||null}function D0(e){let t=new Map;if(e)for(let n,r,i=-1,o=Math.trunc(e.customMetadataLength());++i<o;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function mB(e){return new ke(e.isSigned(),e.bitWidth())}function yB(e,t){let n=e.typeType();switch(n){case pe.NONE:return new kn;case pe.Null:return new kn;case pe.Binary:return new no;case pe.LargeBinary:return new ro;case pe.Utf8:return new io;case pe.LargeUtf8:return new oo;case pe.Bool:return new so;case pe.List:return new Jr((t||[])[0]);case pe.Struct_:return new xe(t||[])}switch(n){case pe.Int:{let r=e.type(new Ei);return new ke(r.isSigned(),r.bitWidth())}case pe.FloatingPoint:{let r=e.type(new ya);return new Wn(r.precision())}case pe.Decimal:{let r=e.type(new eo);return new ao(r.scale(),r.precision(),r.bitWidth())}case pe.Date:{let r=e.type(new ha);return new co(r.unit())}case pe.Time:{let r=e.type(new is);return new Zr(r.unit(),r.bitWidth())}case pe.Timestamp:{let r=e.type(new os);return new lo(r.unit(),r.timezone())}case pe.Interval:{let r=e.type(new ga);return new uo(r.unit())}case pe.Duration:{let r=e.type(new da);return new fo(r.unit())}case pe.Union:{let r=e.type(new Ni);return new Qr(r.mode(),r.typeIdsArray()||[],t||[])}case pe.FixedSizeBinary:{let r=e.type(new pa);return new ho(r.byteWidth())}case pe.FixedSizeList:{let r=e.type(new ma);return new Kr(r.listSize(),(t||[])[0])}case pe.Map:{let r=e.type(new xa);return new ti((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${pe[n]}" (${n})`)}function Mj(e,t){let n=t.fields.map(o=>Ut.encode(e,o));hr.startFieldsVector(e,n.length);let r=hr.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?hr.createCustomMetadataVector(e,[...t.metadata].map(([o,s])=>{let a=e.createString(`${o}`),c=e.createString(`${s}`);return nn.startKeyValue(e),nn.addKey(e,a),nn.addValue(e,c),nn.endKeyValue(e)})):-1;return hr.startSchema(e),hr.addFields(e,r),hr.addEndianness(e,Oj?fa.Little:fa.Big),i!==-1&&hr.addCustomMetadata(e,i),hr.endSchema(e)}function Aj(e,t){let n=-1,r=-1,i=-1,o=t.type,s=t.typeId;H.isDictionary(o)?(s=o.dictionary.typeId,i=E0.visit(o,e),r=E0.visit(o.dictionary,e)):r=E0.visit(o,e);let a=(o.children||[]).map(u=>Ut.encode(e,u)),c=Cn.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Cn.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{let h=e.createString(`${u}`),d=e.createString(`${f}`);return nn.startKeyValue(e),nn.addKey(e,h),nn.addValue(e,d),nn.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Cn.startField(e),Cn.addType(e,r),Cn.addTypeType(e,s),Cn.addChildren(e,c),Cn.addNullable(e,!!t.nullable),n!==-1&&Cn.addName(e,n),i!==-1&&Cn.addDictionary(e,i),l!==-1&&Cn.addCustomMetadata(e,l),Cn.endField(e)}function Tj(e,t){let n=t.nodes||[],r=t.buffers||[];Dr.startNodesVector(e,n.length);for(let s of n.slice().reverse())ii.encode(e,s);let i=e.endVector();Dr.startBuffersVector(e,r.length);for(let s of r.slice().reverse())yr.encode(e,s);let o=e.endVector();return Dr.startRecordBatch(e),Dr.addLength(e,BigInt(t.length)),Dr.addNodes(e,i),Dr.addBuffers(e,o),Dr.endRecordBatch(e)}function Ej(e,t){let n=_n.encode(e,t.data);return rs.startDictionaryBatch(e),rs.addId(e,BigInt(t.id)),rs.addIsDelta(e,t.isDelta),rs.addData(e,n),rs.endDictionaryBatch(e)}function Nj(e,t){return eu.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Dj(e,t){return tu.createBuffer(e,BigInt(t.offset),BigInt(t.length))}var Oj=(()=>{let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})();var g2=e=>`Expected ${qt[e]} Message in stream, but was null or length 0.`,x2=e=>`Header pointer of flatbuffer-encoded ${qt[e]} Message is null or length 0.`,gB=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,xB=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`,xu=class{constructor(t){this.source=t instanceof yo?t:new yo(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done?we:t.value===-1&&(t=this.readMetadataLength()).done?we:(t=this.readMetadata(t.value)).done?we:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(g2(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);let n=_t(this.source.read(t));if(n.byteLength<t)throw new Error(xB(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){let n=qt.Schema,r=this.readMessage(n),i=r?.header();if(t&&!i)throw new Error(x2(n));return i}readMetadataLength(){let t=this.source.read(O0),n=t&&new Nr(t),r=n?.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(t){let n=this.source.read(t);if(!n)return we;if(n.byteLength<t)throw new Error(gB(t,n.byteLength));return{done:!1,value:xr.decode(n)}}},zd=class{constructor(t,n){this.source=t instanceof ni?t:wg(t)?new _a(t,n):new ni(t)}[Symbol.asyncIterator](){return this}next(){return J(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done?we:t.value===-1&&(t=yield this.readMetadataLength()).done?we:(t=yield this.readMetadata(t.value)).done?we:t})}throw(t){return J(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return J(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return J(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(g2(t));return n.value})}readMessageBody(t){return J(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);let n=_t(yield this.source.read(t));if(n.byteLength<t)throw new Error(xB(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return J(this,void 0,void 0,function*(){let n=qt.Schema,r=yield this.readMessage(n),i=r?.header();if(t&&!i)throw new Error(x2(n));return i})}readMetadataLength(){return J(this,void 0,void 0,function*(){let t=yield this.source.read(O0),n=t&&new Nr(t),r=n?.readInt32(0)||0;return{done:r===0,value:r}})}readMetadata(t){return J(this,void 0,void 0,function*(){let n=yield this.source.read(t);if(!n)return we;if(n.byteLength<t)throw new Error(gB(t,n.byteLength));return{done:!1,value:xr.decode(n)}})}},qd=class extends xu{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof dd?t:new dd(t)}next(){let{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:xr.fromJSON(t.schema,qt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){let n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:xr.fromJSON(n,qt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){let n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:xr.fromJSON(n,qt.RecordBatch)}}return this._body=[],we}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,o)=>[...i,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE_ID&&[o.TYPE_ID]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(g2(t));return n.value}readSchema(){let t=qt.Schema,n=this.readMessage(t),r=n?.header();if(!n||!r)throw new Error(x2(t));return r}},O0=4,y2="ARROW1",bu=new Uint8Array(y2.length);for(let e=0;e<y2.length;e+=1)bu[e]=y2.codePointAt(e);function B0(e,t=0){for(let n=-1,r=bu.length;++n<r;)if(bu[n]!==e[t+n])return!1;return!0}var wu=bu.length,b2=wu+O0,bB=wu*2+O0;var Lr=class e extends Ec{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){let n=this._impl.open(t);return Tr(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return wn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return wn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof e?t:xg(t)?Lj(t):wg(t)?Fj(t):Tr(t)?J(this,void 0,void 0,function*(){return yield e.from(yield t)}):vg(t)||Fh(t)||Sg(t)||Gr(t)?kj(new ni(t)):Cj(new yo(t))}static readAll(t){return t instanceof e?t.isSync()?wB(t):vB(t):xg(t)||ArrayBuffer.isView(t)||Mi(t)||bg(t)?wB(t):vB(t)}},ys=class extends Lr{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ar(this,arguments,function*(){yield Ft(yield*Ql(Ii(this[Symbol.iterator]())))})}},Fc=class extends Lr{constructor(t){super(t),this._impl=t}readAll(){var t,n,r,i;return J(this,void 0,void 0,function*(){let o=new Array;try{for(var s=!0,a=Ii(this),c;c=yield a.next(),t=c.done,!t;s=!0){i=c.value,s=!1;let l=i;o.push(l)}}catch(l){n={error:l}}finally{try{!s&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return o})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},Rc=class extends ys{constructor(t){super(t),this._impl=t}},L0=class extends Fc{constructor(t){super(t),this._impl=t}},C0=class{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){let r=this._loadVectors(t,n,this.schema.fields),i=Nt({type:new xe(this.schema.fields),length:t.length,children:r});return new Fe(this.schema,i)}_loadDictionaryBatch(t,n){let{id:r,isDelta:i}=t,{dictionaries:o,schema:s}=this,a=o.get(r);if(i||!a){let c=s.dictionaries.get(r),l=this._loadVectors(t.data,n,[c]);return(a&&i?a.concat(new Xt(l)):new Xt(l)).memoize()}return a.memoize()}_loadVectors(t,n,r){return new gd(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}},vu=class extends C0{constructor(t,n){super(n),this._reader=xg(t)?new qd(this._handle=t):new xu(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=_B(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):we}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):we}next(){if(this.closed)return we;let t,{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let r=t.header(),i=n.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kc(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},_u=class extends C0{constructor(t,n){super(n),this._reader=new zd(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return J(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return J(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=_B(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return J(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):we})}return(t){return J(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):we})}next(){return J(this,void 0,void 0,function*(){if(this.closed)return we;let t,{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let r=t.header(),i=yield n.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new kc(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return J(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},k0=class extends vu{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof pd?t:new pd(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(let n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();let r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){let i=this._reader.readMessage(qt.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null}_readDictionaryBatch(t){var n;let r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){let i=this._reader.readMessage(qt.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}}_readFooter(){let{_handle:t}=this,n=t.size-b2,r=t.readInt32(n),i=t.readAt(n-r,r);return cs.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}},w2=class extends _u{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){let r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof _a?t:new _a(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){let n=Object.create(null,{open:{get:()=>super.open}});return J(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(let r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return J(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());let r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){let i=yield this._reader.readMessage(qt.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null})}_readDictionaryBatch(t){var n;return J(this,void 0,void 0,function*(){let r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){let i=yield this._reader.readMessage(qt.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}})}_readFooter(){return J(this,void 0,void 0,function*(){let{_handle:t}=this;t._pending&&(yield t._pending);let n=t.size-b2,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return cs.decode(i)})}_readNextMessageAndValidate(t){return J(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}},v2=class extends vu{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new o0(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}};function _B(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*wB(e){let t=Lr.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function vB(e){return Ar(this,arguments,function*(){let n=yield Ft(Lr.from(e));try{if(!(yield Ft(n.open({autoDestroy:!1}))).closed)do yield yield Ft(n);while(!(yield Ft(n.reset().open())).closed)}finally{yield Ft(n.cancel())}})}function Lj(e){return new ys(new v2(e))}function Cj(e){let t=e.peek(wu+7&-8);return t&&t.byteLength>=4?B0(t)?new Rc(new k0(e.read())):new ys(new vu(e)):new ys(new vu(function*(){}()))}function kj(e){return J(this,void 0,void 0,function*(){let t=yield e.peek(wu+7&-8);return t&&t.byteLength>=4?B0(t)?new Rc(new k0(yield e.read())):new Fc(new _u(e)):new Fc(new _u(function(){return Ar(this,arguments,function*(){})}()))})}function Fj(e){return J(this,void 0,void 0,function*(){let{size:t}=yield e.stat(),n=new _a(e,t);return t>=bB&&B0(yield n.readAt(0,wu+7&-8))?new L0(new w2(n)):new Fc(new _u(n))})}var Me=class e extends mt{static assemble(...t){let n=i=>i.flatMap(o=>Array.isArray(o)?n(o):o instanceof Fe?o.data.children:o.data),r=new e;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Xt)return this.visitMany(t.data),this;let{type:n}=t;if(!H.isDictionary(n)){let{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(H.isUnion(n))this.nodes.push(new ii(r,0));else{let{nullCount:i}=t;H.isNull(n)||Ri.call(this,i<=0?new Uint8Array(0):Ic(t.offset,r,t.nullBitmap)),this.nodes.push(new ii(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function Ri(e){let t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new yr(this._byteLength,t)),this._byteLength+=t,this}function Rj(e){var t;let{type:n,length:r,typeIds:i,valueOffsets:o}=e;if(Ri.call(this,i),n.mode===ge.Sparse)return _2.call(this,e);if(n.mode===ge.Dense){if(e.offset<=0)return Ri.call(this,o),_2.call(this,e);{let s=new Int32Array(r),a=Object.create(null),c=Object.create(null);for(let l,u,f=-1;++f<r;)(l=i[f])!==void 0&&((u=a[l])===void 0&&(u=a[l]=o[f]),s[f]=o[f]-u,c[l]=((t=c[l])!==null&&t!==void 0?t:0)+1);Ri.call(this,s),this.visitMany(e.children.map((l,u)=>{let f=n.typeIds[u],h=a[f],d=c[f];return l.slice(h,Math.min(r,d))}))}}return this}function $j(e){let t;return e.nullCount>=e.length?Ri.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ri.call(this,Ic(e.offset,e.length,t)):Ri.call(this,Mc(e.values))}function gs(e){return Ri.call(this,e.values.subarray(0,e.length*e.stride))}function F0(e){let{length:t,values:n,valueOffsets:r}=e,i=De(r[0]),o=De(r[t]),s=Math.min(o-i,n.byteLength-i);return Ri.call(this,Mg(-i,t+1,r)),Ri.call(this,n.subarray(i,i+s)),this}function S2(e){let{length:t,valueOffsets:n}=e;if(n){let{[0]:r,[t]:i}=n;return Ri.call(this,Mg(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function _2(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Me.prototype.visitBool=$j;Me.prototype.visitInt=gs;Me.prototype.visitFloat=gs;Me.prototype.visitUtf8=F0;Me.prototype.visitLargeUtf8=F0;Me.prototype.visitBinary=F0;Me.prototype.visitLargeBinary=F0;Me.prototype.visitFixedSizeBinary=gs;Me.prototype.visitDate=gs;Me.prototype.visitTimestamp=gs;Me.prototype.visitTime=gs;Me.prototype.visitDecimal=gs;Me.prototype.visitList=S2;Me.prototype.visitStruct=_2;Me.prototype.visitUnion=Rj;Me.prototype.visitInterval=gs;Me.prototype.visitDuration=gs;Me.prototype.visitFixedSizeList=S2;Me.prototype.visitMap=S2;var $c=class extends Ec{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new mo,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Xn(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Tr(t)?t.then(n=>this.writeAll(n)):Gr(t)?M2(this,t):I2(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof mo?this._sink=t:(this._sink=new mo,t&&FD(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&RD(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Cc(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof mr&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Fe&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Cc(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Fe?t instanceof kc||this._writeRecordBatch(t):t instanceof mr?this.writeAll(t.batches):Mi(t)&&this.writeAll(t)}_writeMessage(t,n=8){let r=n-1,i=xr.encode(t),o=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=o+s+r&~r,c=a-o-s;return t.headerType===qt.RecordBatch?this._recordBatchBlocks.push(new ls(a,t.bodyLength,this._position)):t.headerType===qt.DictionaryBatch&&this._dictionaryBlocks.push(new ls(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),o>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){let n=_t(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(xr.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(bu)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){let{byteLength:n,nodes:r,bufferRegions:i,buffers:o}=Me.assemble(t),s=new _n(t.numRows,r,i),a=xr.from(s,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(o)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));let{byteLength:i,nodes:o,bufferRegions:s,buffers:a}=Me.assemble(new Xt([t])),c=new _n(t.length,o,s),l=new gr(c,n,r),u=xr.from(l,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let o=-1,s=t.length;++o<s;)(n=t[o])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r?.slice(i)).length>0)for(let o of r.data)this._writeDictionaryBatch(o,n,i>0),i+=o.length}return this}},jd=class e extends $c{static writeAll(t,n){let r=new e(n);return Tr(t)?t.then(i=>r.writeAll(i)):Gr(t)?M2(r,t):I2(r,t)}},Vd=class e extends $c{static writeAll(t){let n=new e;return Tr(t)?t.then(r=>n.writeAll(r)):Gr(t)?M2(n,t):I2(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){let n=cs.encode(new cs(t,ce.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}};function I2(e,t){let n=t;t instanceof mr&&(n=t.batches,e.reset(void 0,t.schema));for(let r of n)e.write(r);return e.finish()}function M2(e,t){var n,r,i,o,s,a,c;return J(this,void 0,void 0,function*(){try{for(n=!0,r=Ii(t);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;let l=c;e.write(l)}}catch(l){s={error:l}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return e.finish()})}function SB(e,t){if(Gr(e))return Uj(e,t);if(Mi(e))return Pj(e,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function Pj(e,t){let n=null,r=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){o(s,n||(n=e[Symbol.iterator]()))},pull(s){n?o(s,n):s.close()},cancel(){(n?.return&&n.return()||!0)&&(n=null)}}),Object.assign({highWaterMark:r?i:void 0},t));function o(s,a){let c,l=null,u=s.desiredSize||null;for(;!(l=a.next(r?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=_t(l.value))&&(u!=null&&r&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()}}function Uj(e,t){let n=null,r=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){return J(this,void 0,void 0,function*(){yield o(s,n||(n=e[Symbol.asyncIterator]()))})},pull(s){return J(this,void 0,void 0,function*(){n?yield o(s,n):s.close()})},cancel(){return J(this,void 0,void 0,function*(){(n?.return&&(yield n.return())||!0)&&(n=null)})}}),Object.assign({highWaterMark:r?i:void 0},t));function o(s,a){return J(this,void 0,void 0,function*(){let c,l=null,u=s.desiredSize||null;for(;!(l=yield a.next(r?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=_t(l.value))&&(u!=null&&r&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()})}}function AB(e){return new A2(e)}var A2=class{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{["readableStrategy"]:n,["writableStrategy"]:r,["queueingStrategy"]:i="count"}=t,o=CD(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Dc(o),this._getSize=i!=="bytes"?IB:MB;let{["highWaterMark"]:s=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n),{["highWaterMark"]:a=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},r);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:c=>{this._maybeFlush(this._builder,this._controller=c)},start:c=>{this._maybeFlush(this._builder,this._controller=c)}},{highWaterMark:s,size:i!=="bytes"?IB:MB}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:c=>this._writeValueAndReturnChunkSize(c)})}_writeValueAndReturnChunkSize(t){let n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-n}_maybeFlush(t,n){n!=null&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(n,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(t,n){this._bufferedSize=0,this._controller=null,n==null?t.close():t.enqueue(n)}},IB=e=>{var t;return(t=e?.length)!==null&&t!==void 0?t:0},MB=e=>{var t;return(t=e?.byteLength)!==null&&t!==void 0?t:0};function R0(e,t){let n=new mo,r=null,i=new ReadableStream({cancel(){return J(this,void 0,void 0,function*(){yield n.close()})},start(a){return J(this,void 0,void 0,function*(){yield s(a,r||(r=yield o()))})},pull(a){return J(this,void 0,void 0,function*(){r?yield s(a,r):a.close()})}});return{writable:new WritableStream(n,Object.assign({highWaterMark:Math.pow(2,14)},e)),readable:i};function o(){return J(this,void 0,void 0,function*(){return yield(yield Lr.from(n)).open(t)})}function s(a,c){return J(this,void 0,void 0,function*(){let l=a.desiredSize,u=null;for(;!(u=yield c.next()).done;)if(a.enqueue(u.value),l!=null&&--l<=0)return;a.close()})}}function $0(e,t){let n=new this(e),r=new ni(n),i=new ReadableStream({cancel(){return J(this,void 0,void 0,function*(){yield r.cancel()})},pull(s){return J(this,void 0,void 0,function*(){yield o(s)})},start(s){return J(this,void 0,void 0,function*(){yield o(s)})}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(n,e),readable:i};function o(s){return J(this,void 0,void 0,function*(){let a=null,c=s.desiredSize;for(;a=yield r.read(c||null);)if(s.enqueue(a),c!=null&&(c-=a.byteLength)<=0)return;s.close()})}}function Yd(e){let t=Lr.from(e);return Tr(t)?t.then(n=>Yd(n)):t.isAsync()?t.readAll().then(n=>new mr(n)):new mr(t.readAll())}var sV=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R_),l2),t2),$_),B_),K_),k_),{compareSchemas:Cc,compareFields:tB,compareTypes:eB});wn.toDOMStream=SB;ve.throughDOM=AB;Lr.throughDOM=R0;Rc.throughDOM=R0;ys.throughDOM=R0;$c.throughDOM=$0;Vd.throughDOM=$0;jd.throughDOM=$0;function P0(e="ws://localhost:3000/"){let t=[],n=!1,r=null,i,o={open(){n=!0,c()},close(){for(n=!1,r=null,i=null;t.length;)t.shift().reject("Socket closed")},error(l){if(r){let{reject:u}=r;r=null,c(),u(l)}else console.error("WebSocket error: ",l)},message({data:l}){if(r){let{query:u,resolve:f,reject:h}=r;if(r=null,c(),typeof l=="string"){let d=JSON.parse(l);d.error?h(d.error):f(d)}else if(u.type==="exec")f();else if(u.type==="arrow")f(Yd(l.arrayBuffer()));else throw new Error(`Unexpected socket data: ${l}`)}else console.log("WebSocket message: ",l)}};function s(){i=new WebSocket(e);for(let l in o)i.addEventListener(l,o[l])}function a(l,u,f){i==null&&s(),t.push({query:l,resolve:u,reject:f}),n&&!r&&c()}function c(){t.length&&(r=t.shift(),i.send(JSON.stringify(r.query)))}return{get connected(){return n},query(l){return new Promise((u,f)=>a(l,u,f))}}}var br=class{constructor(t,n){t&&(this.table=String(t)),n&&(this.column=n)}get columns(){return this.column?[this.column]:[]}toString(){let{table:t,column:n}=this;if(n){let r=n.startsWith("*")?n:`"${n}"`;return`${t?`${TB(t)}.`:""}${r}`}else return t?TB(t):"NULL"}};function TB(e){return e.split(".").map(n=>`"${n}"`).join(".")}function EB(e,t){return e instanceof br&&e.column===t}function jt(e){return typeof e=="string"?Sa(e):e}function Pc(e){return typeof e=="string"?NB(e):e}function NB(e){return new br(e)}function Sa(e,t=null){return arguments.length===1&&(t=e,e=null),new br(e,t)}function xo(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){let t=+e;if(Number.isNaN(t))return"NULL";let n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`MAKE_DATE(${n}, ${r+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}var xs=e=>typeof e?.addEventListener=="function";function U0(e){return e instanceof Ia}var Ia=class{constructor(t,n,r){this._expr=Array.isArray(t)?t:[t],this._deps=n||[],this.annotate(r);let i=this._expr.filter(o=>xs(o));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(o=>{o.addEventListener("value",()=>aV(this,this.map?.get("value")))})):this.addEventListener=void 0}get value(){return this}get columns(){let{_params:t,_deps:n}=this;if(t){let r=new Set(t.flatMap(i=>{let o=i.value?.columns;return Array.isArray(o)?o:[]}));if(r.size){let i=new Set(n);return r.forEach(o=>i.add(o)),Array.from(i)}}return n}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>xs(t)&&!U0(t)?xo(t.value):t).join("")}addEventListener(t,n){let r=this.map||(this.map=new Map);(r.get(t)||(r.set(t,new Set),r.get(t))).add(n)}};function aV(e,t){if(t?.size)return Promise.allSettled(Array.from(t,n=>n(e)))}function T2(e,t){let n=[e[0]],r=new Set,i=t.length;for(let o=0,s=0;o<i;){let a=t[o];xs(a)?n[++s]=a:(Array.isArray(a?.columns)&&a.columns.forEach(l=>r.add(l)),n[s]+=typeof a=="string"?a:xo(a));let c=e[++o];xs(n[s])?n[++s]=c:n[s]+=c}return{spans:n,cols:Array.from(r)}}function q(e,...t){let{spans:n,cols:r}=T2(e,t);return new Ia(n,r)}function E2(e){let t=jt(e);return q`${t} DESC NULLS LAST`.annotate({label:t?.label,desc:!0})}var Cr=e=>({value:e,toString:()=>xo(e)});function Xd(e){e(this.op,this),this.children?.forEach(t=>t.visit(e))}function DB(e,t){let n=t.filter(i=>i!=null).map(jt),r=n.map((i,o)=>o?` ${e} `:"");return n.length===1?r.push(""):n.length>1&&(r[0]="(",r.push(")")),q(r,...n).annotate({op:e,children:n,visit:Xd})}var Hn=(...e)=>DB("AND",e.flat()),Uc=(...e)=>DB("OR",e.flat()),cV=e=>t=>q`(${e} ${jt(t)})`.annotate({op:e,a:t,visit:Xd}),N2=cV("NOT"),OB=e=>t=>q`(${jt(t)} ${e})`.annotate({op:e,a:t,visit:Xd}),zc=OB("IS NULL"),bs=OB("IS NOT NULL"),Ma=e=>(t,n)=>q`(${jt(t)} ${e} ${jt(n)})`.annotate({op:e,a:t,b:n,visit:Xd}),ws=Ma("="),qc=Ma("<>"),vs=Ma("<"),Wd=Ma(">"),_s=Ma("<="),D2=Ma(">="),O2=Ma("IS DISTINCT FROM"),Gd=Ma("IS NOT DISTINCT FROM");function BB(e,t,n,r){t=jt(t);let i=e.startsWith("NOT ")?"NOT ":"";return(n?r?q`${i}(${n[0]} <= ${t} AND ${t} < ${n[1]})`:q`(${t} ${e} ${n[0]} AND ${n[1]})`:q``).annotate({op:e,visit:Xd,field:t,range:n})}var Ae=(e,t,n)=>BB("BETWEEN",e,t,n),B2=(e,t,n)=>BB("NOT BETWEEN",e,t,n);function jc(e,t){return Array.from({length:e},()=>t)}function Sn(e,t){return(...n)=>{let r=n.map(jt),i=t?`::${t}`:"";return(r.length?q([`${e}(`,...jc(r.length-1,", "),`)${i}`],...r):q`${e}()${i}`).annotate({func:e,args:r})}}var L2=Sn("REGEXP_MATCHES"),C2=Sn("CONTAINS"),k2=Sn("PREFIX"),F2=Sn("SUFFIX"),lV=Sn("LOWER"),uV=Sn("UPPER"),fV=Sn("LENGTH"),hV=Sn("ISNAN"),dV=Sn("ISFINITE"),pV=Sn("ISINF");var Hd=class e extends Ia{constructor(t,n,r,i,o="",s="",a=""){let c;if(i&&!(o||s||a))c=i?q`${n} OVER "${i}"`:q`${n} OVER ()`;else{let h=o&&s?" ":"",d=(o||s)&&a?" ":"";c=q`${n} OVER (${i?`"${i}" `:""}${o}${h}${s}${d}${a})`}r&&(c=q`(${c})::${r}`);let{_expr:u,_deps:f}=c;super(u,f),this.window=t,this.func=n,this.type=r,this.name=i,this.group=o,this.order=s,this.frame=a}get basis(){return this.column}get label(){let{func:t}=this;return t.label??t.toString()}over(t){let{window:n,func:r,type:i,group:o,order:s,frame:a}=this;return new e(n,r,i,t,o,s,a)}partitionby(...t){let n=t.flat().filter(u=>u).map(jt),r=q(["PARTITION BY ",jc(n.length-1,", "),""],...n),{window:i,func:o,type:s,name:a,order:c,frame:l}=this;return new e(i,o,s,a,r,c,l)}orderby(...t){let n=t.flat().filter(u=>u).map(jt),r=q(["ORDER BY ",jc(n.length-1,", "),""],...n),{window:i,func:o,type:s,name:a,group:c,frame:l}=this;return new e(i,o,s,a,c,r,l)}rows(t){let n=LB("ROWS",t),{window:r,func:i,type:o,name:s,group:a,order:c}=this;return new e(r,i,o,s,a,c,n)}range(t){let n=LB("RANGE",t),{window:r,func:i,type:o,name:s,group:a,order:c}=this;return new e(r,i,o,s,a,c,n)}};function LB(e,t){if(xs(t)){let n=q`${t}`;return n.toString=()=>`${e} ${CB(t.value)}`,n}return`${e} ${CB(t)}`}function CB(e){let[t,n]=e,r=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=n===0?"CURRENT ROW":Number.isFinite(n)?`${Math.abs(n)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${r} AND ${i}`}function $i(e,t){return(...n)=>{let r=Sn(e)(...n);return new Hd(e,r,t)}}var R2=$i("ROW_NUMBER","INTEGER"),$2=$i("RANK","INTEGER"),P2=$i("DENSE_RANK","INTEGER"),U2=$i("PERCENT_RANK"),z2=$i("CUME_DIST"),q2=$i("NTILE"),j2=$i("LAG"),V2=$i("LEAD"),Y2=$i("FIRST_VALUE"),X2=$i("LAST_VALUE"),W2=$i("NTH_VALUE");function H2(e,...t){return q(e,...t).annotate({aggregate:!0})}var G2=class e extends Ia{constructor(t,n,r,i,o){n=(n||[]).map(jt);let{strings:s,exprs:a}=mV(t,n,r,i,o),{spans:c,cols:l}=T2(s,a);super(c,l),this.aggregate=t,this.args=n,this.type=r,this.isDistinct=i,this.filter=o}get basis(){return this.column}get label(){let{aggregate:t,args:n,isDistinct:r}=this,i=r?"DISTINCT"+(n.length?" ":""):"",o=n.length?`(${i}${n.map(yV).join(", ")})`:"";return`${t.toLowerCase()}${o}`}distinct(){let{aggregate:t,args:n,type:r,filter:i}=this;return new e(t,n,r,!0,i)}where(t){let{aggregate:n,args:r,type:i,isDistinct:o}=this;return new e(n,r,i,o,t)}window(){let{aggregate:t,args:n,type:r,isDistinct:i}=this,o=new e(t,n,null,i);return new Hd(t,o,r)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t){return this.window().rows(t)}range(t){return this.window().range(t)}};function mV(e,t,n,r,i){let o=`)${n?`::${n}`:""}`,s=[`${e}(${r?"DISTINCT ":""}`],a=[];return t.length?(s=s.concat([...jc(t.length-1,", "),`${o}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):s[0]+="*"+o,{exprs:a,strings:s}}function yV(e){let t=xo(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function Jt(e,t){return(...n)=>new G2(e,n,t)}var kr=Jt("COUNT","INTEGER"),Z2=Jt("AVG"),gV=Jt("AVG"),J2=Jt("MAD"),oi=Jt("MAX"),si=Jt("MIN"),Fr=Jt("SUM","DOUBLE"),Q2=Jt("PRODUCT"),K2=Jt("MEDIAN"),tS=Jt("QUANTILE"),eS=Jt("MODE"),nS=Jt("VARIANCE"),rS=Jt("STDDEV"),iS=Jt("SKEWNESS"),oS=Jt("KURTOSIS"),sS=Jt("ENTROPY"),aS=Jt("VAR_POP"),cS=Jt("STDDEV_POP"),lS=Jt("CORR"),uS=Jt("COVAR_POP"),fS=Jt("REGR_INTERCEPT"),hS=Jt("REGR_SLOPE"),dS=Jt("REGR_COUNT"),xV=Jt("REGR_R2"),pS=Jt("REGR_SYY"),mS=Jt("REGR_SXX"),bV=Jt("REGR_SXY"),yS=Jt("REGR_AVGX"),wV=Jt("REGR_AVGY"),gS=Jt("FIRST"),xS=Jt("LAST"),Su=Jt("ARG_MIN"),Iu=Jt("ARG_MAX"),bS=Jt("STRING_AGG"),wS=Jt("ARRAY_AGG");function Zd(e,t){let n=jt(e),r=q`CAST(${n} AS ${t})`;return Object.defineProperty(r,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(r,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),r}var Mu=e=>Zd(e,"DOUBLE"),vS=e=>Zd(e,"INTEGER");var _S=e=>q`epoch_ms(${jt(e)})`,SS=e=>{let t=jt(e);return q`MAKE_DATE(2012, MONTH(${t}), 1)`.annotate({label:"month"})},IS=e=>{let t=jt(e);return q`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})},MS=e=>{let t=jt(e);return q`MAKE_DATE(2012, 1, DAY(${t}))`.annotate({label:"date"})};var Jd=Sn("ST_AsGeoJSON"),kB=Sn("ST_X"),FB=Sn("ST_Y"),Qd=Sn("ST_CENTROID"),AS=e=>kB(Qd(e)),TS=e=>FB(Qd(e));var dt=class e{static select(...t){return new e().select(...t)}static from(...t){return new e().from(...t)}static with(...t){return new e().with(...t)}static union(...t){return new Vc("UNION",t.flat())}static unionAll(...t){return new Vc("UNION ALL",t.flat())}static intersect(...t){return new Vc("INTERSECT",t.flat())}static except(...t){return new Vc("EXCEPT",t.flat())}static describe(t){let n=t.clone(),{clone:r,toString:i}=n;return Object.assign(n,{describe:!0,clone:()=>e.describe(r.call(n)),toString:()=>`DESCRIBE ${i.call(n)}`})}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]},this.cteFor=null}clone(){let t=new e;return t.query={...this.query},t}with(...t){let{query:n}=this;if(t.length===0)return n.with;{let r=[],i=(o,s)=>{let a=s.clone();a.cteFor=this,r.push({as:o,query:a})};return t.flat().forEach(o=>{if(o!=null)if(o.as&&o.query)i(o.as,o.query);else for(let s in o)i(s,o[s])}),n.with=n.with.concat(r),this}}select(...t){let{query:n}=this;if(t.length===0)return n.select;{let r=[];for(let i of t.flat())if(i!=null)if(typeof i=="string")r.push({as:i,expr:jt(i)});else if(i instanceof br)r.push({as:i.column,expr:i});else if(Array.isArray(i))r.push({as:i[0],expr:i[1]});else for(let o in i)r.push({as:z0(o),expr:jt(i[o])});return n.select=n.select.concat(r),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){let{query:n}=this;if(t.length===0)return n.from;{let r=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")r.push({as:i,from:Pc(i)});else if(i instanceof br)r.push({as:i.table,from:i});else if(Kd(i)||U0(i))r.push({from:i});else if(Array.isArray(i))r.push({as:z0(i[0]),from:Pc(i[1])});else for(let o in i)r.push({as:z0(o),from:Pc(i[o])})}),n.from=n.from.concat(r),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,n){let{query:r}=this;if(arguments.length===0)return r.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:n}:{rows:Math.round(t),method:n}),r.sample=i,this}}where(...t){let{query:n}=this;return t.length===0?n.where:(n.where=n.where.concat(t.flat().filter(r=>r)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){let{query:n}=this;return t.length===0?n.groupby:(n.groupby=n.groupby.concat(t.flat().filter(r=>r).map(jt)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){let{query:n}=this;return t.length===0?n.having:(n.having=n.having.concat(t.flat().filter(r=>r)),this)}window(...t){let{query:n}=this;if(t.length===0)return n.window;{let r=[];return t.flat().forEach(i=>{if(i!=null)for(let o in i)r.push({as:z0(o),expr:i[o]})}),n.window=n.window.concat(r),this}}qualify(...t){let{query:n}=this;return t.length===0?n.qualify:(n.qualify=n.qualify.concat(t.flat().filter(r=>r)),this)}orderby(...t){let{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(jt)),this)}limit(t){let{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){let{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){let{query:t,cteFor:n}=this,i=(n?.query||t).with?.reduce((s,{as:a,query:c})=>(s[a]=c,s),{}),o=[];return t.from.forEach(({from:s})=>{if(Kd(s))o.push(s);else if(i[s.table]){let a=i[s.table];o.push(a)}}),o}toString(){let{with:t,select:n,distinct:r,from:i,sample:o,where:s,groupby:a,having:c,window:l,qualify:u,orderby:f,limit:h,offset:d}=this.query,p=[];if(t.length){let y=t.map(({as:g,query:x})=>`"${g}" AS (${x})`);p.push(`WITH ${y.join(", ")}`)}let m=n.map(({as:y,expr:g})=>EB(g,y)&&!g.table?`${g}`:`${g} AS "${y}"`);if(p.push(`SELECT${r?" DISTINCT":""} ${m.join(", ")}`),i.length){let y=i.map(({as:g,from:x})=>{let b=Kd(x)?`(${x})`:`${x}`;return!g||g===x.table?b:`${b} AS "${g}"`});p.push(`FROM ${y.join(", ")}`)}if(s.length){let y=s.map(String).filter(g=>g).join(" AND ");y&&p.push(`WHERE ${y}`)}if(o){let{rows:y,perc:g,method:x,seed:b}=o,w=y?`${y} ROWS`:`${g} PERCENT`,_=x?` (${x}${b!=null?`, ${b}`:""})`:"";p.push(`USING SAMPLE ${w}${_}`)}if(a.length&&p.push(`GROUP BY ${a.join(", ")}`),c.length){let y=c.map(String).filter(g=>g).join(" AND ");y&&p.push(`HAVING ${y}`)}if(l.length){let y=l.map(({as:g,expr:x})=>`"${g}" AS (${x})`);p.push(`WINDOW ${y.join(", ")}`)}if(u.length){let y=u.map(String).filter(g=>g).join(" AND ");y&&p.push(`QUALIFY ${y}`)}return f.length&&p.push(`ORDER BY ${f.join(", ")}`),Number.isFinite(h)&&p.push(`LIMIT ${h}`),Number.isFinite(d)&&p.push(`OFFSET ${d}`),p.join(" ")}},Vc=class e{constructor(t,n){this.op=t,this.queries=n.map(r=>r.clone()),this.query={orderby:[]},this.cteFor=null}clone(){let t=new e(this.op,this.queries);return t.query={...this.query},t}orderby(...t){let{query:n}=this;return t.length===0?n.orderby:(n.orderby=n.orderby.concat(t.flat().filter(r=>r).map(jt)),this)}limit(t){let{query:n}=this;return arguments.length===0?n.limit:(n.limit=Number.isFinite(t)?t:void 0,this)}offset(t){let{query:n}=this;return arguments.length===0?n.offset:(n.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){let{queries:t,cteFor:n}=this;return n&&t.forEach(r=>r.cteFor=n),t}toString(){let{op:t,queries:n,query:{orderby:r,limit:i,offset:o}}=this,s=[n.join(` ${t} `)];return r.length&&s.push(`ORDER BY ${r.join(", ")}`),Number.isFinite(i)&&s.push(`LIMIT ${i}`),Number.isFinite(o)&&s.push(`OFFSET ${o}`),s.join(" ")}};function Kd(e){return e instanceof dt||e instanceof Vc}function ES(e){return Kd(e)&&e.describe}function z0(e){return vV(e)?e.slice(1,-1):e}function vV(e){return e[0]==='"'&&e[e.length-1]==='"'}var q0=e=>e;function _V(){return{apply:q0,invert:q0,sqlApply:jt,sqlInvert:q0}}function SV({base:e=null}={}){if(e==null||e===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:t=>q`LN(${jt(t)})`,sqlInvert:t=>q`EXP(${t})`};if(e===10)return{apply:Math.log10,invert:t=>Math.pow(10,t),sqlApply:t=>q`LOG(${jt(t)})`,sqlInvert:t=>q`POW(10, ${t})`};{let t=+e;return{apply:n=>Math.log(n)/Math.log(t),invert:n=>Math.pow(t,n),sqlApply:n=>q`LN(${jt(n)}) / LN(${t})`,sqlInvert:n=>q`POW(${t}, ${n})`}}}function IV({constant:e=1}={}){let t=+e;return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n)),invert:n=>Math.sign(n)*Math.exp(Math.abs(n)-t),sqlApply:n=>(n=jt(n),q`SIGN(${n}) * LN(${t} + ABS(${n}))`),sqlInvert:n=>q`SIGN(${n}) * (EXP(ABS(${n})) - ${t})`}}function MV(){return{apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>Math.sign(e)*e*e,sqlApply:e=>(e=jt(e),q`SIGN(${e}) * SQRT(ABS(${e}))`),sqlInvert:e=>q`SIGN(${e}) * (${e}) ** 2`}}function AV({exponent:e=1}={}){let t=+e;return{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),t),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/t),sqlApply:n=>(n=jt(n),q`SIGN(${n}) * POW(ABS(${n}), ${t})`),sqlInvert:n=>q`SIGN(${n}) * POW(ABS(${n}), 1/${t})`}}function RB(){return{apply:e=>+e,invert:e=>new Date(e),sqlApply:e=>e instanceof Date?+e:_S(jt(e)),sqlInvert:q0}}var TV={linear:_V,log:SV,symlog:IV,sqrt:MV,pow:AV,time:RB,utc:RB};function tp(e){let t=TV[e.type];return t?{...e,...t(e)}:null}function bo(e,t,{replace:n=!1,temp:r=!0,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function ep(e){return`INSTALL ${e}; LOAD ${e}`}function $B(e,{columns:t=Object.keys(e?.[0]||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,o)=>(i[o]=o,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");let r=[];for(let i of e){let o=n.map(s=>`${xo(i[s])} AS "${t[s]}"`);r.push(`(SELECT ${o.join(", ")})`)}return r.join(" UNION ALL ")}function j0(e,t,n,r={},i={}){let{select:o=["*"],where:s,view:a,temp:c,replace:l,...u}=r,f=EV({...i,...u}),h=`${e}('${n}'${f?", "+f:""})`,d=s?` WHERE ${s}`:"",p=`SELECT ${o.join(", ")} FROM ${h}${d}`;return bo(t,p,{view:a,temp:c,replace:l})}function DS(e,t,n){return j0("read_csv",e,t,n,{auto_detect:!0,sample_size:-1})}function OS(e,t,n){return j0("read_json",e,t,n,{auto_detect:!0,json_format:"auto"})}function BS(e,t,n){return j0("read_parquet",e,t,n)}function LS(e,t,n={}){let{options:r,...i}=n;if(r){let o=Array.isArray(r)?r.join(", "):typeof r=="string"?r:Object.entries(r).map(([s,a])=>`${s}=${a}`).join(", ");Object.assign(i,{open_options:o.toUpperCase()})}return j0("st_read",e,t,i)}function CS(e,t,n={}){let{select:r=["*"],...i}=n,o=$B(t),s=r.length===1&&r[0]==="*"?o:`SELECT ${r} FROM ${o}`;return bo(e,s,i)}function EV(e){return Object.entries(e).map(([t,n])=>`${t}=${NS(n)}`).join(", ")}function NS(e){switch(typeof e){case"boolean":return String(e);case"string":return`'${e}'`;case"undefined":case"object":return e==null?"NULL":Array.isArray(e)?"["+e.map(t=>NS(t)).join(", ")+"]":"{"+Object.entries(e).map(([t,n])=>`'${t}': ${NS(n)}`).join(", ")+"}";default:return e}}function UB(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){let i=e.charCodeAt(n),o=i&65280;o&&(t=PB(t^o>>8)),t=PB(t^i&255)}return NV(t)}function PB(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function NV(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}var V0=class{constructor(t,{selection:n,temp:r=!0}){this.mc=t,this.selection=n,this.temp=r,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,n){if(this.clients!==t){let l=Array.from(t,qB),u=l[0]?.from;this.enabled=l.every(f=>f&&f.from===u),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;n=n||this.selection.active;let{source:r}=n;if(r&&r===this.activeView?.source)return!0;if(this.clear(),!r)return!1;let i=this.activeView=DV(n);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");let o=this.selection.remove(r),s=this.indices=new Map,{mc:a,temp:c}=this;for(let l of t){if(o.skip(l,n))continue;let u=qB(l),f=l.query(o.predicate(l)).select({...i.columns,...u.count}).groupby(Object.keys(i.columns)),[h]=f.subqueries;if(h){let x=Object.values(i.columns).map(b=>b.columns[0]);BV(h,x)}let d=f.orderby();f.query.orderby=[];let p=f.toString(),y=`cube_index_${(UB(p)>>>0).toString(16)}`,g=a.exec(bo(y,p,{temp:c}));s.set(l,{table:y,result:g,order:d,...u})}}async update(){let{clients:t,selection:n,activeView:r}=this,i=r.predicate(n.active.predicate);return Promise.all(Array.from(t).map(o=>this.updateClient(o,i)))}async updateClient(t,n){let r=this.indices.get(t);if(!r)return;n||(n=this.activeView.predicate(this.selection.active.predicate));let{table:i,dims:o,aggr:s,order:a=[]}=r,c=dt.select(o,s).from(i).groupby(o).where(n).orderby(a);return this.mc.updateClient(t,c)}};function DV(e){let{source:t,schema:n}=e,r=e.predicate?.columns;if(!n||!r)return null;let{type:i,scales:o,pixelSize:s=1}=n,a;if(i==="interval"&&o){let c=o.map(l=>OV(l,s));if(c.some(l=>l==null))return null;c.length===1?(a=l=>l?Ae("active0",l.range.map(c[0])):[],r={active0:c[0](e.predicate.field)}):(a=l=>l?Hn(l.children.map(({range:u},f)=>Ae(`active${f}`,u.map(c[f])))):[],r=Object.fromEntries(e.predicate.children.map((l,u)=>[`active${u}`,c[u](l.field)])))}else if(i==="point")a=c=>c,r=Object.fromEntries(r.map(c=>[c.toString(),c]));else return null;return{source:t,columns:r,predicate:a}}function OV(e,t){let{apply:n,sqlApply:r}=tp(e);if(n){let{domain:i,range:o}=e,s=n(Math.min(...i)),a=n(Math.max(...i)),c=Math.abs(o[1]-o[0])/(a-s)/t,l=t===1?"":`${t}::INTEGER * `;return u=>q`${l}FLOOR(${c}::DOUBLE * (${r(u)} - ${s}::DOUBLE))::INTEGER`}}var zB={from:NaN};function qB(e){if(!e.filterIndexable)return zB;let t=e.query(),n=kS(t);if(!n||!t.groupby)return zB;let r=new Set(t.groupby().map(a=>a.column)),i=[],o=[],s;for(let{as:a,expr:{aggregate:c}}of t.select())switch(c?.toUpperCase?.()){case"COUNT":case"SUM":i.push({[a]:q`SUM("${a}")::DOUBLE`});break;case"AVG":s="_count_",i.push({[a]:q`(SUM("${a}" * ${s}) / SUM(${s}))::DOUBLE`});break;case"MAX":i.push({[a]:q`MAX("${a}")`});break;case"MIN":i.push({[a]:q`MIN("${a}")`});break;default:if(r.has(a))o.push(a);else return null}return{aggr:i,dims:o,count:s?{[s]:q`COUNT(*)`}:{},from:n}}function kS(e){let t=e.subqueries;if(e.select){let r=e.from();if(!r.length)return;if(t.length===0)return r[0].from.table}let n=kS(t[0]);for(let r=1;r<t.length;++r){let i=kS(t[r]);if(i!==void 0&&i!==n)return NaN}return n}function BV(e,t){let n=new Set,r=i=>{n.has(i)||(n.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(r))};r(e)}var Y0=class{constructor(t,n,r=!0){this.mc=t,this.selection=n,this.clients=new Set,this.indexer=r?new V0(this.mc,{...r,selection:n}):null;let{value:i,activate:o}=this.handlers={value:()=>this.update(),activate:s=>this.indexer?.index(this.clients,s)};n.addEventListener("value",i),n.addEventListener("activate",o)}finalize(){let{value:t,activate:n}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",n)}reset(){this.indexer?.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){let{mc:t,indexer:n,clients:r,selection:i}=this;return n?.index(r)?n.update():LV(t,r,i)}};function LV(e,t,n){return Promise.all(Array.from(t).map(r=>{let i=n.predicate(r);if(i!=null)return e.updateClient(r,r.query(i))}))}function X0(){let e,t,n=new Promise((r,i)=>{e=r,t=i});return Object.assign(n,{fulfill:r=>(e(r),n),reject:r=>(t(r),n)})}function CV(e){return(typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:setTimeout)(e)}function jB(e,t,n){let r=[],i=0;function o(){let s=kV(r,t);r=[],i=0;for(let a of s)RV(a,e,n),UV(a,t)}return{add(s,a){s.request.type==="arrow"?(i=i||CV(()=>o()),r.push({entry:s,priority:a,index:r.length})):e(s,a)}}}function kV(e,t){let n=[],r=new Map;for(let i of e){let{entry:{request:o}}=i,s=FV(o.query,t);if(!r.has(s)){let a=[];n.push(a),r.set(s,a)}r.get(s).push(i)}return n}function FV(e,t){let n=`${e}`;if(e instanceof dt&&!t.get(n)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return n;let r=e.clone().$select("*"),i=e.groupby();if(i.length){let o={};e.select().forEach(({as:s,expr:a})=>o[s]=a),r.$groupby(i.map(s=>s instanceof br&&o[s.column]||s))}return`${r}`}else return n}function RV(e,t,n){if($V(e))t({request:{type:"arrow",cache:!1,record:!1,query:e.query=PV(e,n)},result:e.result=X0()});else for(let{entry:r,priority:i}of e)t(r,i)}function $V(e){if(e.length>1){let t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function PV(e,t){let n=e.maps=[],r=new Map;for(let s of e){let{query:a}=s.entry.request,c=[];n.push(c);for(let{as:l,expr:u}of a.select()){let f=`${u}`;r.has(f)||r.set(f,[`col${r.size}`,u]);let[h]=r.get(f);c.push([h,l])}t(`${a}`)}let i=e[0].entry.request.query.clone(),o=i.groupby();if(o.length){let s={};e.maps[0].forEach(([a,c])=>s[c]=a),i.$groupby(o.map(a=>a instanceof br&&s[a.column]||a))}return i.$select(Array.from(r.values()))}async function UV(e,t){let{maps:n,query:r,result:i}=e;if(!n)return;let o;try{o=await i}catch(a){for(let{entry:c}of e)c.result.reject(a);return}let s=ES(r);e.forEach(({entry:a},c)=>{let{request:l,result:u}=a,f=n[c],h=s&&f?qV(o,f):f?zV(o,f):o;l.cache&&t.set(String(l.query),h),u.fulfill(h)})}function zV(e,t){let n={};for(let[r,i]of t)n[i]=e.getChild(r);return new e.constructor(n)}function qV(e,t){let n=new Map(t),r=[];for(let i of e)n.has(i.column_name)&&r.push({...i,column_name:n.get(i.column_name)});return r}var jV=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,VB=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function YB({max:e=1e3,ttl:t=3*60*60*1e3}={}){let n=new Map;function r(){let i=performance.now()-t,o=null,s=1/0;for(let[a,c]of n){let{last:l}=c;l<s&&(o=a,s=l),i>l&&n.delete(a)}o&&n.delete(o)}return{get(i){let o=n.get(i);if(o)return o.last=performance.now(),o.value},set(i,o){return n.set(i,{last:performance.now(),value:o}),n.size>e&&jV(r),o},clear(){n=new Map}}}function XB(e){let t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(n=>!n.head)},insert(n,r){let i=t[r];if(!i)throw new Error(`Invalid queue priority rank: ${r}`);let o={item:n,next:null};i.head===null?i.head=i.tail=o:i.tail=i.tail.next=o},remove(n){for(let r of t){let{head:i,tail:o}=r;for(let s=null,a=i;a;s=a,a=a.next)n(a.item)&&(a===i?i=a.next:s.next=a.next,a===o&&(o=s||i));r.head=i,r.tail=o}},next(){for(let n of t){let{head:r}=n;if(r!==null)return n.head=r.next,n.tail===r&&(n.tail=null),r.item}}}}var wo={High:0,Normal:1,Low:2};function WB(){let e=XB(3),t,n,r,i=[],o=null,s;function a(){if(o||e.isEmpty())return;let{request:f,result:h}=e.next();o=u(f,h),o.finally(()=>{o=null,a()})}function c(f,h=wo.Normal){e.insert(f,h),a()}function l(f){i.length&&f&&i.forEach(h=>h.add(f))}async function u(f,h){try{let{query:d,type:p,cache:m=!1,record:y=!0,options:g}=f,x=d?`${d}`:null;if(y&&l(x),m){let _=n.get(x);if(_){r.debug("Cache"),h.fulfill(_);return}}let b=performance.now(),w=await t.query({type:p,sql:x,...g});m&&n.set(x,w),r.debug(`Request: ${(performance.now()-b).toFixed(1)}`),h.fulfill(w)}catch(d){h.reject(d)}}return{cache(f){return f!==void 0?n=f===!0?YB():f||VB():n},logger(f){return f?r=f:r},connector(f){return f?t=f:t},consolidate(f){f&&!s?s=jB(c,n,l):!f&&s&&(s=null)},request(f,h=wo.Normal){let d=X0(),p={request:f,result:d};return s?s.add(p,h):c(p,h),d},cancel(f){let h=new Set(f);e.remove(({result:d})=>h.has(d))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[],h={add(d){f.push(d)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(d=>d!==h),f}};return i.push(h),h}}}function FS(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIMESTAMP WITH TIME ZONE":case"TIME":case"TIMESTAMP_NS":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"ARRAY":case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":case"GEOMETRY":return"object";default:if(e.startsWith("DECIMAL"))return"number";if(e.startsWith("STRUCT")||e.startsWith("MAP"))return"object";if(e.endsWith("]"))return"array";throw new Error(`Unsupported type: ${e}`)}}function np(e){return typeof e?.getChild=="function"}function RS(e){if(H.isTimestamp(e))return t=>t==null?t:new Date(t);if(H.isInt(e)&&e.bitWidth>=64)return t=>t==null?t:Number(t);if(H.isDecimal(e)){let t=1/Math.pow(10,e.scale);return n=>n==null?n:HB(n,t)}return t=>t}function $S(e){let{type:t}=e;if(H.isTimestamp(t)){let n=e.length,r=new Array(n);for(let i=0;i<n;++i){let o=e.get(i);r[i]=o==null?null:new Date(o)}return r}if(H.isInt(t)&&t.bitWidth>=64){let n=e.length,r=new Float64Array(n);for(let i=0;i<n;++i){let o=e.get(i);r[i]=o==null?NaN:Number(o)}return r}if(H.isDecimal(t)){let n=1/Math.pow(10,t.scale),r=e.length,i=new Float64Array(r);for(let o=0;o<r;++o){let s=e.get(o);i[o]=s==null?NaN:HB(s,n)}return i}return e.toArray()}var GB=Array.from({length:8},(e,t)=>Math.pow(2,t*32));function HB(e,t){let n=e.length,r=0;if(e.signed&&(e[n-1]|0)<0){for(let i=0;i<n;++i)r+=~e[i]*GB[i];r=-(r+1)}else for(let i=0;i<n;++i)r+=e[i]*GB[i];return r*t}var VV="count",YV="nulls",XV="max",WV="min",GV="distinct";var HV={[VV]:kr,[GV]:e=>kr(e).distinct(),[XV]:oi,[WV]:si,[YV]:e=>kr().where(zc(e))};function ZV(e,t,n){return dt.from(e).select(Array.from(n,r=>[r,HV[r](t)]))}async function ZB(e,t){return t.length===1&&`${t[0].column}`=="*"?QV(e,t[0].table):(await Promise.all(t.map(n=>JV(e,n)))).filter(n=>n)}async function JV(e,{table:t,column:n,stats:r}){let i=dt.from({source:t}).select({column:n}).groupby(n.aggregate?q`ALL`:[]),[o]=Array.from(await e.query(dt.describe(i))),s={table:t,column:`${n}`,sqlType:o.column_type,type:FS(o.column_type),nullable:o.null==="YES"};if(!(r?.length||r?.size))return s;let a=await e.query(ZV(t,n,r),{persist:!0});for(let c=0;c<a.numCols;++c){let{name:l}=a.schema.fields[c],u=a.getChildAt(c),f=RS(u.type);s[l]=f(u.get(0))}return s}async function QV(e,t){let n=await e.query(`DESCRIBE ${Pc(t)}`);return Array.from(n).map(r=>({table:t,column:r.column_name,sqlType:r.column_type,type:FS(r.column_type),nullable:r.null==="YES"}))}function JB(){return{debug(){},info(){},log(){},warn(){},error(){}}}var W0;function ai(e){return e?W0=e:W0==null&&(W0=new rp),W0}var rp=class{constructor(t=P0(),n={}){let{logger:r=console,manager:i=WB()}=n;this.manager=i,this.logger(r),this.configure(n),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||JB(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:n=!0,indexes:r=!0}={}){this.manager.cache(t),this.manager.consolidate(n),this.indexes=r}clear({clients:t=!0,cache:n=!0}={}){this.manager.clear(),t&&(this.clients?.forEach(r=>this.disconnect(r)),this.filterGroups?.forEach(r=>r.finalize()),this.clients=new Set,this.filterGroups=new Map),n&&this.manager.cache().clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:n=wo.Normal}={}){return t=Array.isArray(t)?t.join(`;
`):t,this.manager.request({type:"exec",query:t},n)}query(t,{type:n="arrow",cache:r=!0,priority:i=wo.Normal,...o}={}){return this.manager.request({type:n,query:t,cache:r,options:o},i)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:wo.Low})}createBundle(t,n,r=wo.Low){let i={name:t,queries:n};return this.manager.request({type:"create-bundle",options:i},r)}loadBundle(t,n=wo.High){let r={name:t};return this.manager.request({type:"load-bundle",options:r},n)}updateClient(t,n,r=wo.Normal){return t.queryPending(),this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,n){return this.filterGroups.get(t.filterBy)?.reset(),n?this.updateClient(t,n):t.update()}async connect(t){let{clients:n,filterGroups:r,indexes:i}=this;if(n.has(t))throw new Error("Client already connected.");n.add(t),t.coordinator=this;let o=t.fields();o?.length&&t.fieldInfo(await ZB(this,o));let s=t.filterBy;if(s)if(r.has(s))r.get(s).add(t);else{let a=new Y0(this,s,i);r.set(s,a.add(t))}t.requestQuery()}disconnect(t){let{clients:n,filterGroups:r}=this;n.has(t)&&(n.delete(t),r.get(t.filterBy)?.remove(t),t.coordinator=null)}};var G0=class{constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new PS}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){let r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(t,n){return null}cancel(t){this._callbacks.get(t)?.queue.clear()}emit(t,n){let r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{let i=this.willEmit(t,n),{callbacks:o,queue:s}=r;if(o?.size){let a=Promise.allSettled(Array.from(o,c=>c(i))).then(()=>{r.pending=null,s.isEmpty()||this.emit(t,s.dequeue())});r.pending=a}}}},PS=class{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){let r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){let{next:t}=this;return this.next=t?.next,t?.value}};function ip(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?KV(e,t):!0}function KV(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function wr(e){return e instanceof Aa}var Aa=class e extends G0{constructor(t){super(),this._value=t}static value(t){return new e(t)}static array(t){if(t.some(n=>wr(n))){let n=new e,r=()=>{n.update(t.map(i=>wr(i)?i.value:i))};return r(),t.forEach(i=>wr(i)?i.addEventListener("value",r):0),n}return new e(t)}get value(){return this._value}update(t,{force:n}={}){return ip(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}};function ci(e){return e instanceof Ss}var Ss=class e extends Aa{static intersect({cross:t=!1}={}){return new e(new Yc({cross:t}))}static union({cross:t=!1}={}){return new e(new Yc({cross:t,union:!0}))}static single({cross:t=!1}={}){return new e(new Yc({cross:t,single:!0}))}static crossfilter(){return new e(new Yc({cross:!0}))}constructor(t=new Yc){super([]),this._resolved=this._value,this._resolver=t}clone(){let t=new e(this._resolver);return t._value=t._resolved=this._value,t}remove(t){let n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get active(){return this.clauses.active}get value(){return this.active?.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){let{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}},Yc=class{constructor({union:t,cross:n,single:r}={}){this.union=!!t,this.cross=!!n,this.single=!!r}resolve(t,n,r=!1){let{source:i,predicate:o}=n,s=t.filter(c=>i!==c.source),a=this.single?[]:s;return this.single&&r&&s.forEach(c=>c.source?.reset?.()),o&&a.push(n),a}skip(t,n){return this.cross&&n?.clients?.has(t)}predicate(t,n,r){let{union:i}=this;if(this.skip(r,n))return;let o=t.filter(s=>!this.skip(r,s)).map(s=>s.predicate);return i&&o.length>1?Uc(o):o}queueFilter(t){if(this.cross){let n=t.active?.source;return r=>r.active?.source!==n}return null}};function US(){let e=new Set,t,n=new Promise(r=>t=r);return{pending(r){e.add(r)},ready(r){return e.delete(r),e.size===0},resolve(){n=new Promise(r=>{t(),t=r})},get promise(){return n}}}var bD={};Mr(bD,{Fixed:()=>vo,Param:()=>Aa,Query:()=>dt,Selection:()=>Ss,agg:()=>H2,align:()=>d6,and:()=>Hn,area:()=>W8,areaX:()=>G8,areaY:()=>H8,argmax:()=>Iu,argmin:()=>Su,arrayAgg:()=>wS,arrow:()=>UN,aspectRatio:()=>p6,avg:()=>Z2,axis:()=>m6,axisFx:()=>YN,axisFy:()=>XN,axisX:()=>jN,axisY:()=>VN,barX:()=>K8,barY:()=>tN,bin:()=>zv,cast:()=>Zd,castDouble:()=>Mu,castInteger:()=>vS,cell:()=>eN,cellX:()=>nN,cellY:()=>rN,centroid:()=>Qd,centroidX:()=>AS,centroidY:()=>TS,circle:()=>uN,colorBase:()=>KE,colorClamp:()=>qE,colorConstant:()=>e8,colorDomain:()=>UE,colorExponent:()=>t8,colorInterpolate:()=>XE,colorLabel:()=>HE,colorLegend:()=>yD,colorN:()=>jE,colorNice:()=>VE,colorPivot:()=>WE,colorRange:()=>zE,colorReverse:()=>ZE,colorScale:()=>PE,colorScheme:()=>YE,colorSymmetric:()=>GE,colorTickFormat:()=>QE,colorZero:()=>JE,column:()=>Sa,contour:()=>EN,coordinator:()=>ai,corr:()=>lS,count:()=>kr,covarPop:()=>uS,create:()=>bo,cume_dist:()=>z2,dateDay:()=>MS,dateMonth:()=>SS,dateMonthDay:()=>IS,delaunayLink:()=>RN,delaunayMesh:()=>$N,denseLine:()=>TN,dense_rank:()=>P2,density:()=>AN,densityX:()=>IN,densityY:()=>MN,dot:()=>aN,dotX:()=>cN,dotY:()=>lN,entropy:()=>sS,eq:()=>ws,facetGrid:()=>R4,facetLabel:()=>$4,facetMargin:()=>B4,facetMarginBottom:()=>C4,facetMarginLeft:()=>k4,facetMarginRight:()=>F4,facetMarginTop:()=>L4,first:()=>gS,first_value:()=>Y2,frame:()=>qN,from:()=>vU,fxAlign:()=>X4,fxAriaDescription:()=>uE,fxAriaLabel:()=>lE,fxAxis:()=>Z4,fxDomain:()=>P4,fxFontVariant:()=>cE,fxGrid:()=>rE,fxInset:()=>q4,fxInsetLeft:()=>j4,fxInsetRight:()=>V4,fxLabel:()=>oE,fxLabelAnchor:()=>sE,fxLabelOffset:()=>aE,fxLine:()=>iE,fxNice:()=>z4,fxPadding:()=>W4,fxPaddingInner:()=>G4,fxPaddingOuter:()=>H4,fxRange:()=>U4,fxReverse:()=>fE,fxRound:()=>Y4,fxTickFormat:()=>eE,fxTickPadding:()=>tE,fxTickRotate:()=>nE,fxTickSize:()=>Q4,fxTickSpacing:()=>K4,fxTicks:()=>J4,fyAlign:()=>bE,fyAriaDescription:()=>RE,fyAriaLabel:()=>FE,fyAxis:()=>SE,fyDomain:()=>hE,fyFontVariant:()=>kE,fyGrid:()=>DE,fyInset:()=>mE,fyInsetBottom:()=>gE,fyInsetTop:()=>yE,fyLabel:()=>BE,fyLabelAnchor:()=>LE,fyLabelOffset:()=>CE,fyLine:()=>OE,fyNice:()=>pE,fyPadding:()=>wE,fyPaddingInner:()=>vE,fyPaddingOuter:()=>_E,fyRange:()=>dE,fyReverse:()=>$E,fyRound:()=>xE,fyTickFormat:()=>EE,fyTickPadding:()=>TE,fyTickRotate:()=>NE,fyTickSize:()=>ME,fyTickSpacing:()=>AE,fyTicks:()=>IE,geo:()=>JN,geojson:()=>Jd,graticule:()=>KN,grid:()=>g6,gridFx:()=>HN,gridFy:()=>ZN,gridX:()=>WN,gridY:()=>GN,gt:()=>Wd,gte:()=>D2,hconcat:()=>mU,heatmap:()=>NN,height:()=>c6,hexagon:()=>fN,hexbin:()=>BN,hexgrid:()=>LN,highlight:()=>tD,hspace:()=>xU,hull:()=>PN,image:()=>SN,inset:()=>y6,intervalX:()=>sD,intervalXY:()=>cD,intervalY:()=>aD,isBetween:()=>Ae,isDistinct:()=>O2,isNotBetween:()=>B2,isNotDistinct:()=>Gd,isNotNull:()=>bs,isNull:()=>zc,kurtosis:()=>oS,label:()=>x6,lag:()=>j2,last:()=>xS,last_value:()=>X2,lead:()=>V2,lengthBase:()=>B8,lengthClamp:()=>N8,lengthConstant:()=>C8,lengthDomain:()=>T8,lengthExponent:()=>L8,lengthNice:()=>D8,lengthRange:()=>E8,lengthScale:()=>A8,lengthZero:()=>O8,line:()=>Z8,lineX:()=>J8,lineY:()=>Q8,link:()=>zN,literal:()=>Cr,loadCSV:()=>DS,loadExtension:()=>ep,loadJSON:()=>OS,loadObjects:()=>CS,loadParquet:()=>BS,loadSpatial:()=>LS,lt:()=>vs,lte:()=>_s,mad:()=>J2,margin:()=>i6,marginBottom:()=>h6,marginLeft:()=>l6,marginRight:()=>u6,marginTop:()=>f6,margins:()=>r6,max:()=>oi,median:()=>K2,menu:()=>lU,min:()=>si,mode:()=>eS,name:()=>e6,nearestX:()=>iD,nearestY:()=>oD,neq:()=>qc,not:()=>N2,nth_value:()=>W2,ntile:()=>q2,opacityBase:()=>f8,opacityClamp:()=>o8,opacityConstant:()=>d8,opacityDomain:()=>r8,opacityExponent:()=>h8,opacityLabel:()=>a8,opacityLegend:()=>gD,opacityNice:()=>s8,opacityRange:()=>i8,opacityReverse:()=>c8,opacityScale:()=>n8,opacityTickFormat:()=>u8,opacityZero:()=>l8,or:()=>Uc,padding:()=>b6,pan:()=>lD,panX:()=>uD,panY:()=>fD,panZoom:()=>hD,panZoomX:()=>dD,panZoomY:()=>pD,percent_rank:()=>U2,plot:()=>_U,product:()=>Q2,projectionClip:()=>Y8,projectionDomain:()=>P8,projectionInset:()=>U8,projectionInsetBottom:()=>V8,projectionInsetLeft:()=>z8,projectionInsetRight:()=>q8,projectionInsetTop:()=>j8,projectionParallels:()=>F8,projectionPrecision:()=>R8,projectionRotate:()=>$8,projectionType:()=>k8,quantile:()=>tS,rBase:()=>S8,rClamp:()=>w8,rConstant:()=>M8,rDomain:()=>x8,rExponent:()=>I8,rNice:()=>v8,rRange:()=>b8,rScale:()=>g8,rZero:()=>_8,rank:()=>$2,raster:()=>DN,rasterTile:()=>ON,rect:()=>iN,rectX:()=>oN,rectY:()=>sN,regressionY:()=>CN,row_number:()=>R2,ruleX:()=>mN,ruleY:()=>yN,search:()=>uU,skewness:()=>iS,slider:()=>fU,sphere:()=>QN,spike:()=>_N,sql:()=>q,stddev:()=>rS,stddevPop:()=>cS,stringAgg:()=>bS,style:()=>s6,sum:()=>Fr,symbolDomain:()=>m8,symbolLegend:()=>xD,symbolRange:()=>y8,symbolScale:()=>p8,table:()=>hU,text:()=>hN,textX:()=>dN,textY:()=>pN,tickX:()=>gN,tickY:()=>xN,toggle:()=>_h,toggleColor:()=>rD,toggleX:()=>eD,toggleY:()=>nD,varPop:()=>aS,variance:()=>nS,vconcat:()=>pU,vector:()=>bN,vectorX:()=>wN,vectorY:()=>vN,voronoi:()=>kN,voronoiMesh:()=>FN,vspace:()=>gU,width:()=>a6,xAlign:()=>N6,xAriaDescription:()=>W6,xAriaLabel:()=>X6,xAxis:()=>L6,xBase:()=>Z6,xClamp:()=>T6,xConstant:()=>Q6,xDomain:()=>v6,xExponent:()=>J6,xFontVariant:()=>Y6,xGrid:()=>U6,xInset:()=>I6,xInsetLeft:()=>M6,xInsetRight:()=>A6,xLabel:()=>q6,xLabelAnchor:()=>j6,xLabelOffset:()=>V6,xLine:()=>z6,xNice:()=>S6,xPadding:()=>D6,xPaddingInner:()=>O6,xPaddingOuter:()=>B6,xRange:()=>_6,xReverse:()=>G6,xRound:()=>E6,xScale:()=>w6,xTickFormat:()=>$6,xTickPadding:()=>R6,xTickRotate:()=>P6,xTickSize:()=>k6,xTickSpacing:()=>F6,xTicks:()=>C6,xZero:()=>H6,xyDomain:()=>o6,yAlign:()=>c4,yAriaDescription:()=>A4,yAriaLabel:()=>M4,yAxis:()=>h4,yBase:()=>N4,yClamp:()=>s4,yConstant:()=>O4,yDomain:()=>t4,yExponent:()=>D4,yFontVariant:()=>I4,yGrid:()=>b4,yInset:()=>r4,yInsetBottom:()=>o4,yInsetTop:()=>i4,yLabel:()=>v4,yLabelAnchor:()=>_4,yLabelOffset:()=>S4,yLine:()=>w4,yNice:()=>n4,yPadding:()=>l4,yPaddingInner:()=>u4,yPaddingOuter:()=>f4,yRange:()=>e4,yReverse:()=>T4,yRound:()=>a4,yScale:()=>K6,yTickFormat:()=>g4,yTickPadding:()=>y4,yTickRotate:()=>x4,yTickSize:()=>p4,yTickSpacing:()=>m4,yTicks:()=>d4,yZero:()=>E4});var vo=Symbol("Fixed"),In=Symbol("Transient"),op=Symbol("Transform");var zy={};Mr(zy,{Area:()=>Rl,Arrow:()=>gy,BarX:()=>xy,BarY:()=>by,Cell:()=>$l,Contour:()=>Oy,Density:()=>Cy,Dot:()=>Pl,Frame:()=>ly,Geo:()=>ky,Hexgrid:()=>Fy,Image:()=>Ry,Line:()=>Ul,Link:()=>my,Mark:()=>St,Raster:()=>Ty,Rect:()=>ql,RuleX:()=>iy,RuleY:()=>oy,Text:()=>Cl,TickX:()=>Sy,TickY:()=>Iy,Tip:()=>uy,Vector:()=>Fl,area:()=>py,areaX:()=>cc,areaY:()=>oa,arrow:()=>X$,auto:()=>r9,autoSpec:()=>c3,axisFx:()=>Jw,axisFy:()=>Zw,axisX:()=>ay,axisY:()=>sy,barX:()=>Jo,barY:()=>Qo,bin:()=>ia,binX:()=>Ho,binY:()=>Zo,bollinger:()=>hc,bollingerX:()=>l9,bollingerY:()=>u9,boxX:()=>f9,boxY:()=>h9,cell:()=>lc,cellX:()=>G$,cellY:()=>H$,centroid:()=>cP,circle:()=>Q$,cluster:()=>aP,column:()=>yn,contour:()=>v9,crosshair:()=>I9,crosshairX:()=>M9,crosshairY:()=>A9,delaunayLink:()=>N9,delaunayMesh:()=>D9,density:()=>k9,differenceY:()=>$9,dodgeX:()=>_P,dodgeY:()=>SP,dot:()=>_i,dotX:()=>Z$,dotY:()=>J$,filter:()=>oR,find:()=>pR,formatIsoDate:()=>DT,formatMonth:()=>m7,formatWeekday:()=>y7,frame:()=>Wf,geo:()=>vv,geoCentroid:()=>lP,graticule:()=>U9,gridFx:()=>ev,gridFy:()=>Kw,gridX:()=>tv,gridY:()=>Qw,group:()=>Zm,groupX:()=>Ka,groupY:()=>tc,groupZ:()=>Hm,hexagon:()=>K$,hexbin:()=>z9,hexgrid:()=>q9,hull:()=>O9,identity:()=>W,image:()=>V9,indexOf:()=>Ee,initializer:()=>Ie,interpolateNearest:()=>Ny,interpolateNone:()=>wv,interpolatorBarycentric:()=>Ey,interpolatorRandomWalk:()=>Dy,legend:()=>p$,line:()=>zl,lineX:()=>uc,lineY:()=>fc,linearRegressionX:()=>W9,linearRegressionY:()=>G9,link:()=>fv,map:()=>_r,mapX:()=>sh,mapY:()=>ah,marks:()=>tn,normalize:()=>Dv,normalizeX:()=>TP,normalizeY:()=>EP,plot:()=>hy,pointer:()=>qf,pointerX:()=>jf,pointerY:()=>Dl,raster:()=>g9,rect:()=>vy,rectX:()=>rh,rectY:()=>ih,reverse:()=>sR,ruleX:()=>Yr,ruleY:()=>Xr,scale:()=>rc,select:()=>DP,selectFirst:()=>C3,selectLast:()=>k3,selectMaxX:()=>LP,selectMaxY:()=>CP,selectMinX:()=>OP,selectMinY:()=>BP,shiftX:()=>NP,shuffle:()=>aR,sort:()=>mw,sphere:()=>P9,spike:()=>G7,stackX:()=>o3,stackX1:()=>R$,stackX2:()=>$$,stackY:()=>s3,stackY1:()=>P$,stackY2:()=>U$,text:()=>Go,textX:()=>jw,textY:()=>Vw,tickX:()=>gv,tickY:()=>xv,tip:()=>iv,transform:()=>gn,tree:()=>E3,treeLink:()=>Av,treeNode:()=>$y,valueof:()=>wt,vector:()=>GT,vectorX:()=>Ww,vectorY:()=>Gw,voronoi:()=>B9,voronoiMesh:()=>L9,window:()=>ch,windowX:()=>i9,windowY:()=>o9});function zt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Is(e){let t,n,r;e.length!==2?(t=zt,n=(a,c)=>zt(e(a),c),r=(a,c)=>e(a)-c):(t=e===zt||e===Zn?e:nY,n=e,r=e);function i(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){let f=i(a,c,l,u-1);return f>l&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:s,right:o}}function nY(){return 0}function sp(e){return e===null?NaN:+e}function*QB(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var KB=Is(zt),t5=KB.right,rY=KB.left,iY=Is(sp).center,Ms=t5;var ap=e5(n5),zS=e5(oY);function e5(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:s}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((s=Math.floor(s!==void 0?s:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!s||!n&&!r)return t;let a=n&&e(n),c=r&&e(r),l=i.slice();return a&&c?(Au(a,l,i,o,s),Au(a,i,l,o,s),Au(a,l,i,o,s),Tu(c,i,l,o,s),Tu(c,l,i,o,s),Tu(c,i,l,o,s)):a?(Au(a,i,l,o,s),Au(a,l,i,o,s),Au(a,i,l,o,s)):c&&(Tu(c,i,l,o,s),Tu(c,l,i,o,s),Tu(c,i,l,o,s)),t}}function Au(e,t,n,r,i){for(let o=0,s=r*i;o<s;)e(t,n,o,o+=r,1)}function Tu(e,t,n,r,i){for(let o=0,s=r*i;o<r;++o)e(t,n,o,o+s,r)}function oY(e){let t=n5(e);return(n,r,i,o,s)=>{i<<=2,o<<=2,s<<=2,t(n,r,i+0,o+0,s),t(n,r,i+1,o+1,s),t(n,r,i+2,o+2,s),t(n,r,i+3,o+3,s)}}function n5(e){let t=Math.floor(e);if(t===e)return sY(e);let n=e-t,r=2*e+1;return(i,o,s,a,c)=>{if(!((a-=c)>=s))return;let l=t*o[s],u=c*t,f=u+c;for(let h=s,d=s+u;h<d;h+=c)l+=o[Math.min(a,h)];for(let h=s,d=a;h<=d;h+=c)l+=o[Math.min(a,h+u)],i[h]=(l+n*(o[Math.max(s,h-f)]+o[Math.min(a,h+f)]))/r,l-=o[Math.max(s,h-u)]}}function sY(e){let t=2*e+1;return(n,r,i,o,s)=>{if(!((o-=s)>=i))return;let a=e*r[i],c=s*e;for(let l=i,u=i+c;l<u;l+=s)a+=r[Math.min(o,l)];for(let l=i,u=o;l<=u;l+=s)a+=r[Math.min(o,l+c)],n[l]=a/t,a-=r[Math.max(i,l-c)]}}function _o(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function aY(e){return e.length|0}function cY(e){return!(e>0)}function lY(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function uY(e){return t=>e(...t)}function H0(...e){let t=typeof e[e.length-1]=="function"&&uY(e.pop());e=e.map(lY);let n=e.map(aY),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(cY))return o;for(;;){o.push(i.map((a,c)=>e[c][a]));let s=r;for(;++i[s]===n[s];){if(s===0)return t?o.map(t):o;i[s--]=0}}}function Z0(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Ta(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function li(e,t){let n=Ta(e,t);return n&&Math.sqrt(n)}function le(e,t){let n,r;if(t===void 0)for(let i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}var Mn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}};var Jn=class extends Map{constructor(t,n=o5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(qS(this,t))}has(t){return super.has(qS(this,t))}set(t,n){return super.set(r5(this,t),n)}delete(t){return super.delete(i5(this,t))}},Qn=class extends Set{constructor(t,n=o5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(qS(this,t))}add(t){return super.add(r5(this,t))}delete(t){return super.delete(i5(this,t))}};function qS({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function r5({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function i5({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function o5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cp(e){return e}function ln(e,...t){return VS(e,cp,cp,t)}function Pi(e,t,...n){return VS(e,cp,t,n)}function jS(e,t,...n){return VS(e,Array.from,t,n)}function VS(e,t,n,r){return function i(o,s){if(s>=r.length)return n(o);let a=new Jn,c=r[s++],l=-1;for(let u of o){let f=c(u,++l,o),h=a.get(f);h?h.push(u):a.set(f,[u])}for(let[u,f]of a)a.set(u,i(f,s));return t(a)}(e,0)}function YS(e,t){return Array.from(t,n=>e[n])}function As(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){let r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(let s of t){let a=Xc(s[i],s[o]);if(a)return a}})):(n=e.map(n),r.sort((i,o)=>Xc(n[i],n[o]))),YS(e,r)}return e.sort(lp(n))}function lp(e=zt){if(e===zt)return Xc;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Xc(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Eu(e,t,n){return(t.length!==2?As(Pi(e,t,n),([r,i],[o,s])=>zt(i,s)||zt(r,o)):As(ln(e,n),([r,i],[o,s])=>t(i,s)||zt(r,o))).map(([r])=>r)}var fY=Math.sqrt(50),hY=Math.sqrt(10),dY=Math.sqrt(2);function J0(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=fY?10:o>=hY?5:o>=dY?2:1,a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=n&&n<2?J0(e,t,n*2):[a,c,l]}function An(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,s]=r?J0(t,e,n):J0(e,t,n);if(!(o>=i))return[];let a=o-i+1,c=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(i+l)/-s;else for(let l=0;l<a;++l)c[l]=(i+l)*s;return c}function Ts(e,t,n){return t=+t,e=+e,n=+n,J0(e,t,n)[2]}function Nu(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?Ts(t,e,n):Ts(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Du(e,t,n){let r;for(;;){let i=Ts(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Ea(e){return Math.max(1,Math.ceil(Math.log(_o(e))/Math.LN2)+1)}function Ht(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Q0(e,t){let n,r=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function ue(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function K0(e,t){let n,r=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function tx(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Xc:lp(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/c+h)),p=Math.min(r,Math.floor(t+(c-l)*f/c+h));tx(e,t,d,p,i)}let o=e[t],s=n,a=r;for(up(e,n,t),i(e[r],o)>0&&up(e,n,r);s<a;){for(up(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?up(e,n,a):(++a,up(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function up(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function Wc(e,t=zt){let n,r=!1;if(t.length===1){let i;for(let o of e){let s=t(o);(r?zt(s,i)>0:zt(s,s)===0)&&(n=o,i=s,r=!0)}}else for(let i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Kn(e,t,n){if(e=Float64Array.from(QB(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return ue(e);if(t>=1)return Ht(e);var r,i=(r-1)*t,o=Math.floor(i),s=Ht(tx(e,o).subarray(0,o+1)),a=ue(e.subarray(o+1));return s+(a-s)*(i-o)}}function XS(e,t,n=sp){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function ex(e,t,n){let r=_o(e),i=Kn(e,.75)-Kn(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function fp(e,t,n){let r=_o(e),i=li(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Es(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Ui(e,t){return Kn(e,.5,t)}function*mY(e){for(let t of e)yield*t}function Ou(e){return Array.from(mY(e))}function Bu(e,t){let n=new Jn;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&s>=s&&n.set(s,(n.get(s)||0)+1)}let r,i=0;for(let[o,s]of n)s>i&&(i=s,r=o);return r}function nx(e,t=yY){let n=[],r,i=!1;for(let o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function yY(e,t){return[e,t]}function Ue(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function hp(e,t=zt){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e),r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=zt);let i=(a,c)=>t(n[a],n[c]),o,s;return e=Uint32Array.from(n,(a,c)=>c),e.sort(t===zt?(a,c)=>Xc(n[a],n[c]):lp(i)),e.forEach((a,c)=>{let l=i(a,o===void 0?a:o);l>=0?((o===void 0||l>0)&&(o=a,s=c),r[a]=s):r[a]=NaN}),r}function rx(e,t=zt){let n,r=!1;if(t.length===1){let i;for(let o of e){let s=t(o);(r?zt(s,i)<0:zt(s,s)===0)&&(n=o,i=s,r=!0)}}else for(let i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Tn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Na(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function s5(e){return e}var WS=1,GS=2,HS=3,ix=4,a5=1e-6;function gY(e){return"translate("+e+",0)"}function xY(e){return"translate(0,"+e+")"}function bY(e){return t=>+e(t)}function wY(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function vY(){return!this.__axis}function _Y(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===WS||e===ix?-1:1,u=e===ix||e===GS?"x":"y",f=e===WS||e===HS?gY:xY;function h(d){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):s5),y=Math.max(o,0)+a,g=t.range(),x=+g[0]+c,b=+g[g.length-1]+c,w=(t.bandwidth?wY:bY)(t.copy(),c),_=d.selection?d.selection():d,v=_.selectAll(".domain").data([null]),M=_.selectAll(".tick").data(p,t).order(),E=M.exit(),I=M.enter().append("g").attr("class","tick"),D=M.select("line"),A=M.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(I),D=D.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),A=A.merge(I.append("text").attr("fill","currentColor").attr(u,l*y).attr("dy",e===WS?"0em":e===HS?"0.71em":"0.32em")),d!==_&&(v=v.transition(d),M=M.transition(d),D=D.transition(d),A=A.transition(d),E=E.transition(d).attr("opacity",a5).attr("transform",function(O){return isFinite(O=w(O))?f(O+c):this.getAttribute("transform")}),I.attr("opacity",a5).attr("transform",function(O){var C=this.parentNode.__axis;return f((C&&isFinite(C=C(O))?C:w(O))+c)})),E.remove(),v.attr("d",e===ix||e===GS?s?"M"+l*s+","+x+"H"+c+"V"+b+"H"+l*s:"M"+c+","+x+"V"+b:s?"M"+x+","+l*s+"V"+c+"H"+b+"V"+l*s:"M"+x+","+c+"H"+b),M.attr("opacity",1).attr("transform",function(O){return f(w(O)+c)}),D.attr(u+"2",l*o),A.attr(u,l*y).text(m),_.filter(vY).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===GS?"start":e===ix?"end":"middle"),_.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(o=s=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(s=+d,h):s},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function ZS(e){return _Y(HS,e)}var SY={value:()=>{}};function l5(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ox(n)}function ox(e){this._=e}function IY(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ox.prototype=l5.prototype={constructor:ox,on:function(e,t){var n=this._,r=IY(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=MY(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=c5(n[i],e.name,t);else if(t==null)for(i in n)n[i]=c5(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ox(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function MY(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function c5(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=SY,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gc=l5;var sx="http://www.w3.org/1999/xhtml",ui={svg:"http://www.w3.org/2000/svg",xhtml:sx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ns(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ui.hasOwnProperty(t)?{space:ui[t],local:e}:e}function AY(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sx&&t.documentElement.namespaceURI===sx?t.createElement(e):t.createElementNS(n,e)}}function TY(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ds(e){var t=Ns(e);return(t.local?TY:AY)(t)}function EY(){}function Hc(e){return e==null?EY:function(){return this.querySelector(e)}}function u5(e){typeof e!="function"&&(e=Hc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Re(r,this._parents)}function JS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function NY(){return[]}function dp(e){return e==null?NY:function(){return this.querySelectorAll(e)}}function DY(e){return function(){return JS(e.apply(this,arguments))}}function f5(e){typeof e=="function"?e=DY(e):e=dp(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(e.call(c,c.__data__,l,s)),i.push(c));return new Re(r,i)}function pp(e){return function(){return this.matches(e)}}function ax(e){return function(t){return t.matches(e)}}var OY=Array.prototype.find;function BY(e){return function(){return OY.call(this.children,e)}}function LY(){return this.firstElementChild}function h5(e){return this.select(e==null?LY:BY(typeof e=="function"?e:ax(e)))}var CY=Array.prototype.filter;function kY(){return Array.from(this.children)}function FY(e){return function(){return CY.call(this.children,e)}}function d5(e){return this.selectAll(e==null?kY:FY(typeof e=="function"?e:ax(e)))}function p5(e){typeof e!="function"&&(e=pp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new Re(r,this._parents)}function cx(e){return new Array(e.length)}function m5(){return new Re(this._enter||this._groups.map(cx),this._parents)}function mp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mp.prototype={constructor:mp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function y5(e){return function(){return e}}function RY(e,t,n,r,i,o){for(var s=0,a,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new mp(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function $Y(e,t,n,r,i,o,s){var a,c,l=new Map,u=t.length,f=o.length,h=new Array(u),d;for(a=0;a<u;++a)(c=t[a])&&(h[a]=d=s.call(c,c.__data__,a,t)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<f;++a)d=s.call(e,o[a],a,o)+"",(c=l.get(d))?(r[a]=c,c.__data__=o[a],l.delete(d)):n[a]=new mp(e,o[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(h[a])===c&&(i[a]=c)}function PY(e){return e.__data__}function g5(e,t){if(!arguments.length)return Array.from(this,PY);var n=t?$Y:RY,r=this._parents,i=this._groups;typeof e!="function"&&(e=y5(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,d=UY(e.call(u,u&&u.__data__,l,r)),p=d.length,m=a[l]=new Array(p),y=s[l]=new Array(p),g=c[l]=new Array(h);n(u,f,m,y,g,d,t);for(var x=0,b=0,w,_;x<p;++x)if(w=m[x]){for(x>=b&&(b=x+1);!(_=y[b])&&++b<p;);w._next=_||null}}return s=new Re(s,r),s._enter=a,s._exit=c,s}function UY(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function x5(){return new Re(this._exit||this._groups.map(cx),this._parents)}function b5(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function w5(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),d,p=0;p<f;++p)(d=l[p]||u[p])&&(h[p]=d);for(;c<i;++c)a[c]=n[c];return new Re(a,this._parents)}function v5(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function _5(e){e||(e=zY);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new Re(i,this._parents).order()}function zY(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function S5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function I5(){return Array.from(this)}function M5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function A5(){let e=0;for(let t of this)++e;return e}function T5(){return!this.node()}function E5(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function qY(e){return function(){this.removeAttribute(e)}}function jY(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VY(e,t){return function(){this.setAttribute(e,t)}}function YY(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function XY(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function WY(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function N5(e,t){var n=Ns(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?jY:qY:typeof t=="function"?n.local?WY:XY:n.local?YY:VY)(n,t))}function lx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GY(e){return function(){this.style.removeProperty(e)}}function HY(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ZY(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function D5(e,t,n){return arguments.length>1?this.each((t==null?GY:typeof t=="function"?ZY:HY)(e,t,n??"")):Da(this.node(),e)}function Da(e,t){return e.style.getPropertyValue(t)||lx(e).getComputedStyle(e,null).getPropertyValue(t)}function JY(e){return function(){delete this[e]}}function QY(e,t){return function(){this[e]=t}}function KY(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function O5(e,t){return arguments.length>1?this.each((t==null?JY:typeof t=="function"?KY:QY)(e,t)):this.node()[e]}function B5(e){return e.trim().split(/^|\s+/)}function QS(e){return e.classList||new L5(e)}function L5(e){this._node=e,this._names=B5(e.getAttribute("class")||"")}L5.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C5(e,t){for(var n=QS(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function k5(e,t){for(var n=QS(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tX(e){return function(){C5(this,e)}}function eX(e){return function(){k5(this,e)}}function nX(e,t){return function(){(t.apply(this,arguments)?C5:k5)(this,e)}}function F5(e,t){var n=B5(e+"");if(arguments.length<2){for(var r=QS(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?nX:t?tX:eX)(n,t))}function rX(){this.textContent=""}function iX(e){return function(){this.textContent=e}}function oX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function R5(e){return arguments.length?this.each(e==null?rX:(typeof e=="function"?oX:iX)(e)):this.node().textContent}function sX(){this.innerHTML=""}function aX(e){return function(){this.innerHTML=e}}function cX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $5(e){return arguments.length?this.each(e==null?sX:(typeof e=="function"?cX:aX)(e)):this.node().innerHTML}function lX(){this.nextSibling&&this.parentNode.appendChild(this)}function P5(){return this.each(lX)}function uX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U5(){return this.each(uX)}function z5(e){var t=typeof e=="function"?e:Ds(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fX(){return null}function q5(e,t){var n=typeof e=="function"?e:Ds(e),r=t==null?fX:typeof t=="function"?t:Hc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hX(){var e=this.parentNode;e&&e.removeChild(this)}function j5(){return this.each(hX)}function dX(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pX(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function V5(e){return this.select(e?pX:dX)}function Y5(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mX(e){return function(t){e.call(this,t,this.__data__)}}function yX(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gX(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function xX(e,t,n){return function(){var r=this.__on,i,o=mX(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function X5(e,t,n){var r=yX(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?xX:gX,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function W5(e,t,n){var r=lx(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bX(e,t){return function(){return W5(this,e,t)}}function wX(e,t){return function(){return W5(this,e,t.apply(this,arguments))}}function G5(e,t){return this.each((typeof t=="function"?wX:bX)(e,t))}function*H5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var KS=[null];function Re(e,t){this._groups=e,this._parents=t}function Z5(){return new Re([[document.documentElement]],KS)}function vX(){return this}Re.prototype=Z5.prototype={constructor:Re,select:u5,selectAll:f5,selectChild:h5,selectChildren:d5,filter:p5,data:g5,enter:m5,exit:x5,join:b5,merge:w5,selection:vX,order:v5,sort:_5,call:S5,nodes:I5,node:M5,size:A5,empty:T5,each:E5,attr:N5,style:D5,property:O5,classed:F5,text:R5,html:$5,raise:P5,lower:U5,append:z5,insert:q5,remove:j5,clone:V5,datum:Y5,on:X5,dispatch:G5,[Symbol.iterator]:H5};var Os=Z5;function Vt(e){return typeof e=="string"?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],KS)}function J5(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fn(e,t){if(e=J5(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var ux={capture:!0,passive:!1};function fx(e){e.preventDefault(),e.stopImmediatePropagation()}function yp(e){var t=e.document.documentElement,n=Vt(e).on("dragstart.drag",fx,ux);"onselectstart"in t?n.on("selectstart.drag",fx,ux):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gp(e,t){var n=e.document.documentElement,r=Vt(e).on("dragstart.drag",null);t&&(r.on("click.drag",fx,ux),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Bs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Io(){}var Ba=.7,Qc=1/Ba,Lu="\\s*([+-]?\\d+)\\s*",xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_X=/^#([0-9a-f]{3,8})$/,SX=new RegExp(`^rgb\\(${Lu},${Lu},${Lu}\\)$`),IX=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),MX=new RegExp(`^rgba\\(${Lu},${Lu},${Lu},${xp}\\)$`),AX=new RegExp(`^rgba\\(${So},${So},${So},${xp}\\)$`),TX=new RegExp(`^hsl\\(${xp},${So},${So}\\)$`),EX=new RegExp(`^hsla\\(${xp},${So},${So},${xp}\\)$`),Q5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bs(Io,Rr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:K5,formatHex:K5,formatHex8:NX,formatHsl:DX,formatRgb:tL,toString:tL});function K5(){return this.rgb().formatHex()}function NX(){return this.rgb().formatHex8()}function DX(){return sL(this).formatHsl()}function tL(){return this.rgb().formatRgb()}function Rr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_X.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eL(t):n===3?new We(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SX.exec(e))?new We(t[1],t[2],t[3],1):(t=IX.exec(e))?new We(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MX.exec(e))?hx(t[1],t[2],t[3],t[4]):(t=AX.exec(e))?hx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TX.exec(e))?iL(t[1],t[2]/100,t[3]/100,1):(t=EX.exec(e))?iL(t[1],t[2]/100,t[3]/100,t[4]):Q5.hasOwnProperty(e)?eL(Q5[e]):e==="transparent"?new We(NaN,NaN,NaN,0):null}function eL(e){return new We(e>>16&255,e>>8&255,e&255,1)}function hx(e,t,n,r){return r<=0&&(e=t=n=NaN),new We(e,t,n,r)}function bp(e){return e instanceof Io||(e=Rr(e)),e?(e=e.rgb(),new We(e.r,e.g,e.b,e.opacity)):new We}function rn(e,t,n,r){return arguments.length===1?bp(e):new We(e,t,n,r??1)}function We(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Bs(We,rn,Oa(Io,{brighter(e){return e=e==null?Qc:Math.pow(Qc,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ba:Math.pow(Ba,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new We(Jc(this.r),Jc(this.g),Jc(this.b),px(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nL,formatHex:nL,formatHex8:OX,formatRgb:rL,toString:rL}));function nL(){return`#${Zc(this.r)}${Zc(this.g)}${Zc(this.b)}`}function OX(){return`#${Zc(this.r)}${Zc(this.g)}${Zc(this.b)}${Zc((isNaN(this.opacity)?1:this.opacity)*255)}`}function rL(){let e=px(this.opacity);return`${e===1?"rgb(":"rgba("}${Jc(this.r)}, ${Jc(this.g)}, ${Jc(this.b)}${e===1?")":`, ${e})`}`}function px(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zc(e){return e=Jc(e),(e<16?"0":"")+e.toString(16)}function iL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zi(e,t,n,r)}function sL(e){if(e instanceof zi)return new zi(e.h,e.s,e.l,e.opacity);if(e instanceof Io||(e=Rr(e)),!e)return new zi;if(e instanceof zi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new zi(s,a,c,e.opacity)}function wp(e,t,n,r){return arguments.length===1?sL(e):new zi(e,t,n,r??1)}function zi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Bs(zi,wp,Oa(Io,{brighter(e){return e=e==null?Qc:Math.pow(Qc,e),new zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ba:Math.pow(Ba,e),new zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new We(tI(e>=240?e-240:e+120,i,r),tI(e,i,r),tI(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new zi(oL(this.h),dx(this.s),dx(this.l),px(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=px(this.opacity);return`${e===1?"hsl(":"hsla("}${oL(this.h)}, ${dx(this.s)*100}%, ${dx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oL(e){return e=(e||0)%360,e<0?e+360:e}function dx(e){return Math.max(0,Math.min(1,e||0))}function tI(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var mx=Math.PI/180,yx=180/Math.PI;var gx=18,aL=.96422,cL=1,lL=.82521,uL=4/29,Cu=6/29,fL=3*Cu*Cu,BX=Cu*Cu*Cu;function hL(e){if(e instanceof Mo)return new Mo(e.l,e.a,e.b,e.opacity);if(e instanceof Ls)return dL(e);e instanceof We||(e=bp(e));var t=iI(e.r),n=iI(e.g),r=iI(e.b),i=eI((.2225045*t+.7168786*n+.0606169*r)/cL),o,s;return t===n&&n===r?o=s=i:(o=eI((.4360747*t+.3850649*n+.1430804*r)/aL),s=eI((.0139322*t+.0971045*n+.7141733*r)/lL)),new Mo(116*i-16,500*(o-i),200*(i-s),e.opacity)}function ku(e,t,n,r){return arguments.length===1?hL(e):new Mo(e,t,n,r??1)}function Mo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Bs(Mo,ku,Oa(Io,{brighter(e){return new Mo(this.l+gx*(e??1),this.a,this.b,this.opacity)},darker(e){return new Mo(this.l-gx*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=aL*nI(t),e=cL*nI(e),n=lL*nI(n),new We(rI(3.1338561*t-1.6168667*e-.4906146*n),rI(-.9787684*t+1.9161415*e+.033454*n),rI(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function eI(e){return e>BX?Math.pow(e,1/3):e/fL+uL}function nI(e){return e>Cu?e*e*e:fL*(e-uL)}function rI(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function iI(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function LX(e){if(e instanceof Ls)return new Ls(e.h,e.c,e.l,e.opacity);if(e instanceof Mo||(e=hL(e)),e.a===0&&e.b===0)return new Ls(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yx;return new Ls(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function vp(e,t,n,r){return arguments.length===1?LX(e):new Ls(e,t,n,r??1)}function Ls(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function dL(e){if(isNaN(e.h))return new Mo(e.l,0,0,e.opacity);var t=e.h*mx;return new Mo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Bs(Ls,vp,Oa(Io,{brighter(e){return new Ls(this.h,this.c,this.l+gx*(e??1),this.opacity)},darker(e){return new Ls(this.h,this.c,this.l-gx*(e??1),this.opacity)},rgb(){return dL(this).rgb()}}));var gL=-.14861,oI=1.78277,sI=-.29227,xx=-.90649,_p=1.97294,pL=_p*xx,mL=_p*oI,yL=oI*sI-xx*gL;function CX(e){if(e instanceof Kc)return new Kc(e.h,e.s,e.l,e.opacity);e instanceof We||(e=bp(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(yL*r+pL*t-mL*n)/(yL+pL-mL),o=r-i,s=(_p*(n-i)-sI*o)/xx,a=Math.sqrt(s*s+o*o)/(_p*i*(1-i)),c=a?Math.atan2(s,o)*yx-120:NaN;return new Kc(c<0?c+360:c,a,i,e.opacity)}function tr(e,t,n,r){return arguments.length===1?CX(e):new Kc(e,t,n,r??1)}function Kc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Bs(Kc,tr,Oa(Io,{brighter(e){return e=e==null?Qc:Math.pow(Qc,e),new Kc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ba:Math.pow(Ba,e),new Kc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*mx,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new We(255*(t+n*(gL*r+oI*i)),255*(t+n*(sI*r+xx*i)),255*(t+n*(_p*r)),this.opacity)}}));function aI(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function xL(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return aI((n-r/t)*t,s,i,o,a)}}function bL(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return aI((n-r/t)*t,i,o,s,a)}}var Fu=e=>()=>e;function wL(e,t){return function(n){return e+n*t}}function kX(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ru(e,t){var n=t-e;return n?wL(e,n>180||n<-180?n-360*Math.round(n/360):n):Fu(isNaN(e)?t:e)}function vL(e){return(e=+e)==1?Te:function(t,n){return n-t?kX(t,n,e):Fu(isNaN(t)?n:t)}}function Te(e,t){var n=t-e;return n?wL(e,n):Fu(isNaN(e)?t:e)}var fi=function e(t){var n=vL(t);function r(i,o){var s=n((i=rn(i)).r,(o=rn(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=Te(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function _L(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=rn(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=o(c),a+""}}}var cI=_L(xL),FX=_L(bL);function SL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function IL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ML(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=$r(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function AL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function _e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=$r(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var uI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lI=new RegExp(uI.source,"g");function RX(e){return function(){return e}}function $X(e){return function(t){return e(t)+""}}function Sp(e,t){var n=uI.lastIndex=lI.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=uI.exec(e))&&(i=lI.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:_e(r,i)})),n=lI.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?$X(c[0].x):RX(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function $r(e,t){var n=typeof t,r;return t==null||n==="boolean"?Fu(t):(n==="number"?_e:n==="string"?(r=Rr(t))?(t=r,fi):Sp:t instanceof Rr?fi:t instanceof Date?AL:IL(t)?SL:Array.isArray(t)?ML:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TL:_e)(e,t)}function tl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var EL=180/Math.PI,bx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fI(e,t,n,r,i,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*EL,skewX:Math.atan(c)*EL,scaleX:s,scaleY:a}}var wx;function NL(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bx:fI(t.a,t.b,t.c,t.d,t.e,t.f)}function DL(e){return e==null?bx:(wx||(wx=document.createElementNS("http://www.w3.org/2000/svg","g")),wx.setAttribute("transform",e),(e=wx.transform.baseVal.consolidate())?(e=e.matrix,fI(e.a,e.b,e.c,e.d,e.e,e.f)):bx)}function OL(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,d,p){if(l!==f||u!==h){var m=d.push("translate(",null,t,null,n);p.push({i:m-4,x:_e(l,f)},{i:m-2,x:_e(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:_e(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:_e(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,d,p){if(l!==f||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:_e(l,f)},{i:m-2,x:_e(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var p=-1,m=h.length,y;++p<m;)f[(y=h[p]).i]=y.x(d);return f.join("")}}}var hI=OL(NL,"px, ","px)","deg)"),dI=OL(DL,", ",")",")");var PX=1e-12;function BL(e){return((e=Math.exp(e))+1/e)/2}function UX(e){return((e=Math.exp(e))-1/e)/2}function zX(e){return((e=Math.exp(2*e))-1)/(e+1)}var pI=function e(t,n,r){function i(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],f=s[1],h=s[2],d=u-a,p=f-c,m=d*d+p*p,y,g;if(m<PX)g=Math.log(h/l)/t,y=function(M){return[a+M*d,c+M*p,l*Math.exp(t*M*g)]};else{var x=Math.sqrt(m),b=(h*h-l*l+r*m)/(2*l*n*x),w=(h*h-l*l-r*m)/(2*h*n*x),_=Math.log(Math.sqrt(b*b+1)-b),v=Math.log(Math.sqrt(w*w+1)-w);g=(v-_)/t,y=function(M){var E=M*g,I=BL(_),D=l/(n*x)*(I*zX(t*E+_)-UX(_));return[a+D*d,c+D*p,l*I/BL(t*E+_)]}}return y.duration=g*1e3*t/Math.SQRT2,y}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},i}(Math.SQRT2,2,4);function LL(e){return function(t,n){var r=e((t=wp(t)).h,(n=wp(n)).h),i=Te(t.s,n.s),o=Te(t.l,n.l),s=Te(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}var mI=LL(Ru),qX=LL(Te);function vx(e,t){var n=Te((e=ku(e)).l,(t=ku(t)).l),r=Te(e.a,t.a),i=Te(e.b,t.b),o=Te(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function CL(e){return function(t,n){var r=e((t=vp(t)).h,(n=vp(n)).h),i=Te(t.c,n.c),o=Te(t.l,n.l),s=Te(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}var yI=CL(Ru),jX=CL(Te);function kL(e){return function t(n){n=+n;function r(i,o){var s=e((i=tr(i)).h,(o=tr(o)).h),a=Te(i.s,o.s),c=Te(i.l,o.l),l=Te(i.opacity,o.opacity);return function(u){return i.h=s(u),i.s=a(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var VX=kL(Ru),$u=kL(Te);function Ao(e,t){t===void 0&&(t=e,e=$r);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Rn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Pu=0,Mp=0,Ip=0,RL=1e3,_x,Ap,Sx=0,el=0,Ix=0,Tp=typeof performance=="object"&&performance.now?performance:Date,$L=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Np(){return el||($L(YX),el=Tp.now()+Ix)}function YX(){el=0}function Ep(){this._call=this._time=this._next=null}Ep.prototype=Mx.prototype={constructor:Ep,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Np():+n)+(t==null?0:+t),!this._next&&Ap!==this&&(Ap?Ap._next=this:_x=this,Ap=this),this._call=e,this._time=n,gI()},stop:function(){this._call&&(this._call=null,this._time=1/0,gI())}};function Mx(e,t,n){var r=new Ep;return r.restart(e,t,n),r}function PL(){Np(),++Pu;for(var e=_x,t;e;)(t=el-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pu}function FL(){el=(Sx=Tp.now())+Ix,Pu=Mp=0;try{PL()}finally{Pu=0,WX(),el=0}}function XX(){var e=Tp.now(),t=e-Sx;t>RL&&(Ix-=t,Sx=e)}function WX(){for(var e,t=_x,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_x=n);Ap=e,gI(r)}function gI(e){if(!Pu){Mp&&(Mp=clearTimeout(Mp));var t=e-el;t>24?(e<1/0&&(Mp=setTimeout(FL,e-Tp.now()-Ix)),Ip&&(Ip=clearInterval(Ip))):(Ip||(Sx=Tp.now(),Ip=setInterval(XX,RL)),Pu=1,$L(FL))}}function Ax(e,t,n){var r=new Ep;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var GX=Gc("start","end","cancel","interrupt"),HX=[],qL=0,UL=1,Ex=2,Tx=3,zL=4,Nx=5,Dp=6;function La(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;ZX(e,n,{name:t,index:r,group:i,on:GX,tween:HX,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:qL})}function Op(e,t){var n=on(e,t);if(n.state>qL)throw new Error("too late; already scheduled");return n}function En(e,t){var n=on(e,t);if(n.state>Tx)throw new Error("too late; already running");return n}function on(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ZX(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Mx(o,0,n.time);function o(l){n.state=UL,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,h,d;if(n.state!==UL)return c();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Tx)return Ax(s);d.state===zL?(d.state=Dp,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=Dp,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(Ax(function(){n.state===Tx&&(n.state=zL,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Ex,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ex){for(n.state=Tx,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Nx,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===Nx&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Dp,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function To(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Ex&&r.state<Nx,r.state=Dp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function jL(e){return this.each(function(){To(this,e)})}function JX(e,t){var n,r;return function(){var i=En(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function QX(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=En(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function VL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=on(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?JX:QX)(n,e,t))}function Uu(e,t,n){var r=e._id;return e.each(function(){var i=En(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return on(i,r).value[t]}}function Dx(e,t){var n;return(typeof t=="number"?_e:t instanceof Rr?fi:(n=Rr(t))?(t=n,fi):Sp)(e,t)}function KX(e){return function(){this.removeAttribute(e)}}function tW(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eW(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function nW(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function rW(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function iW(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function YL(e,t){var n=Ns(e),r=n==="transform"?dI:Dx;return this.attrTween(e,typeof t=="function"?(n.local?iW:rW)(n,r,Uu(this,"attr."+e,t)):t==null?(n.local?tW:KX)(n):(n.local?nW:eW)(n,r,t))}function oW(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sW(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function aW(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&sW(e,o)),n}return i._value=t,i}function cW(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&oW(e,o)),n}return i._value=t,i}function XL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ns(e);return this.tween(n,(r.local?aW:cW)(r,t))}function lW(e,t){return function(){Op(this,e).delay=+t.apply(this,arguments)}}function uW(e,t){return t=+t,function(){Op(this,e).delay=t}}function WL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lW:uW)(t,e)):on(this.node(),t).delay}function fW(e,t){return function(){En(this,e).duration=+t.apply(this,arguments)}}function hW(e,t){return t=+t,function(){En(this,e).duration=t}}function GL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fW:hW)(t,e)):on(this.node(),t).duration}function dW(e,t){if(typeof t!="function")throw new Error;return function(){En(this,e).ease=t}}function HL(e){var t=this._id;return arguments.length?this.each(dW(t,e)):on(this.node(),t).ease}function pW(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;En(this,e).ease=n}}function ZL(e){if(typeof e!="function")throw new Error;return this.each(pW(this._id,e))}function JL(e){typeof e!="function"&&(e=pp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new er(r,this._parents,this._name,this._id)}function QL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=t[a],l=n[a],u=c.length,f=s[a]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;a<r;++a)s[a]=t[a];return new er(s,this._parents,this._name,this._id)}function mW(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yW(e,t,n){var r,i,o=mW(t)?Op:En;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function KL(e,t){var n=this._id;return arguments.length<2?on(this.node(),n).on.on(e):this.each(yW(n,e,t))}function gW(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function tC(){return this.on("end.remove",gW(this._id))}function eC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hc(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,La(l[h],t,n,h,l,on(u,n)));return new er(o,this._parents,t,n)}function nC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dp(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=e.call(u,u.__data__,f,c),d,p=on(u,n),m=0,y=h.length;m<y;++m)(d=h[m])&&La(d,t,n,m,h,p);o.push(h),s.push(u)}return new er(o,s,t,n)}var xW=Os.prototype.constructor;function rC(){return new xW(this._groups,this._parents)}function bW(e,t){var n,r,i;return function(){var o=Da(this,e),s=(this.style.removeProperty(e),Da(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function iC(e){return function(){this.style.removeProperty(e)}}function wW(e,t,n){var r,i=n+"",o;return function(){var s=Da(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function vW(e,t,n){var r,i,o;return function(){var s=Da(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Da(this,e))),s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a))}}function _W(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var c=En(this,e),l=c.on,u=c.value[o]==null?a||(a=iC(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function oC(e,t,n){var r=(e+="")=="transform"?hI:Dx;return t==null?this.styleTween(e,bW(e,r)).on("end.style."+e,iC(e)):typeof t=="function"?this.styleTween(e,vW(e,r,Uu(this,"style."+e,t))).each(_W(this._id,e)):this.styleTween(e,wW(e,r,t),n).on("end.style."+e,null)}function SW(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function IW(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&SW(e,s,n)),r}return o._value=t,o}function sC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,IW(e,t,n??""))}function MW(e){return function(){this.textContent=e}}function AW(e){return function(){var t=e(this);this.textContent=t??""}}function aC(e){return this.tween("text",typeof e=="function"?AW(Uu(this,"text",e)):MW(e==null?"":e+""))}function TW(e){return function(t){this.textContent=e.call(this,t)}}function EW(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&TW(i)),t}return r._value=e,r}function cC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,EW(e))}function lC(){for(var e=this._name,t=this._id,n=Ox(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=on(c,t);La(c,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new er(r,this._parents,e,n)}function uC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=En(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&o()})}var NW=0;function er(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fC(e){return Os().transition(e)}function Ox(){return++NW}var Cs=Os.prototype;er.prototype=fC.prototype={constructor:er,select:eC,selectAll:nC,selectChild:Cs.selectChild,selectChildren:Cs.selectChildren,filter:JL,merge:QL,selection:rC,transition:lC,call:Cs.call,nodes:Cs.nodes,node:Cs.node,size:Cs.size,empty:Cs.empty,each:Cs.each,on:KL,attr:YL,attrTween:XL,style:oC,styleTween:sC,text:aC,textTween:cC,remove:tC,tween:VL,delay:WL,duration:GL,ease:HL,easeVarying:ZL,end:uC,[Symbol.iterator]:Cs[Symbol.iterator]};function Bx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var DW={time:null,delay:0,duration:250,ease:Bx};function OW(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hC(e){var t,n;e instanceof er?(t=e._id,e=e._name):(t=Ox(),(n=DW).time=Np(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&La(c,e,t,l,s,n||OW(c,t));return new er(r,this._parents,e,t)}Os.prototype.interrupt=jL;Os.prototype.transition=hC;var Lx=e=>()=>e;function xI(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function dC(e){e.stopImmediatePropagation()}function Cx(e){e.preventDefault(),e.stopImmediatePropagation()}var pC={name:"drag"},bI={name:"space"},zu={name:"handle"},qu={name:"center"},{abs:mC,max:$n,min:Pn}=Math;function yC(e){return[+e[0],+e[1]]}function vI(e){return[yC(e[0]),yC(e[1])]}var kx={name:"x",handles:["w","e"].map(Bp),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Fx={name:"y",handles:["n","s"].map(Bp),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},BW={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Bp),input:function(e){return e==null?null:vI(e)},output:function(e){return e}},ks={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},gC={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},xC={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},LW={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},CW={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Bp(e){return{type:e}}function kW(e){return!e.ctrlKey&&!e.button}function FW(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function RW(){return navigator.maxTouchPoints||"ontouchstart"in this}function wI(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function $W(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function _I(){return MI(kx)}function SI(){return MI(Fx)}function II(){return MI(BW)}function MI(e){var t=FW,n=kW,r=RW,i=!0,o=Gc("start","brush","end"),s=6,a;function c(y){var g=y.property("__brush",m).selectAll(".overlay").data([Bp("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ks.overlay).merge(g).each(function(){var b=wI(this).extent;Vt(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),y.selectAll(".selection").data([Bp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ks.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var x=y.selectAll(".handle").data(e.handles,function(b){return b.type});x.exit().remove(),x.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return ks[b.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(y,g,x){y.tween?y.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,_=u(b,arguments),v=w.selection,M=e.input(typeof g=="function"?g.apply(this,arguments):g,w.extent),E=$r(v,M);function I(D){w.selection=D===1&&M===null?null:E(D),l.call(b),_.brush()}return v!==null&&M!==null?I:I(1)}):y.each(function(){var b=this,w=arguments,_=b.__brush,v=e.input(typeof g=="function"?g.apply(b,w):g,_.extent),M=u(b,w).beforestart();To(b),_.selection=v===null?null:v,l.call(b),M.start(x).brush(x).end(x)})},c.clear=function(y,g){c.move(y,null,g)};function l(){var y=Vt(this),g=wI(this).selection;g?(y.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(x){return x.type[x.type.length-1]==="e"?g[1][0]-s/2:g[0][0]-s/2}).attr("y",function(x){return x.type[0]==="s"?g[1][1]-s/2:g[0][1]-s/2}).attr("width",function(x){return x.type==="n"||x.type==="s"?g[1][0]-g[0][0]+s:s}).attr("height",function(x){return x.type==="e"||x.type==="w"?g[1][1]-g[0][1]+s:s})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(y,g,x){var b=y.__brush.emitter;return b&&(!x||!b.clean)?b:new f(y,g,x)}function f(y,g,x){this.that=y,this.args=g,this.state=y.__brush,this.active=0,this.clean=x}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,g){return this.starting?(this.starting=!1,this.emit("start",y,g)):this.emit("brush",y),this},brush:function(y,g){return this.emit("brush",y,g),this},end:function(y,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,g)),this},emit:function(y,g,x){var b=Vt(this.that).datum();o.call(y,this.that,new xI(y,{sourceEvent:g,target:c,selection:e.output(this.state.selection),mode:x,dispatch:o}),b)}};function h(y){if(a&&!y.touches||!n.apply(this,arguments))return;var g=this,x=y.target.__data__.type,b=(i&&y.metaKey?x="overlay":x)==="selection"?pC:i&&y.altKey?qu:zu,w=e===Fx?null:LW[x],_=e===kx?null:CW[x],v=wI(g),M=v.extent,E=v.selection,I=M[0][0],D,A,O=M[0][1],C,S,T=M[1][0],N,F,R=M[1][1],k,$,P=0,U=0,G,nt=w&&_&&i&&y.shiftKey,ot,at,Y=Array.from(y.touches||[y],tt=>{let ae=tt.identifier;return tt=Fn(tt,g),tt.point0=tt.slice(),tt.identifier=ae,tt});To(g);var st=u(g,arguments,!0).beforestart();if(x==="overlay"){E&&(G=!0);let tt=[Y[0],Y[1]||Y[0]];v.selection=E=[[D=e===Fx?I:Pn(tt[0][0],tt[1][0]),C=e===kx?O:Pn(tt[0][1],tt[1][1])],[N=e===Fx?T:$n(tt[0][0],tt[1][0]),k=e===kx?R:$n(tt[0][1],tt[1][1])]],Y.length>1&&kt(y)}else D=E[0][0],C=E[0][1],N=E[1][0],k=E[1][1];A=D,S=C,F=N,$=k;var j=Vt(g).attr("pointer-events","none"),Z=j.selectAll(".overlay").attr("cursor",ks[x]);if(y.touches)st.moved=z,st.ended=ht;else{var rt=Vt(y.view).on("mousemove.brush",z,!0).on("mouseup.brush",ht,!0);i&&rt.on("keydown.brush",Gt,!0).on("keyup.brush",Zt,!0),yp(y.view)}l.call(g),st.start(y,b.name);function z(tt){for(let ae of tt.changedTouches||[tt])for(let Ir of Y)Ir.identifier===ae.identifier&&(Ir.cur=Fn(ae,g));if(nt&&!ot&&!at&&Y.length===1){let ae=Y[0];mC(ae.cur[0]-ae[0])>mC(ae.cur[1]-ae[1])?at=!0:ot=!0}for(let ae of Y)ae.cur&&(ae[0]=ae.cur[0],ae[1]=ae.cur[1]);G=!0,Cx(tt),kt(tt)}function kt(tt){let ae=Y[0],Ir=ae.point0;var Hi;switch(P=ae[0]-Ir[0],U=ae[1]-Ir[1],b){case bI:case pC:{w&&(P=$n(I-D,Pn(T-N,P)),A=D+P,F=N+P),_&&(U=$n(O-C,Pn(R-k,U)),S=C+U,$=k+U);break}case zu:{Y[1]?(w&&(A=$n(I,Pn(T,Y[0][0])),F=$n(I,Pn(T,Y[1][0])),w=1),_&&(S=$n(O,Pn(R,Y[0][1])),$=$n(O,Pn(R,Y[1][1])),_=1)):(w<0?(P=$n(I-D,Pn(T-D,P)),A=D+P,F=N):w>0&&(P=$n(I-N,Pn(T-N,P)),A=D,F=N+P),_<0?(U=$n(O-C,Pn(R-C,U)),S=C+U,$=k):_>0&&(U=$n(O-k,Pn(R-k,U)),S=C,$=k+U));break}case qu:{w&&(A=$n(I,Pn(T,D-P*w)),F=$n(I,Pn(T,N+P*w))),_&&(S=$n(O,Pn(R,C-U*_)),$=$n(O,Pn(R,k+U*_)));break}}F<A&&(w*=-1,Hi=D,D=N,N=Hi,Hi=A,A=F,F=Hi,x in gC&&Z.attr("cursor",ks[x=gC[x]])),$<S&&(_*=-1,Hi=C,C=k,k=Hi,Hi=S,S=$,$=Hi,x in xC&&Z.attr("cursor",ks[x=xC[x]])),v.selection&&(E=v.selection),ot&&(A=E[0][0],F=E[1][0]),at&&(S=E[0][1],$=E[1][1]),(E[0][0]!==A||E[0][1]!==S||E[1][0]!==F||E[1][1]!==$)&&(v.selection=[[A,S],[F,$]],l.call(g),st.brush(tt,b.name))}function ht(tt){if(dC(tt),tt.touches){if(tt.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else gp(tt.view,G),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),Z.attr("cursor",ks.overlay),v.selection&&(E=v.selection),$W(E)&&(v.selection=null,l.call(g)),st.end(tt,b.name)}function Gt(tt){switch(tt.keyCode){case 16:{nt=w&&_;break}case 18:{b===zu&&(w&&(N=F-P*w,D=A+P*w),_&&(k=$-U*_,C=S+U*_),b=qu,kt(tt));break}case 32:{(b===zu||b===qu)&&(w<0?N=F-P:w>0&&(D=A-P),_<0?k=$-U:_>0&&(C=S-U),b=bI,Z.attr("cursor",ks.selection),kt(tt));break}default:return}Cx(tt)}function Zt(tt){switch(tt.keyCode){case 16:{nt&&(ot=at=nt=!1,kt(tt));break}case 18:{b===qu&&(w<0?N=F:w>0&&(D=A),_<0?k=$:_>0&&(C=S),b=zu,kt(tt));break}case 32:{b===bI&&(tt.altKey?(w&&(N=F-P*w,D=A+P*w),_&&(k=$-U*_,C=S+U*_),b=qu):(w<0?N=F:w>0&&(D=A),_<0?k=$:_>0&&(C=S),b=zu),Z.attr("cursor",ks[x]),kt(tt));break}default:return}Cx(tt)}}function d(y){u(this,arguments).moved(y)}function p(y){u(this,arguments).ended(y)}function m(){var y=this.__brush||{selection:null};return y.extent=vI(t.apply(this,arguments)),y.dim=e,y}return c.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Lx(vI(y)),c):t},c.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Lx(!!y),c):n},c.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Lx(!!y),c):r},c.handleSize=function(y){return arguments.length?(s=+y,c):s},c.keyModifiers=function(y){return arguments.length?(i=!!y,c):i},c.on=function(){var y=o.on.apply(o,arguments);return y===o?c:y},c}var AI=Math.PI,TI=2*AI,nl=1e-6,PW=TI-nl;function bC(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function UW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bC;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Ca=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bC:UW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-t,l=i-n,u=s-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>nl)if(!(Math.abs(f*c-l*u)>nl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-s,p=i-a,m=c*c+l*l,y=d*d+p*p,g=Math.sqrt(m),x=Math.sqrt(h),b=o*Math.tan((AI-Math.acos((m+h-y)/(2*g*x)))/2),w=b/x,_=b/g;Math.abs(w-1)>nl&&this._append`L${t+w*u},${n+w*f}`,this._append`A${o},${o},0,0,${+(f*d>u*p)},${this._x1=t+_*c},${this._y1=n+_*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=t+a,u=n+c,f=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>nl||Math.abs(this._y1-u)>nl)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%TI+TI),h>PW?this._append`A${r},${r},0,1,${f},${t-a},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:h>nl&&this._append`A${r},${r},0,${+(h>=AI)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function wC(){return new Ca}wC.prototype=Ca.prototype;function nr(e=3){return new Ca(+e)}var zW=Array.prototype,Rx=zW.slice;function vC(e,t){return e-t}function _C(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}var Eo=e=>()=>e;function SC(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=qW(e,t[n]))return i;return 0}function qW(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var c=e[o],l=c[0],u=c[1],f=e[a],h=f[0],d=f[1];if(jW(c,f,t))return 0;u>r!=d>r&&n<(h-l)*(r-u)/(d-u)+l&&(i=-i)}return i}function jW(e,t,n){var r;return VW(e,t,n)&&YW(e[r=+(e[0]===t[0])],n[r],t[r])}function VW(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function YW(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function IC(){}var Fs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ka(){var e=1,t=1,n=Ea,r=c;function i(l){var u=n(l);if(Array.isArray(u))u=u.slice().sort(vC);else{let f=le(l,XW);for(u=An(...Du(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>o(l,f))}function o(l,u){let f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return s(l,f,function(p){r(p,l,f),_C(p)>0?h.push([p]):d.push(p)}),d.forEach(function(p){for(var m=0,y=h.length,g;m<y;++m)if(SC((g=h[m])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function s(l,u,f){var h=new Array,d=new Array,p,m,y,g,x,b;for(p=m=-1,g=rl(l[0],u),Fs[g<<1].forEach(w);++p<e-1;)y=g,g=rl(l[p+1],u),Fs[y|g<<1].forEach(w);for(Fs[g<<0].forEach(w);++m<t-1;){for(p=-1,g=rl(l[m*e+e],u),x=rl(l[m*e],u),Fs[g<<1|x<<2].forEach(w);++p<e-1;)y=g,g=rl(l[m*e+e+p+1],u),b=x,x=rl(l[m*e+p+1],u),Fs[y|g<<1|x<<2|b<<3].forEach(w);Fs[g|x<<3].forEach(w)}for(p=-1,x=l[m*e]>=u,Fs[x<<2].forEach(w);++p<e-1;)b=x,x=rl(l[m*e+p+1],u),Fs[x<<2|b<<3].forEach(w);Fs[x<<3].forEach(w);function w(_){var v=[_[0][0]+p,_[0][1]+m],M=[_[1][0]+p,_[1][1]+m],E=a(v),I=a(M),D,A;(D=d[E])?(A=h[I])?(delete d[D.end],delete h[A.start],D===A?(D.ring.push(M),f(D.ring)):h[D.start]=d[A.end]={start:D.start,end:A.end,ring:D.ring.concat(A.ring)}):(delete d[D.end],D.ring.push(M),d[D.end=I]=D):(D=h[I])?(A=d[E])?(delete h[D.start],delete d[A.end],D===A?(D.ring.push(M),f(D.ring)):h[A.start]=d[D.end]={start:A.start,end:D.end,ring:A.ring.concat(D.ring)}):(delete h[D.start],D.ring.unshift(v),h[D.start=E]=D):h[E]=d[I]={start:E,end:I,ring:[v,M]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function c(l,u,f){l.forEach(function(h){var d=h[0],p=h[1],m=d|0,y=p|0,g=EI(u[y*e+m]);d>0&&d<e&&m===d&&(h[0]=MC(d,EI(u[y*e+m-1]),g,f)),p>0&&p<t&&y===p&&(h[1]=MC(p,EI(u[(y-1)*e+m]),g,f))})}return i.contour=o,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(l){return arguments.length?(n=typeof l=="function"?l:Array.isArray(l)?Eo(Rx.call(l)):Eo(l),i):n},i.smooth=function(l){return arguments.length?(r=l?c:IC,i):r===c},i}function XW(e){return isFinite(e)?e:NaN}function rl(e,t){return e==null?!1:+e>=t}function EI(e){return e==null||isNaN(e=+e)?-1/0:e}function MC(e,t,n,r){let i=r-t,o=n-t,s=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(s)?e:e+s-.5}function WW(e){return e[0]}function GW(e){return e[1]}function HW(){return 1}function NI(){var e=WW,t=GW,n=HW,r=960,i=500,o=20,s=2,a=o*3,c=r+a*2>>s,l=i+a*2>>s,u=Eo(20);function f(x){var b=new Float32Array(c*l),w=Math.pow(2,-s),_=-1;for(let C of x){var v=(e(C,++_,x)+a)*w,M=(t(C,_,x)+a)*w,E=+n(C,_,x);if(E&&v>=0&&v<c&&M>=0&&M<l){var I=Math.floor(v),D=Math.floor(M),A=v-I-.5,O=M-D-.5;b[I+D*c]+=(1-A)*(1-O)*E,b[I+1+D*c]+=A*(1-O)*E,b[I+1+(D+1)*c]+=A*O*E,b[I+(D+1)*c]+=(1-A)*O*E}}return ap({data:b,width:c,height:l},o*w),b}function h(x){var b=f(x),w=u(b),_=Math.pow(2,2*s);return Array.isArray(w)||(w=An(Number.MIN_VALUE,Ht(b)/_,w)),ka().size([c,l]).thresholds(w.map(v=>v*_))(b).map((v,M)=>(v.value=+w[M],d(v)))}h.contours=function(x){var b=f(x),w=ka().size([c,l]),_=Math.pow(2,2*s),v=M=>{M=+M;var E=d(w.contour(b,M*_));return E.value=M,E};return Object.defineProperty(v,"max",{get:()=>Ht(b)/_}),v};function d(x){return x.coordinates.forEach(p),x}function p(x){x.forEach(m)}function m(x){x.forEach(y)}function y(x){x[0]=x[0]*Math.pow(2,s)-a,x[1]=x[1]*Math.pow(2,s)-a}function g(){return a=o*3,c=r+a*2>>s,l=i+a*2>>s,h}return h.x=function(x){return arguments.length?(e=typeof x=="function"?x:Eo(+x),h):e},h.y=function(x){return arguments.length?(t=typeof x=="function"?x:Eo(+x),h):t},h.weight=function(x){return arguments.length?(n=typeof x=="function"?x:Eo(+x),h):n},h.size=function(x){if(!arguments.length)return[r,i];var b=+x[0],w=+x[1];if(!(b>=0&&w>=0))throw new Error("invalid size");return r=b,i=w,g()},h.cellSize=function(x){if(!arguments.length)return 1<<s;if(!((x=+x)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(x)/Math.LN2),g()},h.thresholds=function(x){return arguments.length?(u=typeof x=="function"?x:Array.isArray(x)?Eo(Rx.call(x)):Eo(x),h):u},h.bandwidth=function(x){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((x=+x)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*x*x+1)-1)/2,g()},h}var Kt=11102230246251565e-32,Ge=134217729,Lp=(3+8*Kt)*Kt;function il(e,t,n,r,i){let o,s,a,c,l=t[0],u=r[0],f=0,h=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++h]);let d=0;if(f<e&&h<n)for(u>l==u>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=u+o,a=o-(s-u),u=r[++h]),o=s,a!==0&&(i[d++]=a);f<e&&h<n;)u>l==u>-l?(s=o+l,c=s-o,a=o-(s-c)+(l-c),l=t[++f]):(s=o+u,c=s-o,a=o-(s-c)+(u-c),u=r[++h]),o=s,a!==0&&(i[d++]=a);for(;f<e;)s=o+l,c=s-o,a=o-(s-c)+(l-c),l=t[++f],o=s,a!==0&&(i[d++]=a);for(;h<n;)s=o+u,c=s-o,a=o-(s-c)+(u-c),u=r[++h],o=s,a!==0&&(i[d++]=a);return(o!==0||d===0)&&(i[d++]=o),d}function Cp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function V(e){return new Float64Array(e)}var ZW=(3+16*Kt)*Kt,JW=(2+12*Kt)*Kt,QW=(9+64*Kt)*Kt*Kt,ju=V(4),AC=V(8),TC=V(12),EC=V(16),rr=V(4);function KW(e,t,n,r,i,o,s){let a,c,l,u,f,h,d,p,m,y,g,x,b,w,_,v,M,E,I=e-i,D=n-i,A=t-o,O=r-o;w=I*O,h=Ge*I,d=h-(h-I),p=I-d,h=Ge*O,m=h-(h-O),y=O-m,_=p*y-(w-d*m-p*m-d*y),v=A*D,h=Ge*A,d=h-(h-A),p=A-d,h=Ge*D,m=h-(h-D),y=D-m,M=p*y-(v-d*m-p*m-d*y),g=_-M,f=_-g,ju[0]=_-(g+f)+(f-M),x=w+g,f=x-w,b=w-(x-f)+(g-f),g=b-v,f=b-g,ju[1]=b-(g+f)+(f-v),E=x+g,f=E-x,ju[2]=x-(E-f)+(g-f),ju[3]=E;let C=Cp(4,ju),S=JW*s;if(C>=S||-C>=S||(f=e-I,a=e-(I+f)+(f-i),f=n-D,l=n-(D+f)+(f-i),f=t-A,c=t-(A+f)+(f-o),f=r-O,u=r-(O+f)+(f-o),a===0&&c===0&&l===0&&u===0)||(S=QW*s+Lp*Math.abs(C),C+=I*u+O*a-(A*l+D*c),C>=S||-C>=S))return C;w=a*O,h=Ge*a,d=h-(h-a),p=a-d,h=Ge*O,m=h-(h-O),y=O-m,_=p*y-(w-d*m-p*m-d*y),v=c*D,h=Ge*c,d=h-(h-c),p=c-d,h=Ge*D,m=h-(h-D),y=D-m,M=p*y-(v-d*m-p*m-d*y),g=_-M,f=_-g,rr[0]=_-(g+f)+(f-M),x=w+g,f=x-w,b=w-(x-f)+(g-f),g=b-v,f=b-g,rr[1]=b-(g+f)+(f-v),E=x+g,f=E-x,rr[2]=x-(E-f)+(g-f),rr[3]=E;let T=il(4,ju,4,rr,AC);w=I*u,h=Ge*I,d=h-(h-I),p=I-d,h=Ge*u,m=h-(h-u),y=u-m,_=p*y-(w-d*m-p*m-d*y),v=A*l,h=Ge*A,d=h-(h-A),p=A-d,h=Ge*l,m=h-(h-l),y=l-m,M=p*y-(v-d*m-p*m-d*y),g=_-M,f=_-g,rr[0]=_-(g+f)+(f-M),x=w+g,f=x-w,b=w-(x-f)+(g-f),g=b-v,f=b-g,rr[1]=b-(g+f)+(f-v),E=x+g,f=E-x,rr[2]=x-(E-f)+(g-f),rr[3]=E;let N=il(T,AC,4,rr,TC);w=a*u,h=Ge*a,d=h-(h-a),p=a-d,h=Ge*u,m=h-(h-u),y=u-m,_=p*y-(w-d*m-p*m-d*y),v=c*l,h=Ge*c,d=h-(h-c),p=c-d,h=Ge*l,m=h-(h-l),y=l-m,M=p*y-(v-d*m-p*m-d*y),g=_-M,f=_-g,rr[0]=_-(g+f)+(f-M),x=w+g,f=x-w,b=w-(x-f)+(g-f),g=b-v,f=b-g,rr[1]=b-(g+f)+(f-v),E=x+g,f=E-x,rr[2]=x-(E-f)+(g-f),rr[3]=E;let F=il(N,TC,4,rr,EC);return EC[F-1]}function Vu(e,t,n,r,i,o){let s=(t-o)*(n-i),a=(e-i)*(r-o),c=s-a,l=Math.abs(s+a);return Math.abs(c)>=ZW*l?c:-KW(e,t,n,r,i,o,l)}var a_t=(7+56*Kt)*Kt,c_t=(3+28*Kt)*Kt,l_t=(26+288*Kt)*Kt*Kt,u_t=V(4),f_t=V(4),h_t=V(4),d_t=V(4),p_t=V(4),m_t=V(4),y_t=V(4),g_t=V(4),x_t=V(4),b_t=V(8),w_t=V(8),v_t=V(8),__t=V(4),S_t=V(8),I_t=V(8),M_t=V(8),A_t=V(12),T_t=V(192),E_t=V(192);var O_t=(10+96*Kt)*Kt,B_t=(4+48*Kt)*Kt,L_t=(44+576*Kt)*Kt*Kt,C_t=V(4),k_t=V(4),F_t=V(4),R_t=V(4),$_t=V(4),P_t=V(4),U_t=V(4),z_t=V(4),q_t=V(8),j_t=V(8),V_t=V(8),Y_t=V(8),X_t=V(8),W_t=V(8),G_t=V(8),H_t=V(8),Z_t=V(8),J_t=V(4),Q_t=V(4),K_t=V(4),t2t=V(8),e2t=V(16),n2t=V(16),r2t=V(16),i2t=V(32),o2t=V(32),s2t=V(48),a2t=V(64),c2t=V(1152),l2t=V(1152);var d2t=(16+224*Kt)*Kt,p2t=(5+72*Kt)*Kt,m2t=(71+1408*Kt)*Kt*Kt,y2t=V(4),g2t=V(4),x2t=V(4),b2t=V(4),w2t=V(4),v2t=V(4),_2t=V(4),S2t=V(4),I2t=V(4),M2t=V(4),A2t=V(24),T2t=V(24),E2t=V(24),N2t=V(24),D2t=V(24),O2t=V(24),B2t=V(24),L2t=V(24),C2t=V(24),k2t=V(24),F2t=V(1152),R2t=V(1152),$2t=V(1152),P2t=V(1152),U2t=V(1152),z2t=V(2304),q2t=V(2304),j2t=V(3456),V2t=V(5760),Y2t=V(8),X2t=V(8),W2t=V(8),G2t=V(16),H2t=V(24),Z2t=V(48),J2t=V(48),Q2t=V(96),K2t=V(192),tSt=V(384),eSt=V(384),nSt=V(384),rSt=V(768);var iSt=V(96),oSt=V(96),sSt=V(96),aSt=V(1152);var DC=Math.pow(2,-52),$x=new Uint32Array(512),Xu=class e{static from(t,n=oG,r=sG){let i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){let a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1,a=1/0,c=1/0,l=-1/0,u=-1/0;for(let I=0;I<s;I++){let D=t[2*I],A=t[2*I+1];D<a&&(a=D),A<c&&(c=A),D>l&&(l=D),A>u&&(u=A),this._ids[I]=I}let f=(a+l)/2,h=(c+u)/2,d,p,m;for(let I=0,D=1/0;I<s;I++){let A=DI(f,h,t[2*I],t[2*I+1]);A<D&&(d=I,D=A)}let y=t[2*d],g=t[2*d+1];for(let I=0,D=1/0;I<s;I++){if(I===d)continue;let A=DI(y,g,t[2*I],t[2*I+1]);A<D&&A>0&&(p=I,D=A)}let x=t[2*p],b=t[2*p+1],w=1/0;for(let I=0;I<s;I++){if(I===d||I===p)continue;let D=rG(y,g,x,b,t[2*I],t[2*I+1]);D<w&&(m=I,w=D)}let _=t[2*m],v=t[2*m+1];if(w===1/0){for(let A=0;A<s;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Yu(this._ids,this._dists,0,s-1);let I=new Uint32Array(s),D=0;for(let A=0,O=-1/0;A<s;A++){let C=this._ids[A],S=this._dists[C];S>O&&(I[D++]=C,O=S)}this.hull=I.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Vu(y,g,x,b,_,v)<0){let I=p,D=x,A=b;p=m,x=_,b=v,m=I,_=D,v=A}let M=iG(y,g,x,b,_,v);this._cx=M.x,this._cy=M.y;for(let I=0;I<s;I++)this._dists[I]=DI(t[2*I],t[2*I+1],M.x,M.y);Yu(this._ids,this._dists,0,s-1),this._hullStart=d;let E=3;r[d]=n[m]=p,r[p]=n[d]=m,r[m]=n[p]=d,i[d]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,g)]=d,o[this._hashKey(x,b)]=p,o[this._hashKey(_,v)]=m,this.trianglesLen=0,this._addTriangle(d,p,m,-1,-1,-1);for(let I=0,D,A;I<this._ids.length;I++){let O=this._ids[I],C=t[2*O],S=t[2*O+1];if(I>0&&Math.abs(C-D)<=DC&&Math.abs(S-A)<=DC||(D=C,A=S,O===d||O===p||O===m))continue;let T=0;for(let $=0,P=this._hashKey(C,S);$<this._hashSize&&(T=o[(P+$)%this._hashSize],!(T!==-1&&T!==r[T]));$++);T=n[T];let N=T,F;for(;F=r[N],Vu(C,S,t[2*N],t[2*N+1],t[2*F],t[2*F+1])>=0;)if(N=F,N===T){N=-1;break}if(N===-1)continue;let R=this._addTriangle(N,O,r[N],-1,-1,i[N]);i[O]=this._legalize(R+2),i[N]=R,E++;let k=r[N];for(;F=r[k],Vu(C,S,t[2*k],t[2*k+1],t[2*F],t[2*F+1])<0;)R=this._addTriangle(k,O,F,i[O],-1,i[k]),i[O]=this._legalize(R+2),r[k]=k,E--,k=F;if(N===T)for(;F=n[N],Vu(C,S,t[2*F],t[2*F+1],t[2*N],t[2*N+1])<0;)R=this._addTriangle(F,O,N,-1,i[N],i[F]),this._legalize(R+2),i[F]=R,r[N]=N,E--,N=F;this._hullStart=n[O]=N,r[N]=n[k]=O,r[O]=k,o[this._hashKey(C,S)]=O,o[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(E);for(let I=0,D=this._hullStart;I<E;I++)this.hull[I]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(eG(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,s=0;for(;;){let a=r[t],c=t-t%3;if(s=c+(t+2)%3,a===-1){if(o===0)break;t=$x[--o];continue}let l=a-a%3,u=c+(t+1)%3,f=l+(a+2)%3,h=n[s],d=n[t],p=n[u],m=n[f];if(nG(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=h;let g=r[f];if(g===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,g),this._link(a,r[s]),this._link(s,f);let x=l+(a+1)%3;o<$x.length&&($x[o++]=x)}else{if(o===0)break;t=$x[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){let a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}};function eG(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function DI(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function nG(e,t,n,r,i,o,s,a){let c=e-s,l=t-a,u=n-s,f=r-a,h=i-s,d=o-a,p=c*c+l*l,m=u*u+f*f,y=h*h+d*d;return c*(f*y-m*d)-l*(u*y-m*h)+p*(u*d-f*h)<0}function rG(e,t,n,r,i,o){let s=n-e,a=r-t,c=i-e,l=o-t,u=s*s+a*a,f=c*c+l*l,h=.5/(s*l-a*c),d=(l*u-a*f)*h,p=(s*f-c*u)*h;return d*d+p*p}function iG(e,t,n,r,i,o){let s=n-e,a=r-t,c=i-e,l=o-t,u=s*s+a*a,f=c*c+l*l,h=.5/(s*l-a*c),d=e+(l*u-a*f)*h,p=t+(s*f-c*u)*h;return{x:d,y:p}}function Yu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],s=t[o],a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let i=n+r>>1,o=n+1,s=r;kp(e,i,o),t[e[n]]>t[e[r]]&&kp(e,n,r),t[e[o]]>t[e[r]]&&kp(e,o,r),t[e[n]]>t[e[o]]&&kp(e,n,o);let a=e[o],c=t[a];for(;;){do o++;while(t[e[o]]<c);do s--;while(t[e[s]]>c);if(s<o)break;kp(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Yu(e,t,o,r),Yu(e,t,n,s-1)):(Yu(e,t,n,s-1),Yu(e,t,o,r))}}function kp(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function oG(e){return e[0]}function sG(e){return e[1]}var hi=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var Fa=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var Fp=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,s,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,y=0,g=r.length,x,b;m<g;m+=3,y+=2){let w=r[m]*2,_=r[m+1]*2,v=r[m+2]*2,M=t[w],E=t[w+1],I=t[_],D=t[_+1],A=t[v],O=t[v+1],C=I-M,S=D-E,T=A-M,N=O-E,F=(C*N-S*T)*2;if(Math.abs(F)<1e-9){if(o===void 0){o=s=0;for(let k of n)o+=t[k*2],s+=t[k*2+1];o/=n.length,s/=n.length}let R=1e9*Math.sign((o-M)*N-(s-E)*T);x=(M+A)/2-R*N,b=(E+O)/2+R*T}else{let R=1/F,k=C*C+S*S,$=T*T+N*N;x=M+(N*k-S*$)*R,b=E+(C*$-T*k)*R}a[y]=x,a[y+1]=b}let c=n[n.length-1],l,u=c*4,f,h=t[2*c],d,p=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=h,d=p,u=c*4,h=t[2*c],p=t[2*c+1],i[l+2]=i[u]=d-p,i[l+3]=i[u+1]=h-f}render(t){let n=t==null?t=new hi:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let h=r[u];if(h<u)continue;let d=Math.floor(u/3)*2,p=Math.floor(h/3)*2,m=s[d],y=s[d+1],g=s[p],x=s[p+1];this._renderSegment(m,y,g,x,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,h=s[f],d=s[f+1],p=c*4,m=this._project(h,d,a[p+2],a[p+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new hi:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new hi:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new Fa;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s,a=this._regioncode(t,n),c=this._regioncode(r,i);a===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,c))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){t:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,c=i.length;a<c;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+c-2)%c]&&n[(o+3)%s]===i[(a+c-1)%c]){yield r;break t}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;let a=[],c=s;do{let l=Math.floor(c/3);if(a.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==s&&c!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,s,a=n[r-2],c=n[r-1],l,u=this._regioncode(a,c),f,h=0;for(let d=0;d<r;d+=2)if(o=a,s=c,a=n[d],c=n[d+1],l=u,u=this._regioncode(a,c),l===0&&u===0)f=h,h=0,i?i.push(a,c):i=[a,c];else{let p,m,y,g,x;if(l===0){if((p=this._clipSegment(o,s,a,c,l,u))===null)continue;[m,y,g,x]=p}else{if((p=this._clipSegment(a,c,o,s,u,l))===null)continue;[g,x,m,y]=p,f=h,h=this._edgecode(m,y),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(m,y):i=[m,y]}f=h,h=this._edgecode(g,x),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(g,x):i=[g,x]}if(i)f=h,h=this._edgecode(i[0],i[1]),f&&h&&this._edge(t,f,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){let a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let c,l,u=o||s;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),c;if((c=this._project(a[0],a[1],r,i))&&a.unshift(c[0],c[1]),(c=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(c[0],c[1]),a=this._clipFinite(t,a))for(let l=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);l<u;l+=2)f=h,h=this._edgecode(a[l],a[l+1]),f&&h&&(l=this._edge(t,f,h,a,l),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,c;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(c=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(c=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,c=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,c=n+(o=s)*i)}return[a,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var aG=2*Math.PI,Wu=Math.pow;function cG(e){return e[0]}function lG(e){return e[1]}function uG(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function fG(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var di=class e{static from(t,n=cG,r=lG,i){return new e("length"in t?hG(t,n,r,i):Float64Array.from(dG(t,n,r,i)))}constructor(t){this._delaunator=new Xu(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&uG(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){let p=fG(n[2*h],n[2*h+1],f);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new Xu(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||s[u]===-1)&&(s[u]=c)}for(let c=0,l=i.length;c<l;++c)a[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Fp(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){let f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=Wu(n-l[t*2],2)+Wu(r-l[t*2+1],2),h=i[t],d=h;do{let p=c[d],m=Wu(n-l[p*2],2)+Wu(r-l[p*2+1],2);if(m<f&&(f=m,u=p),d=d%3===2?d-2:d+1,c[d]!==t)break;if(d=a[d],d===-1){if(d=o[(s[t]+1)%o.length],d!==p&&Wu(n-l[d*2],2)+Wu(r-l[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){let n=t==null?t=new hi:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){let c=i[s];if(c<s)continue;let l=o[s]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new hi:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){let a=i[o],c=i[o+1];t.moveTo(a+n,c),t.arc(a,c,n,0,aG)}return r&&r.value()}renderHull(t){let n=t==null?t=new hi:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){let c=2*r[a];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new Fa;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new hi:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new Fa;return this.renderTriangle(t,n),n.value()}};function hG(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){let a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*dG(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function OC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ol(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function No(e){return e=ol(Math.abs(e)),e?e[1]:NaN}function BC(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function LC(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var pG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Do(e){if(!(t=pG.exec(e)))throw new Error("invalid format: "+e);var t;return new Px({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Do.prototype=Px.prototype;function Px(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Px.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CC(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var OI;function kC(e,t){var n=ol(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(OI=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ol(e,Math.max(0,t+o-1))[0]}function BI(e,t){var n=ol(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var LI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OC,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>BI(e*100,t),r:BI,s:kC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function CI(e){return e}var FC=Array.prototype.map,RC=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function $C(e){var t=e.grouping===void 0||e.thousands===void 0?CI:BC(FC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?CI:LC(FC.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Do(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,y=f.zero,g=f.width,x=f.comma,b=f.precision,w=f.trim,_=f.type;_==="n"?(x=!0,_="g"):LI[_]||(b===void 0&&(b=12),w=!0,_="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var v=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",M=m==="$"?r:/[%p]/.test(_)?s:"",E=LI[_],I=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(A){var O=v,C=M,S,T,N;if(_==="c")C=E(A)+C,A="";else{A=+A;var F=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),b),w&&(A=CC(A)),F&&+A==0&&p!=="+"&&(F=!1),O=(F?p==="("?p:a:p==="-"||p==="("?"":p)+O,C=(_==="s"?RC[8+OI/3]:"")+C+(F&&p==="("?")":""),I){for(S=-1,T=A.length;++S<T;)if(N=A.charCodeAt(S),48>N||N>57){C=(N===46?i+A.slice(S+1):A.slice(S))+C,A=A.slice(0,S);break}}}x&&!y&&(A=t(A,1/0));var R=O.length+A.length+C.length,k=R<g?new Array(g-R+1).join(h):"";switch(x&&y&&(A=t(k+A,k.length?g-C.length:1/0),k=""),d){case"<":A=O+A+C+k;break;case"=":A=O+k+A+C;break;case"^":A=k.slice(0,R=k.length>>1)+O+A+C+k.slice(R);break;default:A=k+O+A+C;break}return o(A)}return D.toString=function(){return f+""},D}function u(f,h){var d=l((f=Do(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(No(h)/3)))*3,m=Math.pow(10,-p),y=RC[8+p/3];return function(g){return d(m*g)+y}}return{format:l,formatPrefix:u}}var Ux,pi,zx;kI({thousands:",",grouping:[3],currency:["$",""]});function kI(e){return Ux=$C(e),pi=Ux.format,zx=Ux.formatPrefix,Ux}function FI(e){return Math.max(0,-No(Math.abs(e)))}function RI(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(No(t)/3)))*3-No(Math.abs(e)))}function $I(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,No(t)-No(e))+1}var et=1e-6,sl=1e-12,Ot=Math.PI,me=Ot/2,PI=Ot/4,un=Ot*2,$e=180/Ot,Yt=Ot/180,Rt=Math.abs,mi=Math.atan,He=Math.atan2,K=Math.cos,Rp=Math.ceil,qx=Math.exp;var jx=Math.hypot,al=Math.log,Vx=Math.pow,Q=Math.sin,Un=Math.sign||function(e){return e>0?1:e<0?-1:0},ye=Math.sqrt,Gu=Math.tan;function Yx(e){return e>1?0:e<-1?Ot:Math.acos(e)}function Se(e){return e>1?me:e<-1?-me:Math.asin(e)}function Ze(){}function Xx(e,t){e&&UC.hasOwnProperty(e.type)&&UC[e.type](e,t)}var PC={Feature:function(e,t){Xx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Xx(n[r].geometry,t)}},UC={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){UI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)UI(n[r],t,0)},Polygon:function(e,t){zC(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)zC(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Xx(n[r],t)}};function UI(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function zC(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)UI(e[n],t,1);t.polygonEnd()}function Pr(e,t){e&&PC.hasOwnProperty(e.type)?PC[e.type](e,t):Xx(e,t)}function $p(e){return[He(e[1],e[0]),Se(e[2])]}function Oo(e){var t=e[0],n=e[1],r=K(n);return[r*K(t),r*Q(t),Q(n)]}function Pp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hu(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Wx(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Up(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zp(e){var t=ye(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var qp,Gx,Hx,Zx,Jx,Qx,Kx,tb,zI,qI,jI,VC,YC,ir,or,sr,qi={sphere:Ze,point:VI,lineStart:qC,lineEnd:jC,polygonStart:function(){qi.lineStart=gG,qi.lineEnd=xG},polygonEnd:function(){qi.lineStart=qC,qi.lineEnd=jC}};function VI(e,t){e*=Yt,t*=Yt;var n=K(t);jp(n*K(e),n*Q(e),Q(t))}function jp(e,t,n){++qp,Hx+=(e-Hx)/qp,Zx+=(t-Zx)/qp,Jx+=(n-Jx)/qp}function qC(){qi.point=mG}function mG(e,t){e*=Yt,t*=Yt;var n=K(t);ir=n*K(e),or=n*Q(e),sr=Q(t),qi.point=yG,jp(ir,or,sr)}function yG(e,t){e*=Yt,t*=Yt;var n=K(t),r=n*K(e),i=n*Q(e),o=Q(t),s=He(ye((s=or*o-sr*i)*s+(s=sr*r-ir*o)*s+(s=ir*i-or*r)*s),ir*r+or*i+sr*o);Gx+=s,Qx+=s*(ir+(ir=r)),Kx+=s*(or+(or=i)),tb+=s*(sr+(sr=o)),jp(ir,or,sr)}function jC(){qi.point=VI}function gG(){qi.point=bG}function xG(){XC(VC,YC),qi.point=VI}function bG(e,t){VC=e,YC=t,e*=Yt,t*=Yt,qi.point=XC;var n=K(t);ir=n*K(e),or=n*Q(e),sr=Q(t),jp(ir,or,sr)}function XC(e,t){e*=Yt,t*=Yt;var n=K(t),r=n*K(e),i=n*Q(e),o=Q(t),s=or*o-sr*i,a=sr*r-ir*o,c=ir*i-or*r,l=jx(s,a,c),u=Se(l),f=l&&-u/l;zI.add(f*s),qI.add(f*a),jI.add(f*c),Gx+=u,Qx+=u*(ir+(ir=r)),Kx+=u*(or+(or=i)),tb+=u*(sr+(sr=o)),jp(ir,or,sr)}function YI(e){qp=Gx=Hx=Zx=Jx=Qx=Kx=tb=0,zI=new Mn,qI=new Mn,jI=new Mn,Pr(e,qi);var t=+zI,n=+qI,r=+jI,i=jx(t,n,r);return i<sl&&(t=Qx,n=Kx,r=tb,Gx<et&&(t=Hx,n=Zx,r=Jx),i=jx(t,n,r),i<sl)?[NaN,NaN]:[He(n,t)*$e,Se(r/i)*$e]}function Vp(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function XI(e,t){return Rt(e)>Ot&&(e-=Math.round(e/un)*un),[e,t]}XI.invert=XI;function WI(e,t,n){return(e%=un)?t||n?Vp(GC(e),HC(t,n)):GC(e):t||n?HC(t,n):XI}function WC(e){return function(t,n){return t+=e,Rt(t)>Ot&&(t-=Math.round(t/un)*un),[t,n]}}function GC(e){var t=WC(e);return t.invert=WC(-e),t}function HC(e,t){var n=K(e),r=Q(e),i=K(t),o=Q(t);function s(a,c){var l=K(c),u=K(a)*l,f=Q(a)*l,h=Q(c),d=h*n+u*r;return[He(f*i-d*o,u*n-h*r),Se(d*i+f*o)]}return s.invert=function(a,c){var l=K(c),u=K(a)*l,f=Q(a)*l,h=Q(c),d=h*i-f*o;return[He(f*i+h*o,u*n+d*r),Se(d*n-u*r)]},s}function ZC(e){e=WI(e[0]*Yt,e[1]*Yt,e.length>2?e[2]*Yt:0);function t(n){return n=e(n[0]*Yt,n[1]*Yt),n[0]*=$e,n[1]*=$e,n}return t.invert=function(n){return n=e.invert(n[0]*Yt,n[1]*Yt),n[0]*=$e,n[1]*=$e,n},t}function QC(e,t,n,r,i,o){if(n){var s=K(t),a=Q(t),c=r*n;i==null?(i=t+r*un,o=t-c/2):(i=JC(s,i),o=JC(s,o),(r>0?i<o:i>o)&&(i+=r*un));for(var l,u=i;r>0?u>o:u<o;u-=c)l=$p([s,-a*K(u),-a*Q(u)]),e.point(l[0],l[1])}}function JC(e,t){t=Oo(t),t[0]-=e,zp(t);var n=Yx(-t[1]);return((-t[2]<0?-n:n)+un-et)%un}function eb(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ze,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Zu(e,t){return Rt(e[0]-t[0])<et&&Rt(e[1]-t[1])<et}function nb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rb(e,t,n,r,i){var o=[],s=[],a,c;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],g=p[m],x;if(Zu(y,g)){if(!y[2]&&!g[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}g[0]+=2*et}o.push(x=new nb(y,p,null,!0)),s.push(x.o=new nb(y,null,x,!1)),o.push(x=new nb(g,p,null,!1)),s.push(x.o=new nb(g,null,x,!0))}}),!!o.length){for(s.sort(t),KC(o),KC(s),a=0,c=s.length;a<c;++a)s[a].e=n=!n;for(var l=o[0],u,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,c=u.length;a<c;++a)i.point((f=u[a])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function KC(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function GI(e){return Rt(e[0])<=Ot?e[0]:Un(e[0])*((Rt(e[0])+Ot)%un-Ot)}function tk(e,t){var n=GI(t),r=t[1],i=Q(r),o=[Q(n),-K(n),0],s=0,a=0,c=new Mn;i===1?r=me+et:i===-1&&(r=-me-et);for(var l=0,u=e.length;l<u;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],p=GI(d),m=d[1]/2+PI,y=Q(m),g=K(m),x=0;x<h;++x,p=w,y=v,g=M,d=b){var b=f[x],w=GI(b),_=b[1]/2+PI,v=Q(_),M=K(_),E=w-p,I=E>=0?1:-1,D=I*E,A=D>Ot,O=y*v;if(c.add(He(O*I*Q(D),g*M+O*K(D))),s+=A?E+I*un:E,A^p>=n^w>=n){var C=Hu(Oo(d),Oo(b));zp(C);var S=Hu(o,C);zp(S);var T=(A^E>=0?-1:1)*Se(S[2]);(r>T||r===T&&(C[0]||C[1]))&&(a+=A^E>=0?1:-1)}}return(s<-et||s<et&&c<-sl)^a&1}function ib(e,t,n,r){return function(i){var o=t(i),s=eb(),a=t(s),c=!1,l,u,f,h={point:d,lineStart:m,lineEnd:y,polygonStart:function(){h.point=g,h.lineStart=x,h.lineEnd=b,u=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=y,u=Ou(u);var w=tk(l,r);u.length?(c||(i.polygonStart(),c=!0),rb(u,vG,w,n,i)):w&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,_){e(w,_)&&i.point(w,_)}function p(w,_){o.point(w,_)}function m(){h.point=p,o.lineStart()}function y(){h.point=d,o.lineEnd()}function g(w,_){f.push([w,_]),a.point(w,_)}function x(){a.lineStart(),f=[]}function b(){g(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),_=s.result(),v,M=_.length,E,I,D;if(f.pop(),l.push(f),f=null,!!M){if(w&1){if(I=_[0],(E=I.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),v=0;v<E;++v)i.point((D=I[v])[0],D[1]);i.lineEnd()}return}M>1&&w&2&&_.push(_.pop().concat(_.shift())),u.push(_.filter(wG))}}return h}}function wG(e){return e.length>1}function vG(e,t){return((e=e.x)[0]<0?e[1]-me-et:me-e[1])-((t=t.x)[0]<0?t[1]-me-et:me-t[1])}var HI=ib(function(){return!0},_G,IG,[-Ot,-me]);function _G(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Ot:-Ot,c=Rt(o-t);Rt(c-Ot)<et?(e.point(t,n=(n+s)/2>0?me:-me),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&c>=Ot&&(Rt(t-r)<et&&(t-=r*et),Rt(o-a)<et&&(o-=a*et),n=SG(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function SG(e,t,n,r){var i,o,s=Q(e-n);return Rt(s)>et?mi((Q(t)*(o=K(r))*Q(n)-Q(r)*(i=K(t))*Q(e))/(i*o*s)):(t+r)/2}function IG(e,t,n,r){var i;if(e==null)i=n*me,r.point(-Ot,i),r.point(0,i),r.point(Ot,i),r.point(Ot,0),r.point(Ot,-i),r.point(0,-i),r.point(-Ot,-i),r.point(-Ot,0),r.point(-Ot,i);else if(Rt(e[0]-t[0])>et){var o=e[0]<t[0]?Ot:-Ot;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function ek(e){var t=K(e),n=6*Yt,r=t>0,i=Rt(t)>et;function o(u,f,h,d){QC(d,e,n,h,u,f)}function s(u,f){return K(u)*K(f)>t}function a(u){var f,h,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(y,g){var x=[y,g],b,w=s(y,g),_=r?w?0:l(y,g):w?l(y+(y<0?Ot:-Ot),g):0;if(!f&&(p=d=w)&&u.lineStart(),w!==d&&(b=c(f,x),(!b||Zu(f,b)||Zu(x,b))&&(x[2]=1)),w!==d)m=0,w?(u.lineStart(),b=c(x,f),u.point(b[0],b[1])):(b=c(f,x),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^w){var v;!(_&h)&&(v=c(x,f,!0))&&(m=0,r?(u.lineStart(),u.point(v[0][0],v[0][1]),u.point(v[1][0],v[1][1]),u.lineEnd()):(u.point(v[1][0],v[1][1]),u.lineEnd(),u.lineStart(),u.point(v[0][0],v[0][1],3)))}w&&(!f||!Zu(f,x))&&u.point(x[0],x[1]),f=x,d=w,h=_},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(p&&d)<<1}}}function c(u,f,h){var d=Oo(u),p=Oo(f),m=[1,0,0],y=Hu(d,p),g=Pp(y,y),x=y[0],b=g-x*x;if(!b)return!h&&u;var w=t*g/b,_=-t*x/b,v=Hu(m,y),M=Up(m,w),E=Up(y,_);Wx(M,E);var I=v,D=Pp(M,I),A=Pp(I,I),O=D*D-A*(Pp(M,M)-1);if(!(O<0)){var C=ye(O),S=Up(I,(-D-C)/A);if(Wx(S,M),S=$p(S),!h)return S;var T=u[0],N=f[0],F=u[1],R=f[1],k;N<T&&(k=T,T=N,N=k);var $=N-T,P=Rt($-Ot)<et,U=P||$<et;if(!P&&R<F&&(k=F,F=R,R=k),U?P?F+R>0^S[1]<(Rt(S[0]-T)<et?F:R):F<=S[1]&&S[1]<=R:$>Ot^(T<=S[0]&&S[0]<=N)){var G=Up(I,(-D+C)/A);return Wx(G,M),[S,$p(G)]}}}function l(u,f){var h=r?e:Ot-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return ib(s,a,o,r?[0,-e]:[-Ot,e-Ot])}function nk(e,t,n,r,i,o){var s=e[0],a=e[1],c=t[0],l=t[1],u=0,f=1,h=c-s,d=l-a,p;if(p=n-s,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=i-s,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}if(p=r-a,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=o-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=s+u*h,e[1]=a+u*d),f<1&&(t[0]=s+f*h,t[1]=a+f*d),!0}}}}}var Yp=1e9,ob=-Yp;function Ju(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,h){var d=0,p=0;if(l==null||(d=s(l,f))!==(p=s(u,f))||c(l,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==p);else h.point(u[0],u[1])}function s(l,u){return Rt(l[0]-e)<et?u>0?0:3:Rt(l[0]-n)<et?u>0?2:1:Rt(l[1]-t)<et?u>0?1:0:u>0?3:2}function a(l,u){return c(l.x,u.x)}function c(l,u){var f=s(l,1),h=s(u,1);return f!==h?f-h:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=eb(),h,d,p,m,y,g,x,b,w,_,v,M={point:E,lineStart:O,lineEnd:C,polygonStart:D,polygonEnd:A};function E(T,N){i(T,N)&&u.point(T,N)}function I(){for(var T=0,N=0,F=d.length;N<F;++N)for(var R=d[N],k=1,$=R.length,P=R[0],U,G,nt=P[0],ot=P[1];k<$;++k)U=nt,G=ot,P=R[k],nt=P[0],ot=P[1],G<=r?ot>r&&(nt-U)*(r-G)>(ot-G)*(e-U)&&++T:ot<=r&&(nt-U)*(r-G)<(ot-G)*(e-U)&&--T;return T}function D(){u=f,h=[],d=[],v=!0}function A(){var T=I(),N=v&&T,F=(h=Ou(h)).length;(N||F)&&(l.polygonStart(),N&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),F&&rb(h,a,T,o,l),l.polygonEnd()),u=l,h=d=p=null}function O(){M.point=S,d&&d.push(p=[]),_=!0,w=!1,x=b=NaN}function C(){h&&(S(m,y),g&&w&&f.rejoin(),h.push(f.result())),M.point=E,w&&u.lineEnd()}function S(T,N){var F=i(T,N);if(d&&p.push([T,N]),_)m=T,y=N,g=F,_=!1,F&&(u.lineStart(),u.point(T,N));else if(F&&w)u.point(T,N);else{var R=[x=Math.max(ob,Math.min(Yp,x)),b=Math.max(ob,Math.min(Yp,b))],k=[T=Math.max(ob,Math.min(Yp,T)),N=Math.max(ob,Math.min(Yp,N))];nk(R,k,e,t,n,r)?(w||(u.lineStart(),u.point(R[0],R[1])),u.point(k[0],k[1]),F||u.lineEnd(),v=!1):F&&(u.lineStart(),u.point(T,N),v=!1)}x=T,b=N,w=F}return M}}function rk(e,t,n){var r=Ue(e,t-et,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function ik(e,t,n){var r=Ue(e,t-et,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function ZI(){var e,t,n,r,i,o,s,a,c=10,l=c,u=90,f=360,h,d,p,m,y=2.5;function g(){return{type:"MultiLineString",coordinates:x()}}function x(){return Ue(Rp(r/u)*u,n,u).map(p).concat(Ue(Rp(a/f)*f,s,f).map(m)).concat(Ue(Rp(t/c)*c,e,c).filter(function(b){return Rt(b%u)>et}).map(h)).concat(Ue(Rp(o/l)*l,i,l).filter(function(b){return Rt(b%f)>et}).map(d))}return g.lines=function(){return x().map(function(b){return{type:"LineString",coordinates:b}})},g.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(s).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},g.extent=function(b){return arguments.length?g.extentMajor(b).extentMinor(b):g.extentMinor()},g.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),g.precision(y)):[[r,a],[n,s]]},g.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),g.precision(y)):[[t,o],[e,i]]},g.step=function(b){return arguments.length?g.stepMajor(b).stepMinor(b):g.stepMinor()},g.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],g):[u,f]},g.stepMinor=function(b){return arguments.length?(c=+b[0],l=+b[1],g):[c,l]},g.precision=function(b){return arguments.length?(y=+b,h=rk(o,i,90),d=ik(t,e,y),p=rk(a,s,90),m=ik(r,n,y),g):y},g.extentMajor([[-180,-90+et],[180,90-et]]).extentMinor([[-180,-80-et],[180,80+et]])}function JI(){return ZI()()}var Xp=e=>e;var QI=new Mn,KI=new Mn,ok,sk,tM,eM,Ra={point:Ze,lineStart:Ze,lineEnd:Ze,polygonStart:function(){Ra.lineStart=MG,Ra.lineEnd=TG},polygonEnd:function(){Ra.lineStart=Ra.lineEnd=Ra.point=Ze,QI.add(Rt(KI)),KI=new Mn},result:function(){var e=QI/2;return QI=new Mn,e}};function MG(){Ra.point=AG}function AG(e,t){Ra.point=ak,ok=tM=e,sk=eM=t}function ak(e,t){KI.add(eM*e-tM*t),tM=e,eM=t}function TG(){ak(ok,sk)}var nM=Ra;var Qu=1/0,sb=Qu,Wp=-Qu,ab=Wp,EG={point:NG,lineStart:Ze,lineEnd:Ze,polygonStart:Ze,polygonEnd:Ze,result:function(){var e=[[Qu,sb],[Wp,ab]];return Wp=ab=-(sb=Qu=1/0),e}};function NG(e,t){e<Qu&&(Qu=e),e>Wp&&(Wp=e),t<sb&&(sb=t),t>ab&&(ab=t)}var Ku=EG;var rM=0,iM=0,Gp=0,cb=0,lb=0,tf=0,oM=0,sM=0,Hp=0,uk,fk,Bo,Lo,ji={point:cl,lineStart:ck,lineEnd:lk,polygonStart:function(){ji.lineStart=BG,ji.lineEnd=LG},polygonEnd:function(){ji.point=cl,ji.lineStart=ck,ji.lineEnd=lk},result:function(){var e=Hp?[oM/Hp,sM/Hp]:tf?[cb/tf,lb/tf]:Gp?[rM/Gp,iM/Gp]:[NaN,NaN];return rM=iM=Gp=cb=lb=tf=oM=sM=Hp=0,e}};function cl(e,t){rM+=e,iM+=t,++Gp}function ck(){ji.point=DG}function DG(e,t){ji.point=OG,cl(Bo=e,Lo=t)}function OG(e,t){var n=e-Bo,r=t-Lo,i=ye(n*n+r*r);cb+=i*(Bo+e)/2,lb+=i*(Lo+t)/2,tf+=i,cl(Bo=e,Lo=t)}function lk(){ji.point=cl}function BG(){ji.point=CG}function LG(){hk(uk,fk)}function CG(e,t){ji.point=hk,cl(uk=Bo=e,fk=Lo=t)}function hk(e,t){var n=e-Bo,r=t-Lo,i=ye(n*n+r*r);cb+=i*(Bo+e)/2,lb+=i*(Lo+t)/2,tf+=i,i=Lo*e-Bo*t,oM+=i*(Bo+e),sM+=i*(Lo+t),Hp+=i*3,cl(Bo=e,Lo=t)}var aM=ji;function ub(e){this._context=e}ub.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,un);break}}},result:Ze};var lM=new Mn,cM,dk,pk,Zp,Jp,fb={point:Ze,lineStart:function(){fb.point=kG},lineEnd:function(){cM&&mk(dk,pk),fb.point=Ze},polygonStart:function(){cM=!0},polygonEnd:function(){cM=null},result:function(){var e=+lM;return lM=new Mn,e}};function kG(e,t){fb.point=mk,dk=Zp=e,pk=Jp=t}function mk(e,t){Zp-=e,Jp-=t,lM.add(ye(Zp*Zp+Jp*Jp)),Zp=e,Jp=t}var uM=fb;var yk,hb,gk,xk,ef=class{constructor(t){this._append=t==null?bk:FG(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==gk||this._append!==hb){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,gk=r,hb=this._append,xk=this._,this._=i}this._+=xk;break}}}result(){let t=this._;return this._="",t.length?t:null}};function bk(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FG(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return bk;if(t!==yk){let n=10**t;yk=t,hb=function(i){let o=1;this._+=i[0];for(let s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return hb}function Nn(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Pr(a,i(o))),o.result()}return s.area=function(a){return Pr(a,i(nM)),nM.result()},s.measure=function(a){return Pr(a,i(uM)),uM.result()},s.bounds=function(a){return Pr(a,i(Ku)),Ku.result()},s.centroid=function(a){return Pr(a,i(aM)),aM.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,Xp):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new ef(n)):new ub(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{let c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);n=c}return t===null&&(o=new ef(n)),s},s.projection(e).digits(n).context(t)}function ll(e){return{stream:nf(e)}}function nf(e){return function(t){var n=new fM;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fM(){}fM.prototype={constructor:fM,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function hM(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Pr(n,e.stream(Ku)),t(Ku.result()),r!=null&&e.clipExtent(r),e}function Qp(e,t,n){return hM(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,c])},n)}function db(e,t,n){return Qp(e,[[0,0],t],n)}function pb(e,t,n){return hM(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function mb(e,t,n){return hM(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var wk=16,RG=K(30*Yt);function dM(e,t){return+t?PG(e,t):$G(e)}function $G(e){return nf({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function PG(e,t){function n(r,i,o,s,a,c,l,u,f,h,d,p,m,y){var g=l-r,x=u-i,b=g*g+x*x;if(b>4*t&&m--){var w=s+h,_=a+d,v=c+p,M=ye(w*w+_*_+v*v),E=Se(v/=M),I=Rt(Rt(v)-1)<et||Rt(o-f)<et?(o+f)/2:He(_,w),D=e(I,E),A=D[0],O=D[1],C=A-r,S=O-i,T=x*C-g*S;(T*T/b>t||Rt((g*C+x*S)/b-.5)>.3||s*h+a*d+c*p<RG)&&(n(r,i,o,s,a,c,A,O,I,w/=M,_/=M,v,m,y),y.point(A,O),n(A,O,I,w,_,v,l,u,f,h,d,p,m,y))}}return function(r){var i,o,s,a,c,l,u,f,h,d,p,m,y={point:g,lineStart:x,lineEnd:w,polygonStart:function(){r.polygonStart(),y.lineStart=_},polygonEnd:function(){r.polygonEnd(),y.lineStart=x}};function g(E,I){E=e(E,I),r.point(E[0],E[1])}function x(){f=NaN,y.point=b,r.lineStart()}function b(E,I){var D=Oo([E,I]),A=e(E,I);n(f,h,u,d,p,m,f=A[0],h=A[1],u=E,d=D[0],p=D[1],m=D[2],wk,r),r.point(f,h)}function w(){y.point=g,r.lineEnd()}function _(){x(),y.point=v,y.lineEnd=M}function v(E,I){b(i=E,I),o=f,s=h,a=d,c=p,l=m,y.point=b}function M(){n(f,h,u,d,p,m,o,s,i,a,c,l,wk,r),y.lineEnd=w,w()}return y}}var UG=nf({point:function(e,t){this.stream.point(e*Yt,t*Yt)}});function zG(e){return nf({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function qG(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function vk(e,t,n,r,i,o){if(!o)return qG(e,t,n,r,i);var s=K(o),a=Q(o),c=s*e,l=a*e,u=s/e,f=a/e,h=(a*n-s*t)/e,d=(a*t+s*n)/e;function p(m,y){return m*=r,y*=i,[c*m-l*y+t,n-l*m-c*y]}return p.invert=function(m,y){return[r*(u*m-f*y+h),i*(d-f*m-u*y)]},p}function Dn(e){return pM(function(){return e})()}function pM(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,c=0,l=0,u,f=0,h=1,d=1,p=null,m=HI,y=null,g,x,b,w=Xp,_=.5,v,M,E,I,D;function A(T){return E(T[0]*Yt,T[1]*Yt)}function O(T){return T=E.invert(T[0],T[1]),T&&[T[0]*$e,T[1]*$e]}A.stream=function(T){return I&&D===T?I:I=UG(zG(u)(m(v(w(D=T)))))},A.preclip=function(T){return arguments.length?(m=T,p=void 0,S()):m},A.postclip=function(T){return arguments.length?(w=T,y=g=x=b=null,S()):w},A.clipAngle=function(T){return arguments.length?(m=+T?ek(p=T*Yt):(p=null,HI),S()):p*$e},A.clipExtent=function(T){return arguments.length?(w=T==null?(y=g=x=b=null,Xp):Ju(y=+T[0][0],g=+T[0][1],x=+T[1][0],b=+T[1][1]),S()):y==null?null:[[y,g],[x,b]]},A.scale=function(T){return arguments.length?(n=+T,C()):n},A.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],C()):[r,i]},A.center=function(T){return arguments.length?(o=T[0]%360*Yt,s=T[1]%360*Yt,C()):[o*$e,s*$e]},A.rotate=function(T){return arguments.length?(a=T[0]%360*Yt,c=T[1]%360*Yt,l=T.length>2?T[2]%360*Yt:0,C()):[a*$e,c*$e,l*$e]},A.angle=function(T){return arguments.length?(f=T%360*Yt,C()):f*$e},A.reflectX=function(T){return arguments.length?(h=T?-1:1,C()):h<0},A.reflectY=function(T){return arguments.length?(d=T?-1:1,C()):d<0},A.precision=function(T){return arguments.length?(v=dM(M,_=T*T),S()):ye(_)},A.fitExtent=function(T,N){return Qp(A,T,N)},A.fitSize=function(T,N){return db(A,T,N)},A.fitWidth=function(T,N){return pb(A,T,N)},A.fitHeight=function(T,N){return mb(A,T,N)};function C(){var T=vk(n,0,0,h,d,f).apply(null,t(o,s)),N=vk(n,r-T[0],i-T[1],h,d,f);return u=WI(a,c,l),M=Vp(t,N),E=Vp(u,M),v=dM(M,_),S()}function S(){return I=D=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&O,C()}}function rf(e){var t=0,n=Ot/3,r=pM(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Yt,n=o[1]*Yt):[t*$e,n*$e]},i}function _k(e){var t=K(e);function n(r,i){return[r*t,Q(i)/t]}return n.invert=function(r,i){return[r/t,Se(i*t)]},n}function Sk(e,t){var n=Q(e),r=(n+Q(t))/2;if(Rt(r)<et)return _k(e);var i=1+n*(2*r-n),o=ye(i)/r;function s(a,c){var l=ye(i-2*r*Q(c))/r;return[l*Q(a*=r),o-l*K(a)]}return s.invert=function(a,c){var l=o-c,u=He(a,Rt(l))*Un(l);return l*r<0&&(u-=Ot*Un(a)*Un(l)),[u/r,Se((i-(a*a+l*l)*r*r)/(2*r))]},s}function $a(){return rf(Sk).scale(155.424).center([0,33.6442])}function Kp(){return $a().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function jG(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function mM(){var e,t,n=Kp(),r,i=$a().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=$a().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,c,l={point:function(h,d){c=[h,d]}};function u(h){var d=h[0],p=h[1];return c=null,r.point(d,p),c||(o.point(d,p),c)||(a.point(d,p),c)}u.invert=function(h){var d=n.scale(),p=n.translate(),m=(h[0]-p[0])/d,y=(h[1]-p[1])/d;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?s:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=jG([n.stream(t=h),i.stream(h),s.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),s.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),s.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],m=+h[1];return r=n.translate(h).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(l),o=i.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+et,m+.12*d+et],[p-.214*d-et,m+.234*d-et]]).stream(l),a=s.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+et,m+.166*d+et],[p-.115*d-et,m+.234*d-et]]).stream(l),f()},u.fitExtent=function(h,d){return Qp(u,h,d)},u.fitSize=function(h,d){return db(u,h,d)},u.fitWidth=function(h,d){return pb(u,h,d)},u.fitHeight=function(h,d){return mb(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function yb(e){return function(t,n){var r=K(t),i=K(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Q(t),o*Q(n)]}}function Co(e){return function(t,n){var r=ye(t*t+n*n),i=e(r),o=Q(i),s=K(i);return[He(t*o,r*s),Se(r&&n*o/r)]}}var yM=yb(function(e){return ye(2/(1+e))});yM.invert=Co(function(e){return 2*Se(e/2)});function gM(){return Dn(yM).scale(124.75).clipAngle(180-.001)}var xM=yb(function(e){return(e=Yx(e))&&e/Q(e)});xM.invert=Co(function(e){return e});function bM(){return Dn(xM).scale(79.4188).clipAngle(180-.001)}function of(e,t){return[e,al(Gu((me+t)/2))]}of.invert=function(e,t){return[e,2*mi(qx(t))-me]};function wM(){return vM(of).scale(961/un)}function vM(e){var t=Dn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=c=l=null:(s=+f[0][0],a=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):s==null?null:[[s,a],[c,l]]};function u(){var f=Ot*r(),h=t(ZC(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===of?[[Math.max(h[0]-f,s),a],[Math.min(h[0]+f,c),l]]:[[s,Math.max(h[1]-f,a)],[c,Math.min(h[1]+f,l)]])}return u()}function gb(e){return Gu((me+e)/2)}function Ik(e,t){var n=K(e),r=e===t?Q(e):al(n/K(t))/al(gb(t)/gb(e)),i=n*Vx(gb(e),r)/r;if(!r)return of;function o(s,a){i>0?a<-me+et&&(a=-me+et):a>me-et&&(a=me-et);var c=i/Vx(gb(a),r);return[c*Q(r*s),i-c*K(r*s)]}return o.invert=function(s,a){var c=i-a,l=Un(r)*ye(s*s+c*c),u=He(s,Rt(c))*Un(c);return c*r<0&&(u-=Ot*Un(s)*Un(c)),[u/r,2*mi(Vx(i/l,1/r))-me]},o}function _M(){return rf(Ik).scale(109.5).parallels([30,30])}function sf(e,t){return[e,t]}sf.invert=sf;function SM(){return Dn(sf).scale(152.63)}function Mk(e,t){var n=K(e),r=e===t?Q(e):(n-K(t))/(t-e),i=n/r+e;if(Rt(r)<et)return sf;function o(s,a){var c=i-a,l=r*s;return[c*Q(l),i-c*K(l)]}return o.invert=function(s,a){var c=i-a,l=He(s,Rt(c))*Un(c);return c*r<0&&(l-=Ot*Un(s)*Un(c)),[l/r,i-Un(r)*ye(s*s+c*c)]},o}function IM(){return rf(Mk).scale(131.154).center([0,13.9389])}var tm=1.340264,em=-.081106,nm=893e-6,rm=.003796,xb=ye(3)/2,VG=12;function MM(e,t){var n=Se(xb*Q(t)),r=n*n,i=r*r*r;return[e*K(n)/(xb*(tm+3*em*r+i*(7*nm+9*rm*r))),n*(tm+em*r+i*(nm+rm*r))]}MM.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,c;o<VG&&(a=n*(tm+em*r+i*(nm+rm*r))-t,c=tm+3*em*r+i*(7*nm+9*rm*r),n-=s=a/c,r=n*n,i=r*r*r,!(Rt(s)<sl));++o);return[xb*e*(tm+3*em*r+i*(7*nm+9*rm*r))/K(n),Se(Q(n)/xb)]};function AM(){return Dn(MM).scale(177.158)}function TM(e,t){var n=K(t),r=K(e)*n;return[n*Q(e)/r,Q(t)/r]}TM.invert=Co(mi);function EM(){return Dn(TM).scale(144.049).clipAngle(60)}function NM(e,t){return[K(t)*Q(e),Q(t)]}NM.invert=Co(Se);function DM(){return Dn(NM).scale(249.5).clipAngle(90+et)}function OM(e,t){var n=K(t),r=1+K(e)*n;return[n*Q(e)/r,Q(t)/r]}OM.invert=Co(function(e){return 2*mi(e)});function BM(){return Dn(OM).scale(250).clipAngle(142)}function LM(e,t){return[al(Gu((me+t)/2)),-e]}LM.invert=function(e,t){return[-t,2*mi(qx(e))-me]};function CM(){var e=vM(LM),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function YG(e,t){return e.parent===t.parent?1:2}function XG(e){return e.reduce(WG,0)/e.length}function WG(e,t){return e+t.x}function GG(e){return 1+e.reduce(HG,0)}function HG(e,t){return Math.max(e,t.y)}function ZG(e){for(var t;t=e.children;)e=t[0];return e}function JG(e){for(var t;t=e.children;)e=t[t.length-1];return e}function bb(){var e=YG,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(h){var d=h.children;d?(h.x=XG(d),h.y=GG(d)):(h.x=s?a+=e(h,s):0,h.y=0,s=h)});var c=ZG(o),l=JG(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(o.y?h.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function QG(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ak(){return this.eachAfter(QG)}function Tk(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function Ek(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Nk(e,t){for(var n=this,r=[n],i=[],o,s,a,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function Dk(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function Ok(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Bk(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Lk(e){for(var t=this,n=KG(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function KG(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ck(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function kk(){return Array.from(this)}function Fk(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Rk(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*$k(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function kM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=nH)):t===void 0&&(t=eH);for(var n=new Pa(e),r,i=[n],o,s,a,c;r=i.pop();)if((s=t(r.data))&&(c=(s=Array.from(s)).length))for(r.children=s,a=c-1;a>=0;--a)i.push(o=s[a]=new Pa(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(FM)}function tH(){return kM(this).eachBefore(rH)}function eH(e){return e.children}function nH(e){return Array.isArray(e)?e[1]:null}function rH(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function FM(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Pa(e){this.data=e,this.depth=this.height=0,this.parent=null}Pa.prototype=kM.prototype={constructor:Pa,count:Ak,each:Tk,eachAfter:Nk,eachBefore:Ek,find:Dk,sum:Ok,sort:Bk,path:Lk,ancestors:Ck,descendants:kk,leaves:Fk,links:Rk,copy:tH,[Symbol.iterator]:$k};function wb(e){return e==null?null:iH(e)}function iH(e){if(typeof e!="function")throw new Error;return e}var oH={depth:-1},Pk={},RM={};function sH(e){return e.id}function aH(e){return e.parentId}function vb(){var e=sH,t=aH,n;function r(i){var o=Array.from(i),s=e,a=t,c,l,u,f,h,d,p,m,y=new Map;if(n!=null){let g=o.map((w,_)=>cH(n(w,_,i))),x=g.map(Uk),b=new Set(g).add("");for(let w of x)b.has(w)||(b.add(w),g.push(w),x.push(Uk(w)),o.push(RM));s=(w,_)=>g[_],a=(w,_)=>x[_]}for(u=0,c=o.length;u<c;++u)l=o[u],d=o[u]=new Pa(l),(p=s(l,u,i))!=null&&(p+="")&&(m=d.id=p,y.set(m,y.has(m)?Pk:d)),(p=a(l,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<c;++u)if(d=o[u],p=d.parent){if(h=y.get(p),!h)throw new Error("missing: "+p);if(h===Pk)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===RM&&f.children.length===1;)f=f.children[0],--c;for(let g=o.length-1;g>=0&&(d=o[g],d.data===RM);--g)d.data=null}if(f.parent=oH,f.eachBefore(function(g){g.depth=g.parent.depth+1,--c}).eachBefore(FM),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=wb(i),r):e},r.parentId=function(i){return arguments.length?(t=wb(i),r):t},r.path=function(i){return arguments.length?(n=wb(i),r):n},r}function cH(e){e=`${e}`;let t=e.length;return $M(e,t-1)&&!$M(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Uk(e){let t=e.length;if(t<2)return"";for(;--t>1&&!$M(e,t););return e.slice(0,t)}function $M(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function lH(e,t){return e.parent===t.parent?1:2}function PM(e){var t=e.children;return t?t[0]:e.t}function UM(e){var t=e.children;return t?t[t.length-1]:e.t}function uH(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function fH(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function hH(e,t,n){return e.a.parent===t.parent?e.a:n}function _b(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}_b.prototype=Object.create(Pa.prototype);function dH(e){for(var t=new _b(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new _b(o[s],s)),i.parent=n;return(t.parent=new _b(null,0)).children=[t],t}function ul(){var e=lH,t=1,n=1,r=null;function i(l){var u=dH(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),r)l.eachBefore(c);else{var f=l,h=l,d=l;l.eachBefore(function(x){x.x<f.x&&(f=x),x.x>h.x&&(h=x),x.depth>d.depth&&(d=x)});var p=f===h?1:e(f,h)/2,m=p-f.x,y=t/(h.x+p+m),g=n/(d.depth||1);l.eachBefore(function(x){x.x=(x.x+m)*y,x.y=x.depth*g})}return l}function o(l){var u=l.children,f=l.parent.children,h=l.i?f[l.i-1]:null;if(u){fH(l);var d=(u[0].z+u[u.length-1].z)/2;h?(l.z=h.z+e(l._,h._),l.m=l.z-d):l.z=d}else h&&(l.z=h.z+e(l._,h._));l.parent.A=a(l,h,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,u,f){if(u){for(var h=l,d=l,p=u,m=h.parent.children[0],y=h.m,g=d.m,x=p.m,b=m.m,w;p=UM(p),h=PM(h),p&&h;)m=PM(m),d=UM(d),d.a=l,w=p.z+x-h.z-y+e(p._,h._),w>0&&(uH(hH(p,l,f),l,w),y+=w,g+=w),x+=p.m,y+=h.m,b+=m.m,g+=d.m;p&&!UM(d)&&(d.t=p,d.m+=x-g),h&&!PM(m)&&(m.t=h,m.m+=y-b,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}var zk=23283064365386963e-26;function fl(e=Math.random()){let t=(0<=e&&e<1?e/zk:Math.abs(e))|0;return()=>(t=1664525*t+1013904223|0,zk*(t>>>0))}function Je(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function im(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var om=Symbol("implicit");function hl(){var e=new Jn,t=[],n=[],r=om;function i(o){let s=e.get(o);if(s===void 0){if(r!==om)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Jn;for(let s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return hl(t,n).unknown(r)},Je.apply(i,arguments),i}function Ua(){var e=hl().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,s,a=!1,c=0,l=0,u=.5;delete e.unknown;function f(){var h=t().length,d=i<r,p=d?i:r,m=d?r:i;o=(m-p)/Math.max(1,h-c+l*2),a&&(o=Math.floor(o)),p+=(m-p-o*(h-c))*u,s=o*(1-c),a&&(p=Math.round(p),s=Math.round(s));var y=Ue(h).map(function(g){return p+o*g});return n(d?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(c=Math.min(1,l=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Ua(t(),[r,i]).round(a).paddingInner(c).paddingOuter(l).align(u)},Je.apply(f(),arguments)}function qk(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qk(t())},e}function zM(){return qk(Ua.apply(null,arguments).paddingInner(1))}function qM(e){return function(){return e}}function af(e){return+e}var jk=[0,1];function vr(e){return e}function jM(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qM(isNaN(t)?NaN:.5)}function pH(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function mH(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=jM(i,r),o=n(s,o)):(r=jM(r,i),o=n(o,s)),function(a){return o(r(a))}}function yH(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=jM(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var c=Ms(e,a,1,r)-1;return o[c](i[c](a))}}function ko(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dl(){var e=jk,t=jk,n=$r,r,i,o,s=vr,a,c,l;function u(){var h=Math.min(e.length,t.length);return s!==vr&&(s=pH(e[0],e[h-1])),a=h>2?yH:mH,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=a(e.map(r),t,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=a(t,e.map(r),_e)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,af),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=tl,u()},f.clamp=function(h){return arguments.length?(s=h?!0:vr,u()):s!==vr},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,u()}}function sm(){return dl()(vr,vr)}function VM(e,t,n,r){var i=Nu(e,t,n),o;switch(r=Do(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=RI(i,s))&&(r.precision=o),zx(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$I(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=FI(i))&&(r.precision=o-(r.type==="%")*2);break}}return pi(r)}function Rs(e){var t=e.domain;return e.ticks=function(n){var r=t();return An(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return VM(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=Ts(s,a,n),l===c)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function $s(){var e=sm();return e.copy=function(){return ko(e,$s())},Je.apply(e,arguments),Rs(e)}function am(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,af),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return am(e).unknown(t)},e=arguments.length?Array.from(e,af):[0,1],Rs(n)}function cm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Vk(e){return Math.log(e)}function Yk(e){return Math.exp(e)}function gH(e){return-Math.log(-e)}function xH(e){return-Math.exp(-e)}function bH(e){return isFinite(e)?+("1e"+e):e<0?0:e}function wH(e){return e===10?bH:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vH(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Xk(e){return(t,n)=>-e(-t,n)}function YM(e){let t=e(Vk,Yk),n=t.domain,r=10,i,o;function s(){return i=vH(r),o=wH(r),n()[0]<0?(i=Xk(i),o=Xk(o),e(gH,xH)):e(Vk,Yk),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let h=i(l),d=i(u),p,m,y=a==null?10:+a,g=[];if(!(r%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/o(-h):p*o(h),!(m<l)){if(m>u)break;g.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/o(-h):p*o(h),!(m<l)){if(m>u)break;g.push(m)}g.length*2<y&&(g=An(l,u,y))}else g=An(h,d,Math.min(d-h,y)).map(o);return f?g.reverse():g},t.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Do(c)).precision==null&&(c.trim=!0),c=pi(c)),a===1/0)return c;let l=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(cm(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function lm(){let e=YM(dl()).domain([1,10]);return e.copy=()=>ko(e,lm()).base(e.base()),Je.apply(e,arguments),e}function Wk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Gk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function XM(e){var t=1,n=e(Wk(t),Gk(t));return n.constant=function(r){return arguments.length?e(Wk(t=+r),Gk(t)):t},Rs(n)}function um(){var e=XM(dl());return e.copy=function(){return ko(e,um()).constant(e.constant())},Je.apply(e,arguments)}function Hk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _H(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function SH(e){return e<0?-e*e:e*e}function WM(e){var t=e(vr,vr),n=1;function r(){return n===1?e(vr,vr):n===.5?e(_H,SH):e(Hk(n),Hk(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Rs(t)}function fm(){var e=WM(dl());return e.copy=function(){return ko(e,fm()).exponent(e.exponent())},Je.apply(e,arguments),e}function hm(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=XS(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Ms(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(zt),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return hm().domain(e).range(t).unknown(r)},Je.apply(o,arguments)}function dm(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Ms(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return dm().domain(e).range(t).unknown(n)},Je.apply(i,arguments)}var GM=new Date,HM=new Date;function be(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{let c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let l;do c.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return c},i.filter=o=>be(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(GM.setTime(+o),HM.setTime(+s),e(GM),e(HM),Math.floor(n(GM,HM))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}var pm=be(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?be(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pm);var g6t=pm.range;var fn=be(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),Zk=fn.range;var Ps=be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),IH=Ps.range,Us=be(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),MH=Us.range;var zs=be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),AH=zs.range,qs=be(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),TH=qs.range;var yi=be(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),EH=yi.range,yl=be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),NH=yl.range,gl=be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),DH=gl.range;function xl(e){return be(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Ur=xl(0),za=xl(1),Sb=xl(2),Ib=xl(3),Ro=xl(4),Mb=xl(5),Ab=xl(6),Qk=Ur.range,OH=za.range,BH=Sb.range,LH=Ib.range,CH=Ro.range,kH=Mb.range,FH=Ab.range;function bl(e){return be(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var zr=bl(0),qa=bl(1),Tb=bl(2),Eb=bl(3),$o=bl(4),Nb=bl(5),Db=bl(6),Kk=zr.range,RH=qa.range,$H=Tb.range,PH=Eb.range,UH=$o.range,zH=Nb.range,qH=Db.range;var js=be(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),jH=js.range,Vs=be(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),VH=Vs.range;var zn=be(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:be(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var YH=zn.range,qn=be(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:be(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var XH=qn.range;function eF(e,t,n,r,i,o){let s=[[fn,1,1e3],[fn,5,5*1e3],[fn,15,15*1e3],[fn,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function a(l,u,f){let h=u<l;h&&([l,u]=[u,l]);let d=f&&typeof f.range=="function"?f:c(l,u,f),p=d?d.range(l,+u+1):[];return h?p.reverse():p}function c(l,u,f){let h=Math.abs(u-l)/f,d=Is(([,,y])=>y).right(s,h);if(d===s.length)return e.every(Nu(l/31536e6,u/31536e6,f));if(d===0)return pm.every(Math.max(Nu(l,u,f),1));let[p,m]=s[h/s[d-1][2]<s[d][2]/h?d-1:d];return p.every(m)}return[a,c]}var[ZM,ym]=eF(qn,Vs,zr,gl,qs,Us),[JM,QM]=eF(zn,js,Ur,yi,zs,Ps);function KM(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function eA(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,c=e.shortMonths,l=xm(i),u=bm(i),f=xm(o),h=bm(o),d=xm(s),p=bm(s),m=xm(a),y=bm(a),g=xm(c),x=bm(c),b={a:F,A:R,b:k,B:$,c:null,d:aF,e:aF,f:yZ,g:AZ,G:EZ,H:dZ,I:pZ,j:mZ,L:hF,m:gZ,M:xZ,p:P,q:U,Q:uF,s:fF,S:bZ,u:wZ,U:vZ,V:_Z,w:SZ,W:IZ,x:null,X:null,y:MZ,Y:TZ,Z:NZ,"%":lF},w={a:G,A:nt,b:ot,B:at,c:null,d:cF,e:cF,f:LZ,g:jZ,G:YZ,H:DZ,I:OZ,j:BZ,L:pF,m:CZ,M:kZ,p:Y,q:st,Q:uF,s:fF,S:FZ,u:RZ,U:$Z,V:PZ,w:UZ,W:zZ,x:null,X:null,y:qZ,Y:VZ,Z:XZ,"%":lF},_={a:D,A,b:O,B:C,c:S,d:oF,e:oF,f:lZ,g:iF,G:rF,H:sF,I:sF,j:oZ,L:cZ,m:iZ,M:sZ,p:I,q:rZ,Q:fZ,s:hZ,S:aZ,u:QH,U:KH,V:tZ,w:JH,W:eZ,x:T,X:N,y:iF,Y:rF,Z:nZ,"%":uZ};b.x=v(n,b),b.X=v(r,b),b.c=v(t,b),w.x=v(n,w),w.X=v(r,w),w.c=v(t,w);function v(j,Z){return function(rt){var z=[],kt=-1,ht=0,Gt=j.length,Zt,tt,ae;for(rt instanceof Date||(rt=new Date(+rt));++kt<Gt;)j.charCodeAt(kt)===37&&(z.push(j.slice(ht,kt)),(tt=nF[Zt=j.charAt(++kt)])!=null?Zt=j.charAt(++kt):tt=Zt==="e"?" ":"0",(ae=Z[Zt])&&(Zt=ae(rt,tt)),z.push(Zt),ht=kt+1);return z.push(j.slice(ht,kt)),z.join("")}}function M(j,Z){return function(rt){var z=gm(1900,void 0,1),kt=E(z,j,rt+="",0),ht,Gt;if(kt!=rt.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(Z&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(ht=tA(gm(z.y,0,1)),Gt=ht.getUTCDay(),ht=Gt>4||Gt===0?qa.ceil(ht):qa(ht),ht=yl.offset(ht,(z.V-1)*7),z.y=ht.getUTCFullYear(),z.m=ht.getUTCMonth(),z.d=ht.getUTCDate()+(z.w+6)%7):(ht=KM(gm(z.y,0,1)),Gt=ht.getDay(),ht=Gt>4||Gt===0?za.ceil(ht):za(ht),ht=yi.offset(ht,(z.V-1)*7),z.y=ht.getFullYear(),z.m=ht.getMonth(),z.d=ht.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Gt="Z"in z?tA(gm(z.y,0,1)).getUTCDay():KM(gm(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Gt+5)%7:z.w+z.U*7-(Gt+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,tA(z)):KM(z)}}function E(j,Z,rt,z){for(var kt=0,ht=Z.length,Gt=rt.length,Zt,tt;kt<ht;){if(z>=Gt)return-1;if(Zt=Z.charCodeAt(kt++),Zt===37){if(Zt=Z.charAt(kt++),tt=_[Zt in nF?Z.charAt(kt++):Zt],!tt||(z=tt(j,rt,z))<0)return-1}else if(Zt!=rt.charCodeAt(z++))return-1}return z}function I(j,Z,rt){var z=l.exec(Z.slice(rt));return z?(j.p=u.get(z[0].toLowerCase()),rt+z[0].length):-1}function D(j,Z,rt){var z=d.exec(Z.slice(rt));return z?(j.w=p.get(z[0].toLowerCase()),rt+z[0].length):-1}function A(j,Z,rt){var z=f.exec(Z.slice(rt));return z?(j.w=h.get(z[0].toLowerCase()),rt+z[0].length):-1}function O(j,Z,rt){var z=g.exec(Z.slice(rt));return z?(j.m=x.get(z[0].toLowerCase()),rt+z[0].length):-1}function C(j,Z,rt){var z=m.exec(Z.slice(rt));return z?(j.m=y.get(z[0].toLowerCase()),rt+z[0].length):-1}function S(j,Z,rt){return E(j,t,Z,rt)}function T(j,Z,rt){return E(j,n,Z,rt)}function N(j,Z,rt){return E(j,r,Z,rt)}function F(j){return s[j.getDay()]}function R(j){return o[j.getDay()]}function k(j){return c[j.getMonth()]}function $(j){return a[j.getMonth()]}function P(j){return i[+(j.getHours()>=12)]}function U(j){return 1+~~(j.getMonth()/3)}function G(j){return s[j.getUTCDay()]}function nt(j){return o[j.getUTCDay()]}function ot(j){return c[j.getUTCMonth()]}function at(j){return a[j.getUTCMonth()]}function Y(j){return i[+(j.getUTCHours()>=12)]}function st(j){return 1+~~(j.getUTCMonth()/3)}return{format:function(j){var Z=v(j+="",b);return Z.toString=function(){return j},Z},parse:function(j){var Z=M(j+="",!1);return Z.toString=function(){return j},Z},utcFormat:function(j){var Z=v(j+="",w);return Z.toString=function(){return j},Z},utcParse:function(j){var Z=M(j+="",!0);return Z.toString=function(){return j},Z}}}var nF={"-":"",_:" ",0:"0"},hn=/^\s*\d+/,GH=/^%/,HH=/[\\^$*+?|[\]().{}]/g;function ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function ZH(e){return e.replace(HH,"\\$&")}function xm(e){return new RegExp("^(?:"+e.map(ZH).join("|")+")","i")}function bm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function JH(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function QH(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function KH(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function tZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function eZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function rF(e,t,n){var r=hn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function iF(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nZ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rZ(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function iZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oF(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function oZ(e,t,n){var r=hn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sF(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function aZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cZ(e,t,n){var r=hn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function lZ(e,t,n){var r=hn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function uZ(e,t,n){var r=GH.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fZ(e,t,n){var r=hn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function hZ(e,t,n){var r=hn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function aF(e,t){return ee(e.getDate(),t,2)}function dZ(e,t){return ee(e.getHours(),t,2)}function pZ(e,t){return ee(e.getHours()%12||12,t,2)}function mZ(e,t){return ee(1+yi.count(zn(e),e),t,3)}function hF(e,t){return ee(e.getMilliseconds(),t,3)}function yZ(e,t){return hF(e,t)+"000"}function gZ(e,t){return ee(e.getMonth()+1,t,2)}function xZ(e,t){return ee(e.getMinutes(),t,2)}function bZ(e,t){return ee(e.getSeconds(),t,2)}function wZ(e){var t=e.getDay();return t===0?7:t}function vZ(e,t){return ee(Ur.count(zn(e)-1,e),t,2)}function dF(e){var t=e.getDay();return t>=4||t===0?Ro(e):Ro.ceil(e)}function _Z(e,t){return e=dF(e),ee(Ro.count(zn(e),e)+(zn(e).getDay()===4),t,2)}function SZ(e){return e.getDay()}function IZ(e,t){return ee(za.count(zn(e)-1,e),t,2)}function MZ(e,t){return ee(e.getFullYear()%100,t,2)}function AZ(e,t){return e=dF(e),ee(e.getFullYear()%100,t,2)}function TZ(e,t){return ee(e.getFullYear()%1e4,t,4)}function EZ(e,t){var n=e.getDay();return e=n>=4||n===0?Ro(e):Ro.ceil(e),ee(e.getFullYear()%1e4,t,4)}function NZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function cF(e,t){return ee(e.getUTCDate(),t,2)}function DZ(e,t){return ee(e.getUTCHours(),t,2)}function OZ(e,t){return ee(e.getUTCHours()%12||12,t,2)}function BZ(e,t){return ee(1+yl.count(qn(e),e),t,3)}function pF(e,t){return ee(e.getUTCMilliseconds(),t,3)}function LZ(e,t){return pF(e,t)+"000"}function CZ(e,t){return ee(e.getUTCMonth()+1,t,2)}function kZ(e,t){return ee(e.getUTCMinutes(),t,2)}function FZ(e,t){return ee(e.getUTCSeconds(),t,2)}function RZ(e){var t=e.getUTCDay();return t===0?7:t}function $Z(e,t){return ee(zr.count(qn(e)-1,e),t,2)}function mF(e){var t=e.getUTCDay();return t>=4||t===0?$o(e):$o.ceil(e)}function PZ(e,t){return e=mF(e),ee($o.count(qn(e),e)+(qn(e).getUTCDay()===4),t,2)}function UZ(e){return e.getUTCDay()}function zZ(e,t){return ee(qa.count(qn(e)-1,e),t,2)}function qZ(e,t){return ee(e.getUTCFullYear()%100,t,2)}function jZ(e,t){return e=mF(e),ee(e.getUTCFullYear()%100,t,2)}function VZ(e,t){return ee(e.getUTCFullYear()%1e4,t,4)}function YZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?$o(e):$o.ceil(e),ee(e.getUTCFullYear()%1e4,t,4)}function XZ(){return"+0000"}function lF(){return"%"}function uF(e){return+e}function fF(e){return Math.floor(+e/1e3)}var cf,lf,yF,Po,gF;nA({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nA(e){return cf=eA(e),lf=cf.format,yF=cf.parse,Po=cf.utcFormat,gF=cf.utcParse,cf}function WZ(e){return new Date(e)}function GZ(e){return e instanceof Date?+e:+new Date(+e)}function Ob(e,t,n,r,i,o,s,a,c,l){var u=sm(),f=u.invert,h=u.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),g=l("%a %d"),x=l("%b %d"),b=l("%B"),w=l("%Y");function _(v){return(c(v)<v?d:a(v)<v?p:s(v)<v?m:o(v)<v?y:r(v)<v?i(v)<v?g:x:n(v)<v?b:w)(v)}return u.invert=function(v){return new Date(f(v))},u.domain=function(v){return arguments.length?h(Array.from(v,GZ)):h().map(WZ)},u.ticks=function(v){var M=h();return e(M[0],M[M.length-1],v??10)},u.tickFormat=function(v,M){return M==null?_:l(M)},u.nice=function(v){var M=h();return(!v||typeof v.range!="function")&&(v=t(M[0],M[M.length-1],v??10)),v?h(cm(M,v)):u},u.copy=function(){return ko(u,Ob(e,t,n,r,i,o,s,a,c,l))},u}function Bb(){return Je.apply(Ob(JM,QM,zn,js,Ur,yi,zs,Ps,fn,lf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lb(){return Je.apply(Ob(ZM,ym,qn,Vs,zr,yl,qs,Us,fn,Po).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Cb(){var e=0,t=.5,n=1,r=1,i,o,s,a,c,l=vr,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(r*m<r*o?a:c),l(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),s=u(n=+n),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(l=m,d):l};function p(m){return function(y){var g,x,b;return arguments.length?([g,x,b]=y,l=Ao(m,[g,x,b]),d):[l(0),l(.5),l(1)]}}return d.range=p($r),d.rangeRound=p(tl),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,i=m(e),o=m(t),s=m(n),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,d}}function vm(){var e=Rs(Cb()(vr));return e.copy=function(){return wm(e,vm())},im.apply(e,arguments)}function kb(){var e=YM(Cb()).domain([.1,1,10]);return e.copy=function(){return wm(e,kb()).base(e.base())},im.apply(e,arguments)}function Fb(){var e=XM(Cb());return e.copy=function(){return wm(e,Fb()).constant(e.constant())},im.apply(e,arguments)}function Rb(){var e=WM(Cb());return e.copy=function(){return wm(e,Rb()).exponent(e.exponent())},im.apply(e,arguments)}function X(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var rA=X("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var iA=X("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var oA=X("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var sA=X("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var aA=X("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var cA=X("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var lA=X("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var uA=X("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var fA=X("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var hA=X("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var dA=X("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var pt=e=>cI(e[e.length-1]);var $b=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(X),Pb=pt($b);var Ub=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(X),zb=pt(Ub);var qb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(X),jb=pt(qb);var Vb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(X),Yb=pt(Vb);var _m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(X),uf=pt(_m);var Xb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(X),Wb=pt(Xb);var Sm=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(X),ff=pt(Sm);var Gb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(X),Hb=pt(Gb);var Zb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(X),Jb=pt(Zb);var Qb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(X),Kb=pt(Qb);var t1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(X),e1=pt(t1);var n1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(X),r1=pt(n1);var i1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(X),o1=pt(i1);var s1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(X),a1=pt(s1);var c1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(X),l1=pt(c1);var u1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(X),f1=pt(u1);var h1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(X),d1=pt(h1);var p1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(X),m1=pt(p1);var y1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(X),g1=pt(y1);var x1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(X),b1=pt(x1);var w1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(X),v1=pt(w1);var _1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(X),S1=pt(_1);var I1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(X),M1=pt(I1);var A1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(X),T1=pt(A1);var E1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(X),N1=pt(E1);var D1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(X),O1=pt(D1);var B1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(X),L1=pt(B1);function C1(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var k1=$u(tr(300,.5,0),tr(-240,.5,1));var R1=$u(tr(-100,.75,.35),tr(80,1.5,.8)),$1=$u(tr(260,.75,.35),tr(80,1.5,.8)),F1=tr();function P1(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return F1.h=360*e-100,F1.s=1.5-1.5*t,F1.l=.8-.9*t,F1+""}var U1=rn(),HZ=Math.PI/3,ZZ=Math.PI*2/3;function z1(e){var t;return e=(.5-e)*Math.PI,U1.r=255*(t=Math.sin(e))*t,U1.g=255*(t=Math.sin(e+HZ))*t,U1.b=255*(t=Math.sin(e+ZZ))*t,U1+""}function q1(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function j1(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var V1=j1(X("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Y1=j1(X("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),X1=j1(X("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),W1=j1(X("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qe(e){return function(){return e}}var pA=Math.cos;var hf=Math.min,Im=Math.sin,ne=Math.sqrt,mA=1e-12,wl=Math.PI,qNt=wl/2,df=2*wl;function G1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ca(t)}var XNt=Array.prototype.slice;function H1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xF(e){this._context=e}xF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ys(e){return new xF(e)}function Z1(e){return e[0]}function J1(e){return e[1]}function Mm(e,t){var n=Qe(!0),r=null,i=Ys,o=null,s=G1(a);e=typeof e=="function"?e:e===void 0?Z1:Qe(e),t=typeof t=="function"?t:t===void 0?J1:Qe(t);function a(c){var l,u=(c=H1(c)).length,f,h=!1,d;for(r==null&&(o=i(d=s())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(f,l,c),+t(f,l,c));if(d)return o=null,d+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:Qe(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:Qe(+c),a):t},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Qe(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}function pf(e,t,n){var r=null,i=Qe(!0),o=null,s=Ys,a=null,c=G1(l);e=typeof e=="function"?e:e===void 0?Z1:Qe(+e),t=typeof t=="function"?t:t===void 0?Qe(0):Qe(+t),n=typeof n=="function"?n:n===void 0?J1:Qe(+n);function l(f){var h,d,p,m=(f=H1(f)).length,y,g=!1,x,b=new Array(m),w=new Array(m);for(o==null&&(a=s(x=c())),h=0;h<=m;++h){if(!(h<m&&i(y=f[h],h,f))===g)if(g=!g)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=h-1;p>=d;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}g&&(b[h]=+e(y,h,f),w[h]=+t(y,h,f),a.point(r?+r(y,h,f):b[h],n?+n(y,h,f):w[h]))}if(x)return a=null,x+""||null}function u(){return Mm().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qe(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qe(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qe(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}var Q1=class{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}};function yA(e){return new Q1(e,!0)}function gA(e){return new Q1(e,!1)}var JZ=ne(3),Am={draw(e,t){let n=ne(t+hf(t/28,.75))*.59436,r=n/2,i=r*JZ;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}};var Xs={draw(e,t){let n=ne(t/wl);e.moveTo(n,0),e.arc(0,0,n,0,df)}};var Tm={draw(e,t){let n=ne(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};var bF=ne(1/3),QZ=bF*2,Em={draw(e,t){let n=ne(t/QZ),r=n*bF;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}};var Nm={draw(e,t){let n=ne(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}};var Dm={draw(e,t){let n=ne(t-hf(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}};var Om={draw(e,t){let n=ne(t),r=-n/2;e.rect(r,r,n,n)}};var Bm={draw(e,t){let n=ne(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}};var KZ=.8908130915292852,wF=Im(wl/10)/Im(7*wl/10),tJ=Im(df/10)*wF,eJ=-pA(df/10)*wF,Lm={draw(e,t){let n=ne(t*KZ),r=tJ*n,i=eJ*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){let s=df*o/5,a=pA(s),c=Im(s);e.lineTo(c*n,-a*n),e.lineTo(a*r-c*i,c*r+a*i)}e.closePath()}};var xA=ne(3),Cm={draw(e,t){let n=-ne(t/(xA*3));e.moveTo(0,n*2),e.lineTo(-xA*n,-n),e.lineTo(xA*n,-n),e.closePath()}};var nJ=ne(3),km={draw(e,t){let n=ne(t)*.6824,r=n/2,i=n*nJ/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}};var gi=-.5,xi=ne(3)/2,bA=1/ne(12),rJ=(bA/2+1)*3,Fm={draw(e,t){let n=ne(t/rJ),r=n/2,i=n*bA,o=r,s=n*bA+n,a=-o,c=s;e.moveTo(r,i),e.lineTo(o,s),e.lineTo(a,c),e.lineTo(gi*r-xi*i,xi*r+gi*i),e.lineTo(gi*o-xi*s,xi*o+gi*s),e.lineTo(gi*a-xi*c,xi*a+gi*c),e.lineTo(gi*r+xi*i,gi*i-xi*r),e.lineTo(gi*o+xi*s,gi*s-xi*o),e.lineTo(gi*a+xi*c,gi*c-xi*a),e.closePath()}};var mf={draw(e,t){let n=ne(t-hf(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}};var K1=[Xs,Tm,Em,Om,Lm,Cm,Fm],wA=[Xs,Dm,mf,km,Am,Bm,Nm];function bi(){}function yf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Rm(e){this._context=e}Rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vA(e){return new Rm(e)}function vF(e){this._context=e}vF.prototype={areaStart:bi,areaEnd:bi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _A(e){return new vF(e)}function _F(e){this._context=e}_F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SA(e){return new _F(e)}function SF(e,t){this._basis=new Rm(e),this._beta=t}SF.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,c;++a<=n;)c=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+c*o),this._beta*t[a]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var IA=function e(t){function n(r){return t===1?new Rm(r):new SF(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function gf(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function tw(e,t){this._context=e,this._k=(1-t)/6}tw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:gf(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:gf(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var MA=function e(t){function n(r){return new tw(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ew(e,t){this._context=e,this._k=(1-t)/6}ew.prototype={areaStart:bi,areaEnd:bi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gf(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var AA=function e(t){function n(r){return new ew(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nw(e,t){this._context=e,this._k=(1-t)/6}nw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gf(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var TA=function e(t){function n(r){return new nw(r,t)}return n.tension=function(r){return e(+r)},n}(0);function $m(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>mA){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>mA){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function IF(e,t){this._context=e,this._alpha=t}IF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:$m(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var EA=function e(t){function n(r){return t?new IF(r,t):new tw(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function MF(e,t){this._context=e,this._alpha=t}MF.prototype={areaStart:bi,areaEnd:bi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$m(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NA=function e(t){function n(r){return t?new MF(r,t):new ew(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function AF(e,t){this._context=e,this._alpha=t}AF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$m(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var DA=function e(t){function n(r){return t?new AF(r,t):new nw(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TF(e){this._context=e}TF.prototype={areaStart:bi,areaEnd:bi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function OA(e){return new TF(e)}function EF(e){return e<0?-1:1}function NF(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(EF(o)+EF(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function DF(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function BA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function rw(e){this._context=e}rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BA(this,this._t0,DF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BA(this,DF(this,n=NF(this,e,t)),n);break;default:BA(this,this._t0,n=NF(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function OF(e){this._context=new BF(e)}(OF.prototype=Object.create(rw.prototype)).point=function(e,t){rw.prototype.point.call(this,t,e)};function BF(e){this._context=e}BF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function LA(e){return new rw(e)}function CA(e){return new OF(e)}function CF(e){this._context=e}CF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=LF(e),i=LF(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function LF(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function kA(e){return new CF(e)}function iw(e,t){this._context=e,this._t=t}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function FA(e){return new iw(e,.5)}function RA(e){return new iw(e,0)}function $A(e){return new iw(e,1)}var Pm=e=>()=>e;function PA(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function qr(e,t,n){this.k=e,this.x=t,this.y=n}qr.prototype={constructor:qr,scale:function(e){return e===1?this:new qr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Um=new qr(1,0,0);UA.prototype=qr.prototype;function UA(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Um;return e.__zoom}function ow(e){e.stopImmediatePropagation()}function xf(e){e.preventDefault(),e.stopImmediatePropagation()}function iJ(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function oJ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function kF(){return this.__zoom||Um}function sJ(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function aJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function cJ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function zA(){var e=iJ,t=oJ,n=cJ,r=sJ,i=aJ,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=pI,l=Gc("start","zoom","end"),u,f,h,d=500,p=150,m=0,y=10;function g(S){S.property("__zoom",kF).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(S,T,N,F){var R=S.selection?S.selection():S;R.property("__zoom",kF),S!==R?_(S,T,N,F):R.interrupt().each(function(){v(this,arguments).event(F).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},g.scaleBy=function(S,T,N,F){g.scaleTo(S,function(){var R=this.__zoom.k,k=typeof T=="function"?T.apply(this,arguments):T;return R*k},N,F)},g.scaleTo=function(S,T,N,F){g.transform(S,function(){var R=t.apply(this,arguments),k=this.__zoom,$=N==null?w(R):typeof N=="function"?N.apply(this,arguments):N,P=k.invert($),U=typeof T=="function"?T.apply(this,arguments):T;return n(b(x(k,U),$,P),R,s)},N,F)},g.translateBy=function(S,T,N,F){g.transform(S,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),s)},null,F)},g.translateTo=function(S,T,N,F,R){g.transform(S,function(){var k=t.apply(this,arguments),$=this.__zoom,P=F==null?w(k):typeof F=="function"?F.apply(this,arguments):F;return n(Um.translate(P[0],P[1]).scale($.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof N=="function"?-N.apply(this,arguments):-N),k,s)},F,R)};function x(S,T){return T=Math.max(o[0],Math.min(o[1],T)),T===S.k?S:new qr(T,S.x,S.y)}function b(S,T,N){var F=T[0]-N[0]*S.k,R=T[1]-N[1]*S.k;return F===S.x&&R===S.y?S:new qr(S.k,F,R)}function w(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function _(S,T,N,F){S.on("start.zoom",function(){v(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){v(this,arguments).event(F).end()}).tween("zoom",function(){var R=this,k=arguments,$=v(R,k).event(F),P=t.apply(R,k),U=N==null?w(P):typeof N=="function"?N.apply(R,k):N,G=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),nt=R.__zoom,ot=typeof T=="function"?T.apply(R,k):T,at=c(nt.invert(U).concat(G/nt.k),ot.invert(U).concat(G/ot.k));return function(Y){if(Y===1)Y=ot;else{var st=at(Y),j=G/st[2];Y=new qr(j,U[0]-st[0]*j,U[1]-st[1]*j)}$.zoom(null,Y)}})}function v(S,T,N){return!N&&S.__zooming||new M(S,T)}function M(S,T){this.that=S,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,T),this.taps=0}M.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,T){return this.mouse&&S!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var T=Vt(this.that).datum();l.call(S,this.that,new PA(S,{sourceEvent:this.sourceEvent,target:g,type:S,transform:this.that.__zoom,dispatch:l}),T)}};function E(S,...T){if(!e.apply(this,arguments))return;var N=v(this,T).event(S),F=this.__zoom,R=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),k=Fn(S);if(N.wheel)(N.mouse[0][0]!==k[0]||N.mouse[0][1]!==k[1])&&(N.mouse[1]=F.invert(N.mouse[0]=k)),clearTimeout(N.wheel);else{if(F.k===R)return;N.mouse=[k,F.invert(k)],To(this),N.start()}xf(S),N.wheel=setTimeout($,p),N.zoom("mouse",n(b(x(F,R),N.mouse[0],N.mouse[1]),N.extent,s));function $(){N.wheel=null,N.end()}}function I(S,...T){if(h||!e.apply(this,arguments))return;var N=S.currentTarget,F=v(this,T,!0).event(S),R=Vt(S.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",G,!0),k=Fn(S,N),$=S.clientX,P=S.clientY;yp(S.view),ow(S),F.mouse=[k,this.__zoom.invert(k)],To(this),F.start();function U(nt){if(xf(nt),!F.moved){var ot=nt.clientX-$,at=nt.clientY-P;F.moved=ot*ot+at*at>m}F.event(nt).zoom("mouse",n(b(F.that.__zoom,F.mouse[0]=Fn(nt,N),F.mouse[1]),F.extent,s))}function G(nt){R.on("mousemove.zoom mouseup.zoom",null),gp(nt.view,F.moved),xf(nt),F.event(nt).end()}}function D(S,...T){if(e.apply(this,arguments)){var N=this.__zoom,F=Fn(S.changedTouches?S.changedTouches[0]:S,this),R=N.invert(F),k=N.k*(S.shiftKey?.5:2),$=n(b(x(N,k),F,R),t.apply(this,T),s);xf(S),a>0?Vt(this).transition().duration(a).call(_,$,F,S):Vt(this).call(g.transform,$,F,S)}}function A(S,...T){if(e.apply(this,arguments)){var N=S.touches,F=N.length,R=v(this,T,S.changedTouches.length===F).event(S),k,$,P,U;for(ow(S),$=0;$<F;++$)P=N[$],U=Fn(P,this),U=[U,this.__zoom.invert(U),P.identifier],R.touch0?!R.touch1&&R.touch0[2]!==U[2]&&(R.touch1=U,R.taps=0):(R.touch0=U,k=!0,R.taps=1+!!u);u&&(u=clearTimeout(u)),k&&(R.taps<2&&(f=U[0],u=setTimeout(function(){u=null},d)),To(this),R.start())}}function O(S,...T){if(this.__zooming){var N=v(this,T).event(S),F=S.changedTouches,R=F.length,k,$,P,U;for(xf(S),k=0;k<R;++k)$=F[k],P=Fn($,this),N.touch0&&N.touch0[2]===$.identifier?N.touch0[0]=P:N.touch1&&N.touch1[2]===$.identifier&&(N.touch1[0]=P);if($=N.that.__zoom,N.touch1){var G=N.touch0[0],nt=N.touch0[1],ot=N.touch1[0],at=N.touch1[1],Y=(Y=ot[0]-G[0])*Y+(Y=ot[1]-G[1])*Y,st=(st=at[0]-nt[0])*st+(st=at[1]-nt[1])*st;$=x($,Math.sqrt(Y/st)),P=[(G[0]+ot[0])/2,(G[1]+ot[1])/2],U=[(nt[0]+at[0])/2,(nt[1]+at[1])/2]}else if(N.touch0)P=N.touch0[0],U=N.touch0[1];else return;N.zoom("touch",n(b($,P,U),N.extent,s))}}function C(S,...T){if(this.__zooming){var N=v(this,T).event(S),F=S.changedTouches,R=F.length,k,$;for(ow(S),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),k=0;k<R;++k)$=F[k],N.touch0&&N.touch0[2]===$.identifier?delete N.touch0:N.touch1&&N.touch1[2]===$.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&($=Fn($,this),Math.hypot(f[0]-$[0],f[1]-$[1])<y)){var P=Vt(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return g.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:Pm(+S),g):r},g.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Pm(!!S),g):e},g.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Pm(!!S),g):i},g.extent=function(S){return arguments.length?(t=typeof S=="function"?S:Pm([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),g):t},g.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],g):[o[0],o[1]]},g.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(S){return arguments.length?(n=S,g):n},g.duration=function(S){return arguments.length?(a=+S,g):a},g.interpolate=function(S){return arguments.length?(c=S,g):c},g.on=function(){var S=l.on.apply(l,arguments);return S===l?g:S},g.clickDistance=function(S){return arguments.length?(m=(S=+S)*S,g):Math.sqrt(m)},g.tapDistance=function(S){return arguments.length?(y=+S,g):y},g}function ze(e){return e!=null&&!Number.isNaN(e)}function dn(e,t){return+ze(t)-+ze(e)||zt(e,t)}function vl(e,t){return+ze(t)-+ze(e)||Zn(e,t)}function zm(e){return e!=null&&`${e}`!=""}function bf(e){return isFinite(e)?e:NaN}function ar(e){return e>0&&isFinite(e)?e:NaN}function ja(e){return e<0&&isFinite(e)?e:NaN}function wf(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;let n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${lJ(e.getUTCFullYear(),4)}-${Ws(e.getUTCMonth()+1,2)}-${Ws(e.getUTCDate(),2)}${n||r||i||o?`T${Ws(n,2)}:${Ws(r,2)}${i||o?`:${Ws(i,2)}${o?`.${Ws(o,3)}`:""}`:""}Z`:""}`}function lJ(e){return e<0?`-${Ws(-e,6)}`:e>9999?`+${Ws(e,6)}`:Ws(e,4)}function Ws(e,t){return`${e}`.padStart(t,"0")}var uJ=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function qm(e,t){return uJ.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function Gs(e){if(e==null)return;let t=e[0],n=e[e.length-1];return Zn(t,n)}var _f=1e3,Ya=_f*60,Xa=Ya*60,zo=Xa*24,Uo=zo*7,_l=zo*30,Va=zo*365,qA=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",_f],["5 seconds",5*_f],["15 seconds",15*_f],["30 seconds",30*_f],["minute",Ya],["5 minutes",5*Ya],["15 minutes",15*Ya],["30 minutes",30*Ya],["hour",Xa],["3 hours",3*Xa],["6 hours",6*Xa],["12 hours",12*Xa],["day",zo],["2 days",2*zo],["week",Uo],["2 weeks",2*Uo],["month",_l],["3 months",3*_l],["6 months",6*_l],["year",Va],["2 years",2*Va],["5 years",5*Va],["10 years",10*Va],["20 years",20*Va],["50 years",50*Va],["100 years",100*Va]],jA=new Map([["second",_f],["minute",Ya],["hour",Xa],["day",zo],["monday",Uo],["tuesday",Uo],["wednesday",Uo],["thursday",Uo],["friday",Uo],["saturday",Uo],["sunday",Uo],["week",Uo],["month",_l],["year",Va]]),RF=new Map([["second",fn],["minute",Ps],["hour",zs],["day",yi],["monday",za],["tuesday",Sb],["wednesday",Ib],["thursday",Ro],["friday",Mb],["saturday",Ab],["sunday",Ur],["week",Ur],["month",js],["year",zn]]),VA=new Map([["second",fn],["minute",Us],["hour",qs],["day",gl],["monday",qa],["tuesday",Tb],["wednesday",Eb],["thursday",$o],["friday",Nb],["saturday",Db],["sunday",zr],["week",zr],["month",Vs],["year",qn]]),Sf=Symbol("intervalDuration"),aw=Symbol("intervalType");for(let[e,t]of RF)t[Sf]=jA.get(e),t[aw]="time";for(let[e,t]of VA)t[Sf]=jA.get(e),t[aw]="utc";var jm=[["year",qn,"utc"],["month",Vs,"utc"],["day",gl,"utc",6*_l],["hour",qs,"utc",3*zo],["minute",Us,"utc",6*Xa],["second",fn,"utc",30*Ya]],sw=[["year",zn,"time"],["month",js,"time"],["day",yi,"time",6*_l],["hour",zs,"time",3*zo],["minute",Ps,"time",6*Xa],["second",fn,"time",30*Ya]],fJ=[jm[0],sw[0],jm[1],sw[1],jm[2],sw[2],...jm.slice(3)];function cw(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1,r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=VA.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function YA(e){return $F(cw(e),"time")}function Vm(e){return $F(cw(e),"utc")}function $F([e,t],n){let r=(n==="time"?RF:VA).get(e);return t>1&&(r=r.every(t),r[Sf]=jA.get(e)*t,r[aw]=n),r}function XA(e,t){if(!(t>1))return;let n=e[Sf];if(!qA.some(([,i])=>i===n)||n%zo===0&&zo<n&&n<_l)return;let[r]=qA[Is(([,i])=>Math.log(i)).center(qA,Math.log(n*t))];return(e[aw]==="time"?YA:Vm)(r)}function FF(e,t,n){let r=t==="time"?lf:Po;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");let i=hJ(n);switch(e){case"millisecond":return vf(r(".%L"),r(":%M:%S"),i);case"second":return vf(r(":%S"),r("%-I:%M"),i);case"minute":return vf(r("%-I:%M"),r("%p"),i);case"hour":return vf(r("%-I %p"),r("%b %-d"),i);case"day":return vf(r("%-d"),r("%b"),i);case"month":return vf(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function hJ(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function dJ(e){return e==="time"?sw:e==="utc"?jm:fJ}function PF(e,t,n){let r=Ht(nx(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return FF("millisecond","utc",n);for(let[i,o,s,a]of dJ(e)){if(r>a||i==="hour"&&!r)break;if(t.every(c=>o.floor(c)>=c))return FF(i,s,n)}}function vf(e,t,n){return(r,i,o)=>{let s=e(r,i),a=t(r,i),c=i-Gs(o);return i!==c&&o[c]!==void 0&&a===t(o[c],c)?s:n(s,a)}}var Sl=Object.getPrototypeOf(Uint8Array),pJ=Object.prototype.toString,WA=Symbol("reindex");function wt(e,t,n){let r=typeof t;return r==="string"?UF(e,GA(t),n):r==="function"?UF(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Wt(e,pn(t),n):typeof t?.transform=="function"?zF(t.transform(e),n):mJ(zF(t,n),e?.[WA])}function mJ(e,t){return t?Xm(e,t):e}function UF(e,t,n){return Wt(e,n?.prototype instanceof Sl?yJ(t):t,n)}function zF(e,t){return t===void 0?je(e):e instanceof t?e:t.prototype instanceof Sl&&!(e instanceof Sl)?t.from(e,HA):t.from(e)}function yJ(e){return(t,n)=>HA(e(t,n))}var Wa=[null],GA=e=>t=>t[e],Ee={transform:cr},W={transform:e=>e};var Ym=()=>1,qF=()=>!0,qe=e=>e==null?e:`${e}`,Bt=e=>e==null?e:+e;var Il=e=>e?e[0]:void 0,Ga=e=>e?e[1]:void 0,jF=e=>e?e[2]:void 0,pn=e=>()=>e;function If(e){let t=+`${e}`.slice(1)/100;return(n,r)=>Kn(n,t,r)}function Ke(e){return e instanceof Sl?e:Wt(e,HA,Float64Array)}function HA(e){return e==null?NaN:Number(e)}function VF(e){return Wt(e,ZA)}function ZA(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?qm(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Be(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Ja(e)?[void 0,e]:[e,void 0]}function se(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function JA(e,t,n){if(e!=null)return sn(e,t,n)}function sn(e,t,n){let r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function je(e){return e==null||e instanceof Array||e instanceof Sl?e:Array.from(e)}function Wt(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Ha(e,t=Array){return e instanceof t?e.slice():t.from(e)}function QA({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function KA({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Mf(e){return QA(e)||KA(e)||e.interval!==void 0}function mn(e){return e?.toString===pJ}function qo(e){return mn(e)&&(e.type!==void 0||e.domain!==void 0)}function jr(e){return mn(e)&&typeof e.transform!="function"}function jo(e){return jr(e)&&e.value===void 0&&e.channel===void 0}function tT(e,t,n,r=W){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Pe(e,t){return e===void 0&&t===void 0?[Il,Ga]:[e,t]}function jn({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Be(t)),e===void 0&&([e]=Be(n)),e}function cr(e){let t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function Xm(e,t){return Wt(t,n=>e[n],e.constructor)}function Af(e){return e.length===1?(t,n)=>e(Xm(n,t)):e}function Hs(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Zs(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lw(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yn(e){let t;return[{transform:()=>t,label:Bn(e)},n=>t=n]}function On(e){return e==null?[e]:yn(e)}function Bn(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Tf(e,t){return{transform(n){let r=e.transform(n),i=t.transform(n);return Le(r)||Le(i)?Wt(r,(o,s)=>new Date((+r[s]+ +i[s])/2)):Wt(r,(o,s)=>(+r[s]+ +i[s])/2,Float64Array)},label:e.label}}function Ml(e,t){let n=eT(t?.interval,t?.type);return n?Wt(e,n):e}function eT(e,t){let n=Ef(e,t);return n&&(r=>ze(r)?n.floor(r):r)}function Ef(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);let n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Ue(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Ue(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof e=="string")return(t==="time"?YA:Vm)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Vo(e,t){if(e=Ef(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function YF(e,t){if(e=Vo(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function XF(e){return Za(e)&&typeof e?.floor=="function"&&e.floor()instanceof Date}function Za(e){return typeof e?.range=="function"}function wi(e){return e===void 0||jr(e)?e:{value:e}}function WF(e){return e==null?null:{transform:t=>wt(t,e,Float64Array),label:Bn(e)}}function GF(e){if(!lr(e))return!1;for(let t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function lr(e){return e&&typeof e[Symbol.iterator]=="function"}function uw(e){for(let t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Ne(e){for(let t of e){if(t==null)continue;let n=typeof t;return n==="string"||n==="boolean"}}function Le(e){for(let t of e)if(t!=null)return t instanceof Date}function HF(e){for(let t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&qm(t)}function ZF(e){for(let t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Js(e){for(let t of e)if(t!=null)return typeof t=="number"}function fw(e,t){let n;for(let r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}var gJ=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Ja(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||gJ.has(e))}function JF(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function re(e){return e==null||Qs(e)}function Qs(e){return/^\s*none\s*$/i.test(e)}function QF(e){return/^\s*round\s*$/i.test(e)}function hw(e,t){return JA(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Yo(e="middle"){return hw(e,"frameAnchor")}function KF(e={},...t){let n=e;for(let r of t)for(let i in r)if(n[i]===void 0){let o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function xJ(e){console.warn("named iterables are deprecated; please use an object instead");let t=new Set;return Object.fromEntries(Array.from(e,n=>{let{name:r}=n;if(r==null)throw new Error("missing name");let i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Wm(e){return lr(e)?xJ(e):e}function dw(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=sn(e,"clip",["frame","sphere"])),e}var vi=Symbol("position"),Vr=Symbol("color"),Al=Symbol("radius"),Tl=Symbol("length"),El=Symbol("opacity"),Nf=Symbol("symbol"),tR=Symbol("projection"),he=new Map([["x",vi],["y",vi],["fx",vi],["fy",vi],["r",Al],["color",Vr],["opacity",El],["symbol",Nf],["length",Tl],["projection",tR]]);function eR(e){return e===vi||e===tR}function nR(e){return e===vi||e===Al||e===Tl||e===El}var nT=Math.sqrt(3),rT=2/nT,bJ={draw(e,t){let n=Math.sqrt(t/Math.PI),r=n*rT,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},iT=new Map([["asterisk",Am],["circle",Xs],["cross",Tm],["diamond",Em],["diamond2",Nm],["hexagon",bJ],["plus",Dm],["square",Om],["square2",Bm],["star",Lm],["times",mf],["triangle",Cm],["triangle2",km],["wye",Fm]]);function oT(e){return e&&typeof e.draw=="function"}function rR(e){return oT(e)?!0:typeof e!="string"?!1:iT.has(e.toLowerCase())}function Df(e){if(e==null||oT(e))return e;let t=iT.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function iR(e){if(e==null||oT(e))return[void 0,e];if(typeof e=="string"){let t=iT.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function gn({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},s){if(r===void 0&&(e!=null&&(r=cT(e)),t!=null&&!jo(t)&&(r=sT(r,uT(t))),n&&(r=sT(r,lT))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||jo(t))&&{sort:t},transform:sT(r,s)}}function Ie({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=cT(e)),t!=null&&!jo(t)&&(r=aT(r,uT(t))),n&&(r=aT(r,lT))),{...i,...(t===null||jo(t))&&{sort:t},initializer:aT(r,o)}}function sT(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,je(n),r,i)}}function aT(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let s,a,c,l,u,f;return{data:a=n,facets:c=r,channels:s}=e.call(this,n,r,i,...o),{data:u=a,facets:f=c,channels:l}=t.call(this,a,c,{...i,...s},...o),{data:u,facets:f,channels:{...s,...l}}}}function pw(e,t){return(e.initializer!=null?Ie:gn)(e,t)}function oR(e,t){return pw(t,cT(e))}function cT(e){return(t,n)=>{let r=wt(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function sR({sort:e,...t}={}){return{...pw(t,lT),sort:jo(e)?e:null}}function lT(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function aR({seed:e,sort:t,...n}={}){return{...pw(n,cR(e==null?Math.random:fl(e))),sort:jo(t)?t:null}}function mw(e,{sort:t,...n}={}){return{...(jr(e)&&e.channel!==void 0?Ie:pw)(n,uT(e)),sort:jo(t)?t:null}}function uT(e){return(typeof e=="function"&&e.length!==1?wJ:cR)(e)}function wJ(e){return(t,n)=>{let r=(i,o)=>e(t[i],t[o]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function cR(e){let t,n;({channel:t,value:e,order:n}={...wi(e)});let r=t?.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?vl:dn),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=dn;break;case"descending":n=vl;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,s)=>{let a;if(t===void 0)a=wt(i,e);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(a=s[t],!a)return{};a=a.value}let c=(l,u)=>n(a[l],a[u]);return{data:i,facets:o.map(l=>l.slice().sort(c))}}}function Hm(e,t){return yw(null,null,e,t)}function Ka(e={y:"count"},t={}){let{x:n=W}=t;if(n==null)throw new Error("missing channel: x");return yw(n,null,e,t)}function tc(e={x:"count"},t={}){let{y:n=W}=t;if(n==null)throw new Error("missing channel: y");return yw(null,n,e,t)}function Zm(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Pe(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return yw(n,r,e,t)}function yw(e,t,{data:n=bw,filter:r,sort:i,reverse:o,...s}={},a={}){s=hT(s,a),n=dR(n,W),i=i==null?void 0:fR("sort",i,a),r=r==null?void 0:hR("filter",r,a);let[c,l]=On(e),[u,f]=On(t),{z:h,fill:d,stroke:p,x1:m,x2:y,y1:g,y2:x,...b}=a,[w,_]=On(h),[v]=Be(d),[M]=Be(p),[E,I]=On(v),[D,A]=On(M);return{..."z"in a&&{z:w||h},..."fill"in a&&{fill:E||d},..."stroke"in a&&{stroke:D||p},...gn(b,(O,C,S)=>{let T=Ml(wt(O,e),S?.x),N=Ml(wt(O,t),S?.y),F=wt(O,h),R=wt(O,v),k=wt(O,M),$=Jm(s,{z:F,fill:R,stroke:k}),P=[],U=[],G=T&&l([]),nt=N&&f([]),ot=F&&_([]),at=R&&I([]),Y=k&&A([]),st=0;for(let j of s)j.initialize(O);i&&i.initialize(O),r&&r.initialize(O);for(let j of C){let Z=[];for(let rt of s)rt.scope("facet",j);i&&i.scope("facet",j),r&&r.scope("facet",j);for(let[rt,z]of Qa(j,$))for(let[kt,ht]of Qa(z,N))for(let[Gt,Zt]of Qa(ht,T)){let tt={data:O};if(T&&(tt.x=Gt),N&&(tt.y=kt),$&&(tt.z=rt),!(r&&!r.reduce(Zt,tt))){Z.push(st++),U.push(n.reduceIndex(Zt,O,tt)),T&&G.push(Gt),N&&nt.push(kt),F&&ot.push($===F?rt:F[Zt[0]]),R&&at.push($===R?rt:R[Zt[0]]),k&&Y.push($===k?rt:k[Zt[0]]);for(let ae of s)ae.reduce(Zt,tt);i&&i.reduce(Zt,tt)}}P.push(Z)}return dT(P,i,o),{data:U,facets:P}}),...!Xo(s,"x")&&(c?{x:c}:{x1:m,x2:y}),...!Xo(s,"y")&&(u?{y:u}:{y1:g,y2:x}),...Object.fromEntries(s.map(({name:O,output:C})=>[O,C]))}}function Xo(e,...t){for(let{name:n}of e)if(t.includes(n))return!0;return!1}function fT(e,t,n=gw){let r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",AJ]),t.href!=null&&e.href===void 0&&r.push(["href",ww]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?vJ(i):n(i,o,t))}function gw(e,t,n,r=xw){let i;mn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);let o=r(e,t,n),[s,a]=yn(o.label),c;return{name:e,output:i===void 0?s:{value:s,scale:i},initialize(l){o.initialize(l),c=a([])},scope(l,u){o.scope(l,u)},reduce(l,u){c.push(o.reduce(l,u))}}}function vJ(e){return{name:e,initialize(){},scope(){},reduce(){}}}function xw(e,t,n,r=Of){let i=lw(e,n),o=r(t,i),s,a;return{label:Bn(o===Gm?null:i,o.label),initialize(c){s=i===void 0?c:wt(c,i),o.scope==="data"&&(a=o.reduceIndex(cr(c),s))},scope(c,l){o.scope===c&&(a=o.reduceIndex(l,s))},reduce(c,l){return o.scope==null?o.reduceIndex(c,s,l):o.reduceIndex(c,s,a,l)}}}function Qa(e,t){return t?ln(e,n=>t[n]):[[,e]]}function Of(e,t,n=_J){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&mn(e))return IJ(e);if(typeof e=="function")return MJ(e);if(/^p\d{2}$/i.test(e))return Ks(If(e));switch(`${e}`.toLowerCase()){case"first":return ww;case"last":return TJ;case"identity":return bw;case"count":return Gm;case"distinct":return EJ;case"sum":return t==null?Gm:NJ;case"proportion":return uR(t,"data");case"proportion-facet":return uR(t,"facet");case"deviation":return Ks(li);case"min":return Ks(ue);case"min-index":return Ks(K0);case"max":return Ks(Ht);case"max-index":return Ks(Q0);case"mean":return lR(Es);case"median":return lR(Ui);case"variance":return Ks(Ta);case"mode":return Ks(Bu)}return n(e)}function _J(e){throw new Error(`invalid reduce: ${e}`)}function hT(e,t){return fT(e,t,fR)}function fR(e,t,n){return gw(e,t,n,hR)}function hR(e,t,n){return xw(e,t,n,dR)}function dR(e,t){return Of(e,t,SJ)}function SJ(e){switch(`${e}`.toLowerCase()){case"x":return DJ;case"y":return OJ;case"z":return pT}throw new Error(`invalid group reduce: ${e}`)}function Jm(e,t){for(let n in t){let r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function dT(e,t,n){if(t){let r=t.output.transform(),i=(o,s)=>dn(r[o],r[s]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function IJ(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function MJ(e){return{reduceIndex(t,n,r){return e(Xm(n,t),r)}}}function Ks(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function lR(e){return{reduceIndex(t,n){let r=e(t,i=>n[i]);return Le(n)?new Date(r):r}}}var bw={reduceIndex(e,t){return Xm(t,e)}},ww={reduceIndex(e,t){return t[e[0]]}},AJ={reduceIndex(e,t){let r=As(Pi(e,o=>o.length,o=>t[o]),Ga),i=r.slice(-5).reverse();if(i.length<r.length){let o=r.slice(0,-4);i[4]=[`\u2026 ${o.length.toLocaleString("en-US")} more`,Tn(o,Ga)]}return i.map(([o,s])=>`${o} (${s.toLocaleString("en-US")})`).join(`
`)}},TJ={reduceIndex(e,t){return t[e[e.length-1]]}},Gm={label:"Frequency",reduceIndex(e){return e.length}},EJ={label:"Distinct",reduceIndex(e,t){let n=new Qn;for(let r of e)n.add(t[r]);return n.size}},NJ=Ks(Tn);function uR(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Tn(n,o=>r[o])/i}}var DJ={reduceIndex(e,t,{x:n}){return n}},OJ={reduceIndex(e,t,{y:n}){return n}},pT={reduceIndex(e,t,{z:n}){return n}};function pR(e){if(typeof e!="function")throw new Error(`invalid test function: ${e}`);return{reduceIndex(t,n,{data:r}){return n[t.find(i=>e(r[i],i,r))]}}}function Bf(e,{scale:t,type:n,value:r,filter:i,hint:o,label:s=Bn(r)},a){return o===void 0&&typeof r?.transform=="function"&&(o=r.hint),yT(a,{scale:t,type:n,value:wt(e,r),label:s,filter:i,hint:o})}function vw(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Bf(t,r,n)]))}function Lf(e,t){let n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{let s=i==null?null:t[i];return[r,s==null?o:Wt(o,s)]}));return n.channels=e,n}function yT(e,t){let{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&fw(r,Ja)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&fw(r,JF)?null:"opacity";break;case"symbol":n!==!0&&fw(r,rR)?(t.scale=null,t.value=Wt(r,Df)):t.scale="symbol";break;default:t.scale=he.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!he.has(n))throw new Error(`unknown scale: ${n}`);return t}function yR(e,t,n,r,i){let{order:o,reverse:s,reduce:a=!0,limit:c}=i;for(let l in i){if(!he.has(l))continue;let{value:u,order:f=o,reverse:h=s,reduce:d=a,limit:p=c}=wi(i[l]),m=u?.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?xR:gR:CJ(f),d==null||d===!1)continue;let y=l==="fx"||l==="fy"?LJ(t,r[l]):BJ(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);let g=y.value,[x=0,b=1/0]=lr(p)?p:p<0?[p]:[0,p];if(u==null)y.domain=()=>{let w=Array.from(new Qn(g));return h&&(w=w.reverse()),(x!==0||b!==1/0)&&(w=w.slice(x,b)),w};else{let w=u==="data"?e:u==="height"?mR(n,"y1","y2"):u==="width"?mR(n,"x1","x2"):mT(n,u,u==="y"?"y2":u==="x"?"x2":void 0),_=Of(d===!0?"max":d,w);y.domain=()=>{let v=jS(cr(g),M=>_.reduceIndex(M,w),M=>g[M]);return f&&v.sort(f),h&&v.reverse(),(x!==0||b!==1/0)&&(v=v.slice(x,b)),v.map(Il)}}}}function BJ(e,t){for(let n in e){let r=e[n];if(r.scale===t)return r}}function LJ(e,t){let n=e.original;if(n===e)return t;let r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){let s=r[n[o][0]];for(let a of e[o])i[a]=s}return t}function mR(e,t,n){let r=mT(e,t),i=mT(e,n);return Wt(i,(o,s)=>Math.abs(o-r[s]),Float64Array)}function mT(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function CJ(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return gR;case"descending":return xR}throw new Error(`invalid order: ${e}`)}function gR([e,t],[n,r]){return dn(t,r)||dn(e,n)}function xR([e,t],[n,r]){return vl(t,r)||dn(e,n)}function Qm(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function ec(e={}){let{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:dw(n)}}function ut(e,{document:t}){return Vt(Ds(e).call(t.documentElement))}var gT=0,xT;function bR(){let e=gT;return gT=0,xT=void 0,e}function Vn(e){e!==xT&&(xT=e,console.warn(e),++gT)}var vR=Math.PI,ta=2*vR,wR=.618;function _R({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},s){if(e==null)return;if(typeof e.stream=="function")return e;let a,c,l="frame";if(mn(e)){let _;if({type:e,domain:c,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:o=_!==void 0?_:o,clip:l=l,...a}=e,e==null)return}typeof e!="function"&&({type:e}=SR(e));let{width:u,height:f,marginLeft:h,marginRight:d,marginTop:p,marginBottom:m}=s,y=u-h-d-o-r,g=f-p-m-n-i;if(e=e?.({width:y,height:g,clip:l,...a}),e==null)return;l=kJ(l,h,p,u-d,f-m);let x=h+o,b=p+n,w;if(c!=null){let[[_,v],[M,E]]=Nn(e).bounds(c),I=Math.min(y/(M-_),g/(E-v));I>0?(x-=(I*(_+M)-y)/2,b-=(I*(v+E)-g)/2,w=ll({point(D,A){this.stream.point(D*I+x,A*I+b)}})):Vn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??=x===0&&b===0?IR():ll({point(_,v){this.stream.point(_+x,v+b)}}),{stream:_=>e.stream(w.stream(l(_)))}}function SR(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Vi(mM,.7463,.4673);case"albers":return _w(Kp,.7463,.4673);case"azimuthal-equal-area":return Vi(gM,4,4);case"azimuthal-equidistant":return Vi(bM,ta,ta);case"conic-conformal":return _w(_M,ta,ta);case"conic-equal-area":return _w($a,6.1702,2.9781);case"conic-equidistant":return _w(IM,7.312,3.6282);case"equal-earth":return Vi(AM,5.4133,2.6347);case"equirectangular":return Vi(SM,ta,vR);case"gnomonic":return Vi(EM,3.4641,3.4641);case"identity":return{type:IR};case"reflect-y":return{type:FJ};case"mercator":return Vi(wM,ta,ta);case"orthographic":return Vi(DM,2,2);case"stereographic":return Vi(BM,2,2);case"transverse-mercator":return Vi(CM,ta,ta);default:throw new Error(`unknown projection type: ${e}`)}}function kJ(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Ju(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Vi(e,t,n){return{type:({width:r,height:i,rotate:o,precision:s=.15,clip:a})=>{let c=e();return s!=null&&c.precision?.(s),o!=null&&c.rotate?.(o),typeof a=="number"&&c.clipAngle?.(a),c.scale(Math.min(r/t,i/n)),c.translate([r/2,i/2]),c},aspectRatio:n/t}}function _w(e,t,n){let{type:r,aspectRatio:i}=Vi(e,t,n);return{type:o=>{let{parallels:s,domain:a,width:c,height:l}=o,u=r(o);return s!=null&&(u.parallels(s),a===void 0&&u.fitSize([c,l],{type:"Sphere"})),u},aspectRatio:i}}var IR=pn({stream:e=>e}),FJ=pn(ll({point(e,t){this.stream.point(e,-t)}}));function bT(e,t,n,r){let i=n[e],o=n[t],s=i.length,a=n[e]=new Float64Array(s).fill(NaN),c=n[t]=new Float64Array(s).fill(NaN),l,u=r.stream({point(f,h){a[l]=f,c[l]=h}});for(l=0;l<s;++l)u.point(i[l],o[l])}function MR({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(mn(e)&&(e=e.type),e!=null)}function AR(e){if(typeof e?.stream=="function")return wR;if(mn(e)&&(e=e.type),e!=null){if(typeof e!="function"){let{aspectRatio:t}=SR(e);if(t)return t}return wR}}function nc(e,t,{projection:n}){let{x:r,y:i}=e,o={};return r&&(o.x=r),i&&(o.y=i),o=Lf(o,t),n&&r?.scale==="x"&&i?.scale==="y"&&bT("x","y",o,n),r&&(o.x=Ke(o.x)),i&&(o.y=Ke(o.y)),o}function TR(e){let t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(s,a){t.push(s),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(let s of e.value)Pr(s,o);return[r,i]}var BR=new Map([["accent",iA],["category10",rA],["dark2",oA],["observable10",sA],["paired",aA],["pastel1",cA],["pastel2",lA],["set1",uA],["set2",fA],["set3",hA],["tableau10",dA]]);function LR(e){return e!=null&&BR.has(`${e}`.toLowerCase())}var ER=new Map([...BR,["brbg",ea($b,Pb)],["prgn",ea(Ub,zb)],["piyg",ea(qb,jb)],["puor",ea(Vb,Yb)],["rdbu",ea(_m,uf)],["rdgy",ea(Xb,Wb)],["rdylbu",ea(Sm,ff)],["rdylgn",ea(Gb,Hb)],["spectral",ea(Zb,Jb)],["burd",NR(_m,uf)],["buylrd",NR(Sm,ff)],["blues",xn(_1,S1)],["greens",xn(I1,M1)],["greys",xn(A1,T1)],["oranges",xn(B1,L1)],["purples",xn(E1,N1)],["reds",xn(D1,O1)],["turbo",na(q1)],["viridis",na(V1)],["magma",na(Y1)],["inferno",na(X1)],["plasma",na(W1)],["cividis",na(C1)],["cubehelix",na(k1)],["warm",na(R1)],["cool",na($1)],["bugn",xn(Qb,Kb)],["bupu",xn(t1,e1)],["gnbu",xn(n1,r1)],["orrd",xn(i1,o1)],["pubu",xn(c1,l1)],["pubugn",xn(s1,a1)],["purd",xn(u1,f1)],["rdpu",xn(h1,d1)],["ylgn",xn(y1,g1)],["ylgnbu",xn(p1,m1)],["ylorbr",xn(x1,b1)],["ylorrd",xn(w1,v1)],["rainbow",DR(P1)],["sinebow",DR(z1)]]);function xn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Rn(t,n):e[n])}function ea(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Rn(t,n):e[n])}function NR(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Rn(r=>t(1-r),n):e[n].slice().reverse())}function na(e){return({length:t})=>Rn(e,Math.max(2,Math.floor(t)))}function DR(e){return({length:t})=>Rn(e,Math.floor(t)+1).slice(0,-1)}function wT(e){let t=`${e}`.toLowerCase();if(!ER.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return ER.get(t)}function Km(e,t){let n=wT(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function CR(e,t="greys"){let n=new Set,[r,i]=Km(t,2);for(let o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}var OR=new Map([["brbg",Pb],["prgn",zb],["piyg",jb],["puor",Yb],["rdbu",uf],["rdgy",Wb],["rdylbu",ff],["rdylgn",Hb],["spectral",Jb],["burd",e=>uf(1-e)],["buylrd",e=>ff(1-e)],["blues",S1],["greens",M1],["greys",T1],["purples",N1],["reds",O1],["oranges",L1],["turbo",q1],["viridis",V1],["magma",Y1],["inferno",X1],["plasma",W1],["cividis",C1],["cubehelix",k1],["warm",R1],["cool",$1],["bugn",Kb],["bupu",e1],["gnbu",r1],["orrd",o1],["pubugn",a1],["pubu",l1],["purd",f1],["rdpu",d1],["ylgnbu",m1],["ylgn",g1],["ylorbr",b1],["ylorrd",v1],["rainbow",P1],["sinebow",z1]]);function Cf(e){let t=`${e}`.toLowerCase();if(!OR.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return OR.get(t)}var RJ=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function kR(e){return e!=null&&RJ.has(`${e}`.toLowerCase())}var _T=e=>t=>e(1-t),vT=[0,1],FR=new Map([["number",_e],["rgb",fi],["hsl",mI],["hcl",yI],["lab",vx]]);function ST(e){let t=`${e}`.toLowerCase();if(!FR.has(t))throw new Error(`unknown interpolator: ${t}`);return FR.get(t)}function Ff(e,t,n,{type:r,nice:i,clamp:o,zero:s,domain:a=VR(e,n),unknown:c,round:l,scheme:u,interval:f,range:h=he.get(e)===Al?zJ(n,a):he.get(e)===Tl?qJ(n,a):he.get(e)===El?vT:void 0,interpolate:d=he.get(e)===Vr?u==null&&h!==void 0?fi:Cf(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):l?tl:_e,reverse:p}){if(f=Vo(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=ST(d)),p=!!p,h!==void 0){let m=(a=je(a)).length,y=(h=je(h)).length;if(m!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ao(d,h),h=void 0}}if(d.length===1?(p&&(d=_T(d),p=!1),h===void 0&&(h=Float64Array.from(a,(m,y)=>y/(a.length-1)),h.length===2&&(h=vT)),t.interpolate((h===vT?pn:ty)(d))):t.interpolate(d),s){let[m,y]=le(a);(m>0||y<0)&&(a=Ha(a),Gs(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return p&&(a=Na(a)),t.domain(a).unknown(c),i&&(t.nice($J(i,r)),a=t.domain()),h!==void 0&&t.range(h),o&&t.clamp(o),{type:r,domain:a,range:h,scale:t,interpolate:d,interval:f}}function $J(e,t){return e===!0?void 0:typeof e=="number"?e:YF(e,t)}function RR(e,t,n){return Ff(e,$s(),t,n)}function $R(e,t,n){return IT(e,t,{...n,exponent:.5})}function IT(e,t,{exponent:n=1,...r}){return Ff(e,fm().exponent(n),t,{...r,type:"pow"})}function PR(e,t,{base:n=10,domain:r=jJ(t),...i}){return Ff(e,lm().base(n),t,{...i,domain:r})}function UR(e,t,{constant:n=1,...r}){return Ff(e,um().constant(n),t,r)}function zR(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:s=VJ(t),unknown:a,interpolate:c,reverse:l}){return n===void 0&&(n=c!==void 0?Rn(c,i):he.get(e)===Vr?Km(o,i):void 0),s.length>0&&(s=hm(s,n===void 0?{length:i}:n).quantiles()),Sw(e,t,{domain:s,range:n,reverse:l,unknown:a})}function qR(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=VR(e,t),unknown:s,interpolate:a,reverse:c}){let[l,u]=le(o),f;return n===void 0?(f=An(l,u,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?Rn(a,r):he.get(e)===Vr?Km(i,r):void 0):(f=Rn(_e(l,u),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),Gs(je(o))<0&&f.reverse(),Sw(e,t,{domain:f,range:n,reverse:c,unknown:s})}function Sw(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:s=o!==void 0?Rn(o,n.length+1):he.get(e)===Vr?Km(i,n.length+1):void 0,reverse:a}){n=je(n);let c=Gs(n);if(!isNaN(c)&&!PJ(n,c))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(s=Na(s)),{type:"threshold",scale:dm(c<0?Na(n):n,s===void 0?[]:s).unknown(r),domain:n,range:s}}function PJ(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){let o=Zn(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function jR(e){return{type:"identity",scale:nR(he.get(e))?am():t=>t}}function kf(e,t=bf){return e.length?[ue(e,({value:n})=>n===void 0?n:ue(n,t)),Ht(e,({value:n})=>n===void 0?n:Ht(n,t))]:[0,1]}function VR(e,t){let n=he.get(e);return(n===Al||n===El||n===Tl?UJ:kf)(t)}function UJ(e){return[0,e.length?Ht(e,({value:t})=>t===void 0?t:Ht(t,bf)):1]}function zJ(e,t){let n=e.find(({radius:s})=>s!==void 0);if(n!==void 0)return[0,n.radius];let r=Kn(e,.5,({value:s})=>s===void 0?NaN:Kn(s,.25,ar)),i=t.map(s=>3*Math.sqrt(s/r)),o=30/Ht(i);return o<1?i.map(s=>s*o):i}function qJ(e,t){let n=Ui(e,({value:o})=>o===void 0?NaN:Ui(o,Math.abs)),r=t.map(o=>12*o/n),i=60/Ht(r);return i<1?r.map(o=>o*i):r}function jJ(e){for(let{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return kf(e,ar);if(n<0)return kf(e,ja)}return[1,10]}function VJ(e){let t=[];for(let{value:n}of e)if(n!==void 0)for(let r of n)t.push(r);return t}function ty(e){return(t,n)=>r=>e(t+r*(n-t))}function Iw(e,t,n,r,{type:i,nice:o,clamp:s,domain:a=kf(r),unknown:c,pivot:l=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=he.get(e)===Vr?u==null&&f!==void 0?fi:Cf(u!==void 0?u:"rdbu"):_e,reverse:p}){l=+l,a=je(a);let[m,y]=a;if(a.length>2&&Vn(`Warning: the diverging ${e} scale domain contains extra elements.`),Zn(m,y)<0&&([m,y]=[y,m],p=!p),m=Math.min(m,l),y=Math.max(y,l),typeof d!="function"&&(d=ST(d)),f!==void 0&&(d=d.length===1?ty(d)(...f):Ao(d,f)),p&&(d=_T(d)),h){let g=n.apply(l),x=g-n.apply(m),b=n.apply(y)-g;x<b?m=n.invert(g-b):x>b&&(y=n.invert(g+x))}return t.domain([m,l,y]).unknown(c).interpolator(d),s&&t.clamp(s),o&&t.nice(o),{type:i,domain:[m,y],pivot:l,interpolate:d,scale:t}}function YR(e,t,n){return Iw(e,vm(),YJ,t,n)}function XR(e,t,n){return MT(e,t,{...n,exponent:.5})}function MT(e,t,{exponent:n=1,...r}){return Iw(e,Rb().exponent(n=+n),GJ(n),t,{...r,type:"diverging-pow"})}function WR(e,t,{base:n=10,pivot:r=1,domain:i=kf(t,r<0?ja:ar),...o}){return Iw(e,kb().base(n=+n),XJ,t,{domain:i,pivot:r,...o})}function GR(e,t,{constant:n=1,...r}){return Iw(e,Fb().constant(n=+n),HJ(n),t,r)}var YJ={apply(e){return e},invert(e){return e}},XJ={apply:Math.log,invert:Math.exp},WJ={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function GJ(e){return e===.5?WJ:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function HJ(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function HR(e,t,n,r){return Ff(e,t,n,r)}function ZR(e,t,n){return HR(e,Bb(),t,n)}function JR(e,t,n){return HR(e,Lb(),t,n)}var Rf=Symbol("ordinal");function KR(e,t,n,{type:r,interval:i,domain:o,range:s,reverse:a,hint:c}){return i=Vo(i,r),o===void 0&&(o=i7(n,i,e)),(r==="categorical"||r===Rf)&&(r="ordinal"),a&&(o=Na(o)),o=t.domain(o).domain(),s!==void 0&&(typeof s=="function"&&(s=s(o)),t.range(s)),{type:r,domain:o,range:s,scale:t,hint:c,interval:i}}function t7(e,t,{type:n,interval:r,domain:i,range:o,scheme:s,unknown:a,...c}){r=Vo(r,n),i===void 0&&(i=i7(t,r,e));let l;if(he.get(e)===Nf)l=ZJ(t),o=o===void 0?JJ(l):Wt(o,Df);else if(he.get(e)===Vr&&(o===void 0&&(n==="ordinal"||n===Rf)&&(o=CR(i,s),o!==void 0&&(s=void 0)),s===void 0&&o===void 0&&(s=n==="ordinal"?"turbo":"observable10"),s!==void 0))if(o!==void 0){let u=Cf(s),f=o[0],h=o[1]-o[0];o=({length:d})=>Rn(p=>u(f+h*p),d)}else o=wT(s);if(a===om)throw new Error(`implicit unknown on ${e} scale is not supported`);return KR(e,hl().unknown(a),t,{...c,type:n,domain:i,range:o,hint:l})}function e7(e,t,{align:n=.5,padding:r=.5,...i}){return r7(zM().align(n).padding(r),t,i,e)}function n7(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...s}){return r7(Ua().align(n).paddingInner(i).paddingOuter(o),t,s,e)}function r7(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=KR(r,e,t,n),e.round=i,e}function i7(e,t,n){let r=new Qn;for(let{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(let s of i)r.add(s)}if(t!==void 0){let[i,o]=le(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&he.get(n)===vi)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return As(r,dn)}function QR(e,t){let n;for(let{hint:r}of e){let i=r?.[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function ZJ(e){return{fill:QR(e,"fill"),stroke:QR(e,"stroke")}}function JJ(e){return re(e.fill)?wA:K1}function ey(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:s=n,round:a,nice:c,clamp:l,zero:u,align:f,padding:h,projection:d,facet:{label:p=t}={},...m}={}){let y={};for(let[g,x]of e){let b=m[g],w=h7(g,x,{round:he.get(g)===vi?a:void 0,nice:c,clamp:l,zero:u,align:f,padding:h,projection:d,...b});if(w){let{label:_=g==="fx"||g==="fy"?p:t,percent:v,transform:M,inset:E,insetTop:I=E!==void 0?E:g==="y"?r:0,insetRight:D=E!==void 0?E:g==="x"?i:0,insetBottom:A=E!==void 0?E:g==="y"?o:0,insetLeft:O=E!==void 0?E:g==="x"?s:0}=b||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");w.percent=!!v,w.label=_===void 0?QJ(x,w):_,w.transform=M,g==="x"||g==="fx"?(w.insetLeft=+O,w.insetRight=+D):(g==="y"||g==="fy")&&(w.insetTop=+I,w.insetBottom=+A),y[g]=w}}return y}function TT(e){let t={},n={scales:t};for(let[r,i]of Object.entries(e)){let{scale:o,type:s,interval:a,label:c}=i;t[r]=p7(i),n[r]=o,o.type=s,a!=null&&(o.interval=a),c!=null&&(o.label=c)}return n}function l7(e,t){let{x:n,y:r,fx:i,fy:o}=e,s=i||o?Tw(t):t;i&&o7(i,s),o&&s7(o,s);let a=i||o?ET(e,t):t;n&&o7(n,a),r&&s7(r,a)}function QJ(e=[],t){let n;for(let{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Wo(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Aw(e){return Math.sign(Gs(e.domain()))*Math.sign(Gs(e.range()))}function Tw(e){let{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:s,facet:{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,c),marginBottom:Math.max(r,l),marginLeft:Math.max(i,u),width:o,height:s}}function ET({fx:e,fy:t},n){let{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:c}=Tw(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:e?e.scale.bandwidth()+s+i:a,height:t?t.scale.bandwidth()+r+o:c,facet:{width:a,height:c}}}function o7(e,t){if(e.range===void 0){let{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:s=0}=t,a=o+n,c=i-s-r;e.range=[a,Math.max(a,c)],Wo(e)||(e.range=f7(e)),e.scale.range(e.range)}u7(e)}function s7(e,t){if(e.range===void 0){let{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:s=0}=t,a=o+n,c=i-s-r;e.range=[Math.max(a,c),a],Wo(e)?e.range.reverse():e.range=f7(e),e.scale.range(e.range)}u7(e)}function u7(e){e.round===void 0&&eQ(e)&&KJ(e)<=30&&e.scale.round(!0)}function KJ({scale:e}){let t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),s=t-i,a=Math.abs(r-n)/Math.max(1,s+o*2);return(a-Math.floor(a))*s}function f7(e){let t=e.scale.domain().length+NT(e);if(!(t>2))return e.range;let[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function Ew(e,t,n){return h7(e,n===void 0?void 0:[{hint:n}],{...t})}function h7(e,t=[],n={}){let r=tQ(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Wo({type:r})){let i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Le)?Vn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${$f(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${$f(r)}".`):i.some(HF)?Vn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${$f(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${$f(r)}".`):i.some(ZF)&&Vn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${$f(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${$f(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Mw(t,n,Ke);break;case"identity":switch(he.get(e)){case vi:n=Mw(t,n,Ke);break;case Nf:n=Mw(t,n,nQ);break}break;case"utc":case"time":n=Mw(t,n,VF);break}switch(r){case"diverging":return YR(e,t,n);case"diverging-sqrt":return XR(e,t,n);case"diverging-pow":return MT(e,t,n);case"diverging-log":return WR(e,t,n);case"diverging-symlog":return GR(e,t,n);case"categorical":case"ordinal":case Rf:return t7(e,t,n);case"cyclical":case"sequential":case"linear":return RR(e,t,n);case"sqrt":return $R(e,t,n);case"threshold":return Sw(e,t,n);case"quantile":return zR(e,t,n);case"quantize":return qR(e,t,n);case"pow":return IT(e,t,n);case"log":return PR(e,t,n);case"symlog":return UR(e,t,n);case"utc":return JR(e,t,n);case"time":return ZR(e,t,n);case"point":return e7(e,t,n);case"band":return n7(e,t,n);case"identity":return jR(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function $f(e){return typeof e=="symbol"?e.description:e}function a7(e){return typeof e=="string"?`${e}`.toLowerCase():e}var c7={toString:()=>"projection"};function tQ(e,t,{type:n,domain:r,range:i,scheme:o,pivot:s,projection:a}){if(n=a7(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=c7);for(let l of t){let u=a7(l.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===c7)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;let c=he.get(e);if(c===Al)return"sqrt";if(c===El||c===Tl)return"linear";if(c===Nf)return"ordinal";if((r||i||[]).length>2)return AT(c);if(r!==void 0){if(Ne(r))return AT(c);if(Le(r))return"utc"}else{let l=t.map(({value:u})=>u).filter(u=>u!==void 0);if(l.some(Ne))return AT(c);if(l.some(Le))return"utc"}if(c===Vr){if(s!=null||kR(o))return"diverging";if(LR(o))return"categorical"}return"linear"}function AT(e){switch(e){case vi:return"point";case Vr:return Rf;default:return"ordinal"}}function Wo({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Rf}function NT({type:e}){return e==="threshold"}function eQ({type:e}){return e==="point"||e==="band"}function ur(e){if(e===void 0)return!0;let t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function Mw(e,{domain:t,...n},r){for(let i of e)i.value!==void 0&&(t===void 0&&(t=i.value?.domain),i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function nQ(e){return Wt(e,Df)}function rc(e={}){let t;for(let n in e)if(he.has(n)&&qo(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=p7(Ew(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function d7(e){return t=>{if(!he.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function p7({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:s,percent:a,pivot:c}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};let l=e.unknown?e.unknown():void 0;return{type:t,domain:Ha(n),...r!==void 0&&{range:Ha(r)},...s!==void 0&&{transform:s},...a&&{percent:a},...l!==void 0&&{unknown:l},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function Nw(e){let t,n;return(...r)=>((n?.length!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,t=e(...r)),t)}var rQ=Nw(e=>new Intl.NumberFormat(e)),iQ=Nw((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),oQ=Nw((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function sQ(e="en-US"){let t=rQ(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function m7(e="en-US",t="short"){let n=iQ(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function y7(e="en-US",t="short"){let n=oQ(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function DT(e){return wf(e,"Invalid Date")}function aQ(e="en-US"){let t=sQ(e);return n=>(n instanceof Date?DT:typeof n=="number"?t:qe)(n)}var Yi=aQ();var Ce=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5,cQ=0;function Dw(){return`plot-clip-${++cQ}`}function Ow(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:s,fill:a,fillOpacity:c,stroke:l,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:y,opacity:g,mixBlendMode:x,imageFilter:b,paintOrder:w,pointerEvents:_,shapeRendering:v,channels:M},{ariaLabel:E,fill:I="currentColor",fillOpacity:D,stroke:A="none",strokeOpacity:O,strokeWidth:C,strokeLinecap:S,strokeLinejoin:T,strokeMiterlimit:N,paintOrder:F}){I===null&&(a=null,c=null),A===null&&(l=null,f=null),re(I)?!re(A)&&(!re(a)||M?.fill)&&(A="none"):re(A)&&(!re(l)||M?.stroke)&&(I="none");let[R,k]=Be(a,I),[$,P]=se(c,D),[U,G]=Be(l,A),[nt,ot]=se(f,O),[at,Y]=se(g);Qs(G)||(u===void 0&&(u=C),d===void 0&&(d=S),h===void 0&&(h=T),p===void 0&&!QF(h)&&(p=N),!Qs(k)&&w===void 0&&(w=F));let[st,j]=se(u);return I!==null&&(e.fill=fe(k,"currentColor"),e.fillOpacity=ny(P,1)),A!==null&&(e.stroke=fe(G,"none"),e.strokeWidth=ny(j,1),e.strokeOpacity=ny(ot,1),e.strokeLinejoin=fe(h,"miter"),e.strokeLinecap=fe(d,"butt"),e.strokeMiterlimit=ny(p,4),e.strokeDasharray=fe(m,"none"),e.strokeDashoffset=fe(y,"0")),e.target=qe(s),e.ariaLabel=qe(E),e.ariaDescription=qe(i),e.ariaHidden=qe(o),e.opacity=ny(Y,1),e.mixBlendMode=fe(x,"normal"),e.imageFilter=fe(b,"none"),e.paintOrder=fe(w,"normal"),e.pointerEvents=fe(_,"auto"),e.shapeRendering=fe(v,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:R,scale:"auto",optional:!0},fillOpacity:{value:$,scale:"auto",optional:!0},stroke:{value:U,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:st,optional:!0},opacity:{value:at,scale:"auto",optional:!0}}}function lQ(e,t){t&&e.filter(n=>zm(t[n])).append("title").call(fQ,t)}function uQ(e,t){t&&e.filter(([n])=>zm(t[n])).append("title").call(hQ,t)}function fQ(e,t){t&&e.text(n=>Yi(t[n]))}function hQ(e,t){t&&e.text(([n])=>Yi(t[n]))}function Qt(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){r&&ft(e,"aria-label",h=>r[h]),o&&ft(e,"fill",h=>o[h]),s&&ft(e,"fill-opacity",h=>s[h]),a&&ft(e,"stroke",h=>a[h]),c&&ft(e,"stroke-opacity",h=>c[h]),l&&ft(e,"stroke-width",h=>l[h]),u&&ft(e,"opacity",h=>u[h]),f&&g7(e,h=>f[h],t),n||lQ(e,i)}function Nl(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){r&&ft(e,"aria-label",([h])=>r[h]),o&&ft(e,"fill",([h])=>o[h]),s&&ft(e,"fill-opacity",([h])=>s[h]),a&&ft(e,"stroke",([h])=>a[h]),c&&ft(e,"stroke-opacity",([h])=>c[h]),l&&ft(e,"stroke-width",([h])=>l[h]),u&&ft(e,"opacity",([h])=>u[h]),f&&g7(e,([h])=>f[h],t),n||uQ(e,i)}function dQ({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:s,opacity:a,href:c},{tip:l}){return[e,l?void 0:t,n,r,i,o,s,a,c].filter(u=>u!==void 0)}function ry(e,t,n){let r=ln(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Vn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Bw(e,t,n,r){let{z:i}=n,{z:o}=r,s=dQ(r,n),a=[...t,...s];for(let c of o?ry(e,o,i):[e]){let l,u;t:for(let f of c){for(let h of a)if(!ze(h[f])){u&&u.push(-1);continue t}if(l===void 0){u&&(yield u),l=s.map(h=>Zs(h[f])),u=[f];continue}u.push(f);for(let h=0;h<s.length;++h)if(Zs(s[h][f])!==l[h]){yield u,l=s.map(p=>Zs(p[f])),u=[f];continue t}}u&&(yield u)}}function pQ(e,t,n,r){let i,{clip:o=r.clip}=t;switch(o){case"frame":{let{width:s,height:a,marginLeft:c,marginRight:l,marginTop:u,marginBottom:f}=n,h=Dw();i=`url(#${h})`,e=ut("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",c).attr("y",u).attr("width",s-l-c).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{let{projection:s}=r;if(!s)throw new Error('the "sphere" clip option requires a projection');let a=Dw();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Nn(s)({type:"Sphere"}));break}}ft(e,"aria-label",t.ariaLabel),ft(e,"aria-description",t.ariaDescription),ft(e,"aria-hidden",t.ariaHidden),ft(e,"clip-path",i)}function Ct(e,t,n,r){pQ(e,t,n,r),ft(e,"fill",t.fill),ft(e,"fill-opacity",t.fillOpacity),ft(e,"stroke",t.stroke),ft(e,"stroke-width",t.strokeWidth),ft(e,"stroke-opacity",t.strokeOpacity),ft(e,"stroke-linejoin",t.strokeLinejoin),ft(e,"stroke-linecap",t.strokeLinecap),ft(e,"stroke-miterlimit",t.strokeMiterlimit),ft(e,"stroke-dasharray",t.strokeDasharray),ft(e,"stroke-dashoffset",t.strokeDashoffset),ft(e,"shape-rendering",t.shapeRendering),ft(e,"filter",t.imageFilter),ft(e,"paint-order",t.paintOrder);let{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ft(e,"pointer-events",i)}function Lt(e,t){mQ(e,"mix-blend-mode",t.mixBlendMode),ft(e,"opacity",t.opacity)}function g7(e,t,n){e.each(function(r){let i=t(r);if(i!=null){let o=this.ownerDocument.createElementNS(ui.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(ui.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function ft(e,t,n){n!=null&&e.attr(t,n)}function mQ(e,t,n){n!=null&&e.style(t,n)}function Et(e,t,{x:n,y:r},i=Ce,o=Ce){i+=t.dx,o+=t.dy,n?.bandwidth&&(i+=n.bandwidth()/2),r?.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function fe(e,t){if((e=qe(e))!==t)return e}function ny(e,t){if((e=Bt(e))!==t)return e}var yQ=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Pf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!yQ.test(e))throw new Error(`invalid class name: ${e}`);return e}function Uf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(let n of e)Object.assign(n.style,t)}function bn({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:s}){return[/left$/.test(e)?s:/right$/.test(e)?t-i:(s+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}function b7(e,t,n={}){let r=.5-Ce,i=.5+Ce,o=.5+Ce,s=.5-Ce;for(let{marginTop:m,marginRight:y,marginBottom:g,marginLeft:x}of t)m>r&&(r=m),y>i&&(i=y),g>o&&(o=g),x>s&&(s=x);let{margin:a,marginTop:c=a!==void 0?a:r,marginRight:l=a!==void 0?a:i,marginBottom:u=a!==void 0?a:o,marginLeft:f=a!==void 0?a:s}=n;c=+c,l=+l,u=+u,f=+f;let{width:h=640,height:d=gQ(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:s})+Math.max(0,c-r+u-o)}=n;h=+h,d=+d;let p={width:h,height:d,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:y=m!==void 0?m:c,marginRight:g=m!==void 0?m:l,marginBottom:x=m!==void 0?m:u,marginLeft:b=m!==void 0?m:f}=n.facet??{};y=+y,g=+g,x=+x,b=+b,p.facet={marginTop:y,marginRight:g,marginBottom:x,marginLeft:b}}return p}function gQ({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:s,marginTopDefault:a,marginRightDefault:c,marginBottomDefault:l,marginLeftDefault:u}){let f=n?n.scale.domain().length:1,h=AR(i);if(h){let p=r?r.scale.domain().length:1,m=(1.1*f-.1)/(1.1*p-.1)*h,y=Math.max(.1,Math.min(10,m));return Math.round((s-u-c)*y+a+l)}let d=t?Wo(t)?t.scale.domain().length:Math.max(7,17/f):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);let p=x7("y",t)/(x7("x",e)*o),m=r?r.scale.bandwidth():1,y=n?n.scale.bandwidth():1,g=m*(s-u-c)-e.insetLeft-e.insetRight;return(p*g+t.insetTop+t.insetBottom)/y+a+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function x7(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);let{type:n,domain:r}=t,i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{let a=t.scale.exponent();i=c=>Math.pow(c,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}let[o,s]=le(r);return Math.abs(i(s)-i(o))}function v7(e,t){let{fx:n,fy:r}=ey(e,t),i=n?.scale.domain(),o=r?.scale.domain();return i&&o?H0(i,o).map(([s,a],c)=>({x:s,y:a,i:c})):i?i.map((s,a)=>({x:s,i:a})):o?o.map((s,a)=>({y:s,i:a})):void 0}function _7(e,{x:t,y:n}){return t&&=kT(t),n&&=kT(n),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Cw(e,{fx:t,fy:n}){let r=cr(e),i=t?.value,o=n?.value;return t&&n?Pi(r,s=>(s.fx=i[s[0]],s.fy=o[s[0]],s),s=>i[s],s=>o[s]):t?Pi(r,s=>(s.fx=i[s[0]],s),s=>i[s]):Pi(r,s=>(s.fy=o[s[0]],s),s=>o[s])}function S7(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function I7(e){let t=[],n=new Uint32Array(Tn(e,r=>r.length));for(let r of e){let i=0;for(let o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}var xQ=new Map([["top",OT],["right",CT],["bottom",BT],["left",LT],["top-left",Lw(OT,LT)],["top-right",Lw(OT,CT)],["bottom-left",Lw(BT,LT)],["bottom-right",Lw(BT,CT)],["top-empty",wQ],["right-empty",SQ],["bottom-empty",vQ],["left-empty",_Q],["empty",IQ]]);function M7(e){if(e==null)return null;let t=xQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}var w7=new WeakMap;function kT(e){let t=w7.get(e);return t||w7.set(e,t=new Jn(Wt(e,(n,r)=>[n,r]))),t}function ic(e,t){return kT(e).get(t)}function bQ(e,t,n){return t=Zs(t),n=Zs(n),e.find(r=>Object.is(Zs(r.x),t)&&Object.is(Zs(r.y),n))}function kw(e,t,n){return bQ(e,t,n)?.empty}function OT(e,{y:t},{y:n}){return t?ic(t,n)===0:!0}function BT(e,{y:t},{y:n}){return t?ic(t,n)===t.length-1:!0}function LT(e,{x:t},{x:n}){return t?ic(t,n)===0:!0}function CT(e,{x:t},{x:n}){return t?ic(t,n)===t.length-1:!0}function wQ(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=ic(t,r);if(o>0)return kw(e,n,t[o-1])}function vQ(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=ic(t,r);if(o<t.length-1)return kw(e,n,t[o+1])}function _Q(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=ic(t,n);if(o>0)return kw(e,t[o-1],r)}function SQ(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;let o=ic(t,n);if(o<t.length-1)return kw(e,t[o+1],r)}function IQ(e,t,{empty:n}){return n}function Lw(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Fw(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>r.get(i)?.get(o)??[]):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}var St=class{constructor(t,n={},r={},i){let{facet:o="auto",facetAnchor:s,fx:a,fy:c,sort:l,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:p=h,marginBottom:m=h,marginLeft:y=h,clip:g=i?.clip,channels:x,tip:b,render:w}=r;if(this.data=t,this.sort=jo(l)?l:null,this.initializer=Ie(r).initializer,this.transform=this.initializer?r.transform:gn(r).transform,o===null||o===!1?this.facet=null:(this.facet=sn(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===Wa&&typeof a=="string"?[a]:a,this.fy=t===Wa&&typeof c=="string"?[c]:c),this.facetAnchor=M7(s),n=Wm(n),x!==void 0&&(n={...MQ(x),...n}),i!==void 0&&(n={...Ow(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,v])=>{if(jr(v.value)){let{value:M,label:E=v.label,scale:I=v.scale}=v.value;v={...v,label:E,scale:I,value:M}}if(t===Wa&&typeof v.value=="string"){let{value:M}=v;v={...v,value:[M]}}return[_,v]}).filter(([_,{value:v,optional:M}])=>{if(v!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+y,this.clip=dw(g),this.tip=AQ(b),this.facet==="super"){if(a||c)throw new Error("super-faceting cannot use fx or fy");for(let _ in this.channels){let{scale:v}=n[_];if(!(v!=="x"&&v!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=zf(w,this.render))}initialize(t,n,r){let i=je(this.data);t===void 0&&i!=null&&(t=[cr(i)]);let o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=je(i)),t!==void 0&&(t.original=o);let s=vw(this.channels,i);return this.sort!=null&&yR(i,t,s,n,this.sort),{data:i,facets:t,channels:s}}filter(t,n,r){for(let i in n){let{filter:o=ze}=n[i];if(o!==null){let s=r[i];t=t.filter(a=>o(s[a]))}}return t}project(t,n,r){for(let i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){let o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&bT(i,o,n,r.projection)}}scale(t,n,r){let i=Lf(t,n);return r.projection&&this.project(t,i,r),i}};function tn(...e){return e.plot=St.prototype.plot,e}function zf(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,s,a){return e.call(this,n,r,i,o,s,(c,l,u,f,h)=>t.call(this,c,l,u,f,h,a))}}function MQ(e){return Object.fromEntries(Object.entries(Wm(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:wi(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function AQ(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?sn(e,"tip",["x","y","xy"]):e}function Xi(e,t){return e?.tip===!0?{...e,tip:t}:mn(e?.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}var A7=new WeakMap;function FT(e,t,{x:n,y:r,px:i,py:o,maxRadius:s=40,channels:a,render:c,...l}={}){return s=+s,i!=null&&(n??=null,a={...a,px:{value:i,scale:"x"}}),o!=null&&(r??=null,a={...a,py:{value:o,scale:"y"}}),{x:n,y:r,channels:a,...l,render:zf(function(u,f,h,d,p,m){p={...p,pointerSticky:!1};let y=p.ownerSVGElement,{data:g}=p.getMarkState(this),x=A7.get(y);x||A7.set(y,x={sticky:!1,roots:[],renders:[]});let b=x.renders.push(G)-1,{x:w,y:_,fx:v,fy:M}=f,E=v?v(u.fx)-d.marginLeft:0,I=M?M(u.fy)-d.marginTop:0;w?.bandwidth&&(E+=w.bandwidth()/2),_?.bandwidth&&(I+=_.bandwidth()/2);let D=u.fi!=null,A;if(D){let Y=x.facetStates;Y||(x.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}let[O,C]=bn(this,d),{px:S,py:T}=h,N=S?Y=>S[Y]:RT(h,O),F=T?Y=>T[Y]:$T(h,C),R,k,$,P;function U(Y,st){if(D)if(P&&(P=cancelAnimationFrame(P)),Y==null)A.delete(u.fi);else{A.set(u.fi,st),P=requestAnimationFrame(()=>{P=null;for(let[j,Z]of A)if(Z<st||Z===st&&j<u.fi){Y=null;break}G(Y)});return}G(Y)}function G(Y){if(R===Y&&$===x.sticky)return;R=Y,$=p.pointerSticky=x.sticky;let st=R==null?[]:[R];D&&(st.fx=u.fx,st.fy=u.fy,st.fi=u.fi);let j=m(st,f,h,d,p);if(k){if(D){let Z=k.parentNode,rt=k.getAttribute("transform"),z=j.getAttribute("transform");rt?j.setAttribute("transform",rt):j.removeAttribute("transform"),z?Z.setAttribute("transform",z):Z.removeAttribute("transform"),j.removeAttribute("aria-label"),j.removeAttribute("aria-description"),j.removeAttribute("aria-hidden")}k.replaceWith(j)}return x.roots[b]=k=j,R==null&&A?.size>1||p.dispatchValue(R==null?null:g[R]),j}function nt(Y){if(x.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[st,j]=Fn(Y);st-=E,j-=I;let Z=st<d.marginLeft||st>d.width-d.marginRight?1:e,rt=j<d.marginTop||j>d.height-d.marginBottom?1:t,z=null,kt=s*s;for(let ht of u){let Gt=Z*(N(ht)-st),Zt=rt*(F(ht)-j),tt=Gt*Gt+Zt*Zt;tt<=kt&&(z=ht,kt=tt)}if(z!=null&&(e!==1||t!==1)){let ht=N(z)-st,Gt=F(z)-j;kt=ht*ht+Gt*Gt}U(z,kt)}function ot(Y){Y.pointerType==="mouse"&&R!=null&&(x.sticky&&x.roots.some(st=>st?.contains(Y.target))||(x.sticky?(x.sticky=!1,x.renders.forEach(st=>st(null))):(x.sticky=!0,G(R)),Y.stopImmediatePropagation()))}function at(Y){Y.pointerType==="mouse"&&(x.sticky||U(null))}return y.addEventListener("pointerenter",nt),y.addEventListener("pointermove",nt),y.addEventListener("pointerdown",ot),y.addEventListener("pointerleave",at),G(null)},c)}}function qf(e){return FT(1,1,e)}function jf(e){return FT(1,.01,e)}function Dl(e){return FT(.01,1,e)}function RT({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function $T({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Rw(e){return Wo(e)&&e.interval===void 0?void 0:"tabular-nums"}function T7(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:s=18,marginRight:a=0,marginBottom:c=16+r,marginLeft:l=0,style:u,ticks:f=(i-l-a)/64,tickFormat:h,fontVariant:d=Rw(e),round:p=!0,opacity:m,className:y}=t,g=ec(t);y=Pf(y),m=se(m)[1],h===null&&(h=()=>null);let x=ut("svg",g).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(O=>O.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(Uf,u),b=O=>O.selectAll(".tick line").attr("y1",s+c-o),w,_=p?(O,C)=>O.rangeRound(C):(O,C)=>O.range(C),{type:v,domain:M,range:E,interpolate:I,scale:D,pivot:A}=e;if(I){let O=E===void 0?I:Ao(I.length===1?ty(I):I,E);w=_(D.copy(),Rn(_e(l,i-a),Math.min(M.length+(A!==void 0),E===void 0?1/0:E.length)));let C=256,S=g.document.createElement("canvas");S.width=C,S.height=1;let T=S.getContext("2d");for(let N=0,F=C-1;N<C;++N)T.fillStyle=O(N/F),T.fillRect(N,0,1,1);x.append("image").attr("opacity",m).attr("x",l).attr("y",s).attr("width",i-l-a).attr("height",o-s-c).attr("preserveAspectRatio","none").attr("xlink:href",S.toDataURL())}else if(v==="threshold"){let O=M,C=h===void 0?S=>S:typeof h=="string"?pi(h):h;w=_($s().domain([-1,E.length-1]),[l,i-a]),x.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",(S,T)=>w(T-1)).attr("y",s).attr("width",(S,T)=>w(T)-w(T-1)).attr("height",o-s-c).attr("fill",S=>S),f=Wt(O,(S,T)=>T),h=S=>C(O[S],S)}else w=_(Ua().domain(M),[l,i-a]),x.append("g").attr("fill-opacity",m).selectAll().data(M).enter().append("rect").attr("x",w).attr("y",s).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-s-c).attr("fill",D),b=()=>{};return x.append("g").attr("transform",`translate(0,${o-c})`).call(ZS(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",fe(d,"normal")).call(b).call(O=>O.select(".domain").remove()),n!==void 0&&x.append("text").attr("x",l).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),x.node()}var Vf=Math.PI/180;function Wi(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=PT(n),e.markerMid=PT(r),e.markerEnd=PT(i)}function PT(e){if(e==null||e===!1)return null;if(e===!0)return N7;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return E7("auto");case"arrow-reverse":return E7("auto-start-reverse");case"dot":return TQ;case"circle":case"circle-fill":return N7;case"circle-stroke":return EQ;case"tick":return UT("auto");case"tick-x":return UT(90);case"tick-y":return UT(0)}throw new Error(`invalid marker: ${e}`)}function E7(e){return(t,n)=>ut("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function TQ(e,t){return ut("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function N7(e,t){return ut("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function EQ(e,t){return ut("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function UT(e){return(t,n)=>ut("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}var NQ=0;function ra(e,t,{stroke:n},r){return O7(e,t,n&&(i=>n[i]),r)}function D7(e,t,{stroke:n},r){return O7(e,t,n&&(([i])=>n[i]),r)}function O7(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,s){let a=new Map;function c(l){return function(u){let f=o(u),h=a.get(l);h||a.set(l,h=new Map);let d=h.get(f);if(!d){let p=this.parentNode.insertBefore(l(f,s),this),m=`plot-marker-${++NQ}`;p.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",c(t)),n&&e.attr("marker-mid",c(n)),r&&e.attr("marker-end",c(r))}function Ol({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=B7(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function Bl({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=B7(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function B7(e,t,n){return e===void 0&&t===void 0&&n===void 0?Ce?[1,0]:[.5,.5]:[t,n]}function L7(e,{interval:t}){return e={...wi(e)},e.interval=Ef(e.interval===void 0?t:e.interval),e}function $w(e,t,n,r){let{[e]:i,[`${e}1`]:o,[`${e}2`]:s}=n,{value:a,interval:c}=L7(i,n);if(a==null||c==null&&!r)return n;let l=Bn(i);if(c==null){let d,p={transform:m=>d||(d=wt(m,a)),label:l};return{...n,[e]:void 0,[`${e}1`]:o===void 0?p:o,[`${e}2`]:s===void 0&&!(o===s&&r)?p:s}}let u,f;function h(d){return f!==void 0&&d===u?f:f=Wt(wt(u=d,a),p=>c.floor(p))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:h,label:l}:o,[`${e}2`]:s===void 0?{transform:d=>h(d).map(p=>c.offset(p)),label:l}:s})}function C7(e,t,n){let{[e]:r}=n,{value:i,interval:o}=L7(r,n);return i==null||o==null?n:t({...n,[e]:{label:Bn(r),transform:s=>{let a=Wt(wt(s,i),l=>o.floor(l)),c=a.map(l=>o.offset(l));return a.map(Le(a)?(l,u)=>l==null||isNaN(l=+l)||(u=c[u],u==null)||isNaN(u=+u)?void 0:new Date((l+u)/2):(l,u)=>l==null||(u=c[u],u==null)?NaN:(+l+ +u)/2)}}})}function zT(e={}){return $w("x",Ol,e,!0)}function qT(e={}){return $w("y",Bl,e,!0)}function Pw(e={}){return $w("x",Ol,e)}function Uw(e={}){return $w("y",Bl,e)}function zw(e={}){return C7("x",Ol,e)}function qw(e={}){return C7("y",Bl,e)}var k7={ariaLabel:"rule",fill:null,stroke:"currentColor"},iy=class extends St{constructor(t,n={}){let{x:r,y1:i,y2:o,inset:s=0,insetTop:a=s,insetBottom:c=s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Xi(n,"x"),k7),this.insetTop=Bt(a),this.insetBottom=Bt(c),Wi(this,n)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y1:l,y2:u}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetTop:g,insetBottom:x}=this;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s},Ce,0).call(b=>b.selectAll().data(t).enter().append("line").call(Lt,this).attr("x1",c?w=>c[w]:(m+f-p)/2).attr("x2",c?w=>c[w]:(m+f-p)/2).attr("y1",l&&!ur(a)?w=>l[w]+g:d+g).attr("y2",u&&!ur(a)?a.bandwidth?w=>u[w]+a.bandwidth()-x:w=>u[w]-x:h-y-x).call(Qt,this,r).call(ra,this,r,o)).node()}},oy=class extends St{constructor(t,n={}){let{x1:r,x2:i,y:o,inset:s=0,insetRight:a=s,insetLeft:c=s}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Xi(n,"y"),k7),this.insetRight=Bt(a),this.insetLeft=Bt(c),Wi(this,n)}render(t,n,r,i,o){let{x:s,y:a}=n,{y:c,x1:l,x2:u}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetLeft:g,insetRight:x}=this;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{y:c&&a},0,Ce).call(b=>b.selectAll().data(t).enter().append("line").call(Lt,this).attr("x1",l&&!ur(s)?w=>l[w]+g:m+g).attr("x2",u&&!ur(s)?s.bandwidth?w=>u[w]+s.bandwidth()-x:w=>u[w]-x:f-p-x).attr("y1",c?w=>c[w]:(d+h-y)/2).attr("y2",c?w=>c[w]:(d+h-y)/2).call(Qt,this,r).call(ra,this,r,o)).node()}};function Yr(e,t){let{x:n=W,y:r,y1:i,y2:o,...s}=Uw(t);return[i,o]=F7(r,i,o),new iy(e,{...s,x:n,y1:i,y2:o})}function Xr(e,t){let{y:n=W,x:r,x1:i,x2:o,...s}=Pw(t);return[i,o]=F7(r,i,o),new oy(e,{...s,y:n,x1:i,x2:o})}function F7(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function oc(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}var DQ={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},z7="\xAD",Cl=class extends St{constructor(t,n={}){let{x:r,y:i,text:o=lr(t)&&uw(t)?W:Ee,frameAnchor:s,textAnchor:a=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:c=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:l=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:y,fontWeight:g,rotate:x}=n,[b,w]=se(x,0),[_,v]=CQ(p);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:WF(b),optional:!0},text:{value:o,filter:zm,optional:!0}},n,DQ),this.rotate=w,this.textAnchor=fe(a,"middle"),this.lineAnchor=sn(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+u,this.textOverflow=VT(f),this.monospace=!!h,this.fontFamily=qe(d),this.fontSize=v,this.fontStyle=qe(m),this.fontVariant=qe(y),this.fontWeight=qe(g),this.frameAnchor=Yo(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=XT(this),this.clipLine=WT(this)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,rotate:u,text:f,title:h,fontSize:d}=r,{rotate:p}=this,[m,y]=bn(this,i);return ut("svg:g",o).call(Ct,this,i,o).call(YT,this,f,i).call(Et,this,{x:c&&s,y:l&&a}).call(g=>g.selectAll().data(t).enter().append("text").call(Lt,this).call(OQ,this,f,h).attr("transform",oc`translate(${c?x=>c[x]:m},${l?x=>l[x]:y})${u?x=>` rotate(${u[x]})`:p?` rotate(${p})`:""}`).call(ft,"font-size",d&&(x=>d[x])).call(Qt,this,r)).node()}};function VT(e){return e==null?null:sn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function OQ(e,t,n,r){if(!n)return;let{lineAnchor:i,lineHeight:o,textOverflow:s,splitLines:a,clipLine:c}=t;e.each(function(l){let u=a(Yi(n[l])??"").map(c),f=u.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let p=0;p<f;++p){if(++d,!u[p])continue;let m=this.ownerDocument.createElementNS(ui.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(h+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=u[p],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(s&&!r&&u[0]!==n[l]){let d=this.ownerDocument.createElementNS(ui.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function Go(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Pe(t,n)),new Cl(e,{...r,x:t,y:n})}function jw(e,{x:t=W,...n}={}){return new Cl(e,qw({...n,x:t}))}function Vw(e,{y:t=W,...n}={}){return new Cl(e,zw({...n,y:t}))}function YT(e,t,n){ft(e,"text-anchor",t.textAnchor),ft(e,"font-family",t.fontFamily),ft(e,"font-size",t.fontSize),ft(e,"font-style",t.fontStyle),ft(e,"font-variant",t.fontVariant===void 0?BQ(n):t.fontVariant),ft(e,"font-weight",t.fontWeight)}function BQ(e){return e&&(Js(e)||Le(e))?"tabular-nums":void 0}var LQ=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function CQ(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),LQ.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function kQ(e,t,n){let r=[],i,o=0;for(let[s,a,c]of FQ(e)){if(i===void 0&&(i=s),o>i&&n(e,i,a)>t&&(r.push(e.slice(i,o)+(e[o-1]===z7?"-":"")),i=s),c){r.push(e.slice(i,a)),i=void 0;continue}o=a}return r}function*FQ(e){let t=0,n=0,r=e.length;for(;n<r;){let i=1;switch(e[n]){case z7:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}var R7={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"\u2018":31,"\u2019":31,"\u201C":47,"\u201D":47,"\u2026":82};function Yw(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Yf(e,i))r+=R7[e[i]]??(j7(e,i)?120:R7.e);return r}function Xw(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Yf(e,i))r+=j7(e,i)?126:63;return r}function XT({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);let r=e?Xw:Yw,i=t*100;return o=>kQ(o,i,r)}function WT({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;let r=e?Xw:Yw,i=t*100;switch(n){case"clip-start":return o=>P7(o,i,r,"");case"clip-end":return o=>$7(o,i,r,"");case"ellipsis-start":return o=>P7(o,i,r,Ll);case"ellipsis-middle":return o=>RQ(o,i,r,Ll);case"ellipsis-end":return o=>$7(o,i,r,Ll)}}var Ll="\u2026";function kl(e,t,n,r){let i=[],o=0;for(let s=0,a=0,c=e.length;s<c;s=a){a=Yf(e,s);let l=n(e,s,a);if(o+l>t){for(o+=r;o>t&&s>0;)a=s,s=i.pop(),o-=n(e,s,a);return[s,t-o]}o+=l,i.push(s)}return[-1,0]}function $7(e,t,n,r){e=e.trim();let i=n(r),[o]=kl(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function RQ(e,t,n,r){e=e.trim();let i=n(e);if(i<=t)return e;let o=n(r)/2,[s,a]=kl(e,t/2,n,o),[c]=kl(e,i-t/2-a+o,n,-o);return c<0?r:e.slice(0,s).trimEnd()+r+e.slice(Yf(e,c)).trimStart()}function P7(e,t,n,r){e=e.trim();let i=n(e);if(i<=t)return e;let o=n(r),[s]=kl(e,i-t+o,n,-o);return s<0?r:r+e.slice(Yf(e,s)).trimStart()}var jT=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,U7=/\p{Extended_Pictographic}/uy;function Yf(e,t){return t+=$Q(e,t)?2:1,UQ(e,t)&&(t=jT.lastIndex),PQ(e,t)?Yf(e,t+1):t}function q7(e,t){return e.charCodeAt(t)<128}function $Q(e,t){let n=e.charCodeAt(t);if(n>=55296&&n<56320){let r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function PQ(e,t){return e.charCodeAt(t)===8205}function UQ(e,t){return q7(e,t)?!1:(jT.lastIndex=t,jT.test(e))}function j7(e,t){return q7(e,t)?!1:(U7.lastIndex=t,U7.test(e))}var V7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Y7=3.5,zQ=Y7*5,X7={draw(e,t,n){let r=t*n/zQ;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},W7={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},qQ=new Map([["arrow",X7],["spike",W7]]);function jQ(e){return e&&typeof e.draw=="function"}function VQ(e){if(jQ(e))return e;let t=qQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}var Fl=class extends St{constructor(t,n={}){let{x:r,y:i,r:o=Y7,length:s,rotate:a,shape:c=X7,anchor:l="middle",frameAnchor:u}=n,[f,h]=se(s,12),[d,p]=se(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,V7),this.r=+o,this.length=h,this.rotate=p,this.shape=VQ(c),this.anchor=sn(l,"anchor",["start","middle","end"]),this.frameAnchor=Yo(u)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,length:u,rotate:f}=r,{length:h,rotate:d,anchor:p,shape:m,r:y}=this,[g,x]=bn(this,i);return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(Lt,this).attr("transform",oc`translate(${c?w=>c[w]:g},${l?w=>l[w]:x})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{let _=nr();return m.draw(_,u[w],y),_}:(()=>{let w=nr();return m.draw(w,h,y),w})()).call(Qt,this,r)).node()}};function GT(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Pe(n,r)),new Fl(e,{...i,x:n,y:r})}function Ww(e,t={}){let{x:n=W,...r}=t;return new Fl(e,{...r,x:n})}function Gw(e,t={}){let{y:n=W,...r}=t;return new Fl(e,{...r,y:n})}function G7(e,t={}){let{shape:n=W7,stroke:r=V7.stroke,strokeWidth:i=1,fill:o=r,fillOpacity:s=.3,anchor:a="start",...c}=t;return GT(e,{...c,shape:n,stroke:r,strokeWidth:i,fill:o,fillOpacity:s,anchor:a})}function sc(e,t){return arguments.length<2&&!lr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Hw({anchor:e}={},t){return e===void 0?t[0]:sn(e,"anchor",t)}function H7(e){return Hw(e,["left","right"])}function Z7(e){return Hw(e,["right","left"])}function J7(e){return Hw(e,["bottom","top"])}function Q7(e){return Hw(e,["top","bottom"])}function sy(){let[e,t]=sc(...arguments);return K7("y",H7(t),e,t)}function Zw(){let[e,t]=sc(...arguments);return K7("fy",Z7(t),e,t)}function ay(){let[e,t]=sc(...arguments);return t$("x",J7(t),e,t)}function Jw(){let[e,t]=sc(...arguments);return t$("fx",Q7(t),e,t)}function K7(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:c=r,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=e==="y"?6:0,tickPadding:m,tickRotate:y,x:g,margin:x,marginTop:b=x===void 0?20:x,marginRight:w=x===void 0?t==="right"?40:0:x,marginBottom:_=x===void 0?20:x,marginLeft:v=x===void 0?t==="left"?40:0:x,label:M,labelAnchor:E,labelArrow:I,labelOffset:D,...A}){return p=Bt(p),m=Bt(m),y=Bt(y),E!==void 0&&(E=sn(E,"labelAnchor",["center","top","bottom"])),I=c$(I),tn(p&&!re(o)?YQ(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,x:g,...A}):null,re(c)?null:WQ(e,t,n,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,x:g,marginTop:b,marginRight:w,marginBottom:_,marginLeft:v,...A}),!re(c)&&M!==null?Go([],i$({fill:c,fillOpacity:l,...A},function(O,C,S,T,N){let F=T[e],{marginTop:R,marginRight:k,marginBottom:$,marginLeft:P}=e==="y"&&N.inset||N,U=E??(F.bandwidth?"center":"top"),G=D??(t==="right"?k:P)-3;return U==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=U,this.frameAnchor=`${U}-${t}`,this.rotate=0),this.dy=U==="top"?3-R:U==="bottom"?$-3:0,this.dx=t==="right"?G:-G,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[a$(e,F,{anchor:t,label:M,labelAnchor:U,labelArrow:I})]}}}})):null)}function t$(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:c=r,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=e==="x"?6:0,tickPadding:m,tickRotate:y,y:g,margin:x,marginTop:b=x===void 0?t==="top"?30:0:x,marginRight:w=x===void 0?20:x,marginBottom:_=x===void 0?t==="bottom"?30:0:x,marginLeft:v=x===void 0?20:x,label:M,labelAnchor:E,labelArrow:I,labelOffset:D,...A}){return p=Bt(p),m=Bt(m),y=Bt(y),E!==void 0&&(E=sn(E,"labelAnchor",["center","left","right"])),I=c$(I),tn(p&&!re(o)?XQ(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,y:g,...A}):null,re(c)?null:GQ(e,t,n,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,y:g,marginTop:b,marginRight:w,marginBottom:_,marginLeft:v,...A}),!re(c)&&M!==null?Go([],i$({fill:c,fillOpacity:l,...A},function(O,C,S,T,N){let F=T[e],{marginTop:R,marginRight:k,marginBottom:$,marginLeft:P}=e==="x"&&N.inset||N,U=E??(F.bandwidth?"center":"right"),G=D??(t==="top"?R:$)-3;return U==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${U}`,this.textAnchor=U==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-G:G,this.dx=U==="right"?k-3:U==="left"?3-P:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[a$(e,F,{anchor:t,label:M,labelAnchor:U,labelArrow:I})]}}}})):null)}function YQ(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetLeft:u=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...p}){return Xf(Gw,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:s,frameAnchor:a,y:d,...p,dx:t==="left"?+h-Ce+ +u:+h+Ce-f,anchor:"start",length:c,shape:t==="left"?QQ:KQ})}function XQ(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetTop:u=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...p}){return Xf(Ww,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:s,frameAnchor:a,x:d,...p,dy:t==="bottom"?+h-Ce-f:+h+Ce+ +u,anchor:"start",length:c,shape:t==="bottom"?ZQ:JQ})}function WQ(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>60?4*Math.cos(s*Vf):0),text:c,textAnchor:l=Math.abs(s)>60?"middle":t==="left"?"end":"start",lineAnchor:u=s>60?"top":s<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:p=h,dx:m=0,y=e==="y"?void 0:null,...g}){return Xf(Vw,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:s,y,...g,dx:t==="left"?+m-o-a+ +d:+m+ +o+ +a-p},function(x,b,w,_,v){f===void 0&&(this.fontVariant=s$(x)),c===void 0&&(v.text=o$(x,b,w,_,t))})}function GQ(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>=10?4*Math.cos(s*Vf):0),text:c,textAnchor:l=Math.abs(s)>=10?s<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(s)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:p=h,dy:m=0,x:y=e==="x"?void 0:null,...g}){return Xf(jw,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:s,x:y,...g,dy:t==="bottom"?+m+ +o+ +a-p:+m-o-a+ +d},function(x,b,w,_,v){f===void 0&&(this.fontVariant=s$(x)),c===void 0&&(v.text=o$(x,b,w,_,t))})}function Qw(){let[e,t]=sc(...arguments);return e$("y",H7(t),e,t)}function Kw(){let[e,t]=sc(...arguments);return e$("fy",Z7(t),e,t)}function tv(){let[e,t]=sc(...arguments);return n$("x",J7(t),e,t)}function ev(){let[e,t]=sc(...arguments);return n$("fx",Q7(t),e,t)}function e$(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:s=t==="right"?i:null,...a}){return Xf(Xr,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:o,x2:s,...r$(a)})}function n$(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:s=t==="bottom"?i:null,...a}){return Xf(Yr,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:o,y2:s,...r$(a)})}function r$({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function i$({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:l,clip:u=!1},f){return[,e]=Be(e),[,t]=se(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:l,clip:u,initializer:f}}function Xf(e,t,n,r,i,o){let s;function a(u,f,h,d,p,m){let y=u==null&&(t==="fx"||t==="fy"),{[t]:g}=d;if(!g)throw new Error(`missing scale: ${t}`);let x=g.domain(),{interval:b,ticks:w,tickFormat:_,tickSpacing:v=t==="x"?80:35}=i;if(typeof w=="string"&&l$(g)&&(b=w,w=void 0),w===void 0&&(w=Vo(b,g.type)??HQ(g,v)),u==null){if(lr(w))u=je(w);else if(Za(w))u=HT(w,...le(x));else if(g.interval){let E=g.interval;if(g.ticks){let[I,D]=le(x),A=(D-I)/E[Sf];E=XA(E,A/w)??E,u=HT(E,I,D)}else{u=x;let I=u.length;E=XA(E,I/w)??E,E!==g.interval&&(u=HT(E,...le(u)))}if(E===g.interval){let I=Math.round(u.length/w);I>1&&(u=u.filter((D,A)=>A%I===0))}}else g.ticks?u=g.ticks(w):u=x;if(!g.ticks&&u.length&&u!==x){let E=new Qn(x);u=u.filter(I=>E.has(I)),u.length||Vn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?f=[cr(u)]:s[t]={scale:t,value:W}}o?.call(this,g,u,w,_,s);let M=Object.fromEntries(Object.entries(s).map(([E,I])=>[E,{...I,value:wt(u,I.value)}]));return y&&(f=m.filterFacets(u,M)),{data:u,facets:f,channels:M}}let c=Ie(i).initializer,l=e(n,Ie({...i,initializer:a},c));return n==null?(s=l.channels,l.channels={}):s={},r!==void 0&&Object.assign(l,r),l.clip===void 0&&(l.clip=!1),l}function HQ(e,t){let[n,r]=le(e.range());return(r-n)/t}function o$(e,t,n,r,i){return{value:cy(e,t,n,r,i)}}function cy(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Le(t)?PF(e.type,t,i)??Yi:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Yi:typeof r=="string"?(Le(e.domain())?Po:pi)(r):pn(r)}function HT(e,t,n){return e.range(t,e.offset(e.floor(n)))}var ZQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},JQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},QQ={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},KQ={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function s$(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function a$(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&l$(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){let s=Aw(t);s&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===s<0?"left":"right":s<0?"up":"down")}switch(o){case"left":return`\u2190 ${r}`;case"right":return`${r} \u2192`;case"up":return n==="right"?`${r} \u2191`:`\u2191 ${r}`;case"down":return n==="right"?`${r} \u2193`:`\u2193 ${r}`}return r}}function c$(e="auto"){return re(e)?!1:typeof e=="boolean"?e:sn(e,"labelArrow",["auto","up","right","down","left"])}function l$(e){return Le(e.domain())}function u$(e,t){if(t==null)return t;let n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function f$(e,{opacity:t,...n}={}){if(!Wo(e)&&!NT(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return d$(e,n,(r,i,o,s)=>r.append("svg").attr("width",o).attr("height",s).attr("fill",i.scale).attr("fill-opacity",se(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function h$(e,{fill:t=e.hint?.fill!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=e.hint?.stroke!==void 0?e.hint.stroke:re(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:s=4.5,...a}={},c){let[l,u]=Be(t),[f,h]=Be(r),d=u$(c,l),p=u$(c,f),m=s*s*Math.PI;return n=se(n)[1],i=se(i)[1],o=se(o)[1],d$(e,a,(y,g,x,b)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",x).attr("height",b).attr("fill",l==="color"?w=>d.scale(w):u).attr("fill-opacity",n).attr("stroke",f==="color"?w=>p.scale(w):h).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",w=>{let _=nr();return e.scale(w).draw(_,m),_}))}function d$(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=Rw(e),swatchSize:s=15,swatchWidth:a=s,swatchHeight:c=s,marginLeft:l=0,className:u,style:f,width:h}=t,d=ec(t);u=Pf(u),i=cy(e.scale,e.domain,void 0,i);let p=ut("div",d).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`),m;return r!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,c).call(y=>y.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(y=>y.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",fe(o,"normal")).call(Uf,f).node()}var nv=new Map([["symbol",h$],["color",y$],["opacity",tK]]);function p$(e={}){for(let[t,n]of nv){let r=e[t];if(qo(r)){let i=ec(e),o;if(t==="symbol"){let{fill:s,stroke:a=s===void 0&&qo(e.color)?"color":void 0}=e;o={fill:s,stroke:a}}return n(Ew(t,r,o),ZT(i,r,e),s=>qo(e[s])?Ew(s,e[s]):null)}}throw new Error("unknown legend type; no scale found")}function m$(e,t,n={}){return(r,i)=>{if(!nv.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return nv.get(r)(e[r],ZT(t,n[r],i),o=>e[o])}}function ZT({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return KF(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function y$(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return f$(e,n);case"ramp":return T7(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function tK({type:e,interpolate:t,...n},{legend:r=!0,color:i=rn(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return y$({type:e,...n,interpolate:eK(i)},{legend:r,...o})}function eK(e){let{r:t,g:n,b:r}=rn(e)||rn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function g$(e,t,n){let r=[];for(let[i,o]of nv){let s=n[i];if(s?.legend&&i in e){let a=o(e[i],ZT(t,e[i],s),c=>e[c]);a!=null&&r.push(a)}}return r}var nK={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},rK={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1},ly=class extends St{constructor(t={}){let{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:s=r,insetLeft:a=r,rx:c,ry:l}=t;super(Wa,void 0,t,n==null?nK:rK),this.anchor=JA(n,"anchor",["top","right","bottom","left"]),this.insetTop=Bt(i),this.insetRight=Bt(o),this.insetBottom=Bt(s),this.insetLeft=Bt(a),this.rx=Bt(c),this.ry=Bt(l)}render(t,n,r,i,o){let{marginTop:s,marginRight:a,marginBottom:c,marginLeft:l,width:u,height:f}=i,{anchor:h,insetTop:d,insetRight:p,insetBottom:m,insetLeft:y,rx:g,ry:x}=this,b=l+y,w=u-a-p,_=s+d,v=f-c-m;return ut(h?"svg:line":"svg:rect",o).datum(0).call(Ct,this,i,o).call(Lt,this).call(Qt,this,r).call(Et,this,{}).call(h==="left"?M=>M.attr("x1",b).attr("x2",b).attr("y1",_).attr("y2",v):h==="right"?M=>M.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",v):h==="top"?M=>M.attr("x1",b).attr("x2",w).attr("y1",_).attr("y2",_):h==="bottom"?M=>M.attr("x1",b).attr("x2",w).attr("y1",v).attr("y2",v):M=>M.attr("x",b).attr("y",_).attr("width",w-b).attr("height",v-_).attr("rx",g).attr("ry",x)).node()}};function Wf(e){return new ly(e)}var JT={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},iK=new Set(["geometry","href","src","ariaLabel","scales"]),uy=class extends St{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&lr(t)&&uw(t)&&(n={...n,title:W});let{x:r,y:i,x1:o,x2:s,y1:a,y2:c,anchor:l,preferredAnchor:u="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:y,lineHeight:g=1,lineWidth:x=20,frameAnchor:b,format:w,textAnchor:_="start",textOverflow:v,textPadding:M=8,title:E,pointerSize:I=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&s!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:s==null},y1:{value:a,scale:"y",optional:c==null},x2:{value:s,scale:"x",optional:o==null},y2:{value:c,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,JT),this.anchor=hw(l,"anchor"),this.preferredAnchor=hw(u,"preferredAnchor"),this.frameAnchor=Yo(b),this.textAnchor=fe(_,"middle"),this.textPadding=+M,this.pointerSize=+I,this.pathFilter=qe(D),this.lineHeight=+g,this.lineWidth=+x,this.textOverflow=VT(v),this.monospace=!!f,this.fontFamily=qe(h),this.fontSize=Bt(d),this.fontStyle=qe(p),this.fontVariant=qe(m),this.fontWeight=qe(y);for(let A in JT)A in this.channels&&(this[A]=JT[A]);this.splitLines=XT(this),this.clipLine=WT(this),this.format={...w}}render(t,n,r,i,o){let s=this,{x:a,y:c,fx:l,fy:u}=n,{ownerSVGElement:f,document:h}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:y}=this,{textPadding:g,pointerSize:x,pathFilter:b}=this,{marginTop:w,marginLeft:_}=i,{x1:v,y1:M,x2:E,y2:I,x:D=v??E,y:A=M??I}=r,O=l?l(t.fx)-_:0,C=u?u(t.fy)-w:0,[S,T]=bn(this,i),N=RT(r,S),F=$T(r,T),R=p?Xw:Yw,k=R(Ll),$,P;"title"in r?($=r.channels,P=lK):($=cK.call(this,r,n),P=uK);let U=ut("svg:g",o).call(Ct,this,i,o).call(YT,this).call(Et,this,{x:D&&a,y:A&&c}).call(ot=>ot.selectAll().data(t).enter().append("g").attr("transform",at=>`translate(${Math.round(N(at))},${Math.round(F(at))})`).call(Lt,this).call(at=>at.append("path").attr("filter",b)).call(at=>at.append("text").each(function(Y){let st=Vt(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");let j=P.call(s,Y,t,$,n,r);if(typeof j=="string")for(let Z of s.splitLines(j))G(st,{value:s.clipLine(Z)});else{let Z=new Set;for(let rt of j){let{label:z=""}=rt;z&&Z.has(z)||(Z.add(z),G(st,rt))}}})));function G(ot,{label:at,value:Y,color:st,opacity:j}){at??="",Y??="";let Z=st!=null||j!=null,rt,z=y*100,[kt]=kl(at,z,R,k);if(kt>=0)at=at.slice(0,kt).trimEnd()+Ll,rt=Y.trim(),Y="";else{(at||!Y&&!Z)&&(Y=" "+Y);let[Gt]=kl(Y,z-R(at),R,k);Gt>=0&&(rt=Y.trim(),Y=Y.slice(0,Gt).trimEnd()+Ll)}let ht=ot.append("tspan").attr("x",0).attr("dy",`${m}em`).text("\u200B");at&&ht.append("tspan").attr("font-weight","bold").text(at),Y&&ht.append(()=>h.createTextNode(Y)),Z&&ht.append("tspan").text(" \u25A0").attr("fill",st).attr("fill-opacity",j).style("user-select","none"),rt&&ht.append("title").text(rt)}function nt(){let{width:ot,height:at}=i.facet??i;U.selectChildren().each(function(Y){let{x:st,width:j,height:Z}=this.getBBox();j=Math.round(j),Z=Math.round(Z);let rt=d;if(rt===void 0){let ht=N(Y)+O,Gt=F(Y)+C,Zt=ht+j+x+g*2<ot,tt=ht-j-x-g*2>0,ae=Gt+Z+x+g*2<at,Ir=Gt-Z-x-g*2>0;rt=Zt&&tt?ae&&Ir?s.preferredAnchor:Ir?"bottom":"top":ae&&Ir?Zt?"left":"right":(Zt||tt)&&(ae||Ir)?`${Ir?"bottom":"top"}-${Zt?"left":"right"}`:s.preferredAnchor}let z=this.firstChild,kt=this.lastChild;if(z.setAttribute("d",aK(rt,x,g,j,Z)),st)for(let ht of kt.childNodes)ht.setAttribute("x",-st);kt.setAttribute("y",`${+oK(rt,kt.childNodes.length,m).toFixed(6)}em`),kt.setAttribute("transform",`translate(${sK(rt,x,g,j,Z)})`)}),U.attr("visibility",null)}return t.length&&(U.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),U.node()}};function iv(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Pe(t,n)),new uy(e,{...r,x:t,y:n})}function oK(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function sK(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function aK(e,t,n,r,i){let o=r+n*2,s=i+n*2;switch(e){case"middle":return`M${-o/2},${-s/2}h${o}v${s}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${s}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${s}h${-o}v${-s}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${s}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-s/2}h${-o}v${s}h${o}v${t/2-s/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-s}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-s}h${-o}v${s}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-s}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-s/2}h${o}v${s}h${-o}v${t/2-s/2}z`}}function cK({channels:e},t){let n={},r=this.format;r=x$(r,e,"x"),r=x$(r,e,"y"),this.format=r;for(let i in r){let o=r[i];if(!(o===null||o===!1))if(i==="fx"||i==="fy")n[i]=!0;else{let s=Qm(e,i);s&&(n[i]=s)}}for(let i in e){if(i in n||i in r||iK.has(i))continue;let o=Qm(e,i);o&&(n[i]=o)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(let i in n){let o=this.format[i];if(typeof o=="string"){let s=n[i]?.value??t[i]?.domain()??[];this.format[i]=(Le(s)?Po:pi)(o)}else if(o===void 0||o===!0){let s=t[i];this.format[i]=s?.bandwidth?cy(s,s.domain()):Yi}}return n}function x$(e,t,n){if(!(n in e))return e;let r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;let o=Object.entries(e),s=e[n];return o.splice(o.findIndex(([a])=>a===n)+1,0,[r,s],[i,s]),Object.fromEntries(o)}function lK(e,t,{title:n}){return Yi(n.value[e],e)}function*uK(e,t,n,r,i){for(let o in n){if(o==="fx"||o==="fy"){yield{label:rv(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;let s=n[o];if(o==="x2"&&"x1"in n)yield{label:w$(r,n,"x"),value:b$(this.format.x2,n.x1,s,e)};else if(o==="y2"&&"y1"in n)yield{label:w$(r,n,"y"),value:b$(this.format.y2,n.y1,s,e)};else{let a=s.value[e],c=s.scale;if(!ze(a)&&c==null)continue;yield{label:rv(r,n,o),value:this.format[o](a,e),color:c==="color"?i[o][e]:null,opacity:c==="opacity"?i[o][e]:null}}}}function b$(e,t,n,r){return n.hint?.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}\u2013${e(n.value[r],r)}`}function w$(e,t,n){let r=rv(e,t,`${n}1`,n),i=rv(e,t,`${n}2`,n);return r===i?r:`${r}\u2013${i}`}function rv(e,t,n,r=n){let i=t[n],o=e[i?.scale??n];return String(o?.label??i?.label??r)}function hy(e={}){let{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:s,ariaDescription:a}=e,c=Pf(e.className),l=e.marks===void 0?[]:_$(e.marks);l.push(...gK(l));let u=mK(t,e),f=new Map;for(let k of l){let $=S$(k,u,e);$&&f.set(k,$)}let h=new Map;u&&fy(h,[u],e),fy(h,f,e);let d=_$(xK(l,h,e));for(let k of d){let $=S$(k,u,e);$&&f.set(k,$)}l.unshift(...d);let p=v7(h,e);if(p!==void 0){let k=u?Fw(p,u):void 0;for(let P of l){if(P.facet===null||P.facet==="super")continue;let U=f.get(P);U!==void 0&&(U.facetsIndex=P.fx!=null||P.fy!=null?Fw(p,U):k)}let $=new Set;for(let{facetsIndex:P}of f.values())P?.forEach((U,G)=>{U?.length>0&&$.add(G)});p.forEach(0<$.size&&$.size<p.length?(P,U)=>P.empty=!$.has(U):P=>P.empty=!1);for(let P of l)if(P.facet==="exclude"){let U=f.get(P);U!==void 0&&(U.facetsIndex=I7(U.facetsIndex))}}for(let k of he.keys())qo(e[k])&&k!=="fx"&&k!=="fy"&&h.set(k,[]);let m=new Map;for(let k of l){if(m.has(k))throw new Error("duplicate mark; each mark must be unique");let{facetsIndex:$,channels:P}=f.get(k)??{},{data:U,facets:G,channels:nt}=k.initialize($,P,e);t3(nt,e),m.set(k,{data:U,facets:G,channels:nt})}let y=ey(fy(h,m,e),e),g=b7(y,l,e);l7(y,g);let x=TT(y),{fx:b,fy:w}=x,_=b||w?ET(y,g):g,v=b||w?MK(x,g):g,M=ec(e),E=M.document,I=Ds("svg").call(E.documentElement),D=I;M.ownerSVGElement=I,M.className=c,M.projection=_R(e,_),M.filterFacets=(k,$)=>Fw(p,{channels:$,groups:Cw(k,$)}),M.getMarkState=k=>{let $=m.get(k),P=f.get(k);return{...$,channels:{...$.channels,...P?.channels}}},M.dispatchValue=k=>{D.value!==k&&(D.value=k,D.dispatchEvent(new Event("input",{bubbles:!0})))};let A=new Set;for(let[k,$]of m)if(k.initializer!=null){let P=k.facet==="super"?v:_,U=k.initializer($.data,$.facets,$.channels,x,P,M);if(U.data!==void 0&&($.data=U.data),U.facets!==void 0&&($.facets=U.facets),U.channels!==void 0){let{fx:G,fy:nt,...ot}=U.channels;pK(ot),Object.assign($.channels,ot);for(let at of Object.values(ot)){let{scale:Y}=at;Y!=null&&!eR(he.get(Y))&&(A$(at,e),A.add(Y))}(G!=null||nt!=null)&&f.set(k,!0)}}if(A.size){let k=new Map;fy(k,m,e,G=>A.has(G)),fy(h,m,e,G=>A.has(G));let $=IK(ey(k,e),y),{scales:P,...U}=TT($);Object.assign(y,$),Object.assign(x,U),Object.assign(x.scales,P)}let O,C;p!==void 0&&(O={x:b?.domain(),y:w?.domain()},p=_7(p,O),C=S7(b,w,g));for(let[k,$]of m)$.values=k.scale($.channels,x,M);let{width:S,height:T}=g;Vt(I).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",S).attr("height",T).attr("viewBox",`0 0 ${S} ${T}`).attr("aria-label",s).attr("aria-description",a).call(k=>k.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(Uf,n);for(let k of l){let{channels:$,values:P,facets:U}=m.get(k);if(p===void 0||k.facet==="super"){let G=null;if(U&&(G=U[0],G=k.filter(G,$,P),G.length===0))continue;let nt=k.render(G,x,P,v,M);if(nt==null)continue;I.appendChild(nt)}else{let G;for(let nt of p){if(!(k.facetAnchor?.(p,O,nt)??!nt.empty))continue;let ot=null;if(U){let Y=f.has(k);if(ot=U[Y?nt.i:0],ot=k.filter(ot,$,P),ot.length===0)continue;!Y&&ot===U[0]&&(ot=Hs(ot)),ot.fx=nt.x,ot.fy=nt.y,ot.fi=nt.i}let at=k.render(ot,x,P,_,M);if(at!=null){(G??=Vt(I).append("g")).append(()=>at).datum(nt);for(let Y of["aria-label","aria-description","aria-hidden","transform"])at.hasAttribute(Y)&&(G.attr(Y,at.getAttribute(Y)),at.removeAttribute(Y))}}G?.selectChildren().attr("transform",C)}}let N=g$(y,M,e),{figure:F=r!=null||i!=null||o!=null||N.length>0}=e;F&&(D=E.createElement("figure"),D.className=`${c}-figure`,D.style.maxWidth="initial",r!=null&&D.append(v$(E,r,"h2")),i!=null&&D.append(v$(E,i,"h3")),D.append(...N,I),o!=null&&D.append(fK(E,o))),D.scale=d7(x.scales),D.legend=m$(y,M,e);let R=bR();return R>0&&Vt(I).append("text").attr("x",S).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("\u26A0\uFE0F").append("title").text(`${R.toLocaleString("en-US")} warning${R===1?"":"s"}. Please check the console.`),D}function v$(e,t,n){if(t.ownerDocument)return t;let r=e.createElement(n);return r.append(t),r}function fK(e,t){let n=e.createElement("figcaption");return n.append(t),n}function hK({marks:e=[],...t}={}){return hy({...t,marks:[...e,this]})}St.prototype.plot=hK;function _$(e){return e.flat(1/0).filter(t=>t!=null).map(dK)}function dK(e){return typeof e.render=="function"?e:new KT(e)}var KT=class extends St{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}};function t3(e,t){for(let n in e)A$(e[n],t);return e}function A$(e,t){let{scale:n,transform:r=!0}=e;if(n==null||!r)return;let{type:i,percent:o,interval:s,transform:a=o?c=>c*100:eT(s,i)}=t[n]??{};a!=null&&(e.value=Wt(e.value,a),e.transform=!1)}function pK(e){for(let t in e)yT(t,e[t])}function fy(e,t,n,r=qF){for(let{channels:i}of t.values())for(let o in i){let s=i[o],{scale:a}=s;if(a!=null&&r(a))if(a==="projection"){if(!MR(n)){let c=n.x?.domain===void 0,l=n.y?.domain===void 0;if(c||l){let[u,f]=TR(s);c&&QT(e,"x",u),l&&QT(e,"y",f)}}}else QT(e,a,s)}return e}function QT(e,t,n){let r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function mK(e,t){if(e==null)return;let{x:n,y:r}=e;if(n==null&&r==null)return;let i=je(e.data);if(i==null)throw new Error("missing facet data");let o={};n!=null&&(o.fx=Bf(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Bf(i,{value:r,scale:"fy"})),t3(o,t);let s=Cw(i,o);return{channels:o,groups:s,data:e.data}}function S$(e,t,n){if(e.facet===null||e.facet==="super")return;let{fx:r,fy:i}=e;if(r!=null||i!=null){let c=je(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;let l={};return r!=null&&(l.fx=Bf(c,{value:r,scale:"fx"})),i!=null&&(l.fy=Bf(c,{value:i,scale:"fy"})),t3(l,n),{channels:l,groups:Cw(c,l)}}if(t===void 0)return;let{channels:o,groups:s,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:o,groups:s};a.length>0&&(s.size>1||s.size===1&&o.fx&&o.fy&&[...s][0][1].size>1)&&je(e.data)?.length===a.length&&Vn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn\u2019t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function yK(e,t={}){return Ie({...t,x:null,y:null},(n,r,i,o,s,a)=>a.getMarkState(e))}function gK(e){let t=[];for(let n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?jf:/^y$/i.test(i)?Dl:qf,r=i(yK(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Dl?"left":"bottom");let s=iv(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function xK(e,t,n){let{projection:r,x:i={},y:o={},fx:s={},fy:a={},axis:c,grid:l,facet:u={},facet:{axis:f=c,grid:h}=u,x:{axis:d=c,grid:p=d===null?null:l}=i,y:{axis:m=c,grid:y=m===null?null:l}=o,fx:{axis:g=f,grid:x=g===null?null:h}=s,fy:{axis:b=f,grid:w=b===null?null:h}=a}=n;(r||!qo(i)&&!I$("x",e))&&(d=p=null),(r||!qo(o)&&!I$("y",e))&&(m=y=null),t.has("fx")||(g=x=null),t.has("fy")||(b=w=null),d===void 0&&(d=!av(e,"x")),m===void 0&&(m=!av(e,"y")),g===void 0&&(g=!av(e,"fx")),b===void 0&&(b=!av(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),g===!0&&(g=d==="top"||d===null?"bottom":"top"),b===!0&&(b=m==="right"||m===null?"left":"right");let _=[];return sv(_,w,Kw,a),ov(_,b,Zw,"right","left",u,a),sv(_,x,ev,s),ov(_,g,Jw,"top","bottom",u,s),sv(_,y,Qw,o),ov(_,m,sy,"left","right",n,o),sv(_,p,tv,i),ov(_,d,ay,"bottom","top",n,i),_}function ov(e,t,n,r,i,o,s){if(!t)return;let a=bK(t);s=wK(a?r:t,o,s);let{line:c}=s;(n===sy||n===ay)&&c&&!Qs(c)&&e.push(Wf(vK(s))),e.push(n(s)),a&&e.push(n({...s,anchor:i,label:null}))}function sv(e,t,n,r){!t||Qs(t)||e.push(n(_K(t,r)))}function bK(e){return/^\s*both\s*$/i.test(e)}function wK(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:p=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}}function vK(e){let{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function _K(e,{stroke:t=Ja(e)?e:void 0,ticks:n=SK(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function SK(e){switch(typeof e){case"number":return!0;case"string":return!Ja(e)}return lr(e)||typeof e?.range=="function"}function av(e,t){let n=`${t}-axis `;return e.some(r=>r.ariaLabel?.startsWith(n))}function I$(e,t){for(let n of t)for(let r in n.channels){let{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function IK(e,t){for(let n in e){let r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function MK({fx:e,fy:t},n){let{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:c}=Tw(n),l=e&&M$(e),u=t&&M$(t);return{marginTop:t?u[0]:r,marginRight:e?a-l[1]:i,marginBottom:t?c-u[1]:o,marginLeft:e?l[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:c}}function M$(e){let t=e.domain(),n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}var AK=new Map([["basis",vA],["basis-closed",_A],["basis-open",SA],["bundle",IA],["bump-x",yA],["bump-y",gA],["cardinal",MA],["cardinal-closed",AA],["cardinal-open",TA],["catmull-rom",EA],["catmull-rom-closed",NA],["catmull-rom-open",DA],["linear",Ys],["linear-closed",OA],["monotone-x",LA],["monotone-y",CA],["natural",kA],["step",FA],["step-after",$A],["step-before",RA]]);function dy(e=Ys,t){if(typeof e=="function")return e;let n=AK.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function cv(e=ac,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?ac:dy(e,t)}function ac(e){return Ys(e)}function Ho(e={y:"count"},t={}){[e,t]=n3(e,t);let{x:n,y:r}=t;return e3(lv(n,t,W),null,null,r,e,Ol(t))}function Zo(e={x:"count"},t={}){[e,t]=n3(e,t);let{x:n,y:r}=t;return e3(null,lv(r,t,W),n,null,e,Bl(t))}function ia(e={fill:"count"},t={}){[e,t]=n3(e,t);let{x:n,y:r}=TK(t);return e3(n,r,null,null,e,Ol(Bl(t)))}function N$(e,t,n={}){if(n?.interval==null)return n;let{reduce:r=ww}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function Gf(e={}){return N$(Ho,"y",Xi(e,"x"))}function Hf(e={}){return N$(Zo,"x",Xi(e,"y"))}function e3(e,t,n,r,{data:i=bw,filter:o=Gm,sort:s,reverse:a,...c}={},l={}){e=T$(e),t=T$(t),c=EK(c,l),i=B$(i,W),s=s==null?void 0:D$("sort",s,l),o=o==null?void 0:O$("filter",o,l),n!=null&&Xo(c,"x","x1","x2")&&(n=null),r!=null&&Xo(c,"y","y1","y2")&&(r=null);let[u,f]=On(e),[h,d]=On(e),[p,m]=On(t),[y,g]=On(t),[x,b]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,_]=On(x),{x:v,y:M,z:E,fill:I,stroke:D,x1:A,x2:O,y1:C,y2:S,domain:T,cumulative:N,thresholds:F,interval:R,...k}=l,[$,P]=On(E),[U]=Be(I),[G]=Be(D),[nt,ot]=On(U),[at,Y]=On(G);return{..."z"in l&&{z:$||E},..."fill"in l&&{fill:nt||I},..."stroke"in l&&{stroke:at||D},...gn(k,(st,j,Z)=>{let rt=Ml(wt(st,x),Z?.[b]),z=wt(st,E),kt=wt(st,U),ht=wt(st,G),Gt=Jm(c,{z,fill:kt,stroke:ht}),Zt=[],tt=[],ae=rt&&_([]),Ir=z&&P([]),Hi=kt&&ot([]),sz=ht&&Y([]),ED=e&&f([]),az=e&&d([]),ND=t&&m([]),cz=t&&g([]),lz=OK(e,t,st),uz=0;for(let Zl of c)Zl.initialize(st);s&&s.initialize(st),o&&o.initialize(st);for(let Zl of j){let DD=[];for(let Jl of c)Jl.scope("facet",Zl);s&&s.scope("facet",Zl),o&&o.scope("facet",Zl);for(let[Jl,fz]of Qa(Zl,Gt))for(let[hz,gg]of Qa(fz,rt))for(let[Zi,ns]of lz(gg))if(Gt&&(ns.z=Jl),!(o&&!o.reduce(Zi,ns))){DD.push(uz++),tt.push(i.reduceIndex(Zi,st,ns)),rt&&ae.push(hz),z&&Ir.push(Gt===z?Jl:z[(Zi.length>0?Zi:gg)[0]]),kt&&Hi.push(Gt===kt?Jl:kt[(Zi.length>0?Zi:gg)[0]]),ht&&sz.push(Gt===ht?Jl:ht[(Zi.length>0?Zi:gg)[0]]),ED&&(ED.push(ns.x1),az.push(ns.x2)),ND&&(ND.push(ns.y1),cz.push(ns.y2));for(let dz of c)dz.reduce(Zi,ns);s&&s.reduce(Zi,ns)}Zt.push(DD)}return dT(Zt,s,a),{data:tt,facets:Zt}}),...!Xo(c,"x")&&(u?{x1:u,x2:h,x:Tf(u,h)}:{x:v,x1:A,x2:O}),...!Xo(c,"y")&&(p?{y1:p,y2:y,y:Tf(p,y)}:{y:M,y1:C,y2:S}),...w&&{[b]:w},...Object.fromEntries(c.map(({name:st,output:j})=>[st,j]))}}function n3({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function lv(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...wi(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=r3(e.thresholds,e.interval),e}function TK(e){let{x:t,y:n}=e;return t=lv(t,e),n=lv(n,e),[t.value,n.value]=Pe(t.value,n.value),{x:t,y:n}}function T$(e){if(e==null)return;let{value:t,cumulative:n,domain:r=le,thresholds:i}=e,o=s=>{let a=wt(s,t),c;if(Le(a)||DK(i)){a=Wt(a,ZA,Float64Array);let[u,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!Za(i)?i(a,u,f):i;typeof h=="number"&&(h=ym(u,f,h)),Za(h)&&(r===le&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),c=h}else{a=Ke(a);let[u,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!Za(i)?i(a,u,f):i;if(typeof h=="number")if(r===le){let d=Ts(u,f,h);if(isFinite(d))if(d>0){let p=Math.round(u/d),m=Math.round(f/d);p*d<=u||--p,m*d>f||++m;let y=m-p+1;h=new Float64Array(y);for(let g=0;g<y;++g)h[g]=(p+g)*d}else if(d<0){d=-d;let p=Math.round(u*d),m=Math.round(f*d);p/d<=u||--p,m/d>f||++m;let y=m-p+1;h=new Float64Array(y);for(let g=0;g<y;++g)h[g]=(p+g)/d}else h=[u];else h=[u]}else h=An(u,f,h);else Za(h)&&(r===le&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));c=h}let l=[];if(c.length===1)l.push([c[0],c[0]]);else for(let u=1;u<c.length;++u)l.push([c[u-1],c[u]]);return l.bin=(n<0?LK:n>0?BK:i3)(l,c,a),l};return o.label=Bn(t),o}function r3(e,t,n=E$){if(e===void 0)return t===void 0?n:Vo(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return ex;case"scott":return fp;case"sturges":return Ea;case"auto":return E$}return Vm(e)}return e}function EK(e,t){return fT(e,t,D$)}function D$(e,t,n){return gw(e,t,n,O$)}function O$(e,t,n){return xw(e,t,n,B$)}function B$(e,t){return Of(e,t,NK)}function NK(e){switch(`${e}`.toLowerCase()){case"x":return CK;case"x1":return FK;case"x2":return RK;case"y":return kK;case"y1":return $K;case"y2":return PK;case"z":return pT}throw new Error(`invalid bin reduce: ${e}`)}function E$(e,t,n){return Math.min(200,fp(e,t,n))}function DK(e){return XF(e)||lr(e)&&Le(e)}function OK(e,t,n){let r=e?.(n),i=t?.(n);return r&&i?function*(o){let s=r.bin(o);for(let[a,[c,l]]of r.entries()){let u=i.bin(s[a]);for(let[f,[h,d]]of i.entries())yield[u[f],{data:n,x1:c,y1:h,x2:l,y2:d}]}}:r?function*(o){let s=r.bin(o);for(let[a,[c,l]]of r.entries())yield[s[a],{data:n,x1:c,x2:l}]}:function*(o){let s=i.bin(o);for(let[a,[c,l]]of i.entries())yield[s[a],{data:n,y1:c,y2:l}]}}function i3(e,t,n){return t=Ke(t),r=>{let i=e.map(()=>[]);for(let o of r)i[Ms(t,n[o])-1]?.push(o);return i}}function BK(e,t,n){let r=i3(e,t,n);return i=>{let o=r(i);for(let s=1,a=o.length;s<a;++s){let c=o[s-1],l=o[s];for(let u of c)l.push(u)}return o}}function LK(e,t,n){let r=i3(e,t,n);return i=>{let o=r(i);for(let s=o.length-2;s>=0;--s){let a=o[s+1],c=o[s];for(let l of a)c.push(l)}return o}}function L$(e,t){let n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}var CK={reduceIndex(e,t,{x1:n,x2:r}){return L$(n,r)}},kK={reduceIndex(e,t,{y1:n,y2:r}){return L$(n,r)}},FK={reduceIndex(e,t,{x1:n}){return n}},RK={reduceIndex(e,t,{x2:n}){return n}},$K={reduceIndex(e,t,{y1:n}){return n}},PK={reduceIndex(e,t,{y2:n}){return n}};function Zf(e={}){return QA(e)?e:{...e,x:W}}function Jf(e={}){return KA(e)?e:{...e,y:W}}function C$(e,t){if(t.length===1)return{data:e,facets:t};let n=e.length,r=new Uint8Array(n),i=0;for(let a of t)for(let c of a)r[c]&&++i,r[c]=1;if(i===0)return{data:e,facets:t};e=Ha(e);let o=e[WA]=new Uint32Array(n+i);t=t.map(a=>Ha(a,Uint32Array));let s=n;r.fill(0);for(let a of t)for(let c=0,l=a.length;c<l;++c){let u=a[c];r[u]?(a[c]=s,e[s]=e[u],o[s]=u,++s):o[u]=u,r[u]=1}return{data:e,facets:t}}function o3(e={},t={}){arguments.length===1&&([e,t]=th(e));let{y1:n,y:r=n,x:i,...o}=t,[s,a,c,l]=eh(r,i,"y","x",e,o);return{...s,y1:n,y:a,x1:c,x2:l,x:Tf(c,l)}}function R$(e={},t={}){arguments.length===1&&([e,t]=th(e));let{y1:n,y:r=n,x:i}=t,[o,s,a]=eh(r,i,"y","x",e,t);return{...o,y1:n,y:s,x:a}}function $$(e={},t={}){arguments.length===1&&([e,t]=th(e));let{y1:n,y:r=n,x:i}=t,[o,s,,a]=eh(r,i,"y","x",e,t);return{...o,y1:n,y:s,x:a}}function s3(e={},t={}){arguments.length===1&&([e,t]=th(e));let{x1:n,x:r=n,y:i,...o}=t,[s,a,c,l]=eh(r,i,"x","y",e,o);return{...s,x1:n,x:a,y1:c,y2:l,y:Tf(c,l)}}function P$(e={},t={}){arguments.length===1&&([e,t]=th(e));let{x1:n,x:r=n,y:i}=t,[o,s,a]=eh(r,i,"x","y",e,t);return{...o,x1:n,x:s,y:a}}function U$(e={},t={}){arguments.length===1&&([e,t]=th(e));let{x1:n,x:r=n,y:i}=t,[o,s,,a]=eh(r,i,"x","y",e,t);return{...o,x1:n,x:s,y:a}}function Qf({x:e,x1:t,x2:n,...r}={}){return r=Xi(r,"y"),t===void 0&&n===void 0?o3({x:e,...r}):([t,n]=tT(e,t,n),{...r,x1:t,x2:n})}function Kf({y:e,y1:t,y2:n,...r}={}){return r=Xi(r,"x"),t===void 0&&n===void 0?s3({y:e,...r}):([t,n]=tT(e,t,n),{...r,y1:t,y2:n})}function th(e){let{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}var UK={length:!0};function eh(e,t=Ym,n,r,{offset:i,order:o,reverse:s},a){if(t===null)throw new Error(`stack requires ${r}`);let c=jn(a),[l,u]=On(e),[f,h]=yn(t),[d,p]=yn(t);return f.hint=d.hint=UK,i=zK(i),o=VK(o,i,r),[gn(a,(m,y,g)=>{({data:m,facets:y}=C$(m,y));let x=e==null?void 0:u(Ml(wt(m,e),g?.[n])),b=wt(m,t,Float64Array),w=wt(m,c),_=o&&o(m,x,b,w),v=m.length,M=h(new Float64Array(v)),E=p(new Float64Array(v)),I=[];for(let D of y){let A=x?Array.from(ln(D,O=>x[O]).values()):[D];if(_)for(let O of A)O.sort(_);for(let O of A){let C=0,S=0;s&&O.reverse();for(let T of O){let N=b[T];N<0?C=E[T]=(M[T]=C)+N:N>0?S=E[T]=(M[T]=S)+N:E[T]=M[T]=S}}I.push(A)}return i&&i(I,M,E,w),{data:m,facets:y}}),l,f,d]}function zK(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return qK;case"center":case"silhouette":return jK;case"wiggle":return q$}throw new Error(`unknown offset: ${e}`)}}function z$(e,t){let n=0,r=0;for(let i of e){let o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function qK(e,t,n){for(let r of e)for(let i of r){let[o,s]=z$(i,n);for(let a of i){let c=1/(s-o||1);t[a]=c*(t[a]-o),n[a]=c*(n[a]-o)}}}function jK(e,t,n){for(let r of e){for(let i of r){let[o,s]=z$(i,n);for(let a of i){let c=(s+o)/2;t[a]-=c,n[a]-=c}}j$(r,t,n)}V$(e,t,n)}function q$(e,t,n,r){for(let i of e){let o=new Jn,s=0;for(let a of i){let c=-1,l=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{c=r?r[d]:++c;let p=n[d]-t[d],m=o.has(c)?p-o.get(c):0;return o.set(c,p),m}),f=[0,...Z0(u)];for(let d of a)t[d]+=s,n[d]+=s;let h=Tn(l);h&&(s-=Tn(l,(d,p)=>(u[p]/2+f[p])*d)/h)}j$(i,t,n)}V$(e,t,n)}function j$(e,t,n){let r=ue(e,i=>ue(i,o=>t[o]));for(let i of e)for(let o of i)t[o]-=r,n[o]-=r}function V$(e,t,n){let r=e.length;if(r===1)return;let i=e.map(a=>a.flat()),o=i.map(a=>(ue(a,c=>t[c])+Ht(a,c=>n[c]))/2),s=ue(o);for(let a=0;a<r;a++){let c=s-o[a];for(let l of i[a])t[l]+=c,n[l]+=c}}function VK(e,t,n){if(e===void 0&&t===q$)return k$(dn);if(e!=null){if(typeof e=="string"){let r=e.startsWith("-"),i=r?vl:dn;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return YK(i);case"z":return XK(i);case"sum":return WK(i);case"appearance":return GK(i);case"inside-out":return k$(i)}return F$(GA(e))}if(typeof e=="function")return(e.length===1?F$:HK)(e);if(Array.isArray(e))return ZK(e);throw new Error(`invalid order: ${e}`)}}function YK(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function XK(e){return(t,n,r,i)=>(o,s)=>e(i[o],i[s])}function WK(e){return uv(e,(t,n,r,i)=>Eu(cr(t),o=>Tn(o,s=>r[s]),o=>i[o]))}function GK(e){return uv(e,(t,n,r,i)=>Eu(cr(t),o=>n[Wc(o,s=>r[s])],o=>i[o]))}function k$(e){return uv(e,(t,n,r,i)=>{let o=cr(t),s=Eu(o,f=>n[Wc(f,h=>r[h])],f=>i[f]),a=Pi(o,f=>Tn(f,h=>r[h]),f=>i[f]),c=[],l=[],u=0;for(let f of s)u<0?(u+=a.get(f),c.push(f)):(u-=a.get(f),l.push(f));return l.reverse().concat(c)})}function F$(e){return t=>{let n=wt(t,e);return(r,i)=>dn(n[r],n[i])}}function HK(e){return t=>(n,r)=>e(t[n],t[r])}function ZK(e){return uv(dn,()=>e)}function uv(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");let s=new Jn(t(n,r,i,o).map((a,c)=>[a,c]));return(a,c)=>e(s.get(o[a]),s.get(o[c]))}}var JK={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},Rl=class extends St{constructor(t,n={}){let{x1:r,y1:i,x2:o,y2:s,z:a,curve:c,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0},z:{value:jn(n),optional:!0}},n,JK),this.z=a,this.curve=dy(c,l)}filter(t){return t}render(t,n,r,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a}=r;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n,0,0).call(u=>u.selectAll().data(Bw(t,[s,a,c,l],this,r)).enter().append("path").call(Lt,this).call(Nl,this,r).attr("d",pf().curve(this.curve).defined(f=>f>=0).x0(f=>s[f]).y0(f=>a[f]).x1(f=>c[f]).y1(f=>l[f]))).node()}};function py(e,t){return t===void 0?oa(e,{x:Il,y:Ga}):new Rl(e,t)}function cc(e,t){let{y:n=Ee,...r}=Hf(t);return new Rl(e,Qf(Zf({...r,y1:n,y2:void 0})))}function oa(e,t){let{x:n=Ee,...r}=Gf(t);return new Rl(e,Kf(Jf({...r,x1:n,x2:void 0})))}var QK={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},my=class extends St{constructor(t,n={}){let{x1:r,y1:i,x2:o,y2:s,curve:a,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,QK),this.curve=cv(a,c),Wi(this,n)}project(t,n,r){this.curve!==ac&&super.project(t,n,r)}render(t,n,r,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a}=r,{curve:u}=this;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Lt,this).attr("d",u===ac&&o.projection?KK(o.projection,s,a,c,l):h=>{let d=nr(),p=u(d);return p.lineStart(),p.point(s[h],a[h]),p.point(c[h],l[h]),p.lineEnd(),d}).call(Qt,this,r).call(ra,this,r,o)).node()}};function KK(e,t,n,r,i){let o=Nn(e);return t=Ke(t),n=Ke(n),r=Ke(r),i=Ke(i),s=>o({type:"LineString",coordinates:[[t[s],n[s]],[r[s],i[s]]]})}function fv(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:s,...a}={}){return[n,r]=yy(t,n,r),[o,s]=yy(i,o,s),new my(e,{...a,x1:n,x2:r,y1:o,y2:s})}function yy(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}var ttt={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5},gy=class extends St{constructor(t,n={}){let{x1:r,y1:i,x2:o,y2:s,bend:a=0,headAngle:c=60,headLength:l=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,ttt),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+c,this.headLength=+l,this.insetStart=+f,this.insetEnd=+h,this.sweep=ett(d)}render(t,n,r,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a,SW:u}=r,{strokeWidth:f,bend:h,headAngle:d,headLength:p,insetStart:m,insetEnd:y}=this,g=u?w=>u[w]:pn(f===void 0?1:f),x=d*Vf/2,b=p/1.5;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(Lt,this).attr("d",_=>{let v=s[_],M=a[_],E=c[_],I=l[_],D=Math.hypot(E-v,I-M);if(D<=m+y)return null;let A=Math.atan2(I-M,E-v),O=Math.min(b*g(_),D/3),C=this.sweep(v,M,E,I)*h*Vf,S=Math.hypot(D/Math.tan(C),D)/2;if(m||y)if(S<1e5){let nt=Math.sign(C),[ot,at]=ntt([v,M],[E,I],S,nt);if(m&&([v,M]=Y$([ot,at,S],[v,M,m],-nt*Math.sign(m))),y){let[Y,st]=Y$([ot,at,S],[E,I,y],nt*Math.sign(y));A+=Math.atan2(st-at,Y-ot)-Math.atan2(I-at,E-ot),E=Y,I=st}}else{let nt=E-v,ot=I-M,at=Math.hypot(nt,ot);m&&(v+=nt/at*m,M+=ot/at*m),y&&(E-=nt/at*y,I-=ot/at*y)}let T=A+C,N=T+x,F=T-x,R=E-O*Math.cos(N),k=I-O*Math.sin(N),$=E-O*Math.cos(F),P=I-O*Math.sin(F),U=S<1e5?`A${S},${S} 0,0,${C>0?1:0} `:"L",G=O?`M${R},${k}L${E},${I}L${$},${P}`:"";return`M${v},${M}${U}${E},${I}${G}`}).call(Qt,this,r)).node()}};function ett(e=1){if(typeof e=="number")return pn(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(sn(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>zt(t,r);case"-x":return(t,n,r)=>Zn(t,r);case"+y":return(t,n,r,i)=>zt(n,i);case"-y":return(t,n,r,i)=>Zn(n,i)}}function ntt([e,t],[n,r],i,o){let s=n-e,a=r-t,c=Math.hypot(s,a),l=o*Math.sqrt(i*i-c*c/4)/c;return[(e+n)/2-a*l,(t+r)/2+s*l]}function Y$([e,t,n],[r,i,o],s){let a=r-e,c=i-t,l=Math.hypot(a,c),u=(a*a+c*c-o*o+n*n)/(2*l),f=s*Math.sqrt(n*n-u*u);return[e+(a*u+c*f)/l,t+(c*u-a*f)/l]}function X$(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:s,...a}={}){return[n,r]=yy(t,n,r),[o,s]=yy(i,o,s),new gy(e,{...a,x1:n,x2:r,y1:o,y2:s})}var nh=class extends St{constructor(t,n,r={},i){super(t,n,r,i);let{inset:o=0,insetTop:s=o,insetRight:a=o,insetBottom:c=o,insetLeft:l=o,rx:u,ry:f}=r;this.insetTop=Bt(s),this.insetRight=Bt(a),this.insetBottom=Bt(c),this.insetLeft=Bt(l),this.rx=fe(u,"auto"),this.ry=fe(f,"auto")}render(t,n,r,i,o){let{rx:s,ry:a}=this;return ut("svg:g",o).call(Ct,this,i,o).call(this._transform,this,n).call(c=>c.selectAll().data(t).enter().append("rect").call(Lt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ft,"rx",s).call(ft,"ry",a).call(Qt,this,r)).node()}_x(t,{x:n},{marginLeft:r}){let{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(t,{y:n},{marginTop:r}){let{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:o}){let{insetLeft:s,insetRight:a}=this,c=n&&t?t.bandwidth():o-r-i;return Math.max(0,c-s-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:o}){let{insetTop:s,insetBottom:a}=this,c=n&&t?t.bandwidth():o-r-i;return Math.max(0,c-s-a)}},W$={ariaLabel:"bar"},xy=class extends nh{constructor(t,n={}){let{x1:r,x2:i,y:o}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},n,W$)}_transform(t,n,{x:r}){t.call(Et,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){let{insetLeft:o}=this;return ur(t)?i+o:s=>Math.min(n[s],r[s])+o}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:o,width:s}){let{insetLeft:a,insetRight:c}=this;return ur(t)?s-i-o-a-c:l=>Math.max(0,Math.abs(r[l]-n[l])-a-c)}},by=class extends nh{constructor(t,n={}){let{x:r,y1:i,y2:o}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,W$)}_transform(t,n,{y:r}){t.call(Et,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){let{insetTop:o}=this;return ur(t)?i+o:s=>Math.min(n[s],r[s])+o}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:s}){let{insetTop:a,insetBottom:c}=this;return ur(t)?s-i-o-a-c:l=>Math.max(0,Math.abs(r[l]-n[l])-a-c)}};function Jo(e,t={}){return Mf(t)||(t={...t,y:Ee,x2:W}),new xy(e,Qf(Pw(Zf(t))))}function Qo(e,t={}){return Mf(t)||(t={...t,x:Ee,y2:W}),new by(e,Kf(Uw(Jf(t))))}var rtt={ariaLabel:"cell"},$l=class extends nh{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,rtt)}_transform(t,n){t.call(Et,n,{},0,0)}};function lc(e,{x:t,y:n,...r}={}){return[t,n]=Pe(t,n),new $l(e,{...r,x:t,y:n})}function G$(e,{x:t=Ee,fill:n,stroke:r,...i}={}){return n===void 0&&Be(r)[0]===void 0&&(n=W),new $l(e,{...i,x:t,fill:n,stroke:r})}function H$(e,{y:t=Ee,fill:n,stroke:r,...i}={}){return n===void 0&&Be(r)[0]===void 0&&(n=W),new $l(e,{...i,y:t,fill:n,stroke:r})}var itt={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function wy(e){return e.sort===void 0&&e.reverse===void 0?mw({channel:"-r"},e):e}var Pl=class extends St{constructor(t,n={}){let{x:r,y:i,r:o,rotate:s,symbol:a=Xs,frameAnchor:c}=n,[l,u]=se(s,0),[f,h]=iR(a),[d,p]=se(o,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ar,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},wy(n),itt),this.r=p,this.rotate=u,this.symbol=h,this.frameAnchor=Yo(c);let{channels:m}=this,{symbol:y}=m;if(y){let{fill:g,stroke:x}=m;y.hint={fill:g?g.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:x?x.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,r:u,rotate:f,symbol:h}=r,{r:d,rotate:p,symbol:m}=this,[y,g]=bn(this,i),x=m===Xs,b=u?void 0:d*d*Math.PI;return ja(d)&&(t=[]),ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(w=>w.selectAll().data(t).enter().append(x?"circle":"path").call(Lt,this).call(x?_=>{_.attr("cx",c?v=>c[v]:y).attr("cy",l?v=>l[v]:g).attr("r",u?v=>u[v]:d)}:_=>{_.attr("transform",oc`translate(${c?v=>c[v]:y},${l?v=>l[v]:g})${f?v=>` rotate(${f[v]})`:p?` rotate(${p})`:""}`).attr("d",u&&h?v=>{let M=nr();return h[v].draw(M,u[v]*u[v]*Math.PI),M}:u?v=>{let M=nr();return m.draw(M,u[v]*u[v]*Math.PI),M}:h?v=>{let M=nr();return h[v].draw(M,b),M}:(()=>{let v=nr();return m.draw(v,b),v})())}).call(Qt,this,r)).node()}};function _i(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Pe(t,n)),new Pl(e,{...r,x:t,y:n})}function Z$(e,{x:t=W,...n}={}){return new Pl(e,qw({...n,x:t}))}function J$(e,{y:t=W,...n}={}){return new Pl(e,zw({...n,y:t}))}function Q$(e,t){return _i(e,{...t,symbol:"circle"})}function K$(e,t){return _i(e,{...t,symbol:"hexagon"})}var ott={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},Ul=class extends St{constructor(t,n={}){let{x:r,y:i,z:o,curve:s,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:jn(n),optional:!0}},n,ott),this.z=o,this.curve=cv(s,a),Wi(this,n)}filter(t){return t}project(t,n,r){this.curve!==ac&&super.project(t,n,r)}render(t,n,r,i,o){let{x:s,y:a}=r,{curve:c}=this;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(l=>l.selectAll().data(Bw(t,[s,a],this,r)).enter().append("path").call(Lt,this).call(Nl,this,r).call(D7,this,r,o).attr("d",c===ac&&o.projection?stt(o.projection,s,a):Mm().curve(c).defined(u=>u>=0).x(u=>s[u]).y(u=>a[u]))).node()}};function stt(e,t,n){let r=Nn(e);return t=Ke(t),n=Ke(n),i=>{let o=[],s=[o];for(let a of i)a===-1?(o=[],s.push(o)):o.push([t[a],n[a]]);return r({type:"MultiLineString",coordinates:s})}}function zl(e,{x:t,y:n,...r}={}){return[t,n]=Pe(t,n),new Ul(e,{...r,x:t,y:n})}function uc(e,{x:t=W,y:n=Ee,...r}={}){return new Ul(e,Hf({...r,x:t,y:n}))}function fc(e,{x:t=Ee,y:n=W,...r}={}){return new Ul(e,Gf({...r,x:t,y:n}))}var att={ariaLabel:"rect"},ql=class extends St{constructor(t,n={}){let{x1:r,y1:i,x2:o,y2:s,inset:a=0,insetTop:c=a,insetRight:l=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:r,scale:"x",type:r!=null&&o==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,att),this.insetTop=Bt(c),this.insetRight=Bt(l),this.insetBottom=Bt(u),this.insetLeft=Bt(f),this.rx=fe(h,"auto"),this.ry=fe(d,"auto")}render(t,n,r,i,o){let{x:s,y:a}=n,{x1:c,y1:l,x2:u,y2:f}=r,{marginTop:h,marginRight:d,marginBottom:p,marginLeft:m,width:y,height:g}=i,{projection:x}=o,{insetTop:b,insetRight:w,insetBottom:_,insetLeft:v,rx:M,ry:E}=this,I=(s?.bandwidth?s.bandwidth():0)-v-w,D=(a?.bandwidth?a.bandwidth():0)-b-_;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{},0,0).call(A=>A.selectAll().data(t).enter().append("rect").call(Lt,this).attr("x",c&&(x||!ur(s))?u?O=>Math.min(c[O],u[O])+v:O=>c[O]+v:m+v).attr("y",l&&(x||!ur(a))?f?O=>Math.min(l[O],f[O])+b:O=>l[O]+b:h+b).attr("width",c&&(x||!ur(s))?u?O=>Math.max(0,Math.abs(u[O]-c[O])+I):I:y-d-m-w-v).attr("height",l&&(x||!ur(a))?f?O=>Math.max(0,Math.abs(l[O]-f[O])+D):D:g-h-p-b-_).call(ft,"rx",M).call(ft,"ry",E).call(Qt,this,r)).node()}};function vy(e,t){return new ql(e,zT(qT(t)))}function rh(e,t={}){return Mf(t)||(t={...t,y:Ee,x2:W,interval:1}),new ql(e,Qf(qT(Zf(t))))}function ih(e,t={}){return Mf(t)||(t={...t,x:Ee,y2:W,interval:1}),new ql(e,Kf(zT(Jf(t))))}function c3(e,t){t=ctt(t);let{x:n,y:r,color:i,size:o}=t,s=hv(e,n),a=hv(e,r),c=hv(e,i),l=hv(e,o),{fx:u,fy:f,x:{value:h,reduce:d,zero:p,...m},y:{value:y,reduce:g,zero:x,...b},color:{value:w,color:_,reduce:v},size:{value:M,reduce:E},mark:I}=t;if(d===void 0&&(d=g==null&&h==null&&M==null&&y!=null?"count":null),g===void 0&&(g=d==null&&y==null&&M==null&&h!=null?"count":null),E===void 0&&M==null&&v==null&&d==null&&g==null&&(h==null||Ne(s))&&(y==null||Ne(a))&&(E="count"),p===void 0&&(p=dv(d)?!0:void 0),x===void 0&&(x=dv(g)?!0:void 0),h==null&&y==null)throw new Error("must specify x or y");if(d!=null&&y==null)throw new Error("reducing x requires y");if(g!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=M!=null||E!=null?"dot":dv(d)||dv(g)||v!=null?"bar":h!=null&&y!=null?Ne(s)||Ne(a)||d==null&&g==null&&!_y(s)&&!_y(a)?"dot":"line":h!=null||y!=null?"rule":null);let D,A,O;switch(I){case"dot":O=_i,A="stroke";break;case"line":O=s&&a||d!=null||g!=null?x||g!=null||s&&_y(s)?fc:p||d!=null||a&&_y(a)?uc:zl:s?uc:fc,A="stroke",e9(c)&&(D=null);break;case"area":O=!(x||g!=null)&&(p||d!=null||a&&_y(a))?cc:oa,A="fill",e9(c)&&(D=null);break;case"rule":O=s?Yr:Xr,A="stroke";break;case"bar":O=d!=null?Ne(a)?t9(d)&&s&&Ne(s)?lc:Jo:rh:g!=null?Ne(s)?t9(g)&&a&&Ne(a)?lc:Qo:ih:v!=null||E!=null?s&&Ne(s)&&a&&Ne(a)?lc:s&&Ne(s)?Qo:a&&Ne(a)?Jo:vy:s&&Js(s)&&!(a&&Js(a))?Jo:a&&Js(a)&&!(s&&Js(s))?Qo:lc,A="fill";break;default:throw new Error(`invalid mark: ${I}`)}let C={fx:u,fy:f,x:s??void 0,y:a??void 0,[A]:c??_,z:D,r:l??void 0,tip:!0},S,T={[A]:v??void 0,r:E??void 0};if(d!=null&&g!=null)throw new Error("cannot reduce both x and y");return g!=null?(T.y=g,S=Ne(s)?Ka:Ho):d!=null?(T.x=d,S=Ne(a)?tc:Zo):(v!=null||E!=null)&&(s&&a?S=Ne(s)&&Ne(a)?Zm:Ne(s)?Zo:Ne(a)?Ho:ia:s?S=Ne(s)?Ka:Ho:a&&(S=Ne(a)?tc:Zo)),(S===ia||S===Ho)&&(C.x={value:s,...m}),(S===ia||S===Zo)&&(C.y={value:a,...b}),p===void 0&&(p=s&&!(S===ia||S===Ho)&&(O===Jo||O===cc||O===rh||O===Xr)),x===void 0&&(x=a&&!(S===ia||S===Zo)&&(O===Qo||O===oa||O===ih||O===Yr)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!p,...m},y:{value:y??null,reduce:g??null,zero:!!x,...b},color:{value:w??null,reduce:v??null,..._!==void 0&&{color:_}},size:{value:M??null,reduce:E??null},mark:I,markImpl:n9[O],markOptions:C,transformImpl:n9[S],transformOptions:T,colorMode:A}}function r9(e,t){let n=c3(e,t),{fx:r,fy:i,x:{zero:o},y:{zero:s},markOptions:a,transformOptions:c,colorMode:l}=n,u=a3[n.markImpl],f=a3[n.transformImpl],h=r!=null||i!=null?Wf({strokeOpacity:.1}):null,d=[o?Yr([0]):null,s?Xr([0]):null],p=u(e,f?f(c,a):a);return l==="stroke"?tn(h,d,p):tn(h,p,d)}function _y(e){let t,n;for(let r of e){if(r==null)continue;if(t===void 0){t=r;continue}let i=Math.sign(zt(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function ctt({x:e,y:t,color:n,size:r,fx:i,fy:o,mark:s}={}){return jr(e)||(e=oh(e)),jr(t)||(t=oh(t)),jr(n)||(n=Ja(n)?{color:n}:oh(n)),jr(r)||(r=oh(r)),jr(i)&&({value:i}=oh(i)),jr(o)&&({value:o}=oh(o)),s!=null&&(s=`${s}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:o,mark:s}}function hv(e,t){let n=wt(e,t.value);return n&&(n.label=Bn(t.value)),n}function oh(e){return ltt(e)?{reduce:e}:{value:e}}function dv(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function t9(e){return/^(?:first|last|mode)$/i.test(e)}function ltt(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&mn(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function e9(e){return e?new Qn(e).size>e.length>>1:!1}var a3={dot:_i,line:zl,lineX:uc,lineY:fc,areaX:cc,areaY:oa,ruleX:Yr,ruleY:Xr,barX:Jo,barY:Qo,rect:vy,rectX:rh,rectY:ih,cell:lc,bin:ia,binX:Ho,binY:Zo,group:Zm,groupX:Ka,groupY:tc},n9=Object.fromEntries(Object.entries(a3).map(([e,t])=>[t,e]));function sh(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=W});let o={};return n!=null&&(o.x=e),r!=null&&(o.x1=e),i!=null&&(o.x2=e),_r(o,t)}function ah(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=W});let o={};return n!=null&&(o.y=e),r!=null&&(o.y1=e),i!=null&&(o.y2=e),_r(o,t)}function _r(e={},t={}){let n=jn(t),r=Object.entries(e).map(([i,o])=>{let s=lw(i,t);if(s==null)throw new Error(`missing channel: ${i}`);let[a,c]=yn(s);return{key:i,input:s,output:a,setOutput:c,map:utt(o)}});return{...gn(t,(i,o)=>{let s=wt(i,n),a=r.map(({input:l})=>wt(i,l)),c=r.map(({setOutput:l})=>l(new Array(i.length)));for(let l of o)for(let u of s?ln(l,f=>s[f]).values():[l])r.forEach(({map:f},h)=>f.mapIndex(u,a[h],c[h]));return{data:i,facets:o}}),...Object.fromEntries(r.map(({key:i,output:o})=>[i,o]))}}function utt(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&mn(e))return ftt(e);if(typeof e=="function")return l3(Af(e));switch(`${e}`.toLowerCase()){case"cumsum":return dtt;case"rank":return l3((t,n)=>hp(t,r=>n[r]));case"quantile":return l3((t,n)=>htt(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function ftt(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function htt(e,t){let n=_o(e,t)-1;return hp(e,t).map(r=>r/n)}function l3(e){return{mapIndex(t,n,r){let i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let o=0,s=t.length;o<s;++o)r[t[o]]=i[o]}}}var dtt={mapIndex(e,t,n){let r=0;for(let i of e)n[i]=r+=t[i]}};function i9(e={},t){return arguments.length===1&&(t=e),sh(ch(e),t)}function o9(e={},t){return arguments.length===1&&(t=e),ah(ch(e),t)}function ch(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:o}=e;if(i===void 0&&r!==void 0&&(i=mtt(r),Vn(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return ytt(n)(t,ptt(i,t),o)}function ptt(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function mtt(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function ytt(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return pv(If(e));switch(e.toLowerCase()){case"deviation":return pv(li);case"max":return mv((t,n)=>Ht(t,r=>n[r]));case"mean":return gtt;case"median":return pv(Ui);case"min":return mv((t,n)=>ue(t,r=>n[r]));case"mode":return mv((t,n)=>Bu(t,r=>n[r]));case"sum":return s9;case"variance":return pv(Ta);case"difference":return wtt;case"ratio":return vtt;case"first":return _tt;case"last":return Stt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return mv(Af(e))}function pv(e){return(t,n,r)=>r?{mapIndex(i,o,s){let a=l=>o[l]==null?NaN:+o[l],c=0;for(let l=0;l<t-1;++l)isNaN(a(l))&&++c;for(let l=0,u=i.length-t+1;l<u;++l)isNaN(a(l+t-1))&&++c,s[i[l+n]]=c===0?e(Hs(i,l,l+t),a):NaN,isNaN(a(l))&&--c}}:{mapIndex(i,o,s){let a=c=>o[c]==null?NaN:+o[c];for(let c=-n;c<0;++c)s[i[c+n]]=e(Hs(i,0,c+t),a);for(let c=0,l=i.length-n;c<l;++c)s[i[c+n]]=e(Hs(i,c,c+t),a)}}}function mv(e){return(t,n,r)=>r?{mapIndex(i,o,s){let a=0;for(let c=0;c<t-1;++c)a+=ze(o[i[c]]);for(let c=0,l=i.length-t+1;c<l;++c)a+=ze(o[i[c+t-1]]),a===t&&(s[i[c+n]]=e(Hs(i,c,c+t),o)),a-=ze(o[i[c]])}}:{mapIndex(i,o,s){for(let a=-n;a<0;++a)s[i[a+n]]=e(Hs(i,0,a+t),o);for(let a=0,c=i.length-n;a<c;++a)s[i[a+n]]=e(Hs(i,a,a+t),o)}}}function s9(e,t,n){return n?{mapIndex(r,i,o){let s=0,a=0;for(let c=0;c<e-1;++c){let l=i[r[c]];l===null||isNaN(l)?++s:a+=+l}for(let c=0,l=r.length-e+1;c<l;++c){let u=i[r[c]],f=i[r[c+e-1]];f===null||isNaN(f)?++s:a+=+f,o[r[c+t]]=s===0?a:NaN,u===null||isNaN(u)?--s:a-=+u}}}:{mapIndex(r,i,o){let s=0,a=r.length;for(let c=0,l=Math.min(a,e-t-1);c<l;++c)s+=+i[r[c]]||0;for(let c=-t,l=a-t;c<l;++c)s+=+i[r[c+e-1]]||0,o[r[c+t]]=s,s-=+i[r[c]]||0}}}function gtt(e,t,n){if(n){let r=s9(e,t,n);return{mapIndex(i,o,s){r.mapIndex(i,o,s);for(let a=0,c=i.length-e+1;a<c;++a)s[i[a+t]]/=e}}}else return{mapIndex(r,i,o){let s=0,a=0,c=r.length;for(let l=0,u=Math.min(c,e-t-1);l<u;++l){let f=i[r[l]];f!==null&&!isNaN(f=+f)&&(s+=f,++a)}for(let l=-t,u=c-t;l<u;++l){let f=i[r[l+e-1]],h=i[r[l]];f!==null&&!isNaN(f=+f)&&(s+=f,++a),o[r[l+t]]=s/a,h!==null&&!isNaN(h=+h)&&(s-=h,--a)}}}}function xtt(e,t,n,r){for(let i=n+r;n<i;++n){let o=e[t[n]];if(ze(o))return o}}function btt(e,t,n,r){for(let i=n+r-1;i>=n;--i){let o=e[t[i]];if(ze(o))return o}}function a9(e,t,n,r){for(let i=n+r;n<i;++n){let o=e[t[n]];if(o!==null&&!isNaN(o=+o))return o}}function c9(e,t,n,r){for(let i=n+r-1;i>=n;--i){let o=e[t[i]];if(o!==null&&!isNaN(o=+o))return o}}function wtt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s){let c=i[r[s]],l=i[r[s+e-1]];o[r[s+t]]=c===null||l===null?NaN:l-c}}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=c9(i,r,s,e)-a9(i,r,s,e)}}}function vtt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s){let c=i[r[s]],l=i[r[s+e-1]];o[r[s+t]]=c===null||l===null?NaN:l/c}}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=c9(i,r,s,e)/a9(i,r,s,e)}}}function _tt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s)o[r[s+t]]=i[r[s]]}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=xtt(i,r,s,e)}}}function Stt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s)o[r[s+t]]=i[r[s+e-1]]}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=btt(i,r,s,e)}}}var sa={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function l9(e,{x:t=W,y:n,k:r=sa.k,color:i=sa.color,opacity:o=sa.opacity,fill:s=i,fillOpacity:a=o,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return tn(re(s)?null:cc(e,_r({x1:hc({k:-r,...f}),x2:hc({k:r,...f})},{x1:t,x2:t,y:n,fill:s,fillOpacity:a,...f})),re(c)?null:uc(e,_r({x:hc(f)},{x:t,y:n,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function u9(e,{x:t,y:n=W,k:r=sa.k,color:i=sa.color,opacity:o=sa.opacity,fill:s=i,fillOpacity:a=o,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return tn(re(s)?null:oa(e,_r({y1:hc({k:-r,...f}),y2:hc({k:r,...f})},{x:t,y1:n,y2:n,fill:s,fillOpacity:a,...f})),re(c)?null:fc(e,_r({y:hc(f)},{x:t,y:n,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function hc({n:e=sa.n,k:t=0,strict:n=sa.strict,anchor:r=sa.anchor}={}){return ch({k:e,reduce:i=>Es(i)+t*(li(i)||0),strict:n,anchor:r})}var Itt={ariaLabel:"tick",fill:null,stroke:"currentColor"},yv=class extends St{constructor(t,n,r){super(t,n,r,Itt),Wi(this,r)}render(t,n,r,i,o){return ut("svg:g",o).call(Ct,this,i,o).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("line").call(Lt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Qt,this,r).call(ra,this,r,o)).node()}},Sy=class extends yv{constructor(t,n={}){let{x:r,y:i,inset:o=0,insetTop:s=o,insetBottom:a=o}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Bt(s),this.insetBottom=Bt(a)}_transform(t,n,{x:r}){t.call(Et,n,{x:r},Ce,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){let{insetTop:i}=this;return n&&t?o=>n[o]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){let{insetBottom:o}=this;return n&&t?s=>n[s]+t.bandwidth()-o:r-i-o}},Iy=class extends yv{constructor(t,n={}){let{x:r,y:i,inset:o=0,insetRight:s=o,insetLeft:a=o}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Bt(s),this.insetLeft=Bt(a)}_transform(t,n,{y:r}){t.call(Et,n,{y:r},0,Ce)}_x1({x:t},{x:n},{marginLeft:r}){let{insetLeft:i}=this;return n&&t?o=>n[o]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){let{insetRight:o}=this;return n&&t?s=>n[s]+t.bandwidth()-o:r-i-o}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}};function gv(e,{x:t=W,...n}={}){return new Sy(e,{...n,x:t})}function xv(e,{y:t=W,...n}={}){return new Iy(e,{...n,y:t})}function f9(e,{x:t=W,y:n=null,fill:r="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:s,strokeWidth:a=2,sort:c,...l}={}){let u=n!=null?tc:Hm;return tn(Xr(e,u({x1:u3,x2:f3},{x:t,y:n,stroke:o,strokeOpacity:s,...l})),Jo(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:r,fillOpacity:i,...l})),gv(e,u({x:"p50"},{x:t,y:n,stroke:o,strokeOpacity:s,strokeWidth:a,sort:c,...l})),_i(e,_r({x:d9},{x:t,y:n,z:n,stroke:o,strokeOpacity:s,...l})))}function h9(e,{y:t=W,x:n=null,fill:r="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:s,strokeWidth:a=2,sort:c,...l}={}){let u=n!=null?Ka:Hm;return tn(Yr(e,u({y1:u3,y2:f3},{x:n,y:t,stroke:o,strokeOpacity:s,...l})),Qo(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:r,fillOpacity:i,...l})),xv(e,u({y:"p50"},{x:n,y:t,stroke:o,strokeOpacity:s,strokeWidth:a,sort:c,...l})),_i(e,_r({y:d9},{x:n,y:t,z:n,stroke:o,strokeOpacity:s,...l})))}function d9(e){let t=u3(e),n=f3(e);return e.map(r=>r<t||r>n?r:NaN)}function u3(e){let t=p9(e)*2.5-m9(e)*1.5;return ue(e,n=>n>=t?n:NaN)}function f3(e){let t=m9(e)*2.5-p9(e)*1.5;return Ht(e,n=>n<=t?n:NaN)}function p9(e){return Kn(e,.25)}function m9(e){return Kn(e,.75)}var Mtt={ariaLabel:"raster",stroke:null,pixelSize:1};function lh(e,t){let n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function y9(e,t){let n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}var Ay=class extends St{constructor(t,n,r={},i){let{width:o,height:s,x:a,y:c,x1:l=a==null?0:void 0,y1:u=c==null?0:void 0,x2:f=a==null?o:void 0,y2:h=c==null?s:void 0,pixelSize:d=i.pixelSize,blur:p=0,interpolate:m}=r;if(o!=null&&(o=y9(o,"width")),s!=null&&(s=y9(s,"height")),l!=null&&(l=lh(l,"x1")),u!=null&&(u=lh(u,"y1")),f!=null&&(f=lh(f,"x2")),h!=null&&(h=lh(h,"y2")),a==null&&(l==null||f==null))throw new Error("missing x");if(c==null&&(u==null||h==null))throw new Error("missing y");t!=null&&o!=null&&s!=null&&(a===void 0&&l!=null&&f!=null&&(a=Ltt(l,f,o,s)),c===void 0&&u!=null&&h!=null&&(c=Ctt(u,h,o,s))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:c,scale:"y",optional:!0},x1:{value:l==null?null:[l],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},r,i),this.width=o,this.height=s,this.pixelSize=lh(d,"pixelSize"),this.blur=lh(p,"blur"),this.interpolate=a==null||c==null?null:Att(m)}},Ty=class extends Ay{constructor(t,n={}){let{imageRendering:r}=n;if(t==null){let{fill:i,fillOpacity:o}=n;se(o)[0]!==void 0&&(n=bv("fillOpacity",n)),Be(i)[0]!==void 0&&(n=bv("fill",n))}super(t,void 0,n,Mtt),this.imageRendering=fe(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,o){let s=n[r.channels.fill?.scale]??(T=>T),{x:a,y:c}=r,{document:l}=o,[u,f,h,d]=x9(r,i,o),p=h-u,m=d-f,{pixelSize:y,width:g=Math.round(Math.abs(p)/y),height:x=Math.round(Math.abs(m)/y)}=this,b=g*x,{fill:w,fillOpacity:_}=r,v=0;if(this.interpolate){let T=g/p,N=x/m,F=Wt(a,k=>(k-u)*T,Float64Array),R=Wt(c,k=>(k-f)*N,Float64Array);w&&(w=this.interpolate(t,g,x,F,R,w)),_&&(_=this.interpolate(t,g,x,F,R,_))}else this.data==null&&t&&(v=t.fi*b);let M=l.createElement("canvas");M.width=g,M.height=x;let E=M.getContext("2d"),I=E.createImageData(g,x),D=I.data,{r:A,g:O,b:C}=rn(this.fill)??{r:0,g:0,b:0},S=(this.fillOpacity??1)*255;for(let T=0;T<b;++T){let N=T<<2;if(w){let F=s(w[T+v]);if(F==null){D[N+3]=0;continue}({r:A,g:O,b:C}=rn(F))}_&&(S=_[T+v]*255),D[N+0]=A,D[N+1]=O,D[N+2]=C,D[N+3]=S}return this.blur>0&&zS(I,this.blur),E.putImageData(I,0,0),ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(T=>T.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(ft,"image-rendering",this.imageRendering).call(Lt,this).attr("xlink:href",M.toDataURL())).node()}};function h3(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:o,...s}=n;return r===void 0&&i===void 0&&GF(t)&&(r=Il,i=Ga,o===void 0&&(o=jF)),[t,{...s,x:r,y:i,[e]:o}]}function g9(){let[e,t]=h3("fill",...arguments);return new Ty(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:W})}function x9({x1:e,y1:t,x2:n,y2:r},i,{projection:o}){let{width:s,height:a,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f}=i;return[e&&o==null?e[0]:f,t&&o==null?t[0]:c,n&&o==null?n[0]:s-l,r&&o==null?r[0]:a-u]}function d3({x1:e,y1:t,x2:n,y2:r},i,o,s){let a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),x9(Lf(a,i),o,s)}function bv(e,t={}){let{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return Ie({...t,[e]:void 0},function(r,i,o,s,a,c){let{x:l,y:u}=s;if(!l)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");let[f,h,d,p]=d3(o,s,a,c),m=d-f,y=p-h,{pixelSize:g}=this,{width:x=Math.round(Math.abs(m)/g),height:b=Math.round(Math.abs(y)/g)}=t,w=new Array(x*b*(i?i.length:1)),_=m/x,v=y/b,M=0;for(let E of i??[void 0])for(let I=.5;I<b;++I)for(let D=.5;D<x;++D,++M)w[M]=n(l.invert(f+D*_),u.invert(h+I*v),E);return{data:w,facets:i,channels:{[e]:{value:w,scale:"auto"}}}})}function Att(e){if(typeof e=="function")return e;if(e==null)return wv;switch(`${e}`.toLowerCase()){case"none":return wv;case"nearest":return Ny;case"barycentric":return Ey();case"random-walk":return Dy()}throw new Error(`invalid interpolate: ${e}`)}function wv(e,t,n,r,i,o){let s=new Array(t*n);for(let a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(s[Math.floor(i[a])*t+Math.floor(r[a])]=o[a]);return s}function Ey({random:e=fl(42)}={}){return(t,n,r,i,o,s)=>{let{points:a,triangles:c,hull:l}=di.from(t,d=>i[d],d=>o[d]),u=new s.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),h=Btt(s,e);for(let d=0;d<c.length;d+=3){let p=c[d],m=c[d+1],y=c[d+2],g=a[2*p],x=a[2*m],b=a[2*y],w=a[2*p+1],_=a[2*m+1],v=a[2*y+1],M=Math.min(g,x,b),E=Math.max(g,x,b),I=Math.min(w,_,v),D=Math.max(w,_,v),A=(_-v)*(g-b)+(w-v)*(b-x);if(!A)continue;let O=s[t[p]],C=s[t[m]],S=s[t[y]];for(let T=Math.floor(M);T<E;++T)for(let N=Math.floor(I);N<D;++N){if(T<0||T>=n||N<0||N>=r)continue;let F=T+.5,R=N+.5,k=((_-v)*(F-b)+(R-v)*(b-x))/A;if(k<0)continue;let $=((v-w)*(F-b)+(R-v)*(g-b))/A;if($<0)continue;let P=1-k-$;if(P<0)continue;let U=T+n*N;u[U]=h(O,k,C,$,S,P,T,N),f[U]=1}}return Ttt(u,f,i,o,s,n,r,l,t,h),u}}function Ttt(e,t,n,r,i,o,s,a,c,l){n=Float64Array.from(a,d=>n[c[d]]),r=Float64Array.from(a,d=>r[c[d]]),i=Array.from(a,d=>i[c[d]]);let u=n.length,f=Array.from({length:u},(d,p)=>Ntt(p,n,r)),h=0;for(let d=0;d<s;++d){let p=d+.5;for(let m=0;m<o;++m){let y=m+o*d;if(!t[y]){let g=m+.5;for(let x=0;x<u;++x){let b=(u+h+(x%2?(x+1)/2:-x/2))%u;if(f[b](g,p)){let w=Ett(n.at(b-1),r.at(b-1),n[b],r[b],g,p);e[y]=l(i.at(b-1),w,i[b],1-w,i[b],0,m,d),h=b;break}}}}}}function Ett(e,t,n,r,i,o){let s=n-e,a=r-t,c=s*(n-i)+a*(r-o),l=s*(i-e)+a*(o-t);return c>0&&l>0?c/(c+l):+(c>l)}function My(e,t,n,r){return e*r-n*t}function Ntt(e,t,n){let r=t.length,i=t.at(e-2),o=n.at(e-2),s=t.at(e-1),a=n.at(e-1),c=t[e],l=n[e],u=t.at(e+1-r),f=n.at(e+1-r),h=s-c,d=a-l,p=i-s,m=o-a,y=c-u,g=l-f,x=Math.hypot(h,d),b=Math.hypot(p,m),w=Math.hypot(y,g);return(_,v)=>{let M=_-s,E=v-a,I=_-c,D=v-l;return My(M,E,I,D)>-1e-6&&My(M,E,h,d)*b-My(M,E,p,m)*x>-1e-6&&My(I,D,y,g)*x-My(I,D,h,d)*w<=0}}function Ny(e,t,n,r,i,o){let s=new o.constructor(t*n),a=di.from(e,u=>r[u],u=>i[u]),c,l;for(let u=.5,f=0;u<n;++u){l=c;for(let h=.5;h<t;++h,++f)l=a.find(h,u,l),h===.5&&(c=l),s[f]=o[e[l]]}return s}function Dy({random:e=fl(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,o,s,a,c)=>{let l=new c.constructor(i*o),u=di.from(r,p=>s[p],p=>a[p]),f,h,d;for(let p=.5,m=0;p<o;++p){h=f;for(let y=.5;y<i;++y,++m){let g=y,x=p;d=h=u.find(g,x,h),y===.5&&(f=h);let b,w=0;for(;(b=Math.hypot(s[r[d]]-g,a[r[d]]-x))>t&&w<n;){let _=e(y,p,w)*2*Math.PI;g+=Math.cos(_)*b,x+=Math.sin(_)*b,d=u.find(g,x,d),++w}l[m]=c[r[d]]}}return l}}function Dtt(e,t,n,r,i,o){return t*e+r*n+o*i}function Ott(e){return(t,n,r,i,o,s,a,c)=>{let l=e(a,c);return l<n?t:l<n+i?r:o}}function Btt(e,t){return Js(e)||Le(e)?Dtt:Ott(t)}function Ltt(e,t,n){return{transform(r){let i=r.length,o=new Float64Array(i),s=(t-e)/n,a=e+s/2;for(let c=0;c<i;++c)o[c]=c%n*s+a;return o}}}function Ctt(e,t,n,r){return{transform(i){let o=i.length,s=new Float64Array(o),a=(t-e)/r,c=e+a/2;for(let l=0;l<o;++l)s[l]=Math.floor(l/n)%r*a+c;return s}}}var b9={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2},Oy=class extends Ay{constructor(t,{smooth:n=!0,value:r,...i}={}){let o=Ow({},i,b9);if(r===void 0){for(let a in o)if(o[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){let a={transform:c=>c.map(l=>l.value),label:Bn(r)};for(let c in o)i[c]==="value"&&(i[c]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=bv("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=W),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},ktt(i),b9);let s={geometry:{value:W}};for(let a in this.channels){let c=this.channels[a],{scale:l}=c;l==="x"||l==="y"||a==="value"||(s[a]=c,delete this.channels[a])}this.contourChannels=s,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...o},s){return super.filter(t,o,s)}render(t,n,r,i,o){let{geometry:s}=r,a=Nn();return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(c=>{c.selectAll().data(t).enter().append("path").call(Lt,this).attr("d",l=>a(s[l])).call(Qt,this,r)}).node()}};function ktt({thresholds:e,interval:t,...n}){return e=r3(e,t,Ea),Ie(n,function(r,i,o,s,a,c){let[l,u,f,h]=d3(o,s,a,c),d=f-l,p=h-u,{pixelSize:m,width:y=Math.round(Math.abs(d)/m),height:g=Math.round(Math.abs(p)/m)}=this,x=y/d,b=g/p,w=o.value.value,_=[];if(this.interpolate){let{x:D,y:A}=nc(o,s,c),O=Wt(D,N=>(N-l)*x,Float64Array),C=Wt(A,N=>(N-u)*b,Float64Array),S=[o.x,o.y,o.value],T=[O,C,w];for(let N of i){let F=this.filter(N,S,T);_.push(this.interpolate(F,y,g,O,C,w))}}else if(i){let D=y*g,A=i.length;for(let O=0;O<A;++O)_.push(w.slice(O*D,O*D+D))}else _.push(w);if(this.blur>0)for(let D of _)ap({data:D,width:y,height:g},this.blur);let v=Ftt(e,w,...Rtt(_));if(v===null)throw new Error(`unsupported thresholds: ${e}`);let{contour:M}=ka().size([y,g]).smooth(this.smooth),E=[],I=[];for(let D of _)I.push(Ue(E.length,E.push(...Wt(v,A=>M(D,A)))));for(let{coordinates:D}of E)for(let A of D)for(let O of A)for(let C of O)C[0]=C[0]/x+l,C[1]=C[1]/b+u;return{data:E,facets:I,channels:vw(this.contourChannels,E)}})}function Ftt(e,t,n,r){if(typeof e?.range=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return je(e);let i=An(...Du(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function v9(){return new Oy(...h3("value",...arguments))}function Rtt(e){return[ue(e,t=>ue(t,w9)),Ht(e,t=>Ht(t,w9))]}function w9(e){return isFinite(e)?e:NaN}function I9(e,t){return p3(qf,e,t)}function M9(e,t={}){return p3(jf,e,t)}function A9(e,t={}){return p3(Dl,e,t)}function p3(e,t,n={}){let{x:r,y:i,maxRadius:o}=n,s=e({px:r,py:i,maxRadius:o}),a=[];r!=null&&a.push(Yr(t,_9("x",{...s,inset:-6},n))),i!=null&&a.push(Xr(t,_9("y",{...s,inset:-6},n))),r!=null&&a.push(Go(t,S9("x",{...s,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Go(t,S9("y",{...s,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(let c of a)c.ariaLabel=`crosshair ${c.ariaLabel}`;return tn(...a)}function T9(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:o,fy:s,[e]:a,channels:c,transform:l,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:o,fy:s,[e]:a,channels:{...t,...c},transform:l,initializer:$tt(e,u)}}function $tt(e,t){return t==null?t:function(n,r,{x:i,y:o,px:s,py:a,...c},...l){let{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,r,{...c,x:s,y:a},...l);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function _9(e,t,n){let{color:r="currentColor",opacity:i=.2,ruleStroke:o=r,ruleStrokeOpacity:s=i,ruleStrokeWidth:a}=n;return{...T9(e,t,n),stroke:o,strokeOpacity:s,strokeWidth:a}}function S9(e,t,n){let{color:r="currentColor",textFill:i=r,textFillOpacity:o,textStroke:s="var(--plot-background)",textStrokeOpacity:a,textStrokeWidth:c=5}=n;return{...T9(e,t,Ptt(e,n)),fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:c}}function Ptt(e,t){return Ie(t,(n,r,i)=>({channels:{text:{value:Qm(i,e)?.value}}}))}var Utt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},ztt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},qtt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},jtt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Vtt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},m3=class extends St{constructor(t,n={}){let{x:r,y:i,z:o,curve:s,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},n,Utt),this.curve=dy(s,a),Wi(this,n)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,z:u}=r,{curve:f}=this,[h,d]=bn(this,i),p=c?x=>c[x]:pn(h),m=l?x=>l[x]:pn(d),y=this;function g(x){let b=-1,w=[],_={};for(let S in r)_[S]=[];let v=[],M=[],E=[],I=[];function D(S,T){S=x[S],T=x[T],w.push(++b),v[b]=p(S),E[b]=m(S),M[b]=p(T),I[b]=m(T);for(let N in r)_[N].push(r[N][T])}let{halfedges:A,hull:O,triangles:C}=di.from(x,p,m);for(let S=0;S<A.length;++S){let T=A[S];T>S&&D(C[S],C[T])}for(let S=0;S<O.length;++S)D(O[S],O[(S+1)%O.length]);Vt(this).selectAll().data(w).enter().append("path").call(Lt,y).attr("d",S=>{let T=nr(),N=f(T);return N.lineStart(),N.point(v[S],E[S]),N.point(M[S],I[S]),N.lineEnd(),T}).call(Qt,y,_).call(ra,y,_,o)}return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(u?x=>x.selectAll().data(ln(t,b=>u[b]).values()).enter().append("g").each(g):x=>x.datum(t).each(g)).node()}},By=class extends St{constructor(t,n={},r,i=({z:o})=>o){let{x:o,y:s}=n;super(t,{x:{value:o,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,z:u}=r,[f,h]=bn(this,i),d=c?g=>c[g]:pn(f),p=l?g=>l[g]:pn(h),m=this;function y(g){let x=di.from(g,d,p);Vt(this).append("path").datum(g[0]).call(Lt,m).attr("d",m._render(x,i)).call(Qt,m,r)}return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(u?g=>g.selectAll().data(ln(t,x=>u[x]).values()).enter().append("g").each(y):g=>g.datum(t).each(y)).node()}},y3=class extends By{constructor(t,n={}){super(t,n,ztt),this.fill="none"}_render(t){return t.render()}},g3=class extends By{constructor(t,n={}){super(t,n,qtt,jn)}_render(t){return t.renderHull()}},x3=class extends St{constructor(t,n={}){let{x:r,y:i,z:o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},n,jtt)}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,z:u}=r,[f,h]=bn(this,i),d=c?g=>c[g]:pn(f),p=l?g=>l[g]:pn(h),m=this;function y(g){let x=di.from(g,d,p),b=E9(x,i);Vt(this).selectAll().data(g).enter().append("path").call(Lt,m).attr("d",(w,_)=>b.renderCell(_)).call(Qt,m,r)}return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(u?g=>g.selectAll().data(ln(t,x=>u[x]).values()).enter().append("g").each(y):g=>g.datum(t).each(y)).node()}},b3=class extends By{constructor(t,n){super(t,n,Vtt),this.fill="none"}_render(t,n){return E9(t,n).render()}};function E9(e,t){let{width:n,height:r,marginTop:i,marginRight:o,marginBottom:s,marginLeft:a}=t;return e.voronoi([a,i,n-o,r-s])}function Ly(e,t,{x:n,y:r,...i}={}){return[n,r]=Pe(n,r),new e(t,{...i,x:n,y:r})}function N9(e,t){return Ly(m3,e,t)}function D9(e,t){return Ly(y3,e,t)}function O9(e,t){return Ly(g3,e,t)}function B9(e,t){return Ly(x3,e,t)}function L9(e,t){return Ly(b3,e,t)}var Ytt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Cy=class extends St{constructor(t,{x:n,y:r,z:i,weight:o,fill:s,stroke:a,...c}={}){let l=C9(s)&&(s="currentColor",!0),u=C9(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:jn({z:i,fill:s,stroke:a}),optional:!0},weight:{value:o,optional:!0}},Wtt({...c,fill:s,stroke:a},l,u),Ytt),l&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,o){let{contours:s}=r,a=Nn();return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{}).call(c=>c.selectAll().data(t).enter().append("path").call(Lt,this).call(Qt,this,r).attr("d",l=>a(s[l]))).node()}};function k9(e,{x:t,y:n,...r}={}){return[t,n]=Pe(t,n),new Cy(e,{...r,x:t,y:n})}var Xtt=new Set(["x","y","z","weight"]);function Wtt(e,t,n){let{bandwidth:i,thresholds:o}=e;return i=i===void 0?20:+i,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?Ke(o):+o,Ie(e,function(s,a,c,l,u,f){let h=c.weight?Ke(c.weight.value):null,d=c.z?.value,{z:p}=this,[m,y]=bn(this,u),{width:g,height:x}=u,{x:b,y:w}=nc(c,l,f),_=Object.fromEntries(Object.entries(c).filter(([C])=>!Xtt.has(C)).map(([C,S])=>[C,{...S,value:[]}])),v=t&&[],M=n&&[],E=NI().x(b?C=>b[C]:m).y(w?C=>w[C]:y).weight(h?C=>h[C]:1).size([g,x]).bandwidth(i),I=[];for(let C of a){let S=[];I.push(S);for(let T of d?ry(C,d,p):[C]){let N=E.contours(T);S.push([T,N])}}let D=o;if(!(D instanceof Sl)){let C=0;for(let S of I)for(let[,T]of S){let N=T.max;N>C&&(C=N)}D=Float64Array.from({length:o-1},(S,T)=>C*100*(T+1)/o)}let A=[],O=[];for(let C of I){let S=[];A.push(S);for(let[T,N]of C)for(let F of D){S.push(O.length),O.push(N(F/100)),v&&v.push(F),M&&M.push(F);for(let R in _)_[R].value.push(c[R].value[T[0]])}}return v&&v.push(0),M&&M.push(0),{data:s,facets:A,channels:{..._,...v&&{fill:{value:v,scale:"color"}},...M&&{stroke:{value:M,scale:"color"}},contours:{value:O}}}})}function C9(e){return/^density$/i.test(e)}function $9(e,{x1:t,x2:n,y1:r,y2:i,x:o=t===void 0&&n===void 0?Ee:void 0,y:s=r===void 0&&i===void 0?W:void 0,fill:a,positiveFill:c="#3ca951",negativeFill:l="#4269d0",fillOpacity:u=1,positiveFillOpacity:f=u,negativeFillOpacity:h=u,stroke:d,strokeOpacity:p,z:m=Be(d)[0],clip:y,tip:g,render:x,...b}={}){return[t,n]=F9(o,t,n),[r,i]=F9(s,r,i),t===n&&r===i&&(r=dc(0)),{tip:g}=Xi({tip:g},"x"),tn(re(c)?null:Object.assign(py(e,{x1:t,x2:n,y1:r,y2:i,z:m,fill:c,fillOpacity:f,render:zf(x,R9(!0)),clip:y,...b}),{ariaLabel:"positive difference"}),re(l)?null:Object.assign(py(e,{x1:t,x2:n,y1:r,y2:i,z:m,fill:l,fillOpacity:h,render:zf(x,R9(!1)),clip:y,...b}),{ariaLabel:"negative difference"}),zl(e,{x:n,y:i,z:m,stroke:d,strokeOpacity:p,tip:g,clip:!0,...b}))}function F9(e,t,n){return t===void 0&&n===void 0?t=n=dc(e):t===void 0?(n=dc(n),t=e===void 0?n:dc(e)):n===void 0?(t=dc(t),n=e===void 0?t:dc(e)):(t=dc(t),n=dc(n)),[t,n]}function dc(e){let t,{value:n,label:r=Bn(n)}=wi(e);return{transform:i=>t||(t=wt(i,n)),label:r}}function R9(e){return(t,n,r,i,o,s)=>{let{x1:a,x2:c}=r,{height:l}=i,u=new Float32Array(a.length),f=new Float32Array(c.length);(e===Aw(n.y)<0?u:f).fill(l);let h=s(t,n,{...r,x2:a,y2:f},i,o),d=s(t,n,{...r,x1:c,y1:u},i,o),p=h.querySelector("g")??h,m=d.querySelector("g")??d;for(let y=0;p.firstChild;y+=2){let g=Dw(),x=ut("svg:clipPath",o).attr("id",g).node();x.appendChild(p.firstChild),m.childNodes[y].setAttribute("clip-path",`url(#${g})`),m.insertBefore(x,m.childNodes[y])}return d}}var Gtt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},ky=class extends St{constructor(t,n={}){let[r,i]=se(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:r,scale:"r",filter:ar,optional:!0}},wy(n),Gtt),this.r=i}render(t,n,r,i,o){let{geometry:s,r:a}=r,c=Nn(o.projection??Htt(n)),{r:l}=this;return ja(l)?t=[]:l!==void 0&&c.pointRadius(l),ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(Lt,this).attr("d",a?f=>c.pointRadius(a[f])(s[f]):f=>c(s[f])).call(Qt,this,r)}).node()}};function Htt({x:e,y:t}){if(e||t)return e??=n=>n,t??=n=>n,ll({point(n,r){this.stream.point(e(n),t(r))}})}function vv(e,{geometry:t=W,...n}={}){switch(e?.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new ky(e,{geometry:t,...n})}function P9({strokeWidth:e=1.5,...t}={}){return vv({type:"Sphere"},{strokeWidth:e,...t})}function U9({strokeOpacity:e=.1,...t}={}){return vv(JI(),{strokeOpacity:e,...t})}var uh=.5,fh=0;function z9(e={fill:"count"},{binWidth:t,...n}={}){let{z:r}=n;return t=t===void 0?20:Bt(t),e=hT(e,n),Xo(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Xo(e,"r")&&(n.r=t/2),Ie(n,(i,o,s,a,c,l)=>{let{x:u,y:f,z:h,fill:d,stroke:p,symbol:m}=s;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=nc(s,a,l)),h=h?h.value:wt(i,r),d=d?.value,p=p?.value,m=m?.value;let y=Jm(e,{z:h,fill:d,stroke:p,symbol:m}),g=h&&[],x=d&&[],b=p&&[],w=m&&[],_=[],v=[],M=[],E=-1;for(let O of e)O.initialize(i);for(let O of o){let C=[];for(let S of e)S.scope("facet",O);for(let[S,T]of Qa(O,y))for(let{index:N,extent:F}of Ztt(i,T,u,f,t)){C.push(++E),v.push(F.x),M.push(F.y),h&&g.push(y===h?S:h[N[0]]),d&&x.push(y===d?S:d[N[0]]),p&&b.push(y===p?S:p[N[0]]),m&&w.push(y===m?S:m[N[0]]);for(let R of e)R.reduce(N,F)}_.push(C)}let I=s.x.scale,D=s.y.scale,A={x:{value:v,source:a[I]?{value:Wt(v,a[I].invert),scale:I}:null},y:{value:M,source:a[D]?{value:Wt(M,a[D].invert),scale:D}:null},...h&&{z:{value:g}},...d&&{fill:{value:x,scale:"auto"}},...p&&{stroke:{value:b,scale:"auto"}},...m&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:O,output:C})=>[O,{scale:"auto",label:C.label,radius:O==="r"?t/2:void 0,value:C.transform()}]))};return{data:i,facets:_,channels:A}})}function Ztt(e,t,n,r,i){let o=i*(1.5/nT),s=new Map;for(let a of t){let c=n[a],l=r[a];if(isNaN(c)||isNaN(l))continue;let u=Math.round(l=(l-fh)/o),f=Math.round(c=(c-uh)/i-(u&1)/2),h=l-u;if(Math.abs(h)*3>1){let m=c-f,y=f+(c<f?-1:1)/2,g=u+(l<u?-1:1),x=c-y,b=l-g;m*m+h*h>x*x+b*b&&(f=y+(u&1?1:-1)/2,u=g)}let d=`${f},${u}`,p=s.get(d);p===void 0&&(p={index:[],extent:{data:e,x:(f+(u&1)/2)*i+uh,y:u*o+fh}},s.set(d,p)),p.index.push(a)}return s.values()}var Jtt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function q9(e){return new Fy(e)}var Fy=class extends St{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Wa,void 0,{clip:n,...r},Jtt),this.binWidth=Bt(t)}render(t,n,r,i,o){let{binWidth:s}=this,{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u,width:f,height:h}=i,d=u-uh,p=f-c-uh,m=a-fh,y=h-l-fh,g=s/2,x=g*rT,b=x/2,w=g*2,_=x*1.5,v=Math.floor(d/w),M=Math.ceil(p/w),E=Math.floor((m+b)/_),I=Math.ceil((y-b)/_)+1,D=`m0,${pc(-x)}l${pc(g)},${pc(b)}v${pc(x)}l${pc(-g)},${pc(b)}`,A=D;for(let O=E;O<I;++O)for(let C=v;C<M;++C)A+=`M${pc(C*w+(O&1)*g)},${pc(O*_)}${D}`;return ut("svg:g",o).datum(0).call(Ct,this,i,o).call(Et,this,{},Ce+uh,Ce+fh).call(O=>O.append("path").call(Lt,this).call(Qt,this,r).attr("d",A)).node()}};function pc(e){return Math.round(e*1e3)/1e3}var Qtt={ariaLabel:"image",fill:null,stroke:null};function Ktt(e){return/^\.*\//.test(e)}function tet(e){return/^(blob|data|file|http|https):/i.test(e)}function eet(e){return typeof e=="string"&&(Ktt(e)||tet(e))?[void 0,e]:[e,void 0]}var Ry=class extends St{constructor(t,n={}){let{x:r,y:i,r:o,width:s,height:a,rotate:c,src:l,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;o==null&&(o=void 0),o===void 0&&s===void 0&&a===void 0?s=a=16:s===void 0&&a!==void 0?s=a:a===void 0&&s!==void 0&&(a=s);let[p,m]=eet(l),[y,g]=se(o),[x,b]=se(s,g!==void 0?g*2:void 0),[w,_]=se(a,g!==void 0?g*2:void 0),[v,M]=se(c,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:y,scale:"r",filter:ar,optional:!0},width:{value:x,filter:ar,optional:!0},height:{value:w,filter:ar,optional:!0},rotate:{value:v,optional:!0},src:{value:p,optional:!0}},wy(n),Qtt),this.src=m,this.width=b,this.rotate=M,this.height=_,this.r=g,this.preserveAspectRatio=fe(u,"xMidYMid"),this.crossOrigin=qe(f),this.frameAnchor=Yo(h),this.imageRendering=fe(d,"auto")}render(t,n,r,i,o){let{x:s,y:a}=n,{x:c,y:l,width:u,height:f,r:h,rotate:d,src:p}=r,{r:m,width:y,height:g,rotate:x}=this,[b,w]=bn(this,i);return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,{x:c&&s,y:l&&a}).call(_=>_.selectAll().data(t).enter().append("image").call(Lt,this).attr("x",j9(c,u,h,b,y,m)).attr("y",j9(l,f,h,w,g,m)).attr("width",u?v=>u[v]:y!==void 0?y:h?v=>h[v]*2:m*2).attr("height",f?v=>f[v]:g!==void 0?g:h?v=>h[v]*2:m*2).attr("transform",d?v=>`rotate(${d[v]})`:x?`rotate(${x})`:null).attr("transform-origin",d||x?oc`${c?v=>c[v]:b}px ${l?v=>l[v]:w}px`:null).call(ft,"href",p?v=>p[v]:this.src).call(ft,"preserveAspectRatio",this.preserveAspectRatio).call(ft,"crossorigin",this.crossOrigin).call(ft,"image-rendering",this.imageRendering).call(ft,"clip-path",h?v=>`circle(${h[v]}px)`:m!==void 0?`circle(${m}px)`:null).call(Qt,this,r)).node()}};function j9(e,t,n,r,i,o){return t&&e?s=>e[s]-t[s]/2:t?s=>r-t[s]/2:e&&i!==void 0?s=>e[s]-i/2:i!==void 0?r-i/2:n&&e?s=>e[s]-n[s]:n?s=>r-n[s]:e?s=>e[s]-o:r-o}function V9(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Pe(t,n)),new Ry(e,{...r,x:t,y:n})}function net(e,t,n){var r=1e-8,i=t-1,o=n-1,s=0,a,c,l,u,f,h,d,p,m,y,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),p=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),y=d*Math.sqrt(p+m)/m-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*y))):(a=Math.log(t/(t+n)),c=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*c)/n,y=u+f,e<u/y?d=Math.pow(t*y*e,1/t):d=1-Math.pow(n*y*(1-e),1/n)),g=-hh(t)-hh(n)+hh(t+n);s<10;s++){if(d===0||d===1)return d;if(h=ret(d,t,n)-e,u=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<r*d&&s>0)break}return d}function ret(e,t,n){var r=e===0||e===1?0:Math.exp(hh(t+n)-hh(t)-hh(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*Y9(e,t,n)/t:1-r*Y9(1-e,n,t)/n}function Y9(e,t,n){var r=1e-30,i=1,o=t+n,s=t+1,a=t-1,c=1,l=1-o*e/s,u,f,h,d;for(Math.abs(l)<r&&(l=r),l=1/l,d=l;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,d*=l*c,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,h=l*c,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function hh(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)r+=n[t]/++o;return Math.log(2.506628274631*r/i)-s}function X9(e,t){var n=net(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}var iet={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},_v=class extends St{constructor(t,n={}){let{x:r,y:i,z:o,ci:s=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:jn(n),optional:!0}},n,iet),this.z=o,this.ci=+s,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${s}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,o){let{x:s,y:a,z:c}=r,{ci:l}=this;return ut("svg:g",o).call(Ct,this,i,o).call(Et,this,n).call(u=>u.selectAll().data(c?ry(t,c,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Lt,this).call(Nl,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,s,a)).call(l&&!Qs(this.fill)?h=>h.select(oet).attr("stroke","none").call(Lt,this).call(Nl,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,s,a)):()=>{}))).node()}};function oet(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(ui.svg,"path"),this)}var w3=class extends _v{constructor(t,n){super(t,n)}_renderBand(t,n,r){let{ci:i,precision:o}=this,[s,a]=le(t,u=>r[u]),c=Sv(t,r,n),l=H9(t,r,n,(1-i)/2,c);return pf().y(u=>u).x0(u=>l(u,-1)).x1(u=>l(u,1))(Ue(s,a-o/2,o).concat(a))}_renderLine(t,n,r){let[i,o]=le(t,a=>r[a]),s=Sv(t,r,n);return`M${s(i)},${i}L${s(o)},${o}`}},v3=class extends _v{constructor(t,n){super(t,n)}_renderBand(t,n,r){let{ci:i,precision:o}=this,[s,a]=le(t,u=>n[u]),c=Sv(t,n,r),l=H9(t,n,r,(1-i)/2,c);return pf().x(u=>u).y0(u=>l(u,-1)).y1(u=>l(u,1))(Ue(s,a-o/2,o).concat(a))}_renderLine(t,n,r){let[i,o]=le(t,a=>n[a]),s=Sv(t,n,r);return`M${i},${s(i)}L${o},${s(o)}`}};function W9(e,{y:t=Ee,x:n=W,stroke:r,fill:i=re(r)?"currentColor":r,...o}={}){return new w3(e,Hf({...o,x:n,y:t,fill:i,stroke:r}))}function G9(e,{x:t=Ee,y:n=W,stroke:r,fill:i=re(r)?"currentColor":r,...o}={}){return new v3(e,Gf({...o,x:t,y:n,fill:i,stroke:r}))}function Sv(e,t,n){let r=0,i=0,o=0,s=0;for(let u of e){let f=t[u],h=n[u];r+=f,i+=h,o+=f*h,s+=f*f}let a=e.length,c=(a*o-r*i)/(a*s-r*r),l=(i-c*r)/a;return u=>c*u+l}function H9(e,t,n,r,i){let o=Tn(e,u=>t[u])/e.length,s=0,a=0;for(let u of e)s+=(t[u]-o)**2,a+=(n[u]-i(t[u]))**2;let c=Math.sqrt(a/(e.length-2)),l=X9(r,e.length-2);return(u,f)=>{let h=i(u),d=c*Math.sqrt(1/e.length+(u-o)**2/s);return h+f*l*d}}function $y({path:e=W,delimiter:t,frameAnchor:n,treeLayout:r=ul,treeSort:i,treeSeparation:o,treeAnchor:s,treeFilter:a,...c}={}){s=Tv(s),i=Q9(i),a!=null&&(a=S3(a)),n===void 0&&(n=s.frameAnchor);let l=K9(t),u=sP(c,S3),[f,h]=yn(),[d,p]=yn();return{x:f,y:d,frameAnchor:n,...gn(c,(m,y)=>{let g=l(wt(m,e)),x=h([]),b=p([]),w=-1,_=[],v=[],M=vb().path(I=>g[I]),E=r();E.nodeSize&&E.nodeSize([1,1]),E.separation&&o!==void 0&&E.separation(o??Ym);for(let I of u)I[Mv]=I[iP]([]);for(let I of y){let D=[],A=M(I.filter(O=>g[O]!=null)).each(O=>O.data=m[O.data]);i!=null&&A.sort(i),E(A);for(let O of A.descendants())if(!(a!=null&&!a(O))){D.push(++w),_[w]=O.data,s.position(O,w,x,b);for(let C of u)C[Mv][w]=C[oP](O)}v.push(D)}return{data:_,facets:v}}),...Object.fromEntries(u)}}function Av({path:e=W,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:o=.5,treeLayout:s=ul,treeSort:a,treeSeparation:c,treeAnchor:l,treeFilter:u,...f}={}){l=Tv(l),a=Q9(a),u!=null&&(u=J9(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:o,...f};let h=K9(t),d=sP(f,J9),[p,m]=yn(),[y,g]=yn(),[x,b]=yn(),[w,_]=yn();return{x1:p,x2:y,y1:x,y2:w,...gn(f,(v,M)=>{let E=h(wt(v,e)),I=m([]),D=g([]),A=b([]),O=_([]),C=-1,S=[],T=[],N=vb().path(R=>E[R]),F=s();F.nodeSize&&F.nodeSize([1,1]),F.separation&&c!==void 0&&F.separation(c??Ym);for(let R of d)R[Mv]=R[iP]([]);for(let R of M){let k=[],$=N(R.filter(P=>E[P]!=null)).each(P=>P.data=v[P.data]);a!=null&&$.sort(a),F($);for(let{source:P,target:U}of $.links())if(!(u!=null&&!u(U,P))){k.push(++C),S[C]=U.data,l.position(P,C,I,A),l.position(U,C,D,O);for(let G of d)G[Mv][C]=G[oP](U,P)}T.push(k)}return{data:S,facets:T}}),...Object.fromEntries(d)}}function Tv(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return set;case"right":return aet}throw new Error(`invalid tree anchor: ${e}`)}var set={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},aet={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function Q9(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?Z9(S3(e)):Z9(cet(e))}function Z9(e){return(t,n)=>dn(e(t),e(n))}function cet(e){return t=>t.data?.[e]}function K9(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");let t=e.charCodeAt(0);return n=>n.map(r=>uet(r,t))}var _3=92,tP=47;function uet(e,t){if(t===_3)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case _3:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case tP:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function fet(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case _3:if(!t){t=!0;continue}case tP:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function eP(e){return mn(e)&&typeof e.node=="function"}function het(e){return mn(e)&&typeof e.link=="function"}function S3(e){if(eP(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return M3;case"node:path":return I3;case"node:internal":return nP;case"node:external":return rP;case"node:depth":return A3;case"node:height":return T3}throw new Error(`invalid node value: ${e}`)}}function J9(e){if(eP(e))return e.node;if(het(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Iv(M3);case"parent:path":return Iv(I3);case"parent:depth":return Iv(A3);case"parent:height":return Iv(T3);case"node:name":return M3;case"node:path":return I3;case"node:internal":return nP;case"node:external":return rP;case"node:depth":return A3;case"node:height":return T3}throw new Error(`invalid link value: ${e}`)}}function I3(e){return e.id}function M3(e){return det(e.id)}function A3(e){return e.depth}function T3(e){return e.height}function nP(e){return!!e.children}function rP(e){return!e.children}function Iv(e){return(t,n)=>n==null?void 0:e(n)}function det(e){let t=e.length;for(;--t>0&&!pet(e,t););return fet(e.slice(t+1))}function pet(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}var iP=2,oP=3,Mv=4;function sP(e,t){let n=[];for(let r in e){let i=e[r],o=t(i);o!==void 0&&n.push([r,...yn(i),o])}return n}function E3(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=re(f)&&re(h),text:p="node:name",textStroke:m="var(--plot-background)",title:y="node:path",dx:g,dy:x,textAnchor:b,treeLayout:w=ul,textLayout:_=w===ul||w===bb?"mirrored":"normal",tip:v,...M}={}){if(g===void 0&&(g=Tv(M.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");_=sn(_,"textLayout",["mirrored","normal"]);function E(I){return Go(e,$y({treeLayout:w,text:p,fill:t===void 0?"currentColor":t,stroke:m,dx:g,dy:x,title:y,...I,...M}))}return tn(fv(e,Av({treeLayout:w,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,...M})),d?_i(e,$y({treeLayout:w,fill:t===void 0?"node:internal":t,title:y,tip:v,...M})):null,p!=null?_==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-g})]:E():null)}function aP(e,t){return E3(e,{...t,treeLayout:bb})}function cP({geometry:e=W,...t}={}){return Ie({...t,x:null,y:null},(n,r,i,o,s,{projection:a})=>{let c=wt(n,e),l=c.length,u=new Float64Array(l),f=new Float64Array(l),h=Nn(a);for(let d=0;d<l;++d)[u[d],f[d]]=h.centroid(c[d]);return{data:n,facets:r,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function lP({geometry:e=W,...t}={}){let n;return{...t,x:{transform:r=>Float64Array.from(n=wt(wt(r,e),YI),([i])=>i)},y:{transform:()=>Float64Array.from(n,([,r])=>r)}}}var wP=wz(bP(),1);var _et=({marginLeft:e})=>[1,e],Iet=({width:e,marginRight:t})=>[-1,e-t],Met=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Aet=({marginTop:e})=>[1,e],Tet=({height:e,marginBottom:t})=>[-1,e-t],Eet=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function vP(e){return typeof e=="string"?{anchor:e}:e}function _P(e={},t={}){arguments.length===1&&([e,t]=IP(e));let{anchor:n="left",padding:r=1,r:i=t.r}=vP(e);switch(`${n}`.toLowerCase()){case"left":n=_et;break;case"right":n=Iet;break;case"middle":n=Met;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return MP("x","y",n,Bt(r),i,t)}function SP(e={},t={}){arguments.length===1&&([e,t]=IP(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=vP(e);switch(`${n}`.toLowerCase()){case"top":n=Aet;break;case"bottom":n=Tet;break;case"middle":n=Eet;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return MP("y","x",n,Bt(r),i,t)}function IP(e){let{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function MP(e,t,n,r,i,o){if(i!=null&&typeof i!="number"){let{channels:s,sort:a,reverse:c}=o;s=Wm(s),s?.r===void 0&&(o={...o,channels:{...s,r:{value:i,scale:"r"}}}),a===void 0&&c===void 0&&(o.sort={channel:"-r"})}return Ie(o,function(s,a,c,l,u,f){let{[t]:h,r:d}=c;if(!c[t])throw new Error(`missing channel: ${t}`);({[t]:h}=nc(c,l,f));let p=d?void 0:i!==void 0?Bt(i):this.r!==void 0?this.r:3;d&&(d=wt(d.value,l[d.scale]||W,Float64Array));let[m,y]=n(u),g=m?Det:Net,x=new Float64Array(h.length),b=d?w=>d[w]:()=>p;for(let w of a){let _=(0,wP.default)();w=w.filter(d?M=>bf(h[M])&&ar(d[M]):M=>bf(h[M]));let v=new Float64Array(2*w.length+2);for(let M of w){let E=b(M),I=m?E+r:0,D=h[M]-E,A=h[M]+E,O=2;_.queryInterval(D-r,A+r,([,,S])=>{let T=x[S]-I,N=h[M]-h[S],F=r+(d?d[M]+d[S]:2*p),R=Math.sqrt(F*F-N*N);v[O++]=T-R,v[O++]=T+R});let C=v.slice(0,O);m&&(C=C.filter(S=>S>=0));t:for(let S of C.sort(g)){for(let T=0;T<O;T+=2)if(v[T]+1e-6<S&&S<v[T+1]-1e-6)continue t;x[M]=S+I;break}_.insert([D,A,M])}}m||(m=1);for(let w of a)for(let _ of w)x[_]=x[_]*m+y;return{data:s,facets:a,channels:{[e]:{value:x,source:null},[t]:{value:h,source:c[t]},...d&&{r:{value:d,source:c.r}}}}})}function Net(e,t){return Math.abs(e)-Math.abs(t)}function Det(e,t){return e-t}function TP(e,t){return arguments.length===1&&({basis:e,...t}=e),sh(Dv(e),t)}function EP(e,t){return arguments.length===1&&({basis:e,...t}=e),ah(Dv(e),t)}function Dv(e){if(e===void 0)return AP;if(typeof e=="function")return Ov(Af(e));if(/^p\d{2}$/i.test(e))return yh(If(e));switch(`${e}`.toLowerCase()){case"deviation":return Let;case"first":return AP;case"last":return Bet;case"max":return Cet;case"mean":return ket;case"median":return Fet;case"min":return Ret;case"sum":return $et;case"extent":return Oet}throw new Error(`invalid basis: ${e}`)}function Ov(e){return{mapIndex(t,n,r){let i=+e(t,n);for(let o of t)r[o]=n[o]===null?NaN:n[o]/i}}}function yh(e){return Ov((t,n)=>e(t,r=>n[r]))}var Oet={mapIndex(e,t,n){let[r,i]=le(e,s=>t[s]),o=i-r;for(let s of e)n[s]=t[s]===null?NaN:(t[s]-r)/o}},AP=Ov((e,t)=>{for(let n=0;n<e.length;++n){let r=t[e[n]];if(ze(r))return r}}),Bet=Ov((e,t)=>{for(let n=e.length-1;n>=0;--n){let r=t[e[n]];if(ze(r))return r}}),Let={mapIndex(e,t,n){let r=Es(e,o=>t[o]),i=li(e,o=>t[o]);for(let o of e)n[o]=t[o]===null?NaN:i?(t[o]-r)/i:0}},Cet=yh(Ht),ket=yh(Es),Fet=yh(Ui),Ret=yh(ue),$et=yh(Tn);function NP(e,t){return Pet("x",e,t)}function Pet(e,t,n={}){let r,i=1;if(typeof t=="number")i=t,r=(l,u)=>+l+u;else{if(typeof t=="string"){let l=t.startsWith("-")?-1:1;[t,i]=cw(t.replace(/^[+-]/,"")),i*=l}t=Ef(t),r=(l,u)=>t.offset(l,u)}let o=`${e}1`,s=`${e}2`,a=_r({[o]:l=>l.map(u=>r(u,i)),[s]:l=>l},n),c=a[s].transform;return a[s].transform=()=>{let l=c(),[u,f]=le(l);return l.domain=i<0?[u,r(f,i)]:[r(u,i),f],l},a}function DP(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return C3(t);case"last":return k3(t)}if(typeof e=="function")return mc(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=Uet(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return mc(n,r,t)}function Uet(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return F3;case"max":return R3}throw new Error(`unknown selector: ${e}`)}function C3(e){return mc(null,zet,e)}function k3(e){return mc(null,qet,e)}function OP(e){return mc("x",F3,e)}function BP(e){return mc("y",F3,e)}function LP(e){return mc("x",R3,e)}function CP(e){return mc("y",R3,e)}function*zet(e){yield e[0]}function*qet(e){yield e[e.length-1]}function*F3(e,t){yield rx(e,n=>t[n])}function*R3(e,t){yield Wc(e,n=>t[n])}function mc(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}let r=jn(n);return gn(n,(i,o)=>{let s=wt(i,r),a=wt(i,e),c=[];for(let l of o){let u=[];for(let f of s?ln(l,h=>s[h]).values():[l])for(let h of t(f,a))u.push(h);c.push(u)}return{data:i,facets:c}})}var jet=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["xBase","x.base"],["xExponent","x.exponent"],["xConstant","x.constant"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["yBase","y.base"],["yExponent","y.exponent"],["yConstant","y.constant"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorN","color.n"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["colorBase","color.base"],["colorExponent","color.exponent"],["colorConstant","color.constant"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["opacityBase","opacity.base"],["opacityExponent","opacity.exponent"],["opacityConstant","opacity.constant"],["symbolScale","symbol.type"],["symbolDomain","symbol.domain"],["symbolRange","symbol.range"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["rBase","r.base"],["rExponent","r.exponent"],["rConstant","r.constant"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["lengthBase","length.base"],["lengthExponent","length.exponent"],["lengthConstant","length.constant"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]);function Vet(e,t,n){for(let r=0;r<t.length;++r){let i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}function kP(e,t,n){for(let r in e){let i=jet.get(r);if(i==null)throw new Error(`Unrecognized plot attribute: ${r}`);let o=e[r];typeof o=="symbol"?n.push(r):o!==void 0&&Vet(t,i.split("."),o)}}var Yet=new Set(["frame","hexgrid","sphere","graticule"]);async function RP(e){let t={marks:[]},n=[],{attributes:r,marks:i}=e;kP(r,t,n);let o=[];for(let a of i)for(let{type:c,data:l,options:u}of a.plotSpecs()){if(Yet.has(c))t.marks.push(zy[c](u));else if(np(l)){let f=Object.fromEntries(Object.entries(u).map(([h,d])=>{let p=d;if(typeof d=="string")p=l.getChild(d)??d;else if(typeof d=="object"){let m=l.getChild(d.value);p=m?{value:m}:d}return[h,p]}));t.marks.push(zy[c]({length:l.numRows},f))}else t.marks.push(zy[c](l,u));o.push(a.index)}Wet(t,e);let s=hy(t);Get(s,o),Xet(e,s,r,n);for(let a of e.interactors)await a.init(s);return s}function Xet(e,t,n,r){r.forEach(i=>{let o=n[i];if(o===vo){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);let s=i.slice(0,-6),a=t.scale(s);a?.domain&&e.setAttribute(i,n[`${s}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${o}`)})}function Wet(e,t){let{marks:n}=t;Bv("x",e,n),Bv("y",e,n),Bv("fx",e,n),Bv("fy",e,n)}function Bv(e,t,n){let r=t[e]||{};if(r.axis===null||r.label!==void 0)return;let i=n.map(l=>l.channelField(e)?.field);if(i.every(l=>l==null))return;let o,s,a;for(let l=0;l<i.length;++l){let{column:u,label:f}=i[l]||{};u===void 0&&f===void 0||(o===void 0&&s===void 0?(o=u,s=f,a=Het(n[l].data,e)||"number"):s!==f?s=void 0:o!==u&&(o=void 0))}let c=s||o;if(c!==void 0){if((a==="number"||a==="date")&&(e==="x"||e==="y")){r.percent&&(c=`${c} (%)`);let l=(e==="x"?1:-1)*(r.reverse?-1:1);e==="x"||r.labelAnchor==="center"?c=e==="x"==l<0?`\u2190 ${c}`:`${c} \u2192`:c=`${l<0?"\u2191 ":"\u2193 "}${c}`}t[e]={...r,label:c}}}function Get(e,t){let n=e.querySelectorAll('g[aria-label="facet"]');if(n.length)for(let r of n)FP(r,t);else FP(e,t)}function FP(e,t){let n=-1;for(let r of e.children){let i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}function Het(e,t){let{columns:n}=e,r=n[t]??n[t+"1"]??n[t+"2"];if(r){for(let i of r)if(i!=null)return i instanceof Date?"date":typeof i}}var Zet={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30},qy=class{constructor(t){this.attributes={...Zet},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=US()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){let{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(t=400){let{top:n,bottom:r}=this.margins(),i=this.getAttribute("height");return i==null&&t!=null&&(i=t,this.setAttribute("height",i,{silent:!0})),i-n-r}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;let t=await RP(this),n=this.legends.flatMap(({legend:r,include:i})=>{let o=r.init(t);return i?o:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){return ip(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r?.silent||this.listeners?.get(t)?.forEach(i=>i(t,n)),!0):!1}addAttributeListener(t,n){let r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){return this.listeners?.get(t)?.delete(n)}addParams(t,n){let{params:r}=this;for(let i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(o=>o.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}};function Lv(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Rr(e)!==null)}var Jet=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents","target"]);function $P(e){return Jet.has(e)}var Qet=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function PP(e){return Qet.has(`${e}`.toLowerCase())}function aa(e){return np(e)?Ket(e):tnt(e)}function Ket(e){let{numRows:t,numCols:n,schema:{fields:r}}=e,i={};for(let o=0;o<n;++o){let s=r[o].name;i[s]?console.warn(`Redundant column name "${s}". Skipping...`):i[s]=$S(e.getChildAt(o))}return{numRows:t,columns:i}}function tnt(e){let t=e.length;if(typeof e[0]=="object"){let n=t?Object.keys(e[0]):[],r={};return n.length>0&&n.forEach(i=>{r[i]=e.map(o=>o[i])}),{numRows:t,columns:r}}else return{numRows:t,values:e}}var UP=e=>e==="stroke"||e==="fill",ent=e=>/opacity$/i.test(e),nnt=e=>e==="symbol",rnt=(e,t)=>e!=="sort"&&e!=="tip"&&t!=null&&!Array.isArray(t),$3=(e,t)=>({channel:e,field:t,as:t instanceof br?t.column:e}),P3=(e,t)=>({channel:e,value:t}),Cv=e=>Array.isArray(e),Ln=class extends fr{constructor(t,n,r,i={}){super(n?.options?.filterBy),this.type=t,this.reqs=i,this.source=n,Cv(this.source)&&(this.data=aa(this.source));let o=this.channels=[],s=this.detail=new Set,a=this.params=new Set,c=(l,u)=>{let f=typeof u;if(l==="channels")for(let h in u)s.add(h),c(h,u[h]);else if(f==="function"&&u[op]){let h=u(this,l);for(let d in h)c(d,h[d])}else if(f==="string")$P(l)||UP(l)&&Lv(u)||nnt(l)&&PP(u)?o.push(P3(l,u)):o.push($3(l,Sa(u)));else if(xs(u))if(Array.isArray(u.columns))o.push($3(l,u)),a.add(u);else{let h=P3(l,u.value);o.push(h),u.addEventListener("value",d=>(h.value=d,this.update()))}else f==="object"&&rnt(l,u)?o.push($3(l,u)):u!==void 0&&o.push(P3(l,u))};for(let l in r)c(l,r[l])}setPlot(t,n){this.plot=t,this.index=n,t.addParams(this,this.params),this.source?.table&&this.queryPending()}hasOwnData(){return this.source==null||Cv(this.source)}hasFieldInfo(){return!!this._fieldInfo}channel(t){return this.channels.find(n=>n.channel===t)}channelField(t,{exact:n=!1}={}){let r=n?this.channel(t):this.channels.find(i=>i.channel.startsWith(t));return r?.field?r:null}fields(){if(this.hasOwnData())return null;let{source:{table:t},channels:n,reqs:r}=this,i=new Map;for(let{channel:o,field:s}of n){if(!s)continue;let a=s.stats?.stats||[],c=s.stats?.column??s,l=i.get(c)??i.set(c,new Set).get(c);a.forEach(u=>l.add(u)),r[o]?.forEach(u=>l.add(u))}return Array.from(i,([o,s])=>({table:t,column:o,stats:s}))}fieldInfo(t){let n=Object.fromEntries(t.map(r=>[r.column,r]));for(let r of this.channels){let{field:i}=r;i&&Object.assign(r,n[i.stats?.column??i])}return this._fieldInfo=!0,this}query(t=[]){if(this.hasOwnData())return null;let{channels:n,source:{table:r}}=this;return U3(n,r).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=aa(t),this}update(){return this.plot.update(this)}plotSpecs(){let{type:t,detail:n,channels:r}=this,{numRows:i,values:o,columns:s}=this.data||{},a={},c={};for(let f of r){let h=n.has(f.channel)?c:a;h[f.channel]=Yn(f,s)}n.size&&(a.channels=c);let l=o??(this.data?{length:i}:null);return[{type:t,data:l,options:a}]}};function Yn(e,t){let n=t?.[e.as]??e.as;return Object.hasOwn(e,"value")?e.value:UP(e.channel)?{value:n,scale:"color"}:ent(e.channel)?{value:n,scale:"opacity"}:n}function U3(e,t,n=[]){let r=dt.from({source:t}),i=new Set,o=!1;for(let s of e){let{channel:a,field:c,as:l}=s;if(!n.includes(a)){if(a==="orderby")r.orderby(s.value);else if(c){if(c.aggregate)o=!0;else{if(i.has(l))continue;i.add(l)}r.select({[l]:c})}}}return o&&r.groupby(Array.from(i)),r}function Vl(e,t){let{plot:n}=e,r=n.getAttribute(`${t}Scale`);if(!r){let{type:o}=e.channelField(t);r=o==="date"?"time":"linear"}let i={type:r};switch(r){case"log":i.base=n.getAttribute(`${t}Base`)??10;break;case"pow":i.exponent=n.getAttribute(`${t}Exponent`)??1;break;case"symlog":i.constant=n.getAttribute(`${t}Constant`)??1;break}return tp(i)}function Wr(e,t,n,r,i=1,o){let{field:s}=e.channelField(t);o=o??s;let{type:a,apply:c,sqlApply:l}=Vl(e,t),u=!!e.plot.getAttribute(`${t}Reverse`),[f,h]=r.map(x=>c(x)),d=l(o),p=a==="time"||a==="utc"?d:o,m=h===f?0:(n-i)/(h-f),y=m!==1?` * ${m}::DOUBLE`:"";return[u?q`(${h} - ${d}::DOUBLE)${y}`:q`(${d}::DOUBLE - ${f})${y}`,p]}var z3={x:["min","max"]},q3={y:["min","max"]},kv={...z3,...q3};function zP(e,t,n,r,i){let{plot:o}=e,s=o.getAttribute(r),a=o.getAttribute(i);if(Array.isArray(s)&&!s[In])return s;{let{column:c,min:l,max:u}=e.channelField(n),f=j3(t,c)||(a?$s().domain([l,u]).nice().domain():[l,u]);return s!==vo&&(f[In]=!0),o.setAttribute(r,f,{silent:!0}),f}}function Ko(e,t){return zP(e,t,"x","xDomain","xNice")}function ts(e,t){return zP(e,t,"y","yDomain","yNice")}function j3(e,t){if(!e)return;let n,r,i=(o,s)=>{if(o==="BETWEEN"&&`${s.field}`===t){let{range:a}=s;a&&(n==null||a[0]<n)&&(n=a[0]),a&&(r==null||a[1]>r)&&(r=a[1])}};return Array.isArray(e)?e.forEach(o=>o.visit?.(i)):e.visit&&e.visit(i),n!=null&&r!=null&&n!==r?[n,r]:void 0}var jy=class extends Ln{constructor(t,n,r){let i=t.endsWith("X")?"y":t.endsWith("Y")?"x":null,o=i?{[i]:["min","max"]}:void 0;super(t,n,r,o),this.dim=i}query(t=[]){let{plot:n,dim:r,source:i}=this,{optimize:o=!0}=i.options||{},s=super.query(t);if(!r)return s;let a=r==="x"?"y":"x",c=this.channelField(a,{exact:!0})?.as,{field:l,as:u,type:f,min:h,max:d}=this.channelField(r);if(o&&(f==="date"||f==="number")&&c){let m=r==="x"?n.innerWidth():n.innerHeight(),[y,g]=j3(t,l)||[h,d],[x]=Wr(this,r,m,[y,g],1,u),b=s.select().map(w=>w.as).filter(w=>w!==u&&w!==c);return int(s,x,u,c,b)}else return s.orderby(l)}};function int(e,t,n,r,i=[]){let o=q`FLOOR(${t})::INTEGER`,s=a=>dt.from(e).select(a).groupby(o,i);return dt.union(s([{[n]:si(n),[r]:Su(r,n)},...i]),s([{[n]:oi(n),[r]:Iu(r,n)},...i]),s([{[n]:Su(n,r),[r]:si(r)},...i]),s([{[n]:Iu(n,r),[r]:oi(r)},...i])).orderby(i,n)}function qP(e,t=[]){return new t.constructor(e)}function jP(e,t,n){let r=qP(e,n),i=n.length;for(let o=0;o<i;++o)r[t[o]]=n[o];return r}function VP(e,t,n,r,i,o,s){let a=n.length,c=e*t,l=i.map(d=>r[d]),u={},f=[],h=new Int32Array(a);if(o?.length){let d=o.map(m=>r[m]),p={};for(let m=0;m<a;++m){let y=d.map(g=>g[m]);h[m]=p[y]??=f.push(y)-1}for(let m=0;m<o.length;++m)u[o[m]]=f.map(y=>y[m])}else f.push([]);if(s){let d=n.map(y=>y%e),p=n.map(y=>Math.floor(y/e)),m=f.map(()=>[]);for(let y=0;y<a;++y)m[h[y]].push(y);i.forEach((y,g)=>{let x=l[g];u[y]=f.map((b,w)=>s(m[w],e,t,d,p,x))})}else i.forEach((d,p)=>{let m=l[p],y=u[d]=f.map(()=>qP(c,m));for(let g=0;g<a;++g)y[h[g]][n[g]]=m[g]});return{numRows:f.length,columns:u}}function Vy(e){let t=1/0,n=-1/0;return e.forEach(r=>{let i=r.length;for(let o=0;o<i;++o){let s=r[o];s<t&&(t=s),s>n&&(n=s)}}),Number.isFinite(t)&&Number.isFinite(n)?[t,n]:[0,1]}function YP(e){let t=new Qn;return e.forEach(n=>{let r=n.length;for(let i=0;i<r;++i)t.add(n[i])}),Array.from(t).sort(zt)}function an(e,t){return wr(e)?(e.addEventListener("value",t),e.value):e}function Yy(e,t=!1){let n=new Float64Array(5),r=new Float64Array(4);ont(n,r,e);let i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),o=1+n[1]+n[2]+n[3]+n[4],s=(r[0]+r[1]+r[2]+r[3])/o,a=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:s,sum_anticausal:a}}function ont(e,t,n){let i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),s=Math.exp(-1.723/n),a=.6318/n,c=1.997/n,l=Float64Array.of(-o*Math.cos(a),o*Math.sin(a),-o*Math.cos(-a),o*Math.sin(-a),-s*Math.cos(c),s*Math.sin(c),-s*Math.cos(-c),s*Math.sin(-c)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0),d,p;for(p=2;p<8;p+=2){for(f[p]=l[p]*f[p-2]-l[p+1]*f[p-1],f[p+1]=l[p]*f[p-1]+l[p+1]*f[p-2],d=p-2;d>0;d-=2)f[d]+=l[p]*f[d-2]-l[p+1]*f[d-1],f[d+1]+=l[p]*f[d-1]+l[p+1]*f[d-2];for(d=0;d<=p;d+=2)f[d]+=i[p]*h[d]-i[p+1]*h[d+1],f[d+1]+=i[p]*h[d+1]+i[p+1]*h[d];for(h[p+2]=l[p]*h[p]-l[p+1]*h[p+1],h[p+3]=l[p]*h[p+1]+l[p+1]*h[p],d=p;d>0;d-=2)h[d]+=l[p]*h[d-2]-l[p+1]*h[d-1],h[d+1]+=l[p]*h[d-1]+l[p+1]*h[d-2]}for(p=0;p<4;++p)d=p<<1,t[p]=f[d]/u,e[p+1]=h[d+2]}function XP(e,t,n,[r,i]){let o=new Float64Array(Math.max(r,i)),s=new Float64Array(Math.max(r,i)),a=new Float64Array(5),c=new Float64Array(n.length);for(let l=0,u=0;l<i;++l,u+=r){let f=c.subarray(u);Fv(e,n.subarray(u),r,1,o,s,a,f)}for(let l=0;l<r;++l){let u=c.subarray(l);Fv(t,u,i,r,o,s,a,u)}return c}function Fv(e,t,n,r=1,i=new Float64Array(n),o=new Float64Array(n),s=new Float64Array(5),a=i,c=snt){let l=r*2,u=r*3,f=r*4,h=r*n,d,p;for(c(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,s,e.sigma),p=4,d=f;p<n;++p,d+=r)i[p]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(c(o,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,s,e.sigma),p=4,d=h-r*5;p<n;++p,d-=r)o[p]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+u]+e.b_anticausal[4]*t[d+f]-e.a[1]*o[p-1]-e.a[2]*o[p-2]-e.a[3]*o[p-3]-e.a[4]*o[p-4];if(e.negative)for(p=0,d=0;p<n;++p,d+=r)a[d]=i[p]+o[n-p-1];else for(p=0,d=0;p<n;++p,d+=r)a[d]=Math.max(0,i[p]+o[n-p-1]);return a}function snt(e,t,n,r,i,o,s,a,c,l,u,f=.5){let h=Math.abs(r)*n,d=r<0?h+r:0,p,m,y;for(m=0;m<=a;++m)for(l[m]=m<=o?i[m]:0,y=1;y<=a&&y<=m;++y)l[m]-=s[y]*l[m-y];for(y=0;y<a;++y)for(e[y]=0,m=1;m<=y;++m)p=d+r*m,p>=0&&p<h&&(e[y]+=l[y-m]*t[p]);let g=t[d],x=Math.ceil(u*10);for(m=0;m<x;++m){for(y=0;y<a;++y)e[y]+=l[y]*g;if(c-=Math.abs(l[0]),c<=f)break;for(l[a]=m+a<=o?i[m+a]:0,y=1;y<=a;++y)l[a]-=s[y]*l[a-y];for(y=0;y<a;++y)l[y]=l[y+1]}}var ca="density",Gi=class extends Ln{constructor(t,n,r){let{bandwidth:i=0,interpolate:o="none",pixelSize:s=1,pad:a=1,width:c,height:l,...u}=r,f=ant(u);super(t,n,u,kv),this.densityMap=f,this.bandwidth=an(i,h=>(this.bandwidth=h,this.grids?this.convolve().update():null)),this.interpolate=an(o,h=>(this.interpolate=h,this.requestUpdate())),this.pixelSize=an(s,h=>(this.pixelSize=h,this.requestUpdate())),this.pad=an(a,h=>(this.pad=h,this.requestUpdate())),this.width=an(c,h=>(this.width=h,this.requestUpdate())),this.height=an(l,h=>(this.height=h,this.requestUpdate()))}setPlot(t,n){let r=()=>{this.hasFieldInfo()&&this.requestUpdate()};t.addAttributeListener("xDomain",r),t.addAttributeListener("yDomain",r),super.setPlot(t,n)}get filterIndexable(){let t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[In]&&!n[In]}query(t=[]){let{interpolate:n,pad:r,channels:i,densityMap:o,source:s}=this,[a,c]=this.extentX=Ko(this,t),[l,u]=this.extentY=ts(this,t),[f,h]=this.bins=this.binDimensions(),[d,p]=Wr(this,"x",f,[a,c],r),[m,y]=Wr(this,"y",h,[l,u],r),g=r?[Ae(p,[+a,+c]),Ae(y,[+l,+u])]:[_s(+a,p),vs(p,+c),_s(+l,y),vs(y,+u)],x=dt.from(s.table).where(t.concat(g)),b=this.groupby=[],w={};for(let v of i)if(Object.hasOwn(v,"field")){let{as:M,channel:E,field:I}=v;I.aggregate?(w[E]=I,o[E]=!0):E==="weight"?w[ca]=Fr(I):E!=="x"&&E!=="y"&&(x.select({[M]:I}),b.push(M))}let _=this.aggr=Object.keys(w);if(w.density&&_.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(_.length||(_.push(ca),w.density=kr()),n==="linear"){if(_.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w.density)throw new Error("Linear binning not applicable to custom aggregates.");return unt(x,d,m,w[ca],f,b)}else return lnt(x,d,m,w,f,b)}binDimensions(){let{plot:t,pixelSize:n,width:r,height:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}queryResult(t){let[n,r]=this.bins,i=cnt(this.interpolate),{columns:o}=aa(t);return this.grids0=VP(n,r,o.index,o,this.aggr,this.groupby,i),this.convolve()}convolve(){let{aggr:t,bandwidth:n,bins:r,grids0:i,plot:o}=this;if(this.grids=i,n>0){let s=t.length===1?t[0]:t.includes(ca)?ca:null;if(!s)return console.warn("No compatible grid found for smoothing."),this;let a=i.columns[s],c=o.innerWidth(),l=o.innerHeight(),[u,f]=r,h=a.some(m=>m.some(y=>y<0)),d=Yy(n*(u-1)/c,h),p=Yy(n*(f-1)/l,h);this.grids={numRows:i.numRows,columns:{...i.columns,[s]:a.map(m=>XP(d,p,m,r))}}}return this}};function ant(e){let t={};for(let n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function cnt(e="none"){if(typeof e=="function")return e;switch(e.toLowerCase()){case"none":case"linear":return;case"nearest":return Ny;case"barycentric":return Ey();case"random-walk":return Dy()}throw new Error(`invalid interpolate: ${e}`)}function lnt(e,t,n,r,i,o){return e.select({index:q`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,...r}).groupby("index",o)}function unt(e,t,n,r,i,o){let s=r?.column?`* ${r.column}`:"",a=(h,d)=>e.clone().select({xp:t,yp:n,i:h,w:d}),c=a(q`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),l=a(q`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${s}`),u=a(q`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),f=a(q`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${s}`);return dt.from(dt.unionAll(c,l,u,f)).select({index:"i",density:Fr("w")},o).groupby("index",o).having(qc("density",0))}var Xy=class extends Gi{constructor(t,n){let{thresholds:r=10,...i}=n;super("geo",t,{bandwidth:20,interpolate:"linear",pixelSize:2,...i}),this.thresholds=an(r,o=>(this.thresholds=o,this.grids?this.contours().update():null))}convolve(){return super.convolve().contours()}contours(){let{bins:t,densityMap:n,grids:r,thresholds:i,plot:o}=this,{numRows:s,columns:a}=r,c=i,l;if(Array.isArray(c))l=c;else{let[,A]=Vy(a.density);l=Array.from({length:c-1},(O,C)=>A*(C+1)/c)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);let[u,f]=t,[h,d]=o.getAttribute("xDomain"),[p,m]=o.getAttribute("yDomain"),y=(d-h)/u,g=(m-p)/f,x=+h,b=+p,w=A=>x+A*y,_=A=>b+A*g,v=ka().size(t),M=this.contourData=Array(s*l.length),{density:E,...I}=a,D=Object.entries(I);for(let A=0,O=0;A<s;++A){let C=E[A],S=D.reduce((T,[N,F])=>(T[N]=F[A],T),{});for(let T=0;T<l.length;++T,++O)M[O]=Object.assign(fnt(v.contour(C,l[T]),w,_),S)}return this}plotSpecs(){let{type:t,channels:n,densityMap:r,contourData:i}=this,o={};for(let s of n){let{channel:a}=s;a!=="x"&&a!=="y"&&(o[a]=Yn(s))}for(let s in r)r[s]&&(o[s]=Yn({channel:s,as:"value"}));return[{type:t,data:i,options:o}]}};function fnt(e,t,n){function r(s){s.forEach(i)}function i(s){s.forEach(o)}function o(s){s[0]=t(s[0]),s[1]=n(s[1])}return e.coordinates.forEach(r),e}function Rv(e,t){if(typeof document<"u"){let n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function WP(e=1){let t=255*e|0;return(n,r,i)=>{for(let o=0,s=0;o<i;++o)for(let a=0;a<r;++a,s+=4)n[s+3]=t}}function GP(e){let{apply:t}=e;return(n,r,i,o)=>{for(let s=0,a=0;s<i;++s)for(let c=0,l=(i-s-1)*r;c<r;++c,a+=4)n[a+3]=255*t(o[c+l])|0}}function HP(e={}){let{r:t=0,g:n=0,b:r=0,opacity:i=1}=typeof e=="string"?rn(e):e,o=new Uint8ClampedArray([t,n,r,255*i|0]);return(s,a,c)=>{for(let l=0,u=0;l<c;++l)for(let f=0;f<a;++f,u+=4)s[u+0]=o[0],s[u+1]=o[1],s[u+2]=o[2],s[u+3]=o[3]}}function ZP(e){let{domain:t,range:n}=e,r=Object.create(null),i=new Uint8ClampedArray(4*t.length),o=t.length-1,s=n.length;for(let a=0;a<=o;++a){let c=n[a%s],{r:l,g:u,b:f,opacity:h=1}=typeof c=="string"?rn(c):c,d=a<<2;i[d+0]=l,i[d+1]=u,i[d+2]=f,i[d+3]=255*h|0,r[t[a]]=d}return(a,c,l,u)=>{if(u.map)for(let f=0,h=0;f<l;++f)for(let d=0,p=(l-f-1)*c;d<c;++d,h+=4){let m=r[u[d+p]];a[h+0]=i[m+0],a[h+1]=i[m+1],a[h+2]=i[m+2],a[h+3]=i[m+3]}else{let f=r[u];for(let h=0,d=0;h<l;++h)for(let p=0;p<c;++p,d+=4)a[d+0]=i[f+0],a[d+1]=i[f+1],a[d+2]=i[f+2],a[d+3]=i[f+3]}}}function JP(e,t,n){let{interpolate:r}=t,i=new Uint8ClampedArray(4*e),o=e-1;for(let s=0;s<=o;++s){let a=r(s/o),{r:c,g:l,b:u,opacity:f=1}=typeof a=="string"?rn(a):a,h=s<<2;i[h+0]=c,i[h+1]=l,i[h+2]=u,i[h+3]=255*f|0}return(s,a,c,l)=>{for(let u=0,f=0;u<c;++u)for(let h=0,d=(c-u-1)*a;h<a;++h,f+=4){let p=o*n(l[h+d])<<2;s[f+0]=i[p+0],s[f+1]=i[p+1],s[f+2]=i[p+2],s[f+3]=i[p+3]}}}var yc=class extends Gi{constructor(t,n){super("image",t,n),this.image=null}setPlot(t,n){let r=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){let{bins:t,grids:n}=this,[r,i]=t,{numRows:o,columns:s}=n,{canvas:a,ctx:c,img:l}=mnt(this,r,i),{alpha:u,alphaProp:f,color:h,colorProp:d}=V3(this),p=s[f]??[],m=s[d]??[];return this.data={numRows:o,columns:{src:Array.from({length:o},(y,g)=>(h?.(l.data,r,i,m[g]),u?.(l.data,r,i,p[g]),c.putImageData(l,0,0),a.toDataURL()))}},this}plotSpecs(){let{type:t,plot:n,data:{numRows:r,columns:i}}=this,o={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:r},options:o}]}},Wy=class extends yc{constructor(t,n){super(t,{bandwidth:20,interpolate:"linear",pixelSize:2,...n})}};function V3(e){let{aggr:t,densityMap:n,groupby:r,plot:i}=e,o=t.includes(ca),s=t.includes("fillOpacity"),a=e.channel("fill"),c=e.channel("fillOpacity");if(t.length>2||o&&s)throw new Error("Invalid raster encodings. Try dropping an aggregate?");if(r.includes(c?.as))throw new Error("Raster fillOpacity must be an aggregate or constant.");let l=n.fill||t.includes("fill")?"grid":r.includes(a?.as)?"group":Lv(a?.value)?a.value:o&&i.getAttribute("colorScheme")?"grid":void 0,u=n.fillOpacity||t.includes("fillOpacity")?"grid":typeof c?.value=="number"?c.value:o&&l!=="grid"?"grid":void 0;if(l!=="grid"&&u!=="grid")throw new Error("Raster mark missing density values.");let f=a?.as??(l==="grid"?ca:null),h=c?.as??(u==="grid"?ca:null),d=l!=="grid"&&l!=="group"?HP(l):dnt(e,f),p=u!=="grid"?WP(u):hnt(e,h);return{alphaProp:h,colorProp:f,alpha:p,color:d}}function hnt(e,t){let{plot:n,grids:r}=e,i=n.getAttribute("opacityDomain"),o=i===vo,s=i?.[In],a=!o&&!s&&i||Vy(r.columns[t]);(o||s||!i)&&(o||(a[In]=!0),n.setAttribute("opacityDomain",a));let c=rc({opacity:{type:n.getAttribute("opacityScale"),domain:a,clamp:n.getAttribute("opacityClamp"),nice:n.getAttribute("opacityNice"),reverse:n.getAttribute("opacityReverse"),zero:n.getAttribute("opacityZero"),base:n.getAttribute("opacityBase"),exponent:n.getAttribute("opacityExponent"),constant:n.getAttribute("opacityConstant")}});return GP(c)}function dnt(e,t){let{plot:n,grids:r}=e,i=r.columns[t],o=!i[0]?.map,s=o||Array.isArray(i[0]),a=n.getAttribute("colorDomain"),c=a===vo,l=a?.[In],u=!c&&!l&&a||(o?i.sort(zt):s?YP(i):Vy(i));(c||l||!a)&&(c||(u[In]=!0),n.setAttribute("colorDomain",u));let f=rc({color:{type:n.getAttribute("colorScale"),domain:u,range:n.getAttribute("colorRange"),clamp:n.getAttribute("colorClamp"),n:n.getAttribute("colorN"),nice:n.getAttribute("colorNice"),reverse:n.getAttribute("colorReverse"),scheme:n.getAttribute("colorScheme"),interpolate:n.getAttribute("colorInterpolate"),pivot:n.getAttribute("colorPivot"),symmetric:n.getAttribute("colorSymmetric"),zero:n.getAttribute("colorZero"),base:n.getAttribute("colorBase"),exponent:n.getAttribute("colorExponent"),constant:n.getAttribute("colorConstant")}});if(s)return ZP(f);{let h=rc({x:{type:pnt(f.type),domain:f.domain,reverse:f.reverse,range:[0,1],clamp:f.clamp,base:f.base,exponent:f.exponent,constant:f.constant}});return JP(1024,f,h.apply)}}function pnt(e){return e.endsWith("symlog")?"symlog":e.endsWith("log")?"log":e.endsWith("pow")?"pow":e.endsWith("sqrt")?"sqrt":e==="diverging"?"linear":e}function mnt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){let r=Rv(t,n),i=r.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:o,w:t,h:n}}return e.image}var Gy=class extends yc{constructor(t,n){let{normalize:r=!0,...i}=n;super(t,i),this.normalize=an(r,o=>(this.normalize=o,this.requestUpdate()))}query(t=[]){let{channels:n,normalize:r,source:i,pad:o}=this,[s,a]=this.bins=this.binDimensions(),[c]=Wr(this,"x",s,Ko(this,t),o),[l]=Wr(this,"y",a,ts(this,t),o),u=dt.from(i.table).where(ynt(this,t));this.aggr=["density"];let f=this.groupby=[],h=[];for(let d of n)if(Object.hasOwn(d,"field")){let{channel:p,field:m}=d;p==="z"?(u.select({[p]:m}),h.push("z")):p!=="x"&&p!=="y"&&(u.select({[p]:m}),f.push(p))}return gnt(u,c,l,h,s,a,f,r)}};function ynt(e,t){if(Array.isArray(t)&&!t.length)return t;let{column:n}=e.channelField("x"),{column:r}=e.channelField("y"),i=s=>{let a=`${s.field}`;return s.op!=="BETWEEN"||a!==n&&a!==r},o=s=>s.op==="AND"?Hn(s.children.filter(a=>i(a))):s;return Array.isArray(t)?t.filter(s=>i(s)).map(s=>o(s)):o(t)}function gnt(e,t,n,r,i,o,s=[],a=!0){e.select({x:q`FLOOR(${t})::INTEGER`,y:q`FLOOR(${n})::INTEGER`});let c=s.concat(r),l=c.length?`PARTITION BY ${c.join(", ")} `:"",u=dt.from(e).select(c,{x0:"x",y0:"y",dx:q`(lead(x) OVER sw - x)`,dy:q`(lead(y) OVER sw - y)`}).window({sw:q`${l}ORDER BY x ASC`}).qualify(Hn(q`(x0 < ${i} OR x0 + dx < ${i})`,q`(y0 < ${o} OR y0 + dy < ${o})`,q`(x0 > 0 OR x0 + dx > 0)`,q`(y0 > 0 OR y0 + dy > 0)`)),f=dt.select({x:q`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),h=dt.select({i:q`UNNEST(range((${f})))::INTEGER`}),d=dt.unionAll(dt.select(c,{x:q`x0 + i`,y:q`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(q`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),dt.select(c,{x:q`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:q`y0 + SIGN(dy) * i`}).from("pairs","indices").where(q`ABS(dy) > ABS(dx) AND i < ABS(dy)`),dt.select(c,{x:"x0",y:"y0"}).from("pairs").where(zc("dx"))),p=["x"].concat(c).join(", "),m=dt.from("raster").select(c,"x","y",a?{w:q`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(Hn(Ae("x",[0,i],!0),Ae("y",[0,o],!0)));return dt.with({pairs:u,indices:h,raster:d,points:m}).from("points").select(s,{index:q`x + y * ${i}::INTEGER`,density:a?Fr("w"):kr()}).groupby("index",s)}var gh=class extends Ln{constructor(t,n,r){let{bins:i=1024,bandwidth:o=20,...s}=r,a=t.endsWith("X")?"y":"x";super(t,n,s,a==="x"?z3:q3),this.dim=a,this.bins=an(i,c=>(this.bins=c,this.requestUpdate())),this.bandwidth=an(o,c=>(this.bandwidth=c,this.grid?this.convolve().update():null))}get filterIndexable(){let t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[In]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");let{bins:n,channels:r,dim:i,source:{table:o}}=this,s=this.extent=(i==="x"?Ko:ts)(this,t),[a,c]=Wr(this,i,n,s),l=U3(r,o,[i]).where(t.concat(Ae(c,s))),u=this.channelField("weight")?"weight":null;return xnt(l,a,u)}queryResult(t){let{columns:{index:n,density:r}}=aa(t);return this.grid=jP(this.bins,n,r),this.convolve()}convolve(){let{bins:t,bandwidth:n,dim:r,grid:i,plot:o,extent:[s,a]}=this,c=i.some(b=>b<0),l=r==="x"?o.innerWidth():o.innerHeight(),u=Yy(n*(t-1)/l,c),f=Fv(u,i,t),h=r==="x"?"y":"x",d=this.channelField(r).as,p=+s,m=(a-p)/(t-1),y=1/m,g=new Float64Array(t),x=new Float64Array(t);for(let b=0;b<t;++b)g[b]=p+b*m,x[b]=f[b]*y;return this.data={numRows:t,columns:{[d]:g,[h]:x}},this}plotSpecs(){let{type:t,data:{numRows:n,columns:r},channels:i,dim:o}=this,s=o==="x"?{y:r.y}:{x:r.x};for(let a of i)s[a.channel]=Yn(a,r);return[{type:t,data:{length:n},options:s}]}};function xnt(e,t,n){let r=n?`* ${n}`:"",i=e.clone().select({p:t,i:q`FLOOR(p)::INTEGER`,w:q`(FLOOR(p) + 1 - p)${r}`}),o=e.clone().select({p:t,i:q`FLOOR(p)::INTEGER + 1`,w:q`(p - FLOOR(p))${r}`});return dt.from(dt.unionAll(i,o)).select({index:"i",density:Fr("w")}).groupby("index").having(Wd("density",0))}var Hy=class extends Gi{constructor(t,n){let{type:r="dot",...i}=n;super(r,t,{bandwidth:20,interpolate:"linear",pad:0,pixelSize:2,...i})}convolve(){super.convolve();let{bins:t,pad:n,extentX:r,extentY:i}=this,[o,s]=t,a=Vl(this,"x"),c=Vl(this,"y"),[l,u]=r.map(y=>a.apply(y)),[f,h]=i.map(y=>c.apply(y)),d=(u-l)/(o-n),p=(h-f)/(s-n),m=n?0:.5;return this.data=bnt(this.grids,t,l,f,d,p,a.invert,c.invert,m),this}plotSpecs(){let{type:t,channels:n,densityMap:r,data:{numRows:i,columns:o}}=this,s={};for(let a of n){let{channel:c}=a;s[c]=c==="x"||c==="y"?o[c]:Yn(a,o)}for(let a in r)r[a]&&(s[a]=o.density);return[{type:t,data:{length:i},options:s}]}};function bnt(e,t,n,r,i,o,s,a,c){let l=1/(i*o),[u,f]=t,h=u*f,d=h*e.numRows,p=new Float64Array(d),m=new Float64Array(d),y=new Float64Array(d),g={x:p,y:m,density:y},{density:x,...b}=e.columns;for(let _ in b)g[_]=new b[_].constructor(d);let w=0;for(let _=0;_<e.numRows;++_){for(let M in b)g[M].fill(b[M][_],w,w+h);let v=x[_];for(let M=0,E=0;E<f;++E)for(let I=0;I<u;++I,++w,++M)p[w]=s(n+(I+c)*i),m[w]=a(r+(E+c)*o),y[w]=v[M]*l}return{numRows:d,columns:g}}var wnt="geom",Zy=class extends Ln{constructor(t,n={},r){!Cv(t)&&!n?.geometry&&(n.geometry=Jd(wnt)),super("geo",t,n,r)}queryResult(t){super.queryResult(t);let n=this.channelField("geometry")?.as;if(n){let{columns:r}=this.data;typeof r[n][0]=="string"&&(r[n]=r[n].map(i=>JSON.parse(i)))}return this}};var Jy=class extends Ln{constructor(t,n){let{type:r="hexagon",binWidth:i=20,...o}=n;super(r,t,{r:i/2,clip:!0,...o},kv),this.binWidth=an(i,s=>(this.binWidth=s,this.requestUpdate()))}get filterIndexable(){let t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[In]&&!n[In]}query(t=[]){if(this.hasOwnData())return null;let{plot:n,binWidth:r,channels:i,source:o}=this,[s,a]=Ko(this,t),[c,l]=ts(this,t),u=.5-n.getAttribute("marginLeft"),f=0-n.getAttribute("marginTop"),h=`${r}::DOUBLE`,d=`${r*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${n.innerWidth()/(a-s)}::DOUBLE`,m=`${n.innerHeight()/(l-c)}::DOUBLE`,y,g,x=new Set,b={},w;for(let I of i)I.channel==="orderby"?w=I.value:I.channel==="x"?y=I:I.channel==="y"?g=I:Object.hasOwn(I,"field")&&(b[I.as]=I.field,I.field.aggregate&&I.field.columns.forEach(D=>x.add(D)));let _=dt.select({[y.as]:q`${s}::DOUBLE + ((x + 0.5 * (y & 1)) * ${h} + ${u})::DOUBLE / ${p}`,[g.as]:q`${l}::DOUBLE - (y * ${d} + ${f})::DOUBLE / ${m}`,...b}).groupby("x","y");w&&_.orderby(w);let v=`${p} * (${y.field} - ${s}::DOUBLE)`,M=`${m} * (${l}::DOUBLE - ${g.field})`,E=dt.select({py:q`(${M} - ${f}) / ${d}`,pj:q`ROUND(py)::INTEGER`,px:q`(${v} - ${u}) / ${h} - 0.5 * (pj & 1)`,pi:q`ROUND(px)::INTEGER`,tt:q`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:q`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:q`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(x)).from(o.table).where(bs(y.field),bs(g.field),t);return _.from(E)}};var Qy=class extends Gi{constructor(t,n){let{origin:r=[0,0],dim:i="xy",...o}=n;super("image",t,o),this.image=null,this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){let r=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){let{interpolate:n,pad:r,channels:i,densityMap:o,source:s}=this,[[a,c],[l,u]]=t,[f,h]=this.bins,[d,p]=Wr(this,"x",f,[a,c],r),[m,y]=Wr(this,"y",h,[l,u],r),g=r?[Ae(p,[+a,+c]),Ae(y,[+l,+u])]:[_s(+a,p),vs(p,+c),_s(+l,y),vs(y,+u)],x=dt.from(s.table).where(g),b=this.groupby=[],w={};for(let v of i)if(Object.hasOwn(v,"field")){let{as:M,channel:E,field:I}=v;I.aggregate?(w[E]=I,o[E]=!0):E==="weight"?w.density=Fr(I):E!=="x"&&E!=="y"&&(x.select({[M]:I}),b.push(M))}let _=this.aggr=Object.keys(w);if(w.density&&_.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(_.length||(_.push("density"),w.density=kr()),n==="linear"){if(_.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w.density)throw new Error("Linear binning not applicable to custom aggregates.");return Mnt(x,d,m,w.density,f,b)}else return Int(x,d,m,w,f,b)}async requestTiles(){let t=ai();this.prefetch&&t.cancel(this.prefetch);let{pad:n,tileX:r,tileY:i,origin:[o,s]}=this,[a,c]=this.bins=this.binDimensions(),[l,u]=Ko(this,this._filter),[f,h]=ts(this,this._filter),d=u-l,p=h-f,m=Math.floor((l-o)*(a-n)/d),y=Math.floor((f-s)*(c-n)/p),g=(A,O)=>[[o+A*d,o+(A+1)*d],[s+O*p,s+(O+1)*p]],x=Math.floor((l-o)/d),b=r?QP((u-o)/d):x,w=Math.floor((f-s)/p),_=i?QP((h-s)/p):w,v=[];for(let A=x;A<=b;++A)for(let O=w;O<=_;++O)v.push([A,O]);let M=v.map(([A,O])=>t.query(this.tileQuery(g(A,O)))),E=[];if(r)for(let A=w;A<=_;++A)E.push([b+1,A]),E.push([x-1,A]);if(i){let A=r?x-1:x,O=r?b+1:b;for(let C=A;C<=O;++C)E.push([C,_+1]),E.push([C,w-1])}this.prefetch=E.map(([A,O])=>t.prefetch(this.tileQuery(g(A,O))));let I=await Promise.all(M),D=vnt(a,c,m,y,v,I);this.grids0={numRows:D.length,columns:{density:[D]}},this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){let{bins:t,grids:n}=this,[r,i]=t,{numRows:o,columns:s}=n,{canvas:a,ctx:c,img:l}=Snt(this,r,i),{alpha:u,alphaProp:f,color:h,colorProp:d}=V3(this),p=s[f]??[],m=s[d]??[];return this.data={numRows:o,columns:{src:Array.from({length:o},(y,g)=>(h?.(l.data,r,i,m[g]),u?.(l.data,r,i,p[g]),c.putImageData(l,0,0),a.toDataURL()))}},this}plotSpecs(){let{type:t,plot:n,data:{numRows:r,columns:i}}=this,o={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:r},options:o}]}};function vnt(e,t,n,r,i,o){let s=new Float64Array(e*t);return o.forEach((a,c)=>{let[l,u]=i[c],f=l*e-n,h=u*t-r;_nt(e,t,s,a,f,h)}),s}function _nt(e,t,n,r,i,o){let s=r.numRows;if(s===0)return;let a=r.getChild("index").toArray(),c=r.getChild("density").toArray();for(let l=0;l<s;++l){let u=a[l],f=i+u%e,h=o+Math.floor(u/e);0<=f&&f<e&&0<=h&&h<t&&(n[f+h*e]=c[l])}}function Snt(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){let r=Rv(t,n),i=r.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:o,w:t,h:n}}return e.image}function Int(e,t,n,r,i,o){return e.select({index:q`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,...r}).groupby("index",o)}function Mnt(e,t,n,r,i,o){let s=r.column?`* ${r.column}`:"",a=(h,d)=>e.clone().select({xp:t,yp:n,i:h,w:d}),c=a(q`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),l=a(q`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${s}`),u=a(q`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),f=a(q`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${s}`);return dt.from(dt.unionAll(c,l,u,f)).select({index:"i",density:Fr("w")},o).groupby("index",o).having(qc("density",0))}function QP(e){let t=Math.floor(e);return t===e?t-1:t}function Ant(e,t,n){var r=1e-8,i=t-1,o=n-1,s=0,a,c,l,u,f,h,d,p,m,y,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),p=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),y=d*Math.sqrt(p+m)/m-(1/(2*n-1)-1/(2*t-1))*(p+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*y))):(a=Math.log(t/(t+n)),c=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*c)/n,y=u+f,e<u/y?d=Math.pow(t*y*e,1/t):d=1-Math.pow(n*y*(1-e),1/n)),g=-xh(t)-xh(n)+xh(t+n);s<10;s++){if(d===0||d===1)return d;if(h=Tnt(d,t,n)-e,u=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<r*d&&s>0)break}return d}function Tnt(e,t,n){var r=e===0||e===1?0:Math.exp(xh(t+n)-xh(t)-xh(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?0:e<(t+1)/(t+n+2)?r*KP(e,t,n)/t:1-r*KP(1-e,n,t)/n}function KP(e,t,n){var r=1e-30,i=1,o=t+n,s=t+1,a=t-1,c=1,l=1-o*e/s,u,f,h,d;for(Math.abs(l)<r&&(l=r),l=1/l,d=l;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,d*=l*c,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),l=1+f*l,Math.abs(l)<r&&(l=r),c=1+f/c,Math.abs(c)<r&&(c=r),l=1/l,h=l*c,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function xh(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)r+=n[t]/++o;return Math.log(2.506628274631*r/i)-s}function tU(e,t){var n=Ant(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}var Ky=class extends Ln{constructor(t,n){let{ci:r=.95,precision:i=4,...o}=n;super("line",t,o);let s=()=>this.modelFit?this.confidenceBand().update():null;this.ci=an(r,a=>(this.ci=a,s())),this.precision=an(i,a=>(this.precision=a,s()))}query(t=[]){let n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(o=>this.channelField(o)?.as||[])));return dt.from(super.query(t)).select({intercept:fS(r,n),slope:hS(r,n),n:dS(r,n),ssy:pS(r,n),ssx:mS(r,n),xm:yS(r,n),x0:Mu(si(n).where(bs(r))),x1:Mu(oi(n).where(bs(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=aa(t),this.lineData=Ent(this.modelFit),this.confidenceBand()}confidenceBand(){let{ci:t,modelFit:n,precision:r,plot:i}=this,o=i.innerWidth();return this.areaData=t?Nnt(n,t,r,o):null,this}plotSpecs(){let{lineData:t,areaData:n,channels:r,ci:i}=this,o=t.columns,s=i?n.columns:{},a={x:o.x,y:o.y},c={x:s.x,y1:s.y1,y2:s.y2,fillOpacity:.1};for(let l of r)switch(l.channel){case"x":case"y":case"fill":break;case"tip":c.tip=Yn(l,s);break;case"stroke":a.stroke=Yn(l,o),c.fill=Yn(l,s);break;case"strokeOpacity":a.strokeOpacity=Yn(l,o);break;case"fillOpacity":c.fillOpacity=Yn(l,s);break;default:a[l.channel]=Yn(l,o),c[l.channel]=Yn(l,s);break}return[...i?[{type:"areaY",data:{length:n.numRows},options:c}]:[],{type:"line",data:{length:t.numRows},options:a}]}};function Y3(e,t){if(e.concat)return e.concat(t);let n=new e.constructor(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function Ent(e){let{x0:t,x1:n,xm:r,intercept:i,slope:o,n:s,ssx:a,ssy:c,...l}=e.columns,u=(d,p)=>i[p]+d*o[p],f=Y3(t,n),h=Y3(t.map(u),n.map(u));for(let d in l)l[d]=Y3(l[d],l[d]);return{numRows:f.length,columns:{x:f,y:h,...l}}}function Nnt(e,t,n,r){let i=e.numRows,{x0:o,x1:s,xm:a,intercept:c,slope:l,n:u,ssx:f,ssy:h,...d}=e.columns,p=Object.keys(d),m={x:[],y1:[],y2:[]};p.forEach(y=>m[y]=[]);for(let y=0;y<i;++y){let g=n*(s[y]-o[y])/r,x=tU((1-t)/2,u[y]-2)*Math.sqrt(h[y]/(u[y]-2));Ue(o[y],s[y]-g/2,g).concat(s[y]).forEach(b=>{let w=c[y]+b*l[y],_=x*Math.sqrt(1/u[y]+(b-a[y])**2/f[y]);m.x.push(b),m.y1.push(w-_),m.y2.push(w+_),p.forEach(v=>m[v].push(d[v][y]))})}return{numRows:m.x.length,columns:m}}function eU(e){let t=e.toLowerCase(),n=e.length,r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function bh(e){let t={};for(let n in e)t[eU(n)]=e[n];return t}function Dnt(e){let{channels:t}=e,n=new Set,r=!1,i=!1;for(let o of t){let{channel:s,field:a,as:c}=o;if(s==="orderby")r=!0;else if(a)if(a.aggregate)i=!0;else{if(n.has(c))continue;n.add(c)}}return!r&&i&&n.size&&e.channels.push({channel:"orderby",value:Array.from(n)}),e}var tg=class{constructor(t,{selection:n,channels:r={}}){this.mark=Dnt(t),this.selection=n;let i=Object.entries(bh(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",Ch(()=>this.update()))}init(t){this.svg=t;let n=this.values=[],r=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${r}"] > *`),{channels:o}=this;for(let s=0;s<i.length;++s){let a=i[s];n.push(o.map(c=>a.getAttribute(c[0])))}return this.update()}async update(){let{svg:t,nodes:n,channels:r,values:i,mark:o,selection:s}=this;if(!t)return;let a=await Ont(o,s);for(let c=0;c<n.length;++c){let l=n[c],u=i[c],f=a(l.__data__);for(let h=0;h<r.length;++h){let[d,p]=r[h];l.setAttribute(d,f?u[h]:p)}}}};async function Ont(e,t){let n=t?.predicate(e);if(!n||n.length===0)return()=>!0;let r=e.filterBy?.predicate(e,!0),i={__:Hn(n)},o=e.query(r),s=o.groupby().length?o.select(i):o.$select(i),a=await e.coordinator.query(s),c=a.getChild?.("__");return a.numRows||a.length?c?l=>c.get(l):l=>a[l].__:()=>!1}function X3(e){let t=e.on,n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){let o=i[1];i[1]=(...s)=>n&&o(...s)}return t(...i)},e}function nU(){return X3(II())}function rU(){return X3(_I())}function iU(){return X3(SI())}function eg(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<1e-12&&Math.abs(e[1]-t[1])<1e-12||!1}function es(e,t){let n=e.channelField(t)?.field;return n?.basis||n}function ng(e,t,n=1){return t.invert(n*Math.floor(e/n))}function $v(){let e=this,t=e.getScreenCTM,n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}var gc=class{constructor(t,{channel:n,selection:r,field:i=void 0,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=o||1,this.selection=r,this.peers=s,this.field=i||es(t,n),this.style=a&&bh(a),this.brush=n==="y"?iU():rU(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>ng(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),eg(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){let{mark:n,pixelSize:r,field:i,scale:o}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[o]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Ae(i,t):null}}init(t,n){let{brush:r,channel:i,style:o}=this;this.scale=t.scale(i);let s=t.scale("x").range,a=t.scale("y").range;r.extent([[ue(s),ue(a)],[Ht(s),Ht(a)]]);let c=Vt(t).selectAll('g[aria-label="facet"]');if(n=c.size()?c:Vt(n??t),this.g=n.append("g").attr("class",`interval-${i}`).each($v).call(r).call(r.moveSilent,this.value?.map(this.scale.apply)),o){let l=this.g.selectAll("rect.selection");for(let u in o)l.attr(u,o[u])}t.addEventListener("pointerenter",l=>{l.buttons||this.activate()})}};var Pv=(e,t)=>e-t,rg=class{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.pixelSize=o||1,this.selection=n,this.peers=s,this.xfield=r||es(t,"x"),this.yfield=i||es(t,"y"),this.style=a&&bh(a),this.brush=nU(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){let{value:n,pixelSize:r,xscale:i,yscale:o}=this,s,a;if(t){let[c,l]=t;s=[c[0],l[0]].map(u=>ng(u,i,r)).sort(Pv),a=[c[1],l[1]].map(u=>ng(u,o,r)).sort(Pv)}(!eg(s,n?.[0])||!eg(a,n?.[1]))&&(this.value=t?[s,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){let{mark:n,pixelSize:r,xfield:i,yfield:o,xscale:s,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:r,scales:[s,a]},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:t?Hn(Ae(i,t[0]),Ae(o,t[1])):null}}init(t){let{brush:n,style:r}=this,i=this.xscale=t.scale("x"),o=this.yscale=t.scale("y"),s=i.range,a=o.range;n.extent([[ue(s),ue(a)],[Ht(s),Ht(a)]]);let c=Vt(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:Vt(t);if(this.g=l.append("g").attr("class","interval-xy").each($v).call(n),r){let u=this.g.selectAll("rect.selection");for(let f in r)u.attr(f,r[f])}if(this.value){let[u,f]=this.value[0].map(i.apply).sort(Pv),[h,d]=this.value[1].map(o.apply).sort(Pv);this.g.call(n.moveSilent,[[u,h],[f,d]])}t.addEventListener("pointerenter",u=>{u.buttons||this.activate()})}};var wh=class{constructor(t,{selection:n,channel:r,field:i}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.channel=r,this.field=i||es(t,[r])}clause(t){let{clients:n,field:r}=this,i=t?ws(r,Cr(t)):null;return{source:this,schema:{type:"point"},clients:n,value:t,predicate:i}}init(t){let n=this,{mark:r,channel:i,selection:o}=this,{data:s}=r,a=r.channelField(i).as,c=Vt(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:Vt(t),u=t.scale(i),f=!ci(o);l.on("pointerdown pointermove",function(h){let[d,p]=Fn(h,this),m=Bnt(s.columns[a],u.invert(i==="x"?d:p));o.update(f?m:n.clause(m))}),!f&&t.addEventListener("pointerenter",h=>{h.buttons||this.selection.activate(this.clause(0))})}};function Bnt(e,t){let n=1/0,r;for(let i=0;i<e.length;++i){let o=Math.abs(e[i]-t);o<n&&(n=o,r=e[i])}return r}var oU=(e,t)=>e-t,ig=class{constructor(t,{x:n=new Ss,y:r=new Ss,xfield:i,yfield:o,zoom:s=!0,panx:a=!0,pany:c=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||es(t,"x"),this.yfield=o||es(t,"y"),this.zoom=W3(s,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&c;let{plot:l}=t;a&&this.xsel.addEventListener("value",u=>{l.setAttribute("xDomain",u)&&l.update()}),c&&this.ysel.addEventListener("value",u=>{l.setAttribute("yDomain",u)&&l.update()})}publish(t){if(this.panx){let n=Lnt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){let n=Cnt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return{source:this,schema:{type:"interval",scales:[r]},clients:this.mark.plot.markSet,value:t,predicate:t?Ae(n,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;let{panx:n,pany:r,mark:{plot:{element:i}},xsel:o,ysel:s}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");let a=this.xscale.range.slice().sort(oU),c=this.yscale.range.slice().sort(oU),l=W3(n,[-1/0,1/0],a),u=W3(r,[-1/0,1/0],c),f=zA().extent([[a[0],c[0]],[a[1],c[1]]]).scaleExtent(this.zoom).translateExtent([[l[0],u[0]],[l[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new qr(1,0,0)).on("zoom",({transform:h})=>this.publish(h));if(Vt(i).call(f),n||r){let h=!1;i.addEventListener("pointerenter",d=>{if(!h&&(h=!0,!d.buttons)){if(n){let{xscale:p,xfield:m}=this;o.activate(this.clause(p.domain,m,p))}if(r){let{yscale:p,yfield:m}=this;s.activate(this.clause(p.domain,m,p))}}}),i.addEventListener("pointerleave",()=>h=!1)}}};function W3(e,t,n){return e?Array.isArray(e)?e:t:n}function Lnt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function Cnt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}var Yl=class{constructor(t,{selection:n,channels:r,peers:i=!0}){this.value=null,this.mark=t,this.selection=n,this.peers=i,this.channels=r.map(o=>{let s=o==="color"?["color","fill","stroke"]:o==="x"?["x","x1","x2"]:o==="y"?["y","y1","y2"]:[o];for(let a=0;a<s.length;++a){let c=t.channelField(s[a],{exact:!0});if(c)return{field:c.field?.basis||c.field,as:c.as}}throw new Error(`Missing channel: ${o}`)})}clause(t){let{channels:n,mark:r}=this,i=null;if(t){let o=t.map(s=>{let a=s.map((c,l)=>Gd(n[l].field,Cr(c)));return a.length>1?Hn(a):a[0]});i=o.length>1?Uc(o):o[0]}return{source:this,schema:{type:"point"},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:i}}init(t,n,r){let{mark:i,channels:o,selection:s}=this,{data:{columns:a={}}={}}=i;r??=l=>o.map(u=>a[u.as][l.__data__]),n??=`[data-index="${i.index}"]`;let c=new Set(t.querySelectorAll(n));t.addEventListener("pointerdown",l=>{let u=s.single?s.value:this.value,f=l.target,h=null;if(knt(c,f)){let d=r(f);(l.shiftKey||l.metaKey)&&u?.length?(h=u.filter(p=>G3(p,d)),h.length===u.length&&h.push(d)):u?.length===1&&!G3(u[0],d)?h=null:h=[d]}this.value=h,Fnt(u,h)&&s.update(this.clause(h))}),t.addEventListener("pointerenter",l=>{l.buttons||this.selection.activate(this.clause([this.channels.map(()=>0)]))})}};function knt(e,t){return e.has(t)||e.has(t.parentNode)||e.has(t.parentNode?.parentNode)}function Fnt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>G3(n,t[r]))}function G3(e,t){let n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}var aU=":scope > div, :scope > span",Uv="swatch",sU="ramp",vh=class{constructor(t,n){let{as:r,field:i,...o}=n;this.channel=t,this.options={label:null,...o},this.type=null,this.handler=null,this.selection=r,this.field=i,this.legend=null,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),Object.assign(this.element,{value:this})}setPlot(t){this.plot=t}init(t){let n=Rnt(this,t);return this.element.replaceChildren(n),this.element}update(){if(!this.legend)return;let{value:t}=this.selection,n=t&&t.length?new Set(t.map(i=>i[0])):null,r=this.legend.querySelectorAll(aU);for(let i of r){let o=n?n.has(i.__data__):!0;i.style.opacity=o?1:.2}}};function Rnt(e,t){let{channel:n,options:r,selection:i}=e,o=t.scale(n),s=o.type==="ordinal"?Uv:sU,a=s===Uv?r:r.label?{tickSize:2,...r}:{tickSize:2,marginTop:1,height:29,...r},c=t.legend(n,a);e.legend=c;let l=!!i;if(l&&s===sU){let u=a.width??240,f=znt(o,u);f?c.scale=function(h){return h==="x"?{range:[0,u]}:h==="y"?{range:[-10,0]}:h===n?f:void 0}:l=!1}if(l){let u=$nt(e,s);s===Uv?(u.init(c,aU,f=>[f.__data__]),e.update()):u.init(c,c.querySelector("g:last-of-type"))}return c}function $nt(e,t){let{channel:n,handler:r,selection:i}=e;if(r)return r;let o=Pnt(e);if(t===Uv)e.handler=new Yl(o,{selection:i,channels:[n]}),i.addEventListener("value",()=>e.update());else{let s={fill:"none",stroke:"currentColor"};e.handler=new gc(o,{selection:i,channel:n,brush:s})}return e.handler}function Pnt(e){let{channel:t,plot:n}=e,r=e.field??Unt(n.marks,t)??"value";if(r){let i={field:r};return{plot:n,channelField:o=>t===o?i:void 0}}}function Unt(e,t){let n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)for(let i of n){let o=e[r].channelField(i,{exact:!0});if(o)return o.field}return null}function znt(e,t){let{apply:n,invert:r,interpolate:i,...o}=e,s=e.type;s.startsWith("diverging-")&&(s=s.slice(11));let a;switch(s){case"log":case"pow":case"sqrt":case"symlog":a=s;break;case"threshold":case"quantize":case"quantile":return console.warn(`Legends do not yet support ${s} scales.`),null;default:a="linear"}return rc({x:{...o,type:a,range:[0,t]}})}var qnt=new Set(["rectY-x","rectX-y","rect-x","rect-y"]);function zv(e,t={steps:25}){let n=(r,i)=>qnt.has(`${r.type}-${i}`)?{[`${i}1`]:H3(r,i,e,t),[`${i}2`]:H3(r,i,e,{...t,offset:1})}:{[i]:H3(r,i,e,t)};return n[op]=!0,n}function H3(e,t,n,r){return{column:n,label:n,get stats(){return{column:n,stats:["min","max"]}},get columns(){return[n]},get basis(){return n},toString(){let{apply:i,sqlApply:o,sqlInvert:s}=Vl(e,t),{min:a,max:c}=e.channelField(t),l=jnt(i(a),i(c),r),u=o(n),f=l.min===0?u:`(${u} - ${l.min})`,h=`${(l.max-l.min)/l.steps}::DOUBLE`,d=r.offset?`${r.offset} + `:"",p=`${l.min} + ${h} * (${d}FLOOR(${f} / ${h}))`;return`${s(p)}`}}}function jnt(e,t,n){let{steps:r=25,minstep:i=0,nice:o=!0}=n;if(o!==!1){let s=t-e,a=r,c=Math.LN10,l=Math.ceil(Math.log(a)/c),u=Math.max(i,Math.pow(10,Math.round(Math.log(s)/c)-l));for(;Math.ceil(s/u)>a;)u*=10;let f=[5,2],h;for(let m=0,y=f.length;m<y;++m)h=u/f[m],h>=i&&s/h<=a&&(u=h);h=Math.log(u);let d=h>=0?0:~~(-h/c)+1,p=Math.pow(10,-d-1);h=Math.floor(e/u+p)*u,e=e<h?h-u:h,t=Math.ceil(t/u)*u,r=Math.round((t-e)/u)}return{min:e,max:t,steps:r}}var Vnt=e=>e&&typeof e=="object"&&!Array.isArray(e);var og=class extends fr{constructor({element:t,filterBy:n,from:r,column:i,label:o=i,format:s=u=>u,options:a,value:c,as:l}={}){super(n),this.from=r,this.column=i,this.selection=l,this.format=s,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;let u=document.createElement("label");u.innerText=o||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(f=>Vnt(f)?f:{value:f}),this.update()),c=c??this.selection?.value??this.data?.[0]?.value,this.selection?.value===void 0&&this.publish(c),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),ci(this.selection)||this.selection.addEventListener("value",f=>{f!==this.select.value&&this.selectedValue(f)}))}selectedValue(t){if(arguments.length===0){let n=this.select.selectedIndex;return this.data[n].value}else{let n=this.data?.findIndex(r=>r.value===t);n>=0?this.select.selectedIndex=n:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){let{selection:n,column:r}=this;ci(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:t!==""&&t!==void 0?ws(r,Cr(t)):null}):wr(n)&&n.update(t)}query(t=[]){let{from:n,column:r}=this;return n?dt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){let{data:t,format:n,select:r}=this;r.replaceChildren();for(let{value:i,label:o}of t){let s=document.createElement("option");s.setAttribute("value",i),s.innerText=o??n(i),this.select.appendChild(s)}return this.selection&&this.selectedValue(this.selection?.value??""),this}};var Ynt={contains:C2,prefix:k2,suffix:F2,regexp:L2},Xnt=0;var sg=class extends fr{constructor({element:t,filterBy:n,from:r,column:i,label:o,type:s="contains",as:a}={}){if(super(n),this.id="search_"+ ++Xnt,this.type=s,this.from=r,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,o){let c=document.createElement("label");c.setAttribute("for",this.id),c.innerText=o,this.element.appendChild(c)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),ci(this.selection)||this.selection.addEventListener("value",c=>{c!==this.searchbox.value&&(this.searchbox.value=c)}))}reset(){this.searchbox.value=""}publish(t){let{selection:n,column:r,type:i}=this;ci(n)?n.update({source:this,schema:{type:i},value:t,predicate:t?Ynt[i](r,Cr(t)):null}):wr(n)&&n.update(t)}query(t=[]){let{from:n,column:r}=this;return n?dt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){let t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(let r of this.data){let i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}};var Wnt=0;var ag=class extends fr{constructor({element:t,filterBy:n,as:r,min:i,max:o,step:s,from:a,column:c,label:l=c,value:u=r?.value,width:f}={}){if(super(n),this.id="slider_"+ ++Wnt,this.from=a,this.column=c||"value",this.selection=r,this.min=i,this.max=o,this.step=s,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,l){let h=document.createElement("label");h.setAttribute("for",this.id),h.innerText=l,this.element.appendChild(h)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),o!=null&&this.slider.setAttribute("max",o),s!=null&&this.slider.setAttribute("step",s),u!=null&&(this.slider.setAttribute("value",u),this.selection?.value===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),ci(this.selection)||this.selection.addEventListener("value",h=>{h!==+this.slider.value&&(this.slider.value=h)}))}query(t=[]){let{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:dt.select({min:si(r),max:oi(r)}).from(n).where(t)}queryResult(t){let{min:n,max:r}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",n),this.max==null&&this.slider.setAttribute("max",r),this.step==null&&this.slider.setAttribute("step",String((r-n)/500)),this}publish(t){let{selection:n,column:r}=this;ci(n)?n.update({source:this,schema:{type:"point"},value:t,predicate:ws(r,Cr(t))}):wr(this.selection)&&n.update(t)}};var J3=cU(e=>{let t=qv(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?Q3(n):`${n}`}),qv=cU(e=>t=>t===0?"0":t.toLocaleString(e)),eVt=J3(),nVt=qv();function Q3(e){return wf(e,"Invalid Date")}function cU(e){let t=null,n;return(r="en")=>r===t?n:n=e(t=r)}var Gnt=-1;var cg=class extends fr{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:o={},format:s,width:a,maxWidth:c,height:l=500,rowBatch:u=100}={}){super(n),this.id=`table-${++Gnt}`,this.from=r,this.columns=i,this.format=s,this.align=o,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),c&&(this.element.style.maxWidth=`${c}px`),this.element.style.maxHeight=`${l}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",h=>{let{pending:d,loaded:p}=this,{scrollHeight:m,scrollTop:y,clientHeight:g}=h.target,x=y<f;f=y,!(x||d||p)&&m-y<2*g&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){this.offset=t;let n=this.query(this.filterBy?.predicate(this));this.requestQuery(n),ai().prefetch(n.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>Sa(this.from,t))}fieldInfo(t){this.schema=t;let n=this.head;n.innerHTML="";let r=document.createElement("tr");for(let{column:i}of t){let o=document.createElement("th");o.addEventListener("click",s=>this.sort(s,i)),o.appendChild(document.createElement("span")),o.appendChild(document.createTextNode(i)),r.appendChild(o)}return n.appendChild(r),this.formats=Hnt(this.format,t),this.style.innerText=Qnt(this.id,Znt(this.align,t),Jnt(this.widths,t)),this}query(t=[]){let{from:n,limit:r,offset:i,schema:o,sortColumn:s,sortDesc:a}=this;return dt.from(n).select(o.map(c=>c.column)).where(t).orderby(s?a?E2(s):s:[]).limit(r).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){let{body:t,formats:n,data:r,schema:i,limit:o}=this,s=i.length,a=0;for(let c of r){++a;let l=document.createElement("tr");for(let u=0;u<s;++u){let f=c[i[u].column],h=document.createElement("td");h.innerText=f==null?"":n[u](f),l.appendChild(h)}t.appendChild(l)}return a<o&&(this.loaded=!0),this.pending=!1,this}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);let r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"\u25BE":"\u25B4"),this.requestData()}};function Hnt(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return qv(n);case"date":return Q3;default:return J3(n)}})}function Znt(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function Jnt(e={},t){return t.map(({column:n})=>e[n])}function Qnt(e,t,n){let r=[];return t.forEach((i,o)=>{let s=+n[o];if(i!=="left"||s){let a=i!=="left"?`text-align:${i};`:"",c=s?`width:${s}px;max-width:${s}px;`:"";r.push(`#${e} tr>:nth-child(${o+1}) {${a}${c}}`)}}),r.join(" ")}function lg(e,...t){let n=e?.context?.coordinator??ai();for(let r of t)n.connect(r)}function jv(e,t,n){let r=new t(n);return lg(e,r),r.element}function lU(e){return jv(this,og,e)}function uU(e){return jv(this,sg,e)}function fU(e){return jv(this,ag,e)}function hU(e){return jv(this,cg,e)}function dU({direction:e="vertical",wrap:t=!1},n){let r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),Object.assign(r,{value:{element:r}}),r}function pU(...e){return dU({direction:"vertical"},e.flat())}function mU(...e){return dU({direction:"horizontal"},e.flat())}function yU({dim:e="width",size:t=10}){let n=document.createElement("span");return n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`,Object.assign(n,{value:{element:n}})}function gU(e){return yU({dim:"height",size:e})}function xU(e){return yU({dim:"width",size:e})}var Vv={};Mr(Vv,{align:()=>d6,aspectRatio:()=>p6,axis:()=>m6,colorBase:()=>KE,colorClamp:()=>qE,colorConstant:()=>e8,colorDomain:()=>UE,colorExponent:()=>t8,colorInterpolate:()=>XE,colorLabel:()=>HE,colorN:()=>jE,colorNice:()=>VE,colorPivot:()=>WE,colorRange:()=>zE,colorReverse:()=>ZE,colorScale:()=>PE,colorScheme:()=>YE,colorSymmetric:()=>GE,colorTickFormat:()=>QE,colorZero:()=>JE,facetGrid:()=>R4,facetLabel:()=>$4,facetMargin:()=>B4,facetMarginBottom:()=>C4,facetMarginLeft:()=>k4,facetMarginRight:()=>F4,facetMarginTop:()=>L4,fxAlign:()=>X4,fxAriaDescription:()=>uE,fxAriaLabel:()=>lE,fxAxis:()=>Z4,fxDomain:()=>P4,fxFontVariant:()=>cE,fxGrid:()=>rE,fxInset:()=>q4,fxInsetLeft:()=>j4,fxInsetRight:()=>V4,fxLabel:()=>oE,fxLabelAnchor:()=>sE,fxLabelOffset:()=>aE,fxLine:()=>iE,fxNice:()=>z4,fxPadding:()=>W4,fxPaddingInner:()=>G4,fxPaddingOuter:()=>H4,fxRange:()=>U4,fxReverse:()=>fE,fxRound:()=>Y4,fxTickFormat:()=>eE,fxTickPadding:()=>tE,fxTickRotate:()=>nE,fxTickSize:()=>Q4,fxTickSpacing:()=>K4,fxTicks:()=>J4,fyAlign:()=>bE,fyAriaDescription:()=>RE,fyAriaLabel:()=>FE,fyAxis:()=>SE,fyDomain:()=>hE,fyFontVariant:()=>kE,fyGrid:()=>DE,fyInset:()=>mE,fyInsetBottom:()=>gE,fyInsetTop:()=>yE,fyLabel:()=>BE,fyLabelAnchor:()=>LE,fyLabelOffset:()=>CE,fyLine:()=>OE,fyNice:()=>pE,fyPadding:()=>wE,fyPaddingInner:()=>vE,fyPaddingOuter:()=>_E,fyRange:()=>dE,fyReverse:()=>$E,fyRound:()=>xE,fyTickFormat:()=>EE,fyTickPadding:()=>TE,fyTickRotate:()=>NE,fyTickSize:()=>ME,fyTickSpacing:()=>AE,fyTicks:()=>IE,grid:()=>g6,height:()=>c6,inset:()=>y6,label:()=>x6,lengthBase:()=>B8,lengthClamp:()=>N8,lengthConstant:()=>C8,lengthDomain:()=>T8,lengthExponent:()=>L8,lengthNice:()=>D8,lengthRange:()=>E8,lengthScale:()=>A8,lengthZero:()=>O8,margin:()=>i6,marginBottom:()=>h6,marginLeft:()=>l6,marginRight:()=>u6,marginTop:()=>f6,margins:()=>r6,name:()=>e6,opacityBase:()=>f8,opacityClamp:()=>o8,opacityConstant:()=>d8,opacityDomain:()=>r8,opacityExponent:()=>h8,opacityLabel:()=>a8,opacityNice:()=>s8,opacityRange:()=>i8,opacityReverse:()=>c8,opacityScale:()=>n8,opacityTickFormat:()=>u8,opacityZero:()=>l8,padding:()=>b6,projectionClip:()=>Y8,projectionDomain:()=>P8,projectionInset:()=>U8,projectionInsetBottom:()=>V8,projectionInsetLeft:()=>z8,projectionInsetRight:()=>q8,projectionInsetTop:()=>j8,projectionParallels:()=>F8,projectionPrecision:()=>R8,projectionRotate:()=>$8,projectionType:()=>k8,rBase:()=>S8,rClamp:()=>w8,rConstant:()=>M8,rDomain:()=>x8,rExponent:()=>I8,rNice:()=>v8,rRange:()=>b8,rScale:()=>g8,rZero:()=>_8,style:()=>s6,symbolDomain:()=>m8,symbolRange:()=>y8,symbolScale:()=>p8,width:()=>a6,xAlign:()=>N6,xAriaDescription:()=>W6,xAriaLabel:()=>X6,xAxis:()=>L6,xBase:()=>Z6,xClamp:()=>T6,xConstant:()=>Q6,xDomain:()=>v6,xExponent:()=>J6,xFontVariant:()=>Y6,xGrid:()=>U6,xInset:()=>I6,xInsetLeft:()=>M6,xInsetRight:()=>A6,xLabel:()=>q6,xLabelAnchor:()=>j6,xLabelOffset:()=>V6,xLine:()=>z6,xNice:()=>S6,xPadding:()=>D6,xPaddingInner:()=>O6,xPaddingOuter:()=>B6,xRange:()=>_6,xReverse:()=>G6,xRound:()=>E6,xScale:()=>w6,xTickFormat:()=>$6,xTickPadding:()=>R6,xTickRotate:()=>P6,xTickSize:()=>k6,xTickSpacing:()=>F6,xTicks:()=>C6,xZero:()=>H6,xyDomain:()=>o6,yAlign:()=>c4,yAriaDescription:()=>A4,yAriaLabel:()=>M4,yAxis:()=>h4,yBase:()=>N4,yClamp:()=>s4,yConstant:()=>O4,yDomain:()=>t4,yExponent:()=>D4,yFontVariant:()=>I4,yGrid:()=>b4,yInset:()=>r4,yInsetBottom:()=>o4,yInsetTop:()=>i4,yLabel:()=>v4,yLabelAnchor:()=>_4,yLabelOffset:()=>S4,yLine:()=>w4,yNice:()=>n4,yPadding:()=>l4,yPaddingInner:()=>u4,yPaddingOuter:()=>f4,yRange:()=>e4,yReverse:()=>T4,yRound:()=>a4,yScale:()=>K6,yTickFormat:()=>g4,yTickPadding:()=>y4,yTickRotate:()=>x4,yTickSize:()=>p4,yTickSpacing:()=>m4,yTicks:()=>d4,yZero:()=>E4});var ug=class extends Map{request(t,n){if(this.has(t))n(this.get(t));else{let r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);let{waiting:r}=this;return r?.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}clear(){return this.waiting?.clear(),super.clear()}},K3=new ug;function t6(e,t,n){(e?.context?.namedPlots??K3).request(t,n)}function bU(e,t,n){(e?.context?.namedPlots??K3).set(t,n)}function e6(e){return t=>bU(this,e,t)}function wU(e,t,n){wr(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function Knt(e,t){return n=>{wU(n,e,t)}}function n6(e){return t=>{for(let[n,r]of Object.entries(e))wU(t,n,r)}}function r6(e){let{top:t,bottom:n,left:r,right:i}=e,o={};return t!==void 0&&(o.marginTop=t),n!==void 0&&(o.marginBottom=n),r!==void 0&&(o.marginLeft=r),i!==void 0&&(o.marginRight=i),n6(o)}function i6(e){return n6({marginTop:e,marginBottom:e,marginLeft:e,marginRight:e})}function o6(e){return n6({xDomain:e,yDomain:e})}var B=e=>t=>Knt(e,t),s6=B("style"),a6=B("width"),c6=B("height"),l6=B("marginLeft"),u6=B("marginRight"),f6=B("marginTop"),h6=B("marginBottom"),d6=B("align"),p6=B("aspectRatio"),m6=B("axis"),y6=B("inset"),g6=B("grid"),x6=B("label"),b6=B("padding"),w6=B("xScale"),v6=B("xDomain"),_6=B("xRange"),S6=B("xNice"),I6=B("xInset"),M6=B("xInsetLeft"),A6=B("xInsetRight"),T6=B("xClamp"),E6=B("xRound"),N6=B("xAlign"),D6=B("xPadding"),O6=B("xPaddingInner"),B6=B("xPaddingOuter"),L6=B("xAxis"),C6=B("xTicks"),k6=B("xTickSize"),F6=B("xTickSpacing"),R6=B("xTickPadding"),$6=B("xTickFormat"),P6=B("xTickRotate"),U6=B("xGrid"),z6=B("xLine"),q6=B("xLabel"),j6=B("xLabelAnchor"),V6=B("xLabelOffset"),Y6=B("xFontVariant"),X6=B("xAriaLabel"),W6=B("xAriaDescription"),G6=B("xReverse"),H6=B("xZero"),Z6=B("xBase"),J6=B("xExponent"),Q6=B("xConstant"),K6=B("yScale"),t4=B("yDomain"),e4=B("yRange"),n4=B("yNice"),r4=B("yInset"),i4=B("yInsetTop"),o4=B("yInsetBottom"),s4=B("yClamp"),a4=B("yRound"),c4=B("yAlign"),l4=B("yPadding"),u4=B("yPaddingInner"),f4=B("yPaddingOuter"),h4=B("yAxis"),d4=B("yTicks"),p4=B("yTickSize"),m4=B("yTickSpacing"),y4=B("yTickPadding"),g4=B("yTickFormat"),x4=B("yTickRotate"),b4=B("yGrid"),w4=B("yLine"),v4=B("yLabel"),_4=B("yLabelAnchor"),S4=B("yLabelOffset"),I4=B("yFontVariant"),M4=B("yAriaLabel"),A4=B("yAriaDescription"),T4=B("yReverse"),E4=B("yZero"),N4=B("yBase"),D4=B("yExponent"),O4=B("yConstant"),B4=B("facetMargin"),L4=B("facetMarginTop"),C4=B("facetMarginBottom"),k4=B("facetMarginLeft"),F4=B("facetMarginRight"),R4=B("facetGrid"),$4=B("facetLabel"),P4=B("fxDomain"),U4=B("fxRange"),z4=B("fxNice"),q4=B("fxInset"),j4=B("fxInsetLeft"),V4=B("fxInsetRight"),Y4=B("fxRound"),X4=B("fxAlign"),W4=B("fxPadding"),G4=B("fxPaddingInner"),H4=B("fxPaddingOuter"),Z4=B("fxAxis"),J4=B("fxTicks"),Q4=B("fxTickSize"),K4=B("fxTickSpacing"),tE=B("fxTickPadding"),eE=B("fxTickFormat"),nE=B("fxTickRotate"),rE=B("fxGrid"),iE=B("fxLine"),oE=B("fxLabel"),sE=B("fxLabelAnchor"),aE=B("fxLabelOffset"),cE=B("fxFontVariant"),lE=B("fxAriaLabel"),uE=B("fxAriaDescription"),fE=B("fxReverse"),hE=B("fyDomain"),dE=B("fyRange"),pE=B("fyNice"),mE=B("fyInset"),yE=B("fyInsetTop"),gE=B("fyInsetBottom"),xE=B("fyRound"),bE=B("fyAlign"),wE=B("fyPadding"),vE=B("fyPaddingInner"),_E=B("fyPaddingOuter"),SE=B("fyAxis"),IE=B("fyTicks"),ME=B("fyTickSize"),AE=B("fyTickSpacing"),TE=B("fyTickPadding"),EE=B("fyTickFormat"),NE=B("fyTickRotate"),DE=B("fyGrid"),OE=B("fyLine"),BE=B("fyLabel"),LE=B("fyLabelAnchor"),CE=B("fyLabelOffset"),kE=B("fyFontVariant"),FE=B("fyAriaLabel"),RE=B("fyAriaDescription"),$E=B("fyReverse"),PE=B("colorScale"),UE=B("colorDomain"),zE=B("colorRange"),qE=B("colorClamp"),jE=B("colorN"),VE=B("colorNice"),YE=B("colorScheme"),XE=B("colorInterpolate"),WE=B("colorPivot"),GE=B("colorSymmetric"),HE=B("colorLabel"),ZE=B("colorReverse"),JE=B("colorZero"),QE=B("colorTickFormat"),KE=B("colorBase"),t8=B("colorExponent"),e8=B("colorConstant"),n8=B("opacityScale"),r8=B("opacityDomain"),i8=B("opacityRange"),o8=B("opacityClamp"),s8=B("opacityNice"),a8=B("opacityLabel"),c8=B("opacityReverse"),l8=B("opacityZero"),u8=B("opacityTickFormat"),f8=B("opacityBase"),h8=B("opacityExponent"),d8=B("opacityConstant"),p8=B("symbolScale"),m8=B("symbolDomain"),y8=B("symbolRange"),g8=B("rScale"),x8=B("rDomain"),b8=B("rRange"),w8=B("rClamp"),v8=B("rNice"),_8=B("rZero"),S8=B("rBase"),I8=B("rExponent"),M8=B("rConstant"),A8=B("lengthScale"),T8=B("lengthDomain"),E8=B("lengthRange"),N8=B("lengthClamp"),D8=B("lengthNice"),O8=B("lengthZero"),B8=B("lengthBase"),L8=B("lengthExponent"),C8=B("lengthConstant"),k8=B("projectionType"),F8=B("projectionParallels"),R8=B("projectionPrecision"),$8=B("projectionRotate"),P8=B("projectionDomain"),U8=B("projectionInset"),z8=B("projectionInsetLeft"),q8=B("projectionInsetRight"),j8=B("projectionInsetTop"),V8=B("projectionInsetBottom"),Y8=B("projectionClip");function vU(e,t){return{table:e,options:t}}var Yv={};Mr(Yv,{area:()=>W8,areaX:()=>G8,areaY:()=>H8,arrow:()=>UN,axisFx:()=>YN,axisFy:()=>XN,axisX:()=>jN,axisY:()=>VN,barX:()=>K8,barY:()=>tN,cell:()=>eN,cellX:()=>nN,cellY:()=>rN,circle:()=>uN,contour:()=>EN,delaunayLink:()=>RN,delaunayMesh:()=>$N,denseLine:()=>TN,density:()=>AN,densityX:()=>IN,densityY:()=>MN,dot:()=>aN,dotX:()=>cN,dotY:()=>lN,frame:()=>qN,geo:()=>JN,graticule:()=>KN,gridFx:()=>HN,gridFy:()=>ZN,gridX:()=>WN,gridY:()=>GN,heatmap:()=>NN,hexagon:()=>fN,hexbin:()=>BN,hexgrid:()=>LN,hull:()=>PN,image:()=>SN,line:()=>Z8,lineX:()=>J8,lineY:()=>Q8,link:()=>zN,raster:()=>DN,rasterTile:()=>ON,rect:()=>iN,rectX:()=>oN,rectY:()=>sN,regressionY:()=>CN,ruleX:()=>mN,ruleY:()=>yN,sphere:()=>QN,spike:()=>_N,text:()=>hN,textX:()=>dN,textY:()=>pN,tickX:()=>gN,tickY:()=>xN,vector:()=>bN,vectorX:()=>wN,vectorY:()=>vN,voronoi:()=>kN,voronoiMesh:()=>FN});var trt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function At(e,t,n={}){arguments.length===2&&!Array.isArray(t)&&(n=t,t=trt.has(e)?null:[{}]);let r=e.startsWith("area")||e.startsWith("line")?jy:Ln;return X8(r,e,t,n)}function X8(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function la(e,t,n){return r=>{r.addMark(new e(t,n))}}var W8=(...e)=>At("area",...e),G8=(...e)=>At("areaX",...e),H8=(...e)=>At("areaY",...e),Z8=(...e)=>At("line",...e),J8=(...e)=>At("lineX",...e),Q8=(...e)=>At("lineY",...e),K8=(...e)=>At("barX",...e),tN=(...e)=>At("barY",...e),eN=(...e)=>At("cell",...e),nN=(...e)=>At("cellX",...e),rN=(...e)=>At("cellY",...e),iN=(...e)=>At("rect",...e),oN=(...e)=>At("rectX",...e),sN=(...e)=>At("rectY",...e),aN=(...e)=>At("dot",...e),cN=(...e)=>At("dotX",...e),lN=(...e)=>At("dotY",...e),uN=(...e)=>At("circle",...e),fN=(...e)=>At("hexagon",...e),hN=(...e)=>At("text",...e),dN=(...e)=>At("textX",...e),pN=(...e)=>At("textY",...e),mN=(...e)=>At("ruleX",...e),yN=(...e)=>At("ruleY",...e),gN=(...e)=>At("tickX",...e),xN=(...e)=>At("tickY",...e),bN=(...e)=>At("vector",...e),wN=(...e)=>At("vectoX",...e),vN=(...e)=>At("vectorY",...e),_N=(...e)=>At("spike",...e),SN=(...e)=>At("image",...e),IN=(...e)=>X8(gh,"areaX",...e),MN=(...e)=>X8(gh,"areaY",...e),AN=(...e)=>la(Hy,...e),TN=(...e)=>la(Gy,...e),EN=(...e)=>la(Xy,...e),NN=(...e)=>la(Wy,...e),DN=(...e)=>la(yc,...e),ON=(...e)=>la(Qy,...e),BN=(...e)=>la(Jy,...e),LN=(...e)=>At("hexgrid",...e),CN=(...e)=>la(Ky,...e),kN=(...e)=>At("voronoi",...e),FN=(...e)=>At("voronoiMesh",...e),RN=(...e)=>At("delaunayLink",...e),$N=(...e)=>At("delaunayMesh",...e),PN=(...e)=>At("hull",...e),UN=(...e)=>At("arrow",...e),zN=(...e)=>At("link",...e),qN=(...e)=>At("frame",...e),jN=(...e)=>At("axisX",...e),VN=(...e)=>At("axisY",...e),YN=(...e)=>At("axisFx",...e),XN=(...e)=>At("axisFy",...e),WN=(...e)=>At("gridX",...e),GN=(...e)=>At("gridY",...e),HN=(...e)=>At("gridFx",...e),ZN=(...e)=>At("gridFy",...e),JN=(...e)=>la(Zy,...e),QN=(...e)=>At("sphere",...e),KN=(...e)=>At("graticule",...e);var Xv={};Mr(Xv,{highlight:()=>tD,intervalX:()=>sD,intervalXY:()=>cD,intervalY:()=>aD,nearestX:()=>iD,nearestY:()=>oD,pan:()=>lD,panX:()=>uD,panY:()=>fD,panZoom:()=>hD,panZoomX:()=>dD,panZoomY:()=>pD,toggle:()=>_h,toggleColor:()=>rD,toggleX:()=>eD,toggleY:()=>nD});function xc(e,t){return n=>{let r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function tD({by:e,...t}){return xc(tg,{selection:e,channels:t})}function _h({as:e,...t}){return xc(Yl,{...t,selection:e})}function eD(e){return _h({...e,channels:["x"]})}function nD(e){return _h({...e,channels:["y"]})}function rD(e){return _h({...e,channels:["color"]})}function iD({as:e,...t}){return xc(wh,{...t,selection:e,channel:"x"})}function oD({as:e,...t}){return xc(wh,{...t,selection:e,channel:"y"})}function sD({as:e,...t}){return xc(gc,{...t,selection:e,channel:"x"})}function aD({as:e,...t}){return xc(gc,{...t,selection:e,channel:"y"})}function cD({as:e,...t}){return xc(rg,{...t,selection:e})}function Sh(e){return xc(ig,e)}function lD(e={}){return Sh({...e,zoom:!1})}function uD(e={}){return Sh({...e,zoom:!1,pany:!1})}function fD(e={}){return Sh({...e,zoom:!1,panx:!1})}function hD(e={}){return Sh(e)}function dD(e={}){return Sh({...e,pany:!1})}function pD(e={}){return Sh({...e,panx:!1})}var Wv={};Mr(Wv,{colorLegend:()=>yD,opacityLegend:()=>gD,symbolLegend:()=>xD});function mD(e,t={}){if(t.for){let{for:n,...r}=t,i=new vh(e,r),o=typeof n,s=a=>a.addLegend(i,!1);return o==="string"?t6(this,n,s):n.value&&s(n.value),i.element}else return n=>n.addLegend(new vh(e,t))}function yD(e){return mD.call(this,"color",e)}function gD(e){return mD.call(this,"opacity",e)}function xD(e){return mD.call(this,"symbol",e)}function _U(...e){let t=new qy;return e.flat().forEach(n=>n(t)),lg(this,...t.marks),t.update(),t.element}function wD({coordinator:e=ai(),namedPlots:t=new ug,extensions:n=null,...r}={}){return{...bD,...n,context:{coordinator:e,namedPlots:t,...r}}}var SU="spec",Gv="literal",rYt="dataref",IU="options",MU="selection",AU="paramref",TU="param",vD="select",Hv="value",EU="crossfilter",Zv="intersect",NU="union",DU="single",OU="data",BU="expression",bc="sql",ua="agg",fg="input",Ih="hconcat",Mh="vconcat",Ah="hspace",Th="vspace",Jv="mark",_D="from",Eh="plot",hg="legend",LU="attribute",CU="transform",kU="interactor",dg="Fixed";var $t=class{constructor(t,n=null){this.type=t,this.children=n}instantiate(t){throw Error("instantiate not implemented")}codegen(t){return Error("codegen not implemented")}toJSON(){return Error("toJSON not implemented")}};var pg=class extends $t{constructor(t,n,r,i,o,s){super(SU,[t]),this.root=t,this.meta=n,this.config=r,this.data=i,this.params=o,this.plotDefaults=s}toJSON(){let{root:t,meta:n,config:r,plotDefaults:i}=this,o=new Map(Object.entries(this.data)),s=new Map(Object.entries(this.params)),a={};if(n&&(a.meta={...n}),r&&(a.config={...r}),o?.size){let c=a.data={};for(let[l,u]of o)c[l]=u.toJSON()}if(s?.size){let c=a.params={};for(let[l,u]of s)c[l]=u.toJSON()}if(i?.length){let c=a.plotDefaults={};for(let l of i)Object.assign(c,l.toJSON())}return Object.assign(a,t.toJSON())}};function FU(e){let t=typeof e;return t==="object"?e?.param:t==="string"?ert(e):null}function ert(e){return e?.[0]==="$"?e.slice(1):null}function mg(e){return`$${e}`}function Qv(e){return[e].flat()}function Si(e){return Array.isArray(e)}function Nh(e){return e!==null&&typeof e=="object"&&!Si(e)}function wc(e){return typeof e=="string"}function Dh(e,t){throw Object.assign(Error(e),{data:t})}var nrt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function RU(e,t){return nrt.test(e+="")?new Date(e):t}function Sr(e,t){let n={};for(let r in e)n[r]=t.maybeSelection(e[r]);return new Oh(n)}var Oh=class e extends $t{constructor(t){super(IU),this.options=t}filter(t){let n=Object.fromEntries(Object.entries(this.options).filter(([r,i])=>t(r,i)));return new e(n)}instantiate(t){let{options:n}=this,r={};for(let i in n)r[i]=n[i].instantiate(t);return r}codegen(t){let{options:n}=this,r=[];for(let i in n)r.push(`${i}: ${n[i].codegen(t)}`);return r.length?`{${t.maybeLineWrap(r)}}`:""}toJSON(){let{options:t}=this,n={};for(let r in t)n[r]=t[r].toJSON();return n}};var UU="table",zU="parquet",qU="csv",SD="json",s_="spatial",$U=new Map([[UU,srt],[zU,art],[qU,crt],[SD,lrt],[s_,urt]]);function jU(e,t,n){let r=rrt(t);if($U.has(r.type))return $U.get(r.type)(e,r,n);n.error("Unrecognized data format type.",t)}function rrt(e){return Si(e)&&(e={type:"json",data:e}),wc(e)&&(e={type:"table",query:e}),{...e,type:irt(e)}}function irt(e){return e.type||ort(e.file)||"table"}function ort(e){let t=e?.lastIndexOf(".");return t>0?e.slice(t+1):null}function srt(e,t,n){let{query:r,type:i,...o}=t;return new t_(e,r,Sr(o,n))}function art(e,t,n){let{file:r,type:i,...o}=t;return new n_(e,r,Sr(o,n))}function crt(e,t,n){let{file:r,type:i,...o}=t;return new r_(e,r,Sr(o,n))}function lrt(e,t,n){let{data:r,file:i,type:o,...s}=t,a=Sr(s,n);return r?new o_(e,r,a):new i_(e,i,a)}function urt(e,t,n){let{file:r,type:i,...o}=t;return new e_(e,r,Sr(o,n))}function PU(e,t){return t?new URL(e,t).toString():e}function frt(e,t){let n=e?.codegen(t);return n?`, ${n}`:""}var Kv=class extends $t{constructor(t,n){super(OU),this.name=t,this.format=n}},Bh=class extends Kv{constructor(t,n){super(t,n)}instantiateQuery(t){t.error("instantiateQuery not implemented")}codegenQuery(t){t.error("codegenQuery not implemented")}instantiate(t){let n=this.instantiateQuery(t);if(n)return n}codegen(t){let n=this.codegenQuery(t);if(n)return n}},t_=class extends Bh{constructor(t,n,r){super(t,UU),this.query=n?.trim(),this.options=r}instantiateQuery(t){let{name:n,query:r,options:i}=this;if(r)return t.api.create(n,r,i.instantiate(t))}codegenQuery(t){let{name:n,query:r,options:i}=this;if(r)return`\`${bo(n,r,i.instantiate(t))}\``}toJSON(){let{format:t,query:n,options:r}=this;return{type:t,query:n,...r.toJSON()}}},Xl=class extends Bh{constructor(t,n,r,i,o){super(t,n),this.file=i,this.method=r,this.options=o}instantiateQuery(t){let{name:n,method:r,file:i,options:o}=this,s=PU(i,t.baseURL),a=o?.instantiate(t);return t.api[r](n,s,a)}codegenQuery(t){let{name:n,method:r,file:i,options:o}=this,s=PU(i,t.baseURL),a=frt(o,t);return`${t.ns()}${r}("${n}", "${s}"${a})`}toJSON(){let{format:t,file:n,options:r}=this;return{type:t,file:n,...r.toJSON()}}},e_=class extends Xl{constructor(t,n,r){super(t,s_,"loadSpatial",n,r)}},n_=class extends Xl{constructor(t,n,r){super(t,zU,"loadParquet",n,r)}},r_=class extends Xl{constructor(t,n,r){super(t,qU,"loadCSV",n,r)}},i_=class extends Xl{constructor(t,n,r){super(t,SD,"loadJSON",n,r)}},o_=class extends Bh{constructor(t,n,r){super(t,SD),this.data=n,this.options=r}instantiateQuery(t){let{name:n,data:r,options:i}=this;return t.api.loadObjects(n,r,i.instantiate(t))}codegenQuery(t){let{name:n,data:r,options:i}=this,o=i?","+i.codegen(t):"",s=`[
    `+r.map(a=>JSON.stringify(a)).join(`,
    `)+`
  ]`;return`${t.ns()}loadObjects("${n}", ${s}${o})`}toJSON(){let{format:t,data:n,options:r}=this;return{type:t,data:n,...r.toJSON()}}};function a_(e){let t=e.config?.extensions,n=new Set(t?Qv(t):[]);for(let r of Object.values(e.data))r.format===s_&&n.add("spatial");return n}async function hrt(e,t){let{data:n,params:r,plotDefaults:i}=e,o=new c_({plotDefaults:i,...t}),s=[],a=a_(e);s.push(...Array.from(a).map(c=>ep(c)));for(let c of Object.values(n)){let l=c.instantiate(o);l&&s.push(l)}s.length>0&&await o.coordinator.exec(s);for(let[c,l]of Object.entries(r))if(!o.activeParams.has(c)){let u=l.instantiate(o);o.activeParams.set(c,u)}return{element:e.root.instantiate(o),params:o.activeParams}}var c_=class{constructor({api:t=wD(),plotDefaults:n=[],params:r=new Map,baseURL:i=null}={}){this.api=t,this.plotDefaults=n,this.activeParams=r,this.baseURL=i,this.coordinator=t.context.coordinator}error(t,n){Dh(t,n)}};function drt(e,t={}){let{root:n,data:r,params:i,plotDefaults:o}=e,{preamble:s,...a}=t,c=new l_({plotDefaults:o,...a}),l=[];for(let[x,b]of c.imports)l.push(wc(b)?`import ${b} from "${x}";`:`import { ${b.join(", ")} } from "${x}";`);let u=s?Qv(s).map(x=>`${c.tab()}${x}`):[],f=[];if(c.connector){let x=`${c.ns()}${c.connector}Connector()`;f.push(`${c.tab()}${c.ns()}coordinator().databaseConnector(${x});`)}let h=[];for(let x of a_(e))h.push(`${c.ns()}loadExtension("${x}")`);for(let x of Object.values(r)){let b=x.codegen(c);b&&h.push(b)}let d=[];h.length&&(d.push(`${c.tab()}await ${c.ns()}coordinator().exec([`),c.indent(),d.push(h.map(x=>`${c.tab()}${x}`).join(`,
`)),c.undent(),d.push(`${c.tab()}]);`));let p=[];for(let[x,b]of Object.entries(i))p.push(`const ${mg(x)} = ${b.codegen(c)};`);let m=[],y=o;y.length&&(m=["const defaultAttributes = [",y.map(x=>"  "+x.codegen(c)).join(`,
`),"];"]);let g=[`export default ${n.codegen(c)};`];return[...l,...Lh(l),...u,...Lh(u),...f,...Lh(f),...d,...Lh(d),...p,...Lh(p),...m,...Lh(m),...g].join(`
`)}var l_=class{constructor({plotDefaults:t=void 0,namespace:n="vg",connector:r=void 0,imports:i=new Map([["@uwdata/vgplot","* as vg"]]),baseURL:o=void 0,depth:s=0}={}){this.plotDefaults=t,this.namespace=`${n}.`,this.connector=r,this.imports=i,this.baseURL=o,this.depth=s}addImport(t,n){this.imports.has(t)?this.imports.get(t).push(n):this.imports.set(t,[n])}setImports(t,n){this.imports.set(t,n)}ns(){return this.namespace}indent(){this.depth+=1}undent(){this.depth-=1}tab(){return Array.from({length:this.depth},()=>"  ").join("")}stringify(t){if(Si(t)){let n=t.map(r=>this.stringify(r));return`[${this.maybeLineWrap(n)}]`}else if(Nh(t)){let n=Object.entries(t).map(([r,i])=>`${prt(r)}: ${this.stringify(i)}`);return`{${this.maybeLineWrap(n)}}`}else return JSON.stringify(t)}maybeLineWrap(t){let n=80-2*this.depth;if(2*t.length+t.reduce((i,o)=>i+o.length,0)>n){this.indent();let i=t.map(o=>`
${this.tab()}${o}`).join(",");return this.undent(),i+`
`+this.tab()}else return t.join(", ")}error(t,n){Dh(t,n)}};function prt(e){return/^[A-Za-z_$]\w*/.test(e)?e:JSON.stringify(e)}function Lh(e){return e?.length?[""]:[]}var Wl=class extends $t{constructor(t){super(Gv),this.value=t}instantiate(){return this.value}codegen(t){return t.stringify(this.value)}toJSON(){return this.value}};var Gl=class extends $t{constructor(t=Zv,n){super(MU),this.select=t,this.cross=n}instantiate(t){let{select:n,cross:r}=this;return t.api.Selection[n]({cross:r})}codegen(t){let{select:n,cross:r}=this,i=r!=null?`{ cross: ${r} }`:"";return`${t.ns()}Selection.${n}(${i})`}toJSON(){let{select:t,cross:n}=this;return{select:t,cross:n}}};var mrt=new Set([Hv,DU,EU,Zv,NU]);function VU(e,t){let n=Nh(e)?e:{value:e},{select:r=Hv,cross:i,date:o,value:s}=n;return mrt.has(r)||t.error(`Unrecognized param type: ${r}`,n),r!==Hv?new Gl(r,i):Si(s)?new Hl(s.map(a=>t.maybeParam(a))):new Hl(s,o)}var Hl=class extends $t{constructor(t,n){super(TU),this.value=t,this.date=n}instantiate(t){let{date:n,value:r}=this,{Param:i}=t.api;return Si(r)?i.array(r.map(o=>o.instantiate(t))):i.value(RU(n,r))}codegen(t){let{value:n,date:r}=this,i=`${t.ns()}Param.`;return Si(n)?`${i}array([${n.map(o=>o.codegen(t)).join(", ")}])`:r?`${i}value(new Date(${JSON.stringify(r)}))`:`${i}value(${JSON.stringify(n)})`}toJSON(){let{date:t,value:n}=this;return Si(n)?n.map(r=>r.toJSON()):t?{date:t}:n}};var yg=class extends $t{constructor(t){super(AU),this.name=t}instantiate(t){return t.activeParams?.get(this.name)}codegen(){return mg(this.name)}toJSON(){return mg(this.name)}};function h_(e,t,n){return n.plot?.attributes?.has(e)||n.error(`Unrecognized attribute: ${e}`),new u_(e,t===dg?new f_:n.maybeParam(t))}var u_=class extends $t{constructor(t,n){super(LU),this.name=t,this.value=n}instantiate(t){let{name:n,value:r}=this;return t.api[n](r.instantiate(t))}codegen(t){let{name:n,value:r}=this;return`${t.tab()}${t.ns()}${n}(${r.codegen(t)})`}toJSON(){let{name:t,value:n}=this;return{[t]:n.toJSON()}}},f_=class extends $t{constructor(){super(Gv),this.value=dg}instantiate(t){return t.api[dg]}codegen(t){return`${t.ns()}${dg}`}toJSON(){return this.value}};function YU(e,t){let n=e[Ih].map(r=>t.parseComponent(r));return new d_(n)}var d_=class extends $t{constructor(t){super(Ih,t)}instantiate(t){return t.api[Ih](this.children.map(n=>n.instantiate(t)))}codegen(t){t.indent();let n=this.children.map(r=>r.codegen(t));return t.undent(),`${t.tab()}${t.ns()}${this.type}(
${n.join(`,
`)}
${t.tab()})`}toJSON(){return{[this.type]:this.children.map(t=>t.toJSON())}}};function XU(e){return new p_(e[Ah])}var p_=class extends $t{constructor(t){super(Ah),this.value=t}instantiate(t){return t.api[Ah](this.value)}codegen(t){return`${t.tab()}${t.ns()}${this.type}(${t.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}};function WU(e,t){let{[fg]:n,...r}=e;return t.inputs?.has(n)||t.error(`Unrecognized input type: ${n}`,e),new m_(n,Sr(r,t))}var m_=class extends $t{constructor(t,n){super(fg),this.name=t,this.options=n}instantiate(t){return t.api[this.name](this.options.instantiate(t))}codegen(t){let n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.name}(${n})`}toJSON(){let{type:t,name:n,options:r}=this;return{[t]:n,...r.toJSON()}}};function g_(e,t){let{[hg]:n,...r}=e,i=`${n}Legend`;return t.plot?.legends?.has(i)||t.error(`Unrecognized legend type: ${n}`,e),new y_(i,n,Sr(r,t))}var y_=class extends $t{constructor(t,n,r){super(hg),this.key=t,this.name=n,this.options=r}instantiate(t){return t.api[this.key](this.options.instantiate(t))}codegen(t){let n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.key}(${n})`}toJSON(){let{type:t,name:n,options:r}=this;return{[t]:n,...r.toJSON()}}};function GU(e,t){let{[vD]:n,...r}=e;return t.plot?.interactors?.has(n)||t.error(`Unrecognized interactor type: ${n}`,e),new x_(n,Sr(r,t))}var x_=class extends $t{constructor(t,n){super(kU),this.name=t,this.options=n}instantiate(t){return t.api[this.name](this.options.instantiate(t))}codegen(t){let n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.name}(${n})`}toJSON(){let{name:t,options:n}=this;return{[vD]:t,...n.toJSON()}}};function HU(e,t){let{label:n}=e,r=e[bc]?bc:e[ua]?ua:t.error("Unrecognized expression type",e),i=e[r],o=i.split(/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\$\w+)/g),s=[""],a=[];for(let c=0,l=0;c<o.length;++c){let u=o[c];u.startsWith("$")?(a[l]=t.maybeParam(u),s[++l]=""):s[l]+=u}return new b_(i,s,a,n,r===ua)}var b_=class extends $t{constructor(t,n,r,i,o){super(BU),this.value=t,this.spans=n,this.params=r,this.label=i,this.aggregate=o}instantiate(t){let{spans:n,params:r,label:i,aggregate:o}=this,s=t.api[o?ua:bc],a=r.map(c=>c.instantiate(t));return s(n,...a).annotate({label:i})}codegen(t){let{spans:n,params:r,label:i,aggregate:o}=this,s=o?ua:bc,a="",c=r.length;for(let l=0;l<c;++l)a+=n[l]+"${"+r[l].codegen(t)+"}";return a+=n[c],`${t.ns()}${s}\`${a}\``+(i?`.annotate({ label: ${JSON.stringify(i)} })`:"")}toJSON(){return{[this.aggregate?ua:bc]:this.value}}};function ZU(e,t){if(!e)return null;if(Si(e))return new Wl(e);let{from:n,...r}=e;return new w_(n,Sr(r,t))}var w_=class extends $t{constructor(t,n){super(_D),this.table=t,this.options=n}instantiate(t){let{table:n,options:r}=this;return t.api[_D](n,r.instantiate(t))}codegen(t){let{type:n,table:r,options:i}=this,o=i.codegen(t);return`${t.ns()}${n}("${r}"${o?", "+o:""})`}toJSON(){let{type:t,table:n,options:r}=this;return{[t]:n,...r.toJSON()}}};function ID(e){return e==null?[]:[e].flat()}function JU(e,t){let n;for(let o in e)t.transforms.has(o)&&(n=o);if(!n)return;let r=n==="count"||n==null?[]:ID(e[n]),i={distinct:e.distinct,orderby:ID(e.orderby).map(o=>t.maybeParam(o)),partitionby:ID(e.partitionby).map(o=>t.maybeParam(o)),rows:e.rows?t.maybeParam(e.rows):null,range:e.range?t.maybeParam(e.range):null};return new v_(n,r,i)}var v_=class extends $t{constructor(t,n,r){super(CU),this.name=t,this.args=n,this.options=r}instantiate(t){let{name:n,args:r,options:i}=this,{distinct:o,orderby:s,partitionby:a,rows:c,range:l}=i,u=t.api[n](...r);return o&&(u=u.distinct()),s.length&&(u=u.orderby(s.map(f=>f.instantiate(t)))),a.length&&(u=u.partitionby(a.map(f=>f.instantiate(t)))),c!=null?u=u.rows(c.instantiate(t)):l!=null&&(u=u.range(l.instantiate(t))),u}codegen(t){let{name:n,args:r,options:i}=this,{distinct:o,orderby:s,partitionby:a,rows:c,range:l}=i,u=`${t.ns()}${n}(`+r.map(f=>JSON.stringify(f)).join(", ")+")";if(o&&(u+=".distinct()"),s.length){let f=s.map(h=>h.codegen(t));u+=`.orderby(${f.join(", ")})`}if(a.length){let f=a.map(h=>h.codegen(t));u+=`.partitionby(${f.join(", ")})`}return c?u+=`.rows(${c.codegen(t)})`:l&&(u+=`.range(${l.codegen(t)})`),u}toJSON(){let{name:t,args:n,options:r}=this,{distinct:i,orderby:o,partitionby:s,rows:a,range:c}=r,l={[t]:MD(n)};return i&&(l.distinct=!0),o.length&&(l.orderby=MD(o.map(u=>u.toJSON()))),s.length&&(l.partitionby=MD(s.map(u=>u.toJSON()))),a?l.rows=a.toJSON():c&&(l.range=c.toJSON()),l}};function MD(e){return e.length===0?"":e.length===1?e[0]:e}function yrt(e,t){if(Nh(e))return e[bc]||e[ua]?HU(e,t):JU(e,t)}function QU(e,t){let{mark:n,data:r,...i}=e;t.plot?.marks?.has(n)||t.error(`Unrecognized mark type: ${n}`,e);let o=ZU(r,t),s={};for(let a in i){let c=i[a];s[a]=yrt(c,t)||t.maybeParam(c)}return new __(n,o,new Oh(s))}var __=class extends $t{constructor(t,n,r){super(Jv),this.name=t,this.data=n,this.options=r}instantiate(t){let{name:n,data:r,options:i}=this,o=i.instantiate(t);return r?t.api[n](r.instantiate(t),o):t.api[n](o)}codegen(t){let{name:n,data:r,options:i}=this,o=r?r.codegen(t):"",s=i.codegen(t),a;if(o&&s){t.indent();let c=i.codegen(t);a=`
${t.tab()}${o},
${t.tab()}${c}
`,t.undent(),a+=t.tab()}else a=`${o}${s}`;return`${t.tab()}${t.ns()}${n}(${a})`}toJSON(){let{type:t,name:n,data:r,options:i}=this;return{[t]:n,...r?{data:r.toJSON()}:{},...i.toJSON()}}};function KU(e,t){return AD({plot:[e]},t)}function AD(e,t){let{[Eh]:n,...r}=e,i=Object.entries(r).map(([s,a])=>h_(s,a,t)),o=n.map(s=>wc(s.mark)?QU(s,t):wc(s.legend)?g_(s,t):wc(s.select)?GU(s,t):t.error("Invalid plot entry.",s));return new S_(o,i)}var S_=class extends $t{constructor(t,n){super(Eh,t),this.attributes=n}instantiate(t){let n=[...t.plotDefaults||[],...this.attributes||[]];return t.api[Eh](this.children.map(r=>r.instantiate(t)),n.map(r=>r.instantiate(t)))}codegen(t){let{type:n,children:r,attributes:i}=this;t.indent();let o=[...r.map(s=>s.codegen(t)),...t.plotDefaults?.length?[`${t.tab()}...defaultAttributes`]:[],...i.map(s=>s.codegen(t))].join(`,
`);return t.undent(),`${t.tab()}${t.ns()}${n}(
${o}
${t.tab()})`}toJSON(){let{type:t,children:n,attributes:r}=this,i={[t]:n.map(o=>o.toJSON())};for(let o of r)Object.assign(i,o.toJSON());return i}};function tz(e,t){let n=e[Mh].map(r=>t.parseComponent(r));return new I_(n)}var I_=class extends $t{constructor(t){super(Mh,t)}instantiate(t){return t.api[Mh](this.children.map(n=>n.instantiate(t)))}codegen(t){t.indent();let n=this.children.map(r=>r.codegen(t));return t.undent(),`${t.tab()}${t.ns()}${this.type}(
${n.join(`,
`)}
${t.tab()})`}toJSON(){return{[this.type]:this.children.map(t=>t.toJSON())}}};function ez(e){return new M_(e[Th])}var M_=class extends $t{constructor(t){super(Th),this.value=t}instantiate(t){return t.api[Th](this.value)}codegen(t){return`${t.tab()}${t.ns()}${this.type}(${t.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}};function nz(e=[]){return new Map([[Eh,AD],[Jv,KU],[hg,g_],[fg,WU],[Ih,YU],[Mh,tz],[Ah,XU],[Th,ez],...e])}function rz(e=[]){return new Set(["menu","search","slider","table",...e])}function iz({attributes:e=grt(),interactors:t=xrt(),legends:n=brt(),marks:r=wrt()}={}){return{attributes:e,interactors:t,legends:n,marks:r}}function grt(e=[]){return new Set([...Object.keys(Vv),...e])}function xrt(e=[]){return new Set([...Object.keys(Xv),...e])}function brt(e=[]){return new Set([...Object.keys(Wv),...e])}function wrt(e=[]){return new Set([...Object.keys(Yv),...e])}function oz(e=[]){return new Set(["argmin","argmax","avg","bin","centroid","centroidX","centroidY","count","dateMonth","dateMonthDay","dateDay","first","geojson","last","max","median","min","mode","product","quantile","sum","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value",...e])}function vrt(e,t){return new TD(t).parse(e)}var TD=class{constructor({components:t=nz(),transforms:n=oz(),inputs:r=rz(),plot:i=iz(),params:o=[],datasets:s=[]}={}){this.components=t,this.transforms=n,this.inputs=r,this.plot=i,this.params=new Map(o),this.datasets=new Map(s)}parse(t){let{meta:n,config:r,data:i={},params:o,plotDefaults:s={},...a}=t;for(let c in i)this.datasets.set(c,jU(c,i[c],this));this.plotDefaults=Object.entries(s).map(([c,l])=>h_(c,l,this));for(let c in o)this.params.set(c,VU(o[c],this));return new pg(this.parseComponent(a),n?{...n}:void 0,r?{...r}:void 0,Object.fromEntries(this.datasets),Object.fromEntries(this.params),this.plotDefaults)}parseComponent(t){for(let[n,r]of this.components)if(t[n]!=null)return r(t,this);this.error("Invalid specification.",t)}maybeParam(t,n=()=>new Hl){let{params:r}=this,i=FU(t);if(i){if(!r.has(i)){let o=n();r.set(i,o)}return new yg(i)}return new Wl(t)}maybeSelection(t){return this.maybeParam(t,()=>new Gl)}error(t,n){Dh(t,n)}};export{ua as AGG,$t as ASTNode,LU as ATTRIBUTE,EU as CROSSFILTER,r_ as CSVDataNode,l_ as CodegenContext,OU as DATA,rYt as DATAREF,Kv as DataNode,BU as EXPRESSION,b_ as ExpressionNode,dg as FIXED,_D as FROM,Xl as FileDataNode,Ih as HCONCAT,d_ as HConcatNode,Ah as HSPACE,p_ as HSpaceNode,fg as INPUT,kU as INTERACTOR,Zv as INTERSECT,m_ as InputNode,c_ as InstantiateContext,i_ as JSONDataNode,hg as LEGEND,Gv as LITERAL,o_ as LiteralJSONDataNode,Wl as LiteralNode,Jv as MARK,IU as OPTIONS,Oh as OptionsNode,TU as PARAM,AU as PARAMREF,Eh as PLOT,Hl as ParamNode,yg as ParamRefNode,n_ as ParquetDataNode,u_ as PlotAttributeNode,f_ as PlotFixedNode,w_ as PlotFromNode,x_ as PlotInteractorNode,y_ as PlotLegendNode,__ as PlotMarkNode,S_ as PlotNode,Bh as QueryDataNode,vD as SELECT,MU as SELECTION,DU as SINGLE,SU as SPEC,bc as SQL,Gl as SelectionNode,e_ as SpatialDataNode,pg as SpecNode,CU as TRANSFORM,t_ as TableDataNode,v_ as TransformNode,NU as UNION,Hv as VALUE,Mh as VCONCAT,I_ as VConcatNode,Th as VSPACE,M_ as VSpaceNode,hrt as astToDOM,drt as astToESM,vrt as parseSpec};
