var aX=Object.create;var eA=Object.defineProperty;var cX=Object.getOwnPropertyDescriptor;var lX=Object.getOwnPropertyNames;var uX=Object.getPrototypeOf,fX=Object.prototype.hasOwnProperty;var ak=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ir=(e,t)=>{for(var r in t)eA(e,r,{get:t[r],enumerable:!0})},dX=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of lX(t))!fX.call(e,i)&&i!==r&&eA(e,i,{get:()=>t[i],enumerable:!(n=cX(t,i))||n.enumerable});return e};var hX=(e,t,r)=>(r=e!=null?aX(uX(e)):{},dX(t||!e||!e.__esModule?eA(r,"default",{value:e,enumerable:!0}):r,e));var CW=ak((Une,kW)=>{"use strict";function vft(e,t,r,n,i){for(var o=i+1;n<=i;){var s=n+i>>>1,a=e[s],c=r!==void 0?r(a,t):a-t;c>=0?(o=s,i=s-1):n=s+1}return o}function Sft(e,t,r,n,i){for(var o=i+1;n<=i;){var s=n+i>>>1,a=e[s],c=r!==void 0?r(a,t):a-t;c>0?(o=s,i=s-1):n=s+1}return o}function Ift(e,t,r,n,i){for(var o=n-1;n<=i;){var s=n+i>>>1,a=e[s],c=r!==void 0?r(a,t):a-t;c<0?(o=s,n=s+1):i=s-1}return o}function Tft(e,t,r,n,i){for(var o=n-1;n<=i;){var s=n+i>>>1,a=e[s],c=r!==void 0?r(a,t):a-t;c<=0?(o=s,n=s+1):i=s-1}return o}function Aft(e,t,r,n,i){for(;n<=i;){var o=n+i>>>1,s=e[o],a=r!==void 0?r(s,t):s-t;if(a===0)return o;a<=0?n=o+1:i=o-1}return-1}function Ex(e,t,r,n,i,o){return typeof r=="function"?o(e,t,r,n===void 0?0:n|0,i===void 0?e.length-1:i|0):o(e,t,void 0,r===void 0?0:r|0,n===void 0?e.length-1:n|0)}kW.exports={ge:function(e,t,r,n,i){return Ex(e,t,r,n,i,vft)},gt:function(e,t,r,n,i){return Ex(e,t,r,n,i,Sft)},lt:function(e,t,r,n,i){return Ex(e,t,r,n,i,Ift)},le:function(e,t,r,n,i){return Ex(e,t,r,n,i,Tft)},eq:function(e,t,r,n,i){return Ex(e,t,r,n,i,Aft)}}});var YW=ak((Pne,qW)=>{"use strict";var $T=CW(),mm=0,Ed=1,PT=2;qW.exports=Eft;function mF(e,t,r,n,i){this.mid=e,this.left=t,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(t?t.count:0)+(r?r.count:0)+n.length}var Dx=mF.prototype;function hF(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function $W(e,t){var r=ym(t);e.mid=r.mid,e.left=r.left,e.right=r.right,e.leftPoints=r.leftPoints,e.rightPoints=r.rightPoints,e.count=r.count}function UW(e,t){var r=e.intervals([]);r.push(t),$W(e,r)}function PW(e,t){var r=e.intervals([]),n=r.indexOf(t);return n<0?mm:(r.splice(n,1),$W(e,r),Ed)}Dx.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Dx.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?UW(this,e):this.left.insert(e):this.left=ym([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?UW(this,e):this.right.insert(e):this.right=ym([e]);else{var r=$T.ge(this.leftPoints,e,yF),n=$T.ge(this.rightPoints,e,gF);this.leftPoints.splice(r,0,e),this.rightPoints.splice(n,0,e)}};Dx.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return mm;var r=this.right?this.right.count:0;if(4*r>3*(t-1))return PW(this,e);var n=this.left.remove(e);return n===PT?(this.left=null,this.count-=1,Ed):(n===Ed&&(this.count-=1),n)}else if(e[0]>this.mid){if(!this.right)return mm;var i=this.left?this.left.count:0;if(4*i>3*(t-1))return PW(this,e);var n=this.right.remove(e);return n===PT?(this.right=null,this.count-=1,Ed):(n===Ed&&(this.count-=1),n)}else{if(this.count===1)return this.leftPoints[0]===e?PT:mm;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var o=this,s=this.left;s.right;)o=s,s=s.right;if(o===this)s.right=this.right;else{var a=this.left,n=this.right;o.count-=s.count,o.right=s.left,s.left=a,s.right=n}hF(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?hF(this,this.left):hF(this,this.right);return Ed}for(var a=$T.ge(this.leftPoints,e,yF);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var n=$T.ge(this.rightPoints,e,gF);n<this.rightPoints.length&&this.rightPoints[n][1]===e[1];++n)if(this.rightPoints[n]===e)return this.rightPoints.splice(n,1),Ed}return mm}};function zW(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var i=r(e[n]);if(i)return i}}function VW(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var i=r(e[n]);if(i)return i}}function jW(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n)return n}}Dx.queryPoint=function(e,t){if(e<this.mid){if(this.left){var r=this.left.queryPoint(e,t);if(r)return r}return zW(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var r=this.right.queryPoint(e,t);if(r)return r}return VW(this.rightPoints,e,t)}else return jW(this.leftPoints,t)};Dx.queryInterval=function(e,t,r){if(e<this.mid&&this.left){var n=this.left.queryInterval(e,t,r);if(n)return n}if(t>this.mid&&this.right){var n=this.right.queryInterval(e,t,r);if(n)return n}return t<this.mid?zW(this.leftPoints,t,r):e>this.mid?VW(this.rightPoints,e,r):jW(this.leftPoints,r)};function Mft(e,t){return e-t}function yF(e,t){var r=e[0]-t[0];return r||e[1]-t[1]}function gF(e,t){var r=e[1]-t[1];return r||e[0]-t[0]}function ym(e){if(e.length===0)return null;for(var t=[],r=0;r<e.length;++r)t.push(e[r][0],e[r][1]);t.sort(Mft);for(var n=t[t.length>>1],i=[],o=[],s=[],r=0;r<e.length;++r){var a=e[r];a[1]<n?i.push(a):n<a[0]?o.push(a):s.push(a)}var c=s,l=s.slice();return c.sort(yF),l.sort(gF),new mF(n,ym(i),ym(o),c,l)}function pF(e){this.root=e}var gm=pF.prototype;gm.insert=function(e){this.root?this.root.insert(e):this.root=new mF(e[0],null,null,[e],[e])};gm.remove=function(e){if(this.root){var t=this.root.remove(e);return t===PT&&(this.root=null),t!==mm}return!1};gm.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};gm.queryInterval=function(e,t,r){if(e<=t&&this.root)return this.root.queryInterval(e,t,r)};Object.defineProperty(gm,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(gm,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Eft(e){return!e||e.length===0?new pF(null):new pF(ym(e))}});var ck={};function Am(e,t=!1){let r,n,i=ck;function o(l){r=e(l).then(()=>{if(n){let{value:u}=n;n=null,o(u)}else r=null})}function s(l){n={event:l}}function a(l){r?s(l):o(l)}function c(l){i!==l&&requestAnimationFrame(()=>{let u=i;i=ck,a(u)}),i=l}return t?c:a}var ci=class{constructor(t){this._filterBy=t,this._requestUpdate=Am(()=>this.requestQuery(),!0),this._coordinator=null}get coordinator(){return this._coordinator}set coordinator(t){this._coordinator=t}get filterBy(){return this._filterBy}get filterIndexable(){return!0}fields(){return null}fieldInfo(t){return this}query(t){return null}queryPending(){return this}queryResult(t){return this}queryError(t){return console.error(t),this}requestQuery(t){let r=t||this.query(this.filterBy?.predicate(this));return this._coordinator.requestQuery(this,r)}requestUpdate(){this._requestUpdate()}update(){return this}};function e_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function P(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{l(n.next(u))}catch(f){s(f)}}function c(u){try{l(n.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function lk(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(e){return this instanceof H?(this.v=e,this):new H(e)}function ze(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){n[d]&&(i[d]=function(h){return new Promise(function(p,m){o.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{c(n[d](h))}catch(p){f(o[0][3],p)}}function c(d){d.value instanceof H?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Ji(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(s){return(r=!r)?{value:H(e[i](s)),done:!1}:o?o(s):s}:o}}function fr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof lk=="function"?lk(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var aA={};Ir(aA,{compareArrayLike:()=>sA,joinUint8Arrays:()=>Ei,memcpy:()=>Dm,rebaseValueOffsets:()=>l_,toArrayBufferView:()=>te,toArrayBufferViewAsyncIterator:()=>Co,toArrayBufferViewIterator:()=>As,toBigInt64Array:()=>c_,toBigUint64Array:()=>vX,toFloat32Array:()=>SX,toFloat32ArrayAsyncIterator:()=>PX,toFloat32ArrayIterator:()=>OX,toFloat64Array:()=>IX,toFloat64ArrayAsyncIterator:()=>$X,toFloat64ArrayIterator:()=>NX,toInt16Array:()=>xX,toInt16ArrayAsyncIterator:()=>LX,toInt16ArrayIterator:()=>MX,toInt32Array:()=>ju,toInt32ArrayAsyncIterator:()=>kX,toInt32ArrayIterator:()=>EX,toInt8Array:()=>bX,toInt8ArrayAsyncIterator:()=>RX,toInt8ArrayIterator:()=>AX,toUint16Array:()=>_X,toUint16ArrayAsyncIterator:()=>CX,toUint16ArrayIterator:()=>DX,toUint32Array:()=>wX,toUint32ArrayAsyncIterator:()=>UX,toUint32ArrayIterator:()=>BX,toUint8Array:()=>Et,toUint8ArrayAsyncIterator:()=>oA,toUint8ArrayIterator:()=>iA,toUint8ClampedArray:()=>TX,toUint8ClampedArrayAsyncIterator:()=>zX,toUint8ClampedArrayIterator:()=>FX});var pX=new TextDecoder("utf-8"),Mm=e=>pX.decode(e),mX=new TextEncoder,Ts=e=>mX.encode(e);var yX=e=>typeof e=="number",uk=e=>typeof e=="boolean",Pr=e=>typeof e=="function",Un=e=>e!=null&&Object(e)===e,Mi=e=>Un(e)&&Pr(e.then);var ko=e=>Un(e)&&Pr(e[Symbol.iterator]),to=e=>Un(e)&&Pr(e[Symbol.asyncIterator]),r_=e=>Un(e)&&Un(e.schema);var n_=e=>Un(e)&&"done"in e&&"value"in e;var i_=e=>Un(e)&&Pr(e.stat)&&yX(e.fd);var o_=e=>Un(e)&&Em(e.body),s_=e=>"_getDOMStream"in e&&"_getNodeStream"in e,fk=e=>Un(e)&&Pr(e.abort)&&Pr(e.getWriter)&&!s_(e),Em=e=>Un(e)&&Pr(e.cancel)&&Pr(e.getReader)&&!s_(e),dk=e=>Un(e)&&Pr(e.end)&&Pr(e.write)&&uk(e.writable)&&!s_(e),a_=e=>Un(e)&&Pr(e.read)&&Pr(e.pipe)&&uk(e.readable)&&!s_(e),hk=e=>Un(e)&&Pr(e.clear)&&Pr(e.bytes)&&Pr(e.position)&&Pr(e.setPosition)&&Pr(e.capacity)&&Pr(e.getBufferIdentifier)&&Pr(e.createLong);var nA=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function gX(e){let t=e[0]?[e[0]]:[],r,n,i,o;for(let s,a,c=0,l=0,u=e.length;++c<u;){if(s=t[l],a=e[c],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:r,byteLength:i}=s,{byteOffset:n,byteLength:o}=a,r+i<n||n+o<r){a&&(t[++l]=a);continue}t[l]=new Uint8Array(s.buffer,r,n-r+o)}return t}function Dm(e,t,r=0,n=t.byteLength){let i=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,i),s=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,i));return o.set(s,r),e}function Ei(e,t){let r=gX(e),n=r.reduce((u,f)=>u+f.byteLength,0),i,o,s,a=0,c=-1,l=Math.min(t||Number.POSITIVE_INFINITY,n);for(let u=r.length;++c<u;){if(i=r[c],o=i.subarray(0,Math.min(i.length,l-a)),l<=a+o.length){o.length<i.length?r[c]=i.subarray(o.length):o.length===i.length&&c++,s?Dm(s,o,a):s=o;break}Dm(s||(s=new Uint8Array(l)),o,a),a+=o.length}return[s||new Uint8Array(0),r.slice(c),n-(s?s.byteLength:0)]}function te(e,t){let r=n_(t)?t.value:t;return r instanceof e?e===Uint8Array?new e(r.buffer,r.byteOffset,r.byteLength):r:r?(typeof r=="string"&&(r=Ts(r)),r instanceof ArrayBuffer?new e(r):r instanceof nA?new e(r):hk(r)?te(e,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new e(0):new e(r.buffer,r.byteOffset,r.byteLength/e.BYTES_PER_ELEMENT):e.from(r)):new e(0)}var bX=e=>te(Int8Array,e),xX=e=>te(Int16Array,e),ju=e=>te(Int32Array,e),c_=e=>te(BigInt64Array,e),Et=e=>te(Uint8Array,e),_X=e=>te(Uint16Array,e),wX=e=>te(Uint32Array,e),vX=e=>te(BigUint64Array,e),SX=e=>te(Float32Array,e),IX=e=>te(Float64Array,e),TX=e=>te(Uint8ClampedArray,e),rA=e=>(e.next(),e);function*As(e,t){let r=function*(i){yield i},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nA?r(t):ko(t)?t:r(t);return yield*rA(function*(i){let o=null;do o=i.next(yield te(e,o));while(!o.done)}(n[Symbol.iterator]())),new e}var AX=e=>As(Int8Array,e),MX=e=>As(Int16Array,e),EX=e=>As(Int32Array,e),iA=e=>As(Uint8Array,e),DX=e=>As(Uint16Array,e),BX=e=>As(Uint32Array,e),OX=e=>As(Float32Array,e),NX=e=>As(Float64Array,e),FX=e=>As(Uint8ClampedArray,e);function Co(e,t){return ze(this,arguments,function*(){if(Mi(t))return yield H(yield H(yield*Ji(fr(Co(e,yield H(t))))));let n=function(s){return ze(this,arguments,function*(){yield yield H(yield H(s))})},i=function(s){return ze(this,arguments,function*(){yield H(yield*Ji(fr(rA(function*(a){let c=null;do c=a.next(yield c?.value);while(!c.done)}(s[Symbol.iterator]())))))})},o=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nA?n(t):ko(t)?i(t):to(t)?t:n(t);return yield H(yield*Ji(fr(rA(function(s){return ze(this,arguments,function*(){let a=null;do a=yield H(s.next(yield yield H(te(e,a))));while(!a.done)})}(o[Symbol.asyncIterator]()))))),yield H(new e)})}var RX=e=>Co(Int8Array,e),LX=e=>Co(Int16Array,e),kX=e=>Co(Int32Array,e),oA=e=>Co(Uint8Array,e),CX=e=>Co(Uint16Array,e),UX=e=>Co(Uint32Array,e),PX=e=>Co(Float32Array,e),$X=e=>Co(Float64Array,e),zX=e=>Co(Uint8ClampedArray,e);function l_(e,t,r){if(e!==0){r=r.slice(0,t);for(let n=-1,i=r.length;++n<i;)r[n]+=e}return r.subarray(0,t)}function sA(e,t){let r=0,n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[r]!==t[r])return!1;while(++r<n);return!0}var sn={fromIterable(e){return u_(VX(e))},fromAsyncIterable(e){return u_(jX(e))},fromDOMStream(e){return u_(qX(e))},fromNodeStream(e){return u_(YX(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},u_=e=>(e.next(),e);function*VX(e){let t,r=!1,n=[],i,o,s,a=0;function c(){return o==="peek"?Ei(n,s)[0]:([i,n,a]=Ei(n,s),i)}({cmd:o,size:s}=(yield null)||{cmd:"read",size:0});let l=iA(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(s-a)?l.next():l.next(s-a),!t&&i.byteLength>0&&(n.push(i),a+=i.byteLength),t||s<=a)do({cmd:o,size:s}=yield c());while(s<a);while(!t)}catch(u){(r=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{r===!1&&typeof l.return=="function"&&l.return(null)}return null}function jX(e){return ze(this,arguments,function*(){let r,n=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?Ei(i,a)[0]:([o,i,c]=Ei(i,a),o)}({cmd:s,size:a}=(yield yield H(null))||{cmd:"read",size:0});let u=oA(e)[Symbol.asyncIterator]();try{do if({done:r,value:o}=Number.isNaN(a-c)?yield H(u.next()):yield H(u.next(a-c)),!r&&o.byteLength>0&&(i.push(o),c+=o.byteLength),r||a<=c)do({cmd:s,size:a}=yield yield H(l()));while(a<c);while(!r)}catch(f){(n=!0)&&typeof u.throw=="function"&&(yield H(u.throw(f)))}finally{n===!1&&typeof u.return=="function"&&(yield H(u.return(new Uint8Array(0))))}return yield H(null)})}function qX(e){return ze(this,arguments,function*(){let r=!1,n=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?Ei(i,a)[0]:([o,i,c]=Ei(i,a),o)}({cmd:s,size:a}=(yield yield H(null))||{cmd:"read",size:0});let u=new lA(e);try{do if({done:r,value:o}=Number.isNaN(a-c)?yield H(u.read()):yield H(u.read(a-c)),!r&&o.byteLength>0&&(i.push(Et(o)),c+=o.byteLength),r||a<=c)do({cmd:s,size:a}=yield yield H(l()));while(a<c);while(!r)}catch(f){(n=!0)&&(yield H(u.cancel(f)))}finally{n===!1?yield H(u.cancel()):e.locked&&u.releaseLock()}return yield H(null)})}var lA=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return P(this,void 0,void 0,function*(){let{reader:r,source:n}=this;r&&(yield r.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return P(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};let r=yield this.reader.read();return!r.done&&(r.value=Et(r)),r})}},cA=(e,t)=>{let r=i=>n([t,i]),n;return[t,r,new Promise(i=>(n=i)&&e.once(t,r))]};function YX(e){return ze(this,arguments,function*(){let r=[],n="error",i=!1,o=null,s,a,c=0,l=[],u;function f(){return s==="peek"?Ei(l,a)[0]:([u,l,c]=Ei(l,a),u)}if({cmd:s,size:a}=(yield yield H(null))||{cmd:"read",size:0},e.isTTY)return yield yield H(new Uint8Array(0)),yield H(null);try{r[0]=cA(e,"end"),r[1]=cA(e,"error");do{if(r[2]=cA(e,"readable"),[n,o]=yield H(Promise.race(r.map(h=>h[2]))),n==="error")break;if((i=n==="end")||(Number.isFinite(a-c)?(u=Et(e.read(a-c)),u.byteLength<a-c&&(u=Et(e.read()))):u=Et(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:s,size:a}=yield yield H(f()));while(a<c)}while(!i)}finally{yield H(d(r,n==="error"?o:null))}return yield H(null);function d(h,p){return u=l=null,new Promise((m,y)=>{for(let[g,b]of h)e.off(g,b);try{let g=e.destroy;g&&g.call(e,p),p=void 0}catch(g){p=g||p}finally{p!=null?y(p):m()}})}})}var Ee;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ee||(Ee={}));var Ue;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ue||(Ue={}));var Re;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Re||(Re={}));var Tr;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Tr||(Tr={}));var ft;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ft||(ft={}));var Gr;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Gr||(Gr={}));var Ms=new Int32Array(2),f_=new Float32Array(Ms.buffer),d_=new Float64Array(Ms.buffer),Fd=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Bm;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Bm||(Bm={}));var Ar=class e{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new e(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ms[0]=this.readInt32(t),f_[0]}readFloat64(t){return Ms[Fd?0:1]=this.readInt32(t),Ms[Fd?1:0]=this.readInt32(t+4),d_[0]}writeInt8(t,r){this.bytes_[t]=r}writeUint8(t,r){this.bytes_[t]=r}writeInt16(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8}writeUint16(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8}writeInt32(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8,this.bytes_[t+2]=r>>16,this.bytes_[t+3]=r>>24}writeUint32(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8,this.bytes_[t+2]=r>>16,this.bytes_[t+3]=r>>24}writeInt64(t,r){this.writeInt32(t,Number(BigInt.asIntN(32,r))),this.writeInt32(t+4,Number(BigInt.asIntN(32,r>>BigInt(32))))}writeUint64(t,r){this.writeUint32(t,Number(BigInt.asUintN(32,r))),this.writeUint32(t+4,Number(BigInt.asUintN(32,r>>BigInt(32))))}writeFloat32(t,r){f_[0]=r,this.writeInt32(t,Ms[0])}writeFloat64(t,r){d_[0]=r,this.writeInt32(t,Ms[Fd?0:1]),this.writeInt32(t+4,Ms[Fd?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let r=0;r<4;r++)t+=String.fromCharCode(this.readInt8(this.position_+4+r));return t}__offset(t,r){let n=t-this.readInt32(t);return r<this.readInt16(n)?this.readInt16(n+r):0}__union(t,r){return t.bb_pos=r+this.readInt32(r),t.bb=this,t}__string(t,r){t+=this.readInt32(t);let n=this.readInt32(t);t+=4;let i=this.bytes_.subarray(t,t+n);return r===Bm.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,r){return typeof t=="string"?this.__string(r):this.__union(t,r)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=4)throw new Error("FlatBuffers: file identifier must be length "+4);for(let r=0;r<4;r++)if(t.charCodeAt(r)!=this.readInt8(this.position()+4+r))return!1;return!0}createScalarList(t,r){let n=[];for(let i=0;i<r;++i){let o=t(i);o!==null&&n.push(o)}return n}createObjList(t,r){let n=[];for(let i=0;i<r;++i){let o=t(i);o!==null&&n.push(o.unpack())}return n}};var Po=class e{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let r;t?r=t:r=1024,this.bb=Ar.allocate(r),this.space=r}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,r){t>this.minalign&&(this.minalign=t);let n=~(this.bb.capacity()-this.space+r)+1&t-1;for(;this.space<n+t+r;){let i=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)}pad(t){for(let r=0;r<t;r++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,r,n){(this.force_defaults||r!=n)&&(this.addInt8(r),this.slot(t))}addFieldInt16(t,r,n){(this.force_defaults||r!=n)&&(this.addInt16(r),this.slot(t))}addFieldInt32(t,r,n){(this.force_defaults||r!=n)&&(this.addInt32(r),this.slot(t))}addFieldInt64(t,r,n){(this.force_defaults||r!==n)&&(this.addInt64(r),this.slot(t))}addFieldFloat32(t,r,n){(this.force_defaults||r!=n)&&(this.addFloat32(r),this.slot(t))}addFieldFloat64(t,r,n){(this.force_defaults||r!=n)&&(this.addFloat64(r),this.slot(t))}addFieldOffset(t,r,n){(this.force_defaults||r!=n)&&(this.addOffset(r),this.slot(t))}addFieldStruct(t,r,n){r!=n&&(this.nested(r),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){let r=t.capacity();if(r&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let n=r<<1,i=Ar.allocate(n);return i.setPosition(n-r),i.bytes().set(t.bytes(),n-r),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let r=0;r<t;r++)this.vtable[r]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let t=this.offset(),r=this.vtable_in_use-1;for(;r>=0&&this.vtable[r]==0;r--);let n=r+1;for(;r>=0;r--)this.addInt16(this.vtable[r]!=0?t-this.vtable[r]:0);let i=2;this.addInt16(t-this.object_start);let o=(n+i)*2;this.addInt16(o);let s=0,a=this.space;t:for(r=0;r<this.vtables.length;r++){let c=this.bb.capacity()-this.vtables[r];if(o==this.bb.readInt16(c)){for(let l=2;l<o;l+=2)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;s=this.vtables[r];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,r,n){let i=n?4:0;if(r){let o=r;if(this.prep(this.minalign,8+i),o.length!=4)throw new TypeError("FlatBuffers: file identifier must be length "+4);for(let s=3;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,r){this.finish(t,r,!0)}requiredField(t,r){let n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(r<this.bb.readInt16(i)&&this.bb.readInt16(i+r)!=0))throw new TypeError("FlatBuffers: field "+r+" must be set")}startVector(t,r,n){this.notNested(),this.vector_num_elems=r,this.prep(4,t*r),this.prep(n,t*r)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);let r=this.createString(t);return this.string_maps.set(t,r),r}createString(t){if(t==null)return 0;let r;t instanceof Uint8Array?r=t:r=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,r.length,1),this.bb.setPosition(this.space-=r.length);for(let n=0,i=this.space,o=this.bb.bytes();n<r.length;n++)o[i++]=r[n];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){let r=[];for(let n=0;n<t.length;++n){let i=t[n];if(i!==null)r.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return r}createStructOffsetList(t,r){return r(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Om;(function(e){e[e.BUFFER=0]="BUFFER"})(Om||(Om={}));var Nm;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Nm||(Nm={}));var p_=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBodyCompression(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}codec(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Nm.LZ4_FRAME}method(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Om.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,r){t.addFieldInt8(0,r,Nm.LZ4_FRAME)}static addMethod(t,r){t.addFieldInt8(1,r,Om.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,r,n){return e.startBodyCompression(t),e.addCodec(t,r),e.addMethod(t,n),e.endBodyCompression(t)}};var Rd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,r,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(r??0)),t.offset()}};var Ld=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,r,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(r??0)),t.offset()}};var Di=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsRecordBatch(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new Ld).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new Rd).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){let r=this.bb.__offset(this.bb_pos,10);return r?(t||new p_).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addNodes(t,r){t.addFieldOffset(1,r,0)}static startNodesVector(t,r){t.startVector(16,r,8)}static addBuffers(t,r){t.addFieldOffset(2,r,0)}static startBuffersVector(t,r){t.startVector(16,r,8)}static addCompression(t,r){t.addFieldOffset(3,r,0)}static endRecordBatch(t){return t.endObject()}};var $a=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryBatch(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new Di).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addData(t,r){t.addFieldOffset(1,r,0)}static addIsDelta(t,r){t.addFieldInt8(2,+r,0)}static endDictionaryBatch(t){return t.endObject()}};var yl;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(yl||(yl={}));var Fm;(function(e){e[e.DenseArray=0]="DenseArray"})(Fm||(Fm={}));var $o=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,r){t.addFieldInt32(0,r,0)}static addIsSigned(t,r){t.addFieldInt8(1,+r,0)}static endInt(t){return t.endObject()}static createInt(t,r,n){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,n),e.endInt(t)}};var Es=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryEncoding(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new $o).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Fm.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addIndexType(t,r){t.addFieldOffset(1,r,0)}static addIsOrdered(t,r){t.addFieldInt8(2,+r,0)}static addDictionaryKind(t,r){t.addFieldInt16(3,r,Fm.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}};var $r=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}value(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,r){t.addFieldOffset(0,r,0)}static addValue(t,r){t.addFieldOffset(1,r,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,n){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,n),e.endKeyValue(t)}};var Rm=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}};var Lm=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}};var gl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDate(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Tr.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,Tr.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,r){return e.startDate(t),e.addUnit(t,r),e.endDate(t)}};var Ds=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,r){t.addFieldInt32(0,r,0)}static addScale(t,r){t.addFieldInt32(1,r,0)}static addBitWidth(t,r){t.addFieldInt32(2,r,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,n,i){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,n),e.addBitWidth(t,i),e.endDecimal(t)}};var bl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDuration(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ft.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,ft.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,r){return e.startDuration(t),e.addUnit(t,r),e.endDuration(t)}};var xl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}};var _l=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}};var wl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFloatingPoint(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Re.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,r){t.addFieldInt16(0,r,Re.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,r){return e.startFloatingPoint(t),e.addPrecision(t,r),e.endFloatingPoint(t)}};var vl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInterval(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gr.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,Gr.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,r){return e.startInterval(t),e.addUnit(t,r),e.endInterval(t)}};var km=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsLargeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}};var Cm=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsLargeUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}};var Um=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}};var Sl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,r){t.addFieldInt8(0,+r,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}};var Pm=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}};var $m=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}};var za=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTime(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ft.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,ft.MILLISECOND)}static addBitWidth(t,r){t.addFieldInt32(1,r,32)}static endTime(t){return t.endObject()}static createTime(t,r,n){return e.startTime(t),e.addUnit(t,r),e.addBitWidth(t,n),e.endTime(t)}};var Va=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTimestamp(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ft.SECOND}timezone(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,ft.SECOND)}static addTimezone(t,r){t.addFieldOffset(1,r,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,r,n){return e.startTimestamp(t),e.addUnit(t,r),e.addTimezone(t,n),e.endTimestamp(t)}};var zo=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUnion(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}mode(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ue.Sparse}typeIds(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb.__vector(this.bb_pos+r)+t*4):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,r){t.addFieldInt16(0,r,Ue.Sparse)}static addTypeIds(t,r){t.addFieldOffset(1,r,0)}static createTypeIdsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addInt32(r[n]);return t.endVector()}static startTypeIdsVector(t,r){t.startVector(4,r,4)}static endUnion(t){return t.endObject()}static createUnion(t,r,n){return e.startUnion(t),e.addMode(t,r),e.addTypeIds(t,n),e.endUnion(t)}};var zm=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}};var Le;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Le||(Le={}));var Tn=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsField(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}name(t){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Le.NONE}type(t){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__union(t,this.bb_pos+r):null}dictionary(t){let r=this.bb.__offset(this.bb_pos,12);return r?(t||new Es).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(t,r){let n=this.bb.__offset(this.bb_pos,14);return n?(r||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,16);return n?(r||new $r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,r){t.addFieldOffset(0,r,0)}static addNullable(t,r){t.addFieldInt8(1,+r,0)}static addTypeType(t,r){t.addFieldInt8(2,r,Le.NONE)}static addType(t,r){t.addFieldOffset(3,r,0)}static addDictionary(t,r){t.addFieldOffset(4,r,0)}static addChildren(t,r){t.addFieldOffset(5,r,0)}static createChildrenVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startChildrenVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(6,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endField(t){return t.endObject()}};var li=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsSchema(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yl.Little}fields(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new Tn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new $r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb.__vector(this.bb_pos+r)+t*8):BigInt(0)}featuresLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,r){t.addFieldInt16(0,r,yl.Little)}static addFields(t,r){t.addFieldOffset(1,r,0)}static createFieldsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startFieldsVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(2,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static addFeatures(t,r){t.addFieldOffset(3,r,0)}static createFeaturesVector(t,r){t.startVector(8,r.length,8);for(let n=r.length-1;n>=0;n--)t.addInt64(r[n]);return t.endVector()}static startFeaturesVector(t,r){t.startVector(8,r,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,r){t.finish(r)}static finishSizePrefixedSchemaBuffer(t,r){t.finish(r,void 0,!0)}static createSchema(t,r,n,i,o){return e.startSchema(t),e.addEndianness(t,r),e.addFields(t,n),e.addCustomMetadata(t,i),e.addFeatures(t,o),e.endSchema(t)}};var oe;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(oe||(oe={}));var R;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(R||(R={}));var Vo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Vo||(Vo={}));var EA={};Ir(EA,{clampIndex:()=>NH,clampRange:()=>ey,createElementComparator:()=>Al});var uA={};Ir(uA,{valueToString:()=>jo});function jo(e){if(e===null)return"null";if(e===void 0)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>jo(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,r)=>typeof r=="bigint"?`${r}`:r)}var dA={};Ir(dA,{BN:()=>jm,bigNumToBigInt:()=>yk,bigNumToString:()=>Ud,isArrowBigNumSymbol:()=>pk});var pk=Symbol.for("isArrowBigNum");function qo(e,...t){return t.length===0?Object.setPrototypeOf(te(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}qo.prototype[pk]=!0;qo.prototype.toJSON=function(){return`"${Ud(this)}"`};qo.prototype.valueOf=function(){return mk(this)};qo.prototype.toString=function(){return Ud(this)};qo.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return mk(this);case"string":return Ud(this);case"default":return yk(this)}return Ud(this)};function kd(...e){return qo.apply(this,e)}function Cd(...e){return qo.apply(this,e)}function Vm(...e){return qo.apply(this,e)}Object.setPrototypeOf(kd.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Cd.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Vm.prototype,Object.create(Uint32Array.prototype));Object.assign(kd.prototype,qo.prototype,{constructor:kd,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Cd.prototype,qo.prototype,{constructor:Cd,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Vm.prototype,qo.prototype,{constructor:Vm,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function mk(e){let{buffer:t,byteOffset:r,length:n,signed:i}=e,o=new BigUint64Array(t,r,n),s=i&&o.at(-1)&BigInt(1)<<BigInt(63),a=BigInt(s?1:0),c=BigInt(0);if(s){for(let l of o)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(let l of o)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}var Ud=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return fA(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return fA(e);t=t.slice();let n=1;for(let o=0;o<t.length;o++){let s=t[o],a=~s+n;t[o]=a,n&=s===0?1:0}return`-${fA(t)}`},yk=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Ud(e);function fA(e){let t="",r=new Uint32Array(2),n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer),o=-1,s=n.length-1;do{for(r[0]=n[o=0];o<s;)n[o++]=r[1]=r[0]/10,r[0]=(r[0]-r[1]*10<<16)+n[o];n[o]=r[1]=r[0]/10,r[0]=r[0]-r[1]*10,t=`${r[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}var jm=class e{static new(t,r){switch(r){case!0:return new kd(t);case!1:return new Cd(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new kd(t)}return t.byteLength===16?new Vm(t):new Cd(t)}static signed(t){return new kd(t)}static unsigned(t){return new Cd(t)}static decimal(t){return new Vm(t)}constructor(t,r){return e.new(t,r)}};function or(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var gk,bk,xk,_k,wk,vk,Sk,Ik,Tk,Ak,Mk,Ek,Dk,Bk,Ok,Nk,Fk,Rk,Lk,kk,Ck,Uk,J=class e{static isNull(t){return t?.typeId===R.Null}static isInt(t){return t?.typeId===R.Int}static isFloat(t){return t?.typeId===R.Float}static isBinary(t){return t?.typeId===R.Binary}static isLargeBinary(t){return t?.typeId===R.LargeBinary}static isUtf8(t){return t?.typeId===R.Utf8}static isLargeUtf8(t){return t?.typeId===R.LargeUtf8}static isBool(t){return t?.typeId===R.Bool}static isDecimal(t){return t?.typeId===R.Decimal}static isDate(t){return t?.typeId===R.Date}static isTime(t){return t?.typeId===R.Time}static isTimestamp(t){return t?.typeId===R.Timestamp}static isInterval(t){return t?.typeId===R.Interval}static isDuration(t){return t?.typeId===R.Duration}static isList(t){return t?.typeId===R.List}static isStruct(t){return t?.typeId===R.Struct}static isUnion(t){return t?.typeId===R.Union}static isFixedSizeBinary(t){return t?.typeId===R.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===R.FixedSizeList}static isMap(t){return t?.typeId===R.Map}static isDictionary(t){return t?.typeId===R.Dictionary}static isDenseUnion(t){return e.isUnion(t)&&t.mode===Ue.Dense}static isSparseUnion(t){return e.isUnion(t)&&t.mode===Ue.Sparse}constructor(t){this.typeId=t}};gk=Symbol.toStringTag;J[gk]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(J.prototype);var An=class extends J{constructor(){super(R.Null)}toString(){return"Null"}};bk=Symbol.toStringTag;An[bk]=(e=>e[Symbol.toStringTag]="Null")(An.prototype);var dr=class extends J{constructor(t,r){super(R.Int),this.isSigned=t,this.bitWidth=r}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};xk=Symbol.toStringTag;dr[xk]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(dr.prototype);var qm=class extends dr{constructor(){super(!0,8)}get ArrayType(){return Int8Array}},Ym=class extends dr{constructor(){super(!0,16)}get ArrayType(){return Int16Array}},Yo=class extends dr{constructor(){super(!0,32)}get ArrayType(){return Int32Array}},Wm=class extends dr{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}},Gm=class extends dr{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}},Xm=class extends dr{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}},Hm=class extends dr{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}},Zm=class extends dr{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(qm.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Ym.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Yo.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Wm.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Gm.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Xm.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Hm.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Zm.prototype,"ArrayType",{value:BigUint64Array});var Pn=class extends J{constructor(t){super(R.Float),this.precision=t}get ArrayType(){switch(this.precision){case Re.HALF:return Uint16Array;case Re.SINGLE:return Float32Array;case Re.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};_k=Symbol.toStringTag;Pn[_k]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Pn.prototype);var Km=class extends Pn{constructor(){super(Re.HALF)}},Qm=class extends Pn{constructor(){super(Re.SINGLE)}},Jm=class extends Pn{constructor(){super(Re.DOUBLE)}};Object.defineProperty(Km.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Qm.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Jm.prototype,"ArrayType",{value:Float64Array});var Bs=class extends J{constructor(){super(R.Binary)}toString(){return"Binary"}};wk=Symbol.toStringTag;Bs[wk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Bs.prototype);var Os=class extends J{constructor(){super(R.LargeBinary)}toString(){return"LargeBinary"}};vk=Symbol.toStringTag;Os[vk]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(Os.prototype);var Ns=class extends J{constructor(){super(R.Utf8)}toString(){return"Utf8"}};Sk=Symbol.toStringTag;Ns[Sk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Ns.prototype);var Fs=class extends J{constructor(){super(R.LargeUtf8)}toString(){return"LargeUtf8"}};Ik=Symbol.toStringTag;Fs[Ik]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(Fs.prototype);var Rs=class extends J{constructor(){super(R.Bool)}toString(){return"Bool"}};Tk=Symbol.toStringTag;Rs[Tk]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Rs.prototype);var Ls=class extends J{constructor(t,r,n=128){super(R.Decimal),this.scale=t,this.precision=r,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ak=Symbol.toStringTag;Ls[Ak]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Ls.prototype);var ks=class extends J{constructor(t){super(R.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Tr[this.unit]}>`}};Mk=Symbol.toStringTag;ks[Mk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ks.prototype);var ro=class extends J{constructor(t,r){super(R.Time),this.unit=t,this.bitWidth=r}toString(){return`Time${this.bitWidth}<${ft[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};Ek=Symbol.toStringTag;ro[Ek]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ro.prototype);var Cs=class extends J{constructor(t,r){super(R.Timestamp),this.unit=t,this.timezone=r}toString(){return`Timestamp<${ft[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};Dk=Symbol.toStringTag;Cs[Dk]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Cs.prototype);var Us=class extends J{constructor(t){super(R.Interval),this.unit=t}toString(){return`Interval<${Gr[this.unit]}>`}};Bk=Symbol.toStringTag;Us[Bk]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Us.prototype);var Ps=class extends J{constructor(t){super(R.Duration),this.unit=t}toString(){return`Duration<${ft[this.unit]}>`}};Ok=Symbol.toStringTag;Ps[Ok]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Ps.prototype);var no=class extends J{constructor(t){super(R.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Nk=Symbol.toStringTag;no[Nk]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(no.prototype);var Pe=class extends J{constructor(t){super(R.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Fk=Symbol.toStringTag;Pe[Fk]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Pe.prototype);var io=class extends J{constructor(t,r,n){super(R.Union),this.mode=t,this.children=n,this.typeIds=r=Int32Array.from(r),this.typeIdToChildIndex=r.reduce((i,o,s)=>(i[o]=s)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};Rk=Symbol.toStringTag;io[Rk]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(io.prototype);var $s=class extends J{constructor(t){super(R.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Lk=Symbol.toStringTag;$s[Lk]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))($s.prototype);var oo=class extends J{constructor(t,r){super(R.FixedSizeList),this.listSize=t,this.children=[r]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};kk=Symbol.toStringTag;oo[kk]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(oo.prototype);var so=class extends J{constructor(t,r=!1){var n,i,o;if(super(R.Map),this.children=[t],this.keysSorted=r,t&&(t.name="entries",!((n=t?.type)===null||n===void 0)&&n.children)){let s=(i=t?.type)===null||i===void 0?void 0:i.children[0];s&&(s.name="key");let a=(o=t?.type)===null||o===void 0?void 0:o.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Ck=Symbol.toStringTag;so[Ck]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(so.prototype);var WX=(e=>()=>++e)(-1),ui=class extends J{constructor(t,r,n,i){super(R.Dictionary),this.indices=r,this.dictionary=t,this.isOrdered=i||!1,this.id=n==null?WX():or(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};Uk=Symbol.toStringTag;ui[Uk]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ui.prototype);function Bi(e){let t=e;switch(e.typeId){case R.Decimal:return e.bitWidth/32;case R.Timestamp:return 2;case R.Date:return 1+t.unit;case R.Interval:return 1+t.unit;case R.FixedSizeList:return t.listSize;case R.FixedSizeBinary:return t.byteWidth;default:return 1}}var _t=class{visitMany(t,...r){return t.map((n,i)=>this.visit(n,...r.map(o=>o[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,r=!0){return GX(this,t,r)}getVisitFnByTypeId(t,r=!0){return Pd(this,t,r)}visitNull(t,...r){return null}visitBool(t,...r){return null}visitInt(t,...r){return null}visitFloat(t,...r){return null}visitUtf8(t,...r){return null}visitLargeUtf8(t,...r){return null}visitBinary(t,...r){return null}visitLargeBinary(t,...r){return null}visitFixedSizeBinary(t,...r){return null}visitDate(t,...r){return null}visitTimestamp(t,...r){return null}visitTime(t,...r){return null}visitDecimal(t,...r){return null}visitList(t,...r){return null}visitStruct(t,...r){return null}visitUnion(t,...r){return null}visitDictionary(t,...r){return null}visitInterval(t,...r){return null}visitDuration(t,...r){return null}visitFixedSizeList(t,...r){return null}visitMap(t,...r){return null}};function GX(e,t,r=!0){return typeof t=="number"?Pd(e,t,r):typeof t=="string"&&t in R?Pd(e,R[t],r):t&&t instanceof J?Pd(e,Pk(t),r):t?.type&&t.type instanceof J?Pd(e,Pk(t.type),r):Pd(e,R.NONE,r)}function Pd(e,t,r=!0){let n=null;switch(t){case R.Null:n=e.visitNull;break;case R.Bool:n=e.visitBool;break;case R.Int:n=e.visitInt;break;case R.Int8:n=e.visitInt8||e.visitInt;break;case R.Int16:n=e.visitInt16||e.visitInt;break;case R.Int32:n=e.visitInt32||e.visitInt;break;case R.Int64:n=e.visitInt64||e.visitInt;break;case R.Uint8:n=e.visitUint8||e.visitInt;break;case R.Uint16:n=e.visitUint16||e.visitInt;break;case R.Uint32:n=e.visitUint32||e.visitInt;break;case R.Uint64:n=e.visitUint64||e.visitInt;break;case R.Float:n=e.visitFloat;break;case R.Float16:n=e.visitFloat16||e.visitFloat;break;case R.Float32:n=e.visitFloat32||e.visitFloat;break;case R.Float64:n=e.visitFloat64||e.visitFloat;break;case R.Utf8:n=e.visitUtf8;break;case R.LargeUtf8:n=e.visitLargeUtf8;break;case R.Binary:n=e.visitBinary;break;case R.LargeBinary:n=e.visitLargeBinary;break;case R.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case R.Date:n=e.visitDate;break;case R.DateDay:n=e.visitDateDay||e.visitDate;break;case R.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case R.Timestamp:n=e.visitTimestamp;break;case R.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case R.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case R.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case R.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case R.Time:n=e.visitTime;break;case R.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case R.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case R.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case R.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case R.Decimal:n=e.visitDecimal;break;case R.List:n=e.visitList;break;case R.Struct:n=e.visitStruct;break;case R.Union:n=e.visitUnion;break;case R.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case R.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case R.Dictionary:n=e.visitDictionary;break;case R.Interval:n=e.visitInterval;break;case R.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case R.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case R.Duration:n=e.visitDuration;break;case R.DurationSecond:n=e.visitDurationSecond||e.visitDuration;break;case R.DurationMillisecond:n=e.visitDurationMillisecond||e.visitDuration;break;case R.DurationMicrosecond:n=e.visitDurationMicrosecond||e.visitDuration;break;case R.DurationNanosecond:n=e.visitDurationNanosecond||e.visitDuration;break;case R.FixedSizeList:n=e.visitFixedSizeList;break;case R.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${R[t]}'`)}function Pk(e){switch(e.typeId){case R.Null:return R.Null;case R.Int:{let{bitWidth:t,isSigned:r}=e;switch(t){case 8:return r?R.Int8:R.Uint8;case 16:return r?R.Int16:R.Uint16;case 32:return r?R.Int32:R.Uint32;case 64:return r?R.Int64:R.Uint64}return R.Int}case R.Float:switch(e.precision){case Re.HALF:return R.Float16;case Re.SINGLE:return R.Float32;case Re.DOUBLE:return R.Float64}return R.Float;case R.Binary:return R.Binary;case R.LargeBinary:return R.LargeBinary;case R.Utf8:return R.Utf8;case R.LargeUtf8:return R.LargeUtf8;case R.Bool:return R.Bool;case R.Decimal:return R.Decimal;case R.Time:switch(e.unit){case ft.SECOND:return R.TimeSecond;case ft.MILLISECOND:return R.TimeMillisecond;case ft.MICROSECOND:return R.TimeMicrosecond;case ft.NANOSECOND:return R.TimeNanosecond}return R.Time;case R.Timestamp:switch(e.unit){case ft.SECOND:return R.TimestampSecond;case ft.MILLISECOND:return R.TimestampMillisecond;case ft.MICROSECOND:return R.TimestampMicrosecond;case ft.NANOSECOND:return R.TimestampNanosecond}return R.Timestamp;case R.Date:switch(e.unit){case Tr.DAY:return R.DateDay;case Tr.MILLISECOND:return R.DateMillisecond}return R.Date;case R.Interval:switch(e.unit){case Gr.DAY_TIME:return R.IntervalDayTime;case Gr.YEAR_MONTH:return R.IntervalYearMonth}return R.Interval;case R.Duration:switch(e.unit){case ft.SECOND:return R.DurationSecond;case ft.MILLISECOND:return R.DurationMillisecond;case ft.MICROSECOND:return R.DurationMicrosecond;case ft.NANOSECOND:return R.DurationNanosecond}return R.Duration;case R.Map:return R.Map;case R.List:return R.List;case R.Struct:return R.Struct;case R.Union:switch(e.mode){case Ue.Dense:return R.DenseUnion;case Ue.Sparse:return R.SparseUnion}return R.Union;case R.FixedSizeBinary:return R.FixedSizeBinary;case R.FixedSizeList:return R.FixedSizeList;case R.Dictionary:return R.Dictionary}throw new Error(`Unrecognized type '${R[e.typeId]}'`)}_t.prototype.visitInt8=null;_t.prototype.visitInt16=null;_t.prototype.visitInt32=null;_t.prototype.visitInt64=null;_t.prototype.visitUint8=null;_t.prototype.visitUint16=null;_t.prototype.visitUint32=null;_t.prototype.visitUint64=null;_t.prototype.visitFloat16=null;_t.prototype.visitFloat32=null;_t.prototype.visitFloat64=null;_t.prototype.visitDateDay=null;_t.prototype.visitDateMillisecond=null;_t.prototype.visitTimestampSecond=null;_t.prototype.visitTimestampMillisecond=null;_t.prototype.visitTimestampMicrosecond=null;_t.prototype.visitTimestampNanosecond=null;_t.prototype.visitTimeSecond=null;_t.prototype.visitTimeMillisecond=null;_t.prototype.visitTimeMicrosecond=null;_t.prototype.visitTimeNanosecond=null;_t.prototype.visitDenseUnion=null;_t.prototype.visitSparseUnion=null;_t.prototype.visitIntervalDayTime=null;_t.prototype.visitIntervalYearMonth=null;_t.prototype.visitDuration=null;_t.prototype.visitDurationSecond=null;_t.prototype.visitDurationMillisecond=null;_t.prototype.visitDurationMicrosecond=null;_t.prototype.visitDurationNanosecond=null;var hA={};Ir(hA,{float64ToUint16:()=>ty,uint16ToFloat64:()=>m_});var $k=new Float64Array(1),$d=new Uint32Array($k.buffer);function m_(e){let t=(e&31744)>>10,r=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(r?Number.NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*Math.pow(2,t-15)*(1+r)}function ty(e){if(e!==e)return 32256;$k[0]=e;let t=($d[1]&2147483648)>>16&65535,r=$d[1]&2146435072,n=0;return r>=1089470464?$d[0]>0?r=31744:(r=(r&2080374784)>>16,n=($d[1]&1048575)>>10):r<=1056964608?(n=1048576+($d[1]&1048575),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=($d[1]&1048575)+512>>10),t|r|n&65535}var Mt=class extends _t{};function Ut(e){return(t,r,n)=>{if(t.setValid(r,n!=null))return e(t,r,n)}}var XX=(e,t,r)=>{e[t]=Math.trunc(r/864e5)},pA=(e,t,r)=>{e[t]=Math.trunc(r%4294967296),e[t+1]=Math.trunc(r/4294967296)},HX=(e,t,r)=>{e[t]=Math.trunc(r*1e3%4294967296),e[t+1]=Math.trunc(r*1e3/4294967296)},ZX=(e,t,r)=>{e[t]=Math.trunc(r*1e6%4294967296),e[t+1]=Math.trunc(r*1e6/4294967296)},zk=(e,t,r,n)=>{if(r+1<t.length){let i=or(t[r]),o=or(t[r+1]);e.set(n.subarray(0,o-i),i)}},KX=({offset:e,values:t},r,n)=>{let i=e+r;n?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ja=({values:e},t,r)=>{e[t]=r},mA=({values:e},t,r)=>{e[t]=r},Vk=({values:e},t,r)=>{e[t]=ty(r)},QX=(e,t,r)=>{switch(e.type.precision){case Re.HALF:return Vk(e,t,r);case Re.SINGLE:case Re.DOUBLE:return mA(e,t,r)}},y_=({values:e},t,r)=>{XX(e,t,r.valueOf())},g_=({values:e},t,r)=>{pA(e,t*2,r.valueOf())},yA=({stride:e,values:t},r,n)=>{t.set(n.subarray(0,e),e*r)},jk=({values:e,valueOffsets:t},r,n)=>zk(e,t,r,n),qk=({values:e,valueOffsets:t},r,n)=>zk(e,t,r,Ts(n)),gA=(e,t,r)=>{e.type.unit===Tr.DAY?y_(e,t,r):g_(e,t,r)},b_=({values:e},t,r)=>pA(e,t*2,r/1e3),x_=({values:e},t,r)=>pA(e,t*2,r),__=({values:e},t,r)=>HX(e,t*2,r),w_=({values:e},t,r)=>ZX(e,t*2,r),bA=(e,t,r)=>{switch(e.type.unit){case ft.SECOND:return b_(e,t,r);case ft.MILLISECOND:return x_(e,t,r);case ft.MICROSECOND:return __(e,t,r);case ft.NANOSECOND:return w_(e,t,r)}},v_=({values:e},t,r)=>{e[t]=r},S_=({values:e},t,r)=>{e[t]=r},I_=({values:e},t,r)=>{e[t]=r},T_=({values:e},t,r)=>{e[t]=r},xA=(e,t,r)=>{switch(e.type.unit){case ft.SECOND:return v_(e,t,r);case ft.MILLISECOND:return S_(e,t,r);case ft.MICROSECOND:return I_(e,t,r);case ft.NANOSECOND:return T_(e,t,r)}},_A=({values:e,stride:t},r,n)=>{e.set(n.subarray(0,t),t*r)},JX=(e,t,r)=>{let n=e.children[0],i=e.valueOffsets,o=an.getVisitFn(n);if(Array.isArray(r))for(let s=-1,a=i[t],c=i[t+1];a<c;)o(n,a++,r[++s]);else for(let s=-1,a=i[t],c=i[t+1];a<c;)o(n,a++,r.get(++s))},tH=(e,t,r)=>{let n=e.children[0],{valueOffsets:i}=e,o=an.getVisitFn(n),{[t]:s,[t+1]:a}=i,c=r instanceof Map?r.entries():Object.entries(r);for(let l of c)if(o(n,s,l),++s>=a)break},eH=(e,t)=>(r,n,i,o)=>n&&r(n,e,t[o]),rH=(e,t)=>(r,n,i,o)=>n&&r(n,e,t.get(o)),nH=(e,t)=>(r,n,i,o)=>n&&r(n,e,t.get(i.name)),iH=(e,t)=>(r,n,i,o)=>n&&r(n,e,t[i.name]),oH=(e,t,r)=>{let n=e.type.children.map(o=>an.getVisitFn(o.type)),i=r instanceof Map?nH(t,r):r instanceof le?rH(t,r):Array.isArray(r)?eH(t,r):iH(t,r);e.type.children.forEach((o,s)=>i(n[s],e.children[s],o,s))},sH=(e,t,r)=>{e.type.mode===Ue.Dense?Yk(e,t,r):Wk(e,t,r)},Yk=(e,t,r)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];an.visit(i,e.valueOffsets[t],r)},Wk=(e,t,r)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];an.visit(i,t,r)},aH=(e,t,r)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],r)},wA=(e,t,r)=>{e.type.unit===Gr.DAY_TIME?A_(e,t,r):M_(e,t,r)},A_=({values:e},t,r)=>{e.set(r.subarray(0,2),2*t)},M_=({values:e},t,r)=>{e[t]=r[0]*12+r[1]%12},E_=({values:e},t,r)=>{e[t]=r},D_=({values:e},t,r)=>{e[t]=r},B_=({values:e},t,r)=>{e[t]=r},O_=({values:e},t,r)=>{e[t]=r},vA=(e,t,r)=>{switch(e.type.unit){case ft.SECOND:return E_(e,t,r);case ft.MILLISECOND:return D_(e,t,r);case ft.MICROSECOND:return B_(e,t,r);case ft.NANOSECOND:return O_(e,t,r)}},cH=(e,t,r)=>{let{stride:n}=e,i=e.children[0],o=an.getVisitFn(i);if(Array.isArray(r))for(let s=-1,a=t*n;++s<n;)o(i,a+s,r[s]);else for(let s=-1,a=t*n;++s<n;)o(i,a+s,r.get(s))};Mt.prototype.visitBool=Ut(KX);Mt.prototype.visitInt=Ut(ja);Mt.prototype.visitInt8=Ut(ja);Mt.prototype.visitInt16=Ut(ja);Mt.prototype.visitInt32=Ut(ja);Mt.prototype.visitInt64=Ut(ja);Mt.prototype.visitUint8=Ut(ja);Mt.prototype.visitUint16=Ut(ja);Mt.prototype.visitUint32=Ut(ja);Mt.prototype.visitUint64=Ut(ja);Mt.prototype.visitFloat=Ut(QX);Mt.prototype.visitFloat16=Ut(Vk);Mt.prototype.visitFloat32=Ut(mA);Mt.prototype.visitFloat64=Ut(mA);Mt.prototype.visitUtf8=Ut(qk);Mt.prototype.visitLargeUtf8=Ut(qk);Mt.prototype.visitBinary=Ut(jk);Mt.prototype.visitLargeBinary=Ut(jk);Mt.prototype.visitFixedSizeBinary=Ut(yA);Mt.prototype.visitDate=Ut(gA);Mt.prototype.visitDateDay=Ut(y_);Mt.prototype.visitDateMillisecond=Ut(g_);Mt.prototype.visitTimestamp=Ut(bA);Mt.prototype.visitTimestampSecond=Ut(b_);Mt.prototype.visitTimestampMillisecond=Ut(x_);Mt.prototype.visitTimestampMicrosecond=Ut(__);Mt.prototype.visitTimestampNanosecond=Ut(w_);Mt.prototype.visitTime=Ut(xA);Mt.prototype.visitTimeSecond=Ut(v_);Mt.prototype.visitTimeMillisecond=Ut(S_);Mt.prototype.visitTimeMicrosecond=Ut(I_);Mt.prototype.visitTimeNanosecond=Ut(T_);Mt.prototype.visitDecimal=Ut(_A);Mt.prototype.visitList=Ut(JX);Mt.prototype.visitStruct=Ut(oH);Mt.prototype.visitUnion=Ut(sH);Mt.prototype.visitDenseUnion=Ut(Yk);Mt.prototype.visitSparseUnion=Ut(Wk);Mt.prototype.visitDictionary=Ut(aH);Mt.prototype.visitInterval=Ut(wA);Mt.prototype.visitIntervalDayTime=Ut(A_);Mt.prototype.visitIntervalYearMonth=Ut(M_);Mt.prototype.visitDuration=Ut(vA);Mt.prototype.visitDurationSecond=Ut(E_);Mt.prototype.visitDurationMillisecond=Ut(D_);Mt.prototype.visitDurationMicrosecond=Ut(B_);Mt.prototype.visitDurationNanosecond=Ut(O_);Mt.prototype.visitFixedSizeList=Ut(cH);Mt.prototype.visitMap=Ut(tH);var an=new Mt;var Wo=Symbol.for("parent"),zd=Symbol.for("rowIndex"),Il=class{constructor(t,r){return this[Wo]=t,this[zd]=r,new Proxy(this,new IA)}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[zd],r=this[Wo],n=r.type.children,i={};for(let o=-1,s=n.length;++o<s;)i[n[o].name]=Mr.visit(r.children[o],t);return i}toString(){return`{${[...this].map(([t,r])=>`${jo(t)}: ${jo(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new SA(this[Wo],this[zd])}},SA=class{constructor(t,r){this.childIndex=0,this.children=t.children,this.rowIndex=r,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Mr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(Il.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zd]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});var IA=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Wo].type.children.map(r=>r.name)}has(t,r){return t[Wo].type.children.findIndex(n=>n.name===r)!==-1}getOwnPropertyDescriptor(t,r){if(t[Wo].type.children.findIndex(n=>n.name===r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];let n=t[Wo].type.children.findIndex(i=>i.name===r);if(n!==-1){let i=Mr.visit(t[Wo].children[n],t[zd]);return Reflect.set(t,r,i),i}}set(t,r,n){let i=t[Wo].type.children.findIndex(o=>o.name===r);return i!==-1?(an.visit(t[Wo].children[i],t[zd],n),Reflect.set(t,r,n)):Reflect.has(t,r)||typeof r=="symbol"?Reflect.set(t,r,n):!1}};var wt=class extends _t{};function Rt(e){return(t,r)=>t.getValid(r)?e(t,r):null}var lH=(e,t)=>864e5*e[t],TA=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),uH=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,fH=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Gk=e=>new Date(e),dH=(e,t)=>Gk(lH(e,t)),hH=(e,t)=>Gk(TA(e,t)),pH=(e,t)=>null,Xk=(e,t,r)=>{if(r+1>=t.length)return null;let n=or(t[r]),i=or(t[r+1]);return e.subarray(n,i)},mH=({offset:e,values:t},r)=>{let n=e+r;return(t[n>>3]&1<<n%8)!==0},Hk=({values:e},t)=>dH(e,t),Zk=({values:e},t)=>hH(e,t*2),Tl=({stride:e,values:t},r)=>t[e*r],yH=({stride:e,values:t},r)=>m_(t[e*r]),Kk=({values:e},t)=>e[t],gH=({stride:e,values:t},r)=>t.subarray(e*r,e*(r+1)),Qk=({values:e,valueOffsets:t},r)=>Xk(e,t,r),Jk=({values:e,valueOffsets:t},r)=>{let n=Xk(e,t,r);return n!==null?Mm(n):null},bH=({values:e},t)=>e[t],xH=({type:e,values:t},r)=>e.precision!==Re.HALF?t[r]:m_(t[r]),_H=(e,t)=>e.type.unit===Tr.DAY?Hk(e,t):Zk(e,t),tC=({values:e},t)=>1e3*TA(e,t*2),eC=({values:e},t)=>TA(e,t*2),rC=({values:e},t)=>uH(e,t*2),nC=({values:e},t)=>fH(e,t*2),wH=(e,t)=>{switch(e.type.unit){case ft.SECOND:return tC(e,t);case ft.MILLISECOND:return eC(e,t);case ft.MICROSECOND:return rC(e,t);case ft.NANOSECOND:return nC(e,t)}},iC=({values:e},t)=>e[t],oC=({values:e},t)=>e[t],sC=({values:e},t)=>e[t],aC=({values:e},t)=>e[t],vH=(e,t)=>{switch(e.type.unit){case ft.SECOND:return iC(e,t);case ft.MILLISECOND:return oC(e,t);case ft.MICROSECOND:return sC(e,t);case ft.NANOSECOND:return aC(e,t)}},SH=({values:e,stride:t},r)=>jm.decimal(e.subarray(t*r,t*(r+1))),IH=(e,t)=>{let{valueOffsets:r,stride:n,children:i}=e,{[t*n]:o,[t*n+1]:s}=r,c=i[0].slice(o,s-o);return new le([c])},TH=(e,t)=>{let{valueOffsets:r,children:n}=e,{[t]:i,[t+1]:o}=r,s=n[0];return new zs(s.slice(i,o-i))},AH=(e,t)=>new Il(e,t),MH=(e,t)=>e.type.mode===Ue.Dense?cC(e,t):lC(e,t),cC=(e,t)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Mr.visit(n,e.valueOffsets[t])},lC=(e,t)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Mr.visit(n,t)},EH=(e,t)=>{var r;return(r=e.dictionary)===null||r===void 0?void 0:r.get(e.values[t])},DH=(e,t)=>e.type.unit===Gr.DAY_TIME?uC(e,t):fC(e,t),uC=({values:e},t)=>e.subarray(2*t,2*(t+1)),fC=({values:e},t)=>{let r=e[t],n=new Int32Array(2);return n[0]=Math.trunc(r/12),n[1]=Math.trunc(r%12),n},dC=({values:e},t)=>e[t],hC=({values:e},t)=>e[t],pC=({values:e},t)=>e[t],mC=({values:e},t)=>e[t],BH=(e,t)=>{switch(e.type.unit){case ft.SECOND:return dC(e,t);case ft.MILLISECOND:return hC(e,t);case ft.MICROSECOND:return pC(e,t);case ft.NANOSECOND:return mC(e,t)}},OH=(e,t)=>{let{stride:r,children:n}=e,o=n[0].slice(t*r,r);return new le([o])};wt.prototype.visitNull=Rt(pH);wt.prototype.visitBool=Rt(mH);wt.prototype.visitInt=Rt(bH);wt.prototype.visitInt8=Rt(Tl);wt.prototype.visitInt16=Rt(Tl);wt.prototype.visitInt32=Rt(Tl);wt.prototype.visitInt64=Rt(Kk);wt.prototype.visitUint8=Rt(Tl);wt.prototype.visitUint16=Rt(Tl);wt.prototype.visitUint32=Rt(Tl);wt.prototype.visitUint64=Rt(Kk);wt.prototype.visitFloat=Rt(xH);wt.prototype.visitFloat16=Rt(yH);wt.prototype.visitFloat32=Rt(Tl);wt.prototype.visitFloat64=Rt(Tl);wt.prototype.visitUtf8=Rt(Jk);wt.prototype.visitLargeUtf8=Rt(Jk);wt.prototype.visitBinary=Rt(Qk);wt.prototype.visitLargeBinary=Rt(Qk);wt.prototype.visitFixedSizeBinary=Rt(gH);wt.prototype.visitDate=Rt(_H);wt.prototype.visitDateDay=Rt(Hk);wt.prototype.visitDateMillisecond=Rt(Zk);wt.prototype.visitTimestamp=Rt(wH);wt.prototype.visitTimestampSecond=Rt(tC);wt.prototype.visitTimestampMillisecond=Rt(eC);wt.prototype.visitTimestampMicrosecond=Rt(rC);wt.prototype.visitTimestampNanosecond=Rt(nC);wt.prototype.visitTime=Rt(vH);wt.prototype.visitTimeSecond=Rt(iC);wt.prototype.visitTimeMillisecond=Rt(oC);wt.prototype.visitTimeMicrosecond=Rt(sC);wt.prototype.visitTimeNanosecond=Rt(aC);wt.prototype.visitDecimal=Rt(SH);wt.prototype.visitList=Rt(IH);wt.prototype.visitStruct=Rt(AH);wt.prototype.visitUnion=Rt(MH);wt.prototype.visitDenseUnion=Rt(cC);wt.prototype.visitSparseUnion=Rt(lC);wt.prototype.visitDictionary=Rt(EH);wt.prototype.visitInterval=Rt(DH);wt.prototype.visitIntervalDayTime=Rt(uC);wt.prototype.visitIntervalYearMonth=Rt(fC);wt.prototype.visitDuration=Rt(BH);wt.prototype.visitDurationSecond=Rt(dC);wt.prototype.visitDurationMillisecond=Rt(hC);wt.prototype.visitDurationMicrosecond=Rt(pC);wt.prototype.visitDurationNanosecond=Rt(mC);wt.prototype.visitFixedSizeList=Rt(OH);wt.prototype.visitMap=Rt(TH);var Mr=new wt;var ao=Symbol.for("keys"),Vd=Symbol.for("vals"),zs=class{constructor(t){return this[ao]=new le([t.children[0]]).memoize(),this[Vd]=t.children[1],new Proxy(this,new MA)}[Symbol.iterator](){return new AA(this[ao],this[Vd])}get size(){return this[ao].length}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[ao],r=this[Vd],n={};for(let i=-1,o=t.length;++i<o;)n[t.get(i)]=Mr.visit(r,i);return n}toString(){return`{${[...this].map(([t,r])=>`${jo(t)}: ${jo(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},AA=class{constructor(t,r){this.keys=t,this.vals=r,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){let t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Mr.visit(this.vals,t)]})}},MA=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ao].toArray().map(String)}has(t,r){return t[ao].includes(r)}getOwnPropertyDescriptor(t,r){if(t[ao].indexOf(r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];let n=t[ao].indexOf(r);if(n!==-1){let i=Mr.visit(Reflect.get(t,Vd),n);return Reflect.set(t,r,i),i}}set(t,r,n){let i=t[ao].indexOf(r);return i!==-1?(an.visit(Reflect.get(t,Vd),i,n),Reflect.set(t,r,n)):Reflect.has(t,r)?Reflect.set(t,r,n):!1}};Object.defineProperties(zs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ao]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vd]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function NH(e,t,r){let n=e.length,i=t>-1?t:n+t%n;return r?r(e,i):i}var yC;function ey(e,t,r,n){let{length:i=0}=e,o=typeof t!="number"?0:t,s=typeof r!="number"?i:r;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(yC=o,o=s,s=yC),s>i&&(s=i),n?n(e,o,s):[o,s]}var gC=e=>e!==e;function Al(e){if(typeof e!=="object"||e===null)return gC(e)?gC:r=>r===e;if(e instanceof Date){let r=e.valueOf();return n=>n instanceof Date?n.valueOf()===r:!1}return ArrayBuffer.isView(e)?r=>r?sA(e,r):!1:e instanceof Map?RH(e):Array.isArray(e)?FH(e):e instanceof le?LH(e):kH(e,!0)}function FH(e){let t=[];for(let r=-1,n=e.length;++r<n;)t[r]=Al(e[r]);return N_(t)}function RH(e){let t=-1,r=[];for(let n of e.values())r[++t]=Al(n);return N_(r)}function LH(e){let t=[];for(let r=-1,n=e.length;++r<n;)t[r]=Al(e.get(r));return N_(t)}function kH(e,t=!1){let r=Object.keys(e);if(!t&&r.length===0)return()=>!1;let n=[];for(let i=-1,o=r.length;++i<o;)n[i]=Al(e[r[i]]);return N_(n,r)}function N_(e,t){return r=>{if(!r||typeof r!="object")return!1;switch(r.constructor){case Array:return CH(e,r);case Map:return bC(e,r,r.keys());case zs:case Il:case Object:case void 0:return bC(e,r,t||Object.keys(r))}return r instanceof le?UH(e,r):!1}}function CH(e,t){let r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t[n]))return!1;return!0}function UH(e,t){let r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t.get(n)))return!1;return!0}function bC(e,t,r){let n=r[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),s=0,a=e.length,c=o.next(),l=n.next(),u=i.next();for(;s<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[s](c.value));++s,l=n.next(),u=i.next(),c=o.next());return s===a&&l.done&&u.done&&c.done?!0:(n.return&&n.return(),i.return&&i.return(),o.return&&o.return(),!1)}var DA={};Ir(DA,{BitIterator:()=>qu,getBit:()=>xC,getBool:()=>R_,packBools:()=>Wu,popcnt_array:()=>_C,popcnt_bit_range:()=>ry,popcnt_uint32:()=>F_,setBool:()=>PH,truncateBitmap:()=>Yu});function R_(e,t,r,n){return(r&1<<n)!==0}function xC(e,t,r,n){return(r&1<<n)>>n}function PH(e,t,r){return r?!!(e[t>>3]|=1<<t%8)||!0:!(e[t>>3]&=~(1<<t%8))&&!1}function Yu(e,t,r){let n=r.byteLength+7&-8;if(e>0||r.byteLength<n){let i=new Uint8Array(n);return i.set(e%8===0?r.subarray(e>>3):Wu(new qu(r,e,t,null,R_)).subarray(0,n)),i}return r}function Wu(e){let t=[],r=0,n=0,i=0;for(let s of e)s&&(i|=1<<n),++n===8&&(t[r++]=i,i=n=0);(r===0||n>0)&&(t[r++]=i);let o=new Uint8Array(t.length+7&-8);return o.set(t),o}var qu=class{constructor(t,r,n,i,o){this.bytes=t,this.length=n,this.context=i,this.get=o,this.bit=r%8,this.byteIndex=r>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function ry(e,t,r){if(r-t<=0)return 0;if(r-t<8){let o=0;for(let s of new qu(e,t,r-t,e,xC))o+=s;return o}let n=r>>3<<3,i=t+(t%8===0?0:8-t%8);return ry(e,t,i)+ry(e,n,r)+_C(e,i>>3,n-i>>3)}function _C(e,t,r){let n=0,i=Math.trunc(t),o=new DataView(e.buffer,e.byteOffset,e.byteLength),s=r===void 0?e.byteLength:i+r;for(;s-i>=4;)n+=F_(o.getUint32(i)),i+=4;for(;s-i>=2;)n+=F_(o.getUint16(i)),i+=2;for(;s-i>=1;)n+=F_(o.getUint8(i)),i+=1;return n}function F_(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}var $H=-1,_e=class e{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){let{type:t}=this;return J.isSparseUnion(t)?this.children.some(r=>r.nullable):J.isDenseUnion(t)?this.children.some(r=>r.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0,{valueOffsets:r,values:n,nullBitmap:i,typeIds:o}=this;return r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),this.children.reduce((s,a)=>s+a.byteLength,t)}get nullCount(){if(J.isUnion(this.type))return this.children.reduce((n,i)=>n+i.nullCount,0);let t=this._nullCount,r;return t<=$H&&(r=this.nullBitmap)&&(this._nullCount=t=this.length-ry(r,this.offset,this.offset+this.length)),t}constructor(t,r,n,i,o,s=[],a){this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(r||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;o instanceof e?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Bi(t),o&&((c=o[0])&&(this.valueOffsets=c),(c=o[1])&&(this.values=c),(c=o[2])&&(this.nullBitmap=c),(c=o[3])&&(this.typeIds=c)))}getValid(t){let{type:r}=this;if(J.isUnion(r)){let n=r,i=this.children[n.typeIdToChildIndex[this.typeIds[t]]],o=n.mode===Ue.Dense?this.valueOffsets[t]:t;return i.getValid(o)}if(this.nullable&&this.nullCount>0){let n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,r){let n,{type:i}=this;if(J.isUnion(i)){let o=i,s=this.children[o.typeIdToChildIndex[this.typeIds[t]]],a=o.mode===Ue.Dense?this.valueOffsets[t]:t;n=s.getValid(a),s.setValid(a,r)}else{let{nullBitmap:o}=this,{offset:s,length:a}=this,c=s+t,l=1<<c%8,u=c>>3;(!o||o.byteLength<=u)&&(o=new Uint8Array((s+a+63&-64)>>3).fill(255),this.nullCount>0&&o.set(Yu(s,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:o,_nullCount:-1}));let f=o[u];n=(f&l)!==0,r?o[u]=f|l:o[u]=f&~l}return n!==!!r&&(this._nullCount=this.nullCount+(r?-1:1)),r}clone(t=this.type,r=this.offset,n=this.length,i=this._nullCount,o=this,s=this.children){return new e(t,r,n,i,o,s,this.dictionary)}slice(t,r){let{stride:n,typeId:i,children:o}=this,s=+(this._nullCount===0)-1,a=i===16?n:1,c=this._sliceBuffers(t,r,n,i);return this.clone(this.type,this.offset+t,r,s,c,o.length===0||this.valueOffsets?o:this._sliceChildren(o,a*t,a*r))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===R.Null)return this.clone(this.type,0,t,0);let{length:r,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,r>>3);i[r>>3]=(1<<r-(r&-8))-1,n>0&&i.set(Yu(this.offset,r,this.nullBitmap),0);let o=this.buffers;return o[Vo.VALIDITY]=i,this.clone(this.type,0,t,n+(t-r),o)}_sliceBuffers(t,r,n,i){let o,{buffers:s}=this;return(o=s[Vo.TYPE])&&(s[Vo.TYPE]=o.subarray(t,t+r)),(o=s[Vo.OFFSET])&&(s[Vo.OFFSET]=o.subarray(t,t+r+1))||(o=s[Vo.DATA])&&(s[Vo.DATA]=i===6?o:o.subarray(n*t,n*(t+r))),s}_sliceChildren(t,r,n){return t.map(i=>i.slice(r,n))}};_e.prototype.children=Object.freeze([]);var BA=class e extends _t{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){let{["type"]:r,["offset"]:n=0,["length"]:i=0}=t;return new _e(r,n,i,i)}visitBool(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitInt(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitFloat(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitUtf8(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.data),o=Et(t.nullBitmap),s=ju(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,i,o])}visitLargeUtf8(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.data),o=Et(t.nullBitmap),s=c_(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,i,o])}visitBinary(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.data),o=Et(t.nullBitmap),s=ju(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,i,o])}visitLargeBinary(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.data),o=Et(t.nullBitmap),s=c_(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,i,o])}visitFixedSizeBinary(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitDate(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitTimestamp(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitTime(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitDecimal(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitList(t){let{["type"]:r,["offset"]:n=0,["child"]:i}=t,o=Et(t.nullBitmap),s=ju(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,void 0,o],[i])}visitStruct(t){let{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,o=Et(t.nullBitmap),{length:s=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,void 0,o],i)}visitUnion(t){let{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,o=te(r.ArrayType,t.typeIds),{["length"]:s=o.length,["nullCount"]:a=-1}=t;if(J.isSparseUnion(r))return new _e(r,n,s,a,[void 0,void 0,void 0,o],i);let c=ju(t.valueOffsets);return new _e(r,n,s,a,[c,void 0,void 0,o],i)}visitDictionary(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.indices.ArrayType,t.data),{["dictionary"]:s=new le([new e().visit({type:r.dictionary})])}=t,{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[void 0,o,i],[],s)}visitInterval(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitDuration(t){let{["type"]:r,["offset"]:n=0}=t,i=Et(t.nullBitmap),o=te(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,o,i])}visitFixedSizeList(t){let{["type"]:r,["offset"]:n=0,["child"]:i=new e().visit({type:r.valueType})}=t,o=Et(t.nullBitmap),{["length"]:s=i.length/Bi(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _e(r,n,s,a,[void 0,void 0,o],[i])}visitMap(t){let{["type"]:r,["offset"]:n=0,["child"]:i=new e().visit({type:r.childType})}=t,o=Et(t.nullBitmap),s=ju(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new _e(r,n,a,c,[s,void 0,o],[i])}},zH=new BA;function Vt(e){return zH.visit(e)}var ny=class{constructor(t=0,r){this.numChunks=t,this.getChunkIterator=r,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function wC(e){return e.some(t=>t.nullable)}function L_(e){return e.reduce((t,r)=>t+r.nullCount,0)}function k_(e){return e.reduce((t,r,n)=>(t[n+1]=t[n]+r.length,t),new Uint32Array(e.length+1))}function C_(e,t,r,n){let i=[];for(let o=-1,s=e.length;++o<s;){let a=e[o],c=t[o],{length:l}=a;if(c>=n)break;if(r>=c+l)continue;if(c>=r&&c+l<=n){i.push(a);continue}let u=Math.max(0,r-c),f=Math.min(n-c,l);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function OA(e,t,r,n){let i=0,o=0,s=t.length-1;do{if(i>=s-1)return r<t[s]?n(e,i,r-t[i]):null;o=i+Math.trunc((s-i)*.5),r<t[o]?s=o:i=o}while(i<s)}function iy(e,t){return e.getValid(t)}function jd(e){function t(r,n,i){return e(r[n],i)}return function(r){let n=this.data;return OA(n,this._offsets,r,t)}}function U_(e){let t;function r(n,i,o){return e(n[i],o,t)}return function(n,i){let o=this.data;t=i;let s=OA(o,this._offsets,n,r);return t=void 0,s}}function P_(e){let t;function r(n,i,o){let s=o,a=0,c=0;for(let l=i-1,u=n.length;++l<u;){let f=n[l];if(~(a=e(f,t,s)))return c+a;s=0,c+=f.length}return-1}return function(n,i){t=n;let o=this.data,s=typeof i!="number"?r(o,0,0):OA(o,this._offsets,i,r);return t=void 0,s}}var vt=class extends _t{};function VH(e,t){return t===null&&e.length>0?0:-1}function jH(e,t){let{nullBitmap:r}=e;if(!r||e.nullCount<=0)return-1;let n=0;for(let i of new qu(r,e.offset+(t||0),e.length,r,R_)){if(!i)return n;++n}return-1}function jt(e,t,r){if(t===void 0)return-1;if(t===null)switch(e.typeId){case R.Union:break;case R.Dictionary:break;default:return jH(e,r)}let n=Mr.getVisitFn(e),i=Al(t);for(let o=(r||0)-1,s=e.length;++o<s;)if(i(n(e,o)))return o;return-1}function vC(e,t,r){let n=Mr.getVisitFn(e),i=Al(t);for(let o=(r||0)-1,s=e.length;++o<s;)if(i(n(e,o)))return o;return-1}vt.prototype.visitNull=VH;vt.prototype.visitBool=jt;vt.prototype.visitInt=jt;vt.prototype.visitInt8=jt;vt.prototype.visitInt16=jt;vt.prototype.visitInt32=jt;vt.prototype.visitInt64=jt;vt.prototype.visitUint8=jt;vt.prototype.visitUint16=jt;vt.prototype.visitUint32=jt;vt.prototype.visitUint64=jt;vt.prototype.visitFloat=jt;vt.prototype.visitFloat16=jt;vt.prototype.visitFloat32=jt;vt.prototype.visitFloat64=jt;vt.prototype.visitUtf8=jt;vt.prototype.visitLargeUtf8=jt;vt.prototype.visitBinary=jt;vt.prototype.visitLargeBinary=jt;vt.prototype.visitFixedSizeBinary=jt;vt.prototype.visitDate=jt;vt.prototype.visitDateDay=jt;vt.prototype.visitDateMillisecond=jt;vt.prototype.visitTimestamp=jt;vt.prototype.visitTimestampSecond=jt;vt.prototype.visitTimestampMillisecond=jt;vt.prototype.visitTimestampMicrosecond=jt;vt.prototype.visitTimestampNanosecond=jt;vt.prototype.visitTime=jt;vt.prototype.visitTimeSecond=jt;vt.prototype.visitTimeMillisecond=jt;vt.prototype.visitTimeMicrosecond=jt;vt.prototype.visitTimeNanosecond=jt;vt.prototype.visitDecimal=jt;vt.prototype.visitList=jt;vt.prototype.visitStruct=jt;vt.prototype.visitUnion=jt;vt.prototype.visitDenseUnion=vC;vt.prototype.visitSparseUnion=vC;vt.prototype.visitDictionary=jt;vt.prototype.visitInterval=jt;vt.prototype.visitIntervalDayTime=jt;vt.prototype.visitIntervalYearMonth=jt;vt.prototype.visitDuration=jt;vt.prototype.visitDurationSecond=jt;vt.prototype.visitDurationMillisecond=jt;vt.prototype.visitDurationMicrosecond=jt;vt.prototype.visitDurationNanosecond=jt;vt.prototype.visitFixedSizeList=jt;vt.prototype.visitMap=jt;var Gu=new vt;var St=class extends _t{};function Lt(e){let{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===R.Timestamp||t instanceof dr&&t.bitWidth!==64||t instanceof ro&&t.bitWidth!==64||t instanceof Pn&&t.precision!==Re.HALF))return new ny(e.data.length,n=>{let i=e.data[n];return i.values.subarray(0,i.length)[Symbol.iterator]()});let r=0;return new ny(e.data.length,n=>{let o=e.data[n].length,s=e.slice(r,r+o);return r+=o,new NA(s)})}var NA=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};St.prototype.visitNull=Lt;St.prototype.visitBool=Lt;St.prototype.visitInt=Lt;St.prototype.visitInt8=Lt;St.prototype.visitInt16=Lt;St.prototype.visitInt32=Lt;St.prototype.visitInt64=Lt;St.prototype.visitUint8=Lt;St.prototype.visitUint16=Lt;St.prototype.visitUint32=Lt;St.prototype.visitUint64=Lt;St.prototype.visitFloat=Lt;St.prototype.visitFloat16=Lt;St.prototype.visitFloat32=Lt;St.prototype.visitFloat64=Lt;St.prototype.visitUtf8=Lt;St.prototype.visitLargeUtf8=Lt;St.prototype.visitBinary=Lt;St.prototype.visitLargeBinary=Lt;St.prototype.visitFixedSizeBinary=Lt;St.prototype.visitDate=Lt;St.prototype.visitDateDay=Lt;St.prototype.visitDateMillisecond=Lt;St.prototype.visitTimestamp=Lt;St.prototype.visitTimestampSecond=Lt;St.prototype.visitTimestampMillisecond=Lt;St.prototype.visitTimestampMicrosecond=Lt;St.prototype.visitTimestampNanosecond=Lt;St.prototype.visitTime=Lt;St.prototype.visitTimeSecond=Lt;St.prototype.visitTimeMillisecond=Lt;St.prototype.visitTimeMicrosecond=Lt;St.prototype.visitTimeNanosecond=Lt;St.prototype.visitDecimal=Lt;St.prototype.visitList=Lt;St.prototype.visitStruct=Lt;St.prototype.visitUnion=Lt;St.prototype.visitDenseUnion=Lt;St.prototype.visitSparseUnion=Lt;St.prototype.visitDictionary=Lt;St.prototype.visitInterval=Lt;St.prototype.visitIntervalDayTime=Lt;St.prototype.visitIntervalYearMonth=Lt;St.prototype.visitDuration=Lt;St.prototype.visitDurationSecond=Lt;St.prototype.visitDurationMillisecond=Lt;St.prototype.visitDurationMicrosecond=Lt;St.prototype.visitDurationNanosecond=Lt;St.prototype.visitFixedSizeList=Lt;St.prototype.visitMap=Lt;var qd=new St;var SC,IC={},TC={},le=class e{constructor(t){var r,n,i;let o=t[0]instanceof e?t.flatMap(a=>a.data):t;if(o.length===0||o.some(a=>!(a instanceof _e)))throw new TypeError("Vector constructor expects an Array of Data instances.");let s=(r=o[0])===null||r===void 0?void 0:r.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{let{get:a,set:c,indexOf:l}=IC[s.typeId],u=o[0];this.isValid=f=>iy(u,f),this.get=f=>a(u,f),this.set=(f,d)=>c(u,f,d),this.indexOf=f=>l(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,TC[s.typeId]),this._offsets=k_(o);break}this.data=o,this.type=s,this.stride=Bi(s),this.numChildren=(i=(n=s.children)===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,r)=>t+r.byteLength,0)}get nullable(){return wC(this.data)}get nullCount(){return L_(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${R[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}includes(t,r){return this.indexOf(t,r)>-1}[Symbol.iterator](){return qd.visit(this)}concat(...t){return new e(this.data.concat(t.flatMap(r=>r.data).flat(Number.POSITIVE_INFINITY)))}slice(t,r){return new e(ey(this,t,r,({data:n,_offsets:i},o,s)=>C_(n,i,o,s)))}toJSON(){return[...this]}toArray(){let{type:t,data:r,length:n,stride:i,ArrayType:o}=this;switch(t.typeId){case R.Int:case R.Float:case R.Decimal:case R.Time:case R.Timestamp:switch(r.length){case 0:return new o;case 1:return r[0].values.subarray(0,n*i);default:return r.reduce((s,{values:a,length:c})=>(s.array.set(a.subarray(0,c*i),s.offset),s.offset+=c*i,s),{array:new o(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var r;return this.getChildAt((r=this.type.children)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new e(this.data.map(({children:r})=>r[t])):null}get isMemoized(){return J.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(J.isDictionary(this.type)){let t=new $_(this.data[0].dictionary),r=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new e(r)}return new $_(this)}unmemoize(){if(J.isDictionary(this.type)&&this.isMemoized){let t=this.data[0].dictionary.unmemoize(),r=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new e(r)}return this}};SC=Symbol.toStringTag;le[SC]=(e=>{e.type=J.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;let t=Object.keys(R).map(r=>R[r]).filter(r=>typeof r=="number"&&r!==R.NONE);for(let r of t){let n=Mr.getVisitFnByTypeId(r),i=an.getVisitFnByTypeId(r),o=Gu.getVisitFnByTypeId(r);IC[r]={get:n,set:i,indexOf:o},TC[r]=Object.create(e,{isValid:{value:jd(iy)},get:{value:jd(Mr.getVisitFnByTypeId(r))},set:{value:U_(an.getVisitFnByTypeId(r))},indexOf:{value:P_(Gu.getVisitFnByTypeId(r))}})}return"Vector"})(le.prototype);var $_=class e extends le{constructor(t){super(t.data);let r=this.get,n=this.set,i=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(s){let a=o[s];if(a!==void 0)return a;let c=r.call(this,s);return o[s]=c,c}}),Object.defineProperty(this,"set",{value(s,a){n.call(this,s,a),o[s]=a}}),Object.defineProperty(this,"slice",{value:(s,a)=>new e(i.call(this,s,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new le(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function AC(e){if(!e||e.length<=0)return function(i){return!0};let t="",r=e.filter(n=>n===n);return r.length>0&&(t=`
    switch (x) {${r.map(n=>`
        case ${qH(n)}:`).join("")}
            return false;
    }`),e.length!==r.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function qH(e){return typeof e!="bigint"?jo(e):`${jo(e)}n`}function FA(e,t){let r=Math.ceil(e)*t-1;return(r-r%64+64||64)/t}function MC(e,t=0){return e.length>=t?e.subarray(0,t):Dm(new e.constructor(t),e,0)}var Go=class{constructor(t,r=0,n=1){this.length=Math.ceil(r/n),this.buffer=new t(this.length),this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,r){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;let r=this.stride,n=this.length*r,i=this.buffer.length;n>=i&&this._resize(i===0?FA(n*1,this.BYTES_PER_ELEMENT):FA(n*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=FA(t*this.stride,this.BYTES_PER_ELEMENT);let r=MC(this.buffer,t);return this.clear(),r}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=MC(this.buffer,t)}},qa=class extends Go{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,r){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=r,this}},Yd=class extends qa{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,r){let{buffer:n}=this.reserve(t-this.length+1),i=t>>3,o=t%8,s=n[i]>>o&1;return r?s===0&&(n[i]|=1<<o,++this.numValid):s===1&&(n[i]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}},Wd=class extends qa{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,r){let n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&n>=0&&i.fill(i[n],n,t),i[t]=i[t-1]+r,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}};var Ge=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:r}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=r,this.stride=Bi(t),this._nulls=new Yd,r&&r.length>0&&(this._isValid=AC(r))}toVector(){return new le([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0,{_offsets:r,_values:n,_nulls:i,_typeIds:o,children:s}=this;return r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),s.reduce((a,c)=>a+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((r,n)=>r+n.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,r){return this.setValid(t,this.isValid(r))&&this.setValue(t,r),this}setValue(t,r){this._setValue(this,t,r)}setValid(t,r){return this.length=this._nulls.set(t,+r).length,r}addChild(t,r=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,r,n,i,{type:o,length:s,nullCount:a,_typeIds:c,_offsets:l,_values:u,_nulls:f}=this;(r=c?.flush(s))?i=l?.flush(s):(i=l?.flush(s))?t=u?.flush(l.last()):t=u?.flush(s),a>0&&(n=f?.flush(s));let d=this.children.map(h=>h.flush());return this.clear(),Vt({type:o,length:s,nullCount:a,children:d,child:d[0],data:t,typeIds:r,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(let t of this.children)t.finish();return this}clear(){var t,r,n,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(r=this._values)===null||r===void 0||r.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(let o of this.children)o.clear();return this}};Ge.prototype.length=1;Ge.prototype.stride=1;Ge.prototype.children=null;Ge.prototype.finished=!1;Ge.prototype.nullValues=null;Ge.prototype._isValid=()=>!0;var Er=class extends Ge{constructor(t){super(t),this._values=new qa(this.ArrayType,0,this.stride)}setValue(t,r){let n=this._values;return n.reserve(t-n.length+1),super.setValue(t,r)}},fi=class extends Ge{constructor(t){super(t),this._pendingLength=0,this._offsets=new Wd(t.type)}setValue(t,r){let n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=r instanceof zs?r[ao].length:r.length,n.set(t,r)}setValid(t,r){return super.setValid(t,r)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let t=this._pending,r=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,r),this}};var Xu=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,r,n,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(n),t.writeInt64(BigInt(r??0)),t.offset()}};var Oi=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFooter(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ee.V1}schema(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new li).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dictionaries(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new Xu).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,r){let n=this.bb.__offset(this.bb_pos,10);return n?(r||new Xu).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new $r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,Ee.V1)}static addSchema(t,r){t.addFieldOffset(1,r,0)}static addDictionaries(t,r){t.addFieldOffset(2,r,0)}static startDictionariesVector(t,r){t.startVector(24,r,8)}static addRecordBatches(t,r){t.addFieldOffset(3,r,0)}static startRecordBatchesVector(t,r){t.startVector(24,r,8)}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,r){t.finish(r)}static finishSizePrefixedFooterBuffer(t,r){t.finish(r,void 0,!0)}};var Ie=class e{constructor(t=[],r,n,i=Ee.V5){this.fields=t||[],this.metadata=r||new Map,n||(n=RA(t)),this.dictionaries=n,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,r)=>`${r}: ${t}`).join(", ")} }>`}select(t){let r=new Set(t),n=this.fields.filter(i=>r.has(i.name));return new e(n,this.metadata)}selectAt(t){let r=t.map(n=>this.fields[n]).filter(Boolean);return new e(r,this.metadata)}assign(...t){let r=t[0]instanceof e?t[0]:Array.isArray(t[0])?new e(t[0]):new e(t),n=[...this.fields],i=z_(z_(new Map,this.metadata),r.metadata),o=r.fields.filter(a=>{let c=n.findIndex(l=>l.name===a.name);return~c?(n[c]=a.clone({metadata:z_(z_(new Map,n[c].metadata),a.metadata)}))&&!1:!0}),s=RA(o,new Map);return new e([...n,...o],i,new Map([...this.dictionaries,...s]))}};Ie.prototype.fields=null;Ie.prototype.metadata=null;Ie.prototype.dictionaries=null;var re=class e{static new(...t){let[r,n,i,o]=t;return t[0]&&typeof t[0]=="object"&&({name:r}=t[0],n===void 0&&(n=t[0].type),i===void 0&&(i=t[0].nullable),o===void 0&&(o=t[0].metadata)),new e(`${r}`,n,i,o)}constructor(t,r,n=!1,i){this.name=t,this.type=r,this.nullable=n,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[r,n,i,o]=t;return!t[0]||typeof t[0]!="object"?[r=this.name,n=this.type,i=this.nullable,o=this.metadata]=t:{name:r=this.name,type:n=this.type,nullable:i=this.nullable,metadata:o=this.metadata}=t[0],e.new(r,n,i,o)}};re.prototype.type=null;re.prototype.name=null;re.prototype.nullable=null;re.prototype.metadata=null;function z_(e,t){return new Map([...e||new Map,...t||new Map])}function RA(e,t=new Map){for(let r=-1,n=e.length;++r<n;){let o=e[r].type;if(J.isDictionary(o)){if(!t.has(o.id))t.set(o.id,o.dictionary);else if(t.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&RA(o.children,t)}return t}var YH=Po,WH=Ar,Ya=class{static decode(t){t=new WH(Et(t));let r=Oi.getRootAsFooter(t),n=Ie.decode(r.schema(),new Map,r.version());return new LA(n,r)}static encode(t){let r=new YH,n=Ie.encode(r,t.schema);Oi.startRecordBatchesVector(r,t.numRecordBatches);for(let s of[...t.recordBatches()].slice().reverse())Wa.encode(r,s);let i=r.endVector();Oi.startDictionariesVector(r,t.numDictionaries);for(let s of[...t.dictionaryBatches()].slice().reverse())Wa.encode(r,s);let o=r.endVector();return Oi.startFooter(r),Oi.addSchema(r,n),Oi.addVersion(r,Ee.V5),Oi.addRecordBatches(r,i),Oi.addDictionaries(r,o),Oi.finishFooterBuffer(r,Oi.endFooter(r)),r.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,r=Ee.V5,n,i){this.schema=t,this.version=r,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,r=-1,n=this.numRecordBatches;++r<n;)(t=this.getRecordBatch(r))&&(yield t)}*dictionaryBatches(){for(let t,r=-1,n=this.numDictionaries;++r<n;)(t=this.getDictionaryBatch(r))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}};var LA=class extends Ya{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,r){super(t,r.version()),this._footer=r}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){let r=this._footer.recordBatches(t);if(r)return Wa.decode(r)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){let r=this._footer.dictionaries(t);if(r)return Wa.decode(r)}return null}},Wa=class e{static decode(t){return new e(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,r){let{metaDataLength:n}=r,i=BigInt(r.offset),o=BigInt(r.bodyLength);return Xu.createBlock(t,i,n,o)}constructor(t,r,n){this.metaDataLength=t,this.offset=or(n),this.bodyLength=or(r)}};var Ve=Object.freeze({done:!0,value:void 0}),oy=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},Hu=class{tee(){return this._getDOMStream().tee()}pipe(t,r){return this._getNodeStream().pipe(t,r)}pipeTo(t,r){return this._getDOMStream().pipeTo(t,r)}pipeThrough(t,r){return this._getDOMStream().pipeThrough(t,r)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},V_=class extends Hu{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return P(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){let{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ve);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return sn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return sn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return P(this,void 0,void 0,function*(){return yield this.abort(t),Ve})}return(t){return P(this,void 0,void 0,function*(){return yield this.close(),Ve})}read(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,n)=>{this.resolvers.push({resolve:r,reject:n})}):Promise.resolve(Ve)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}};var Vs=class extends V_{write(t){if((t=Et(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Mm(this.toUint8Array(!0)):this.toUint8Array(!1).then(Mm)}toUint8Array(t=!1){return t?Ei(this._values)[0]:P(this,void 0,void 0,function*(){var r,n,i,o;let s=[],a=0;try{for(var c=!0,l=fr(this),u;u=yield l.next(),r=u.done,!r;c=!0){o=u.value,c=!1;let f=o;s.push(f),a+=f.byteLength}}catch(f){n={error:f}}finally{try{!c&&!r&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return Ei(s,a)[0]})}},js=class{constructor(t){t&&(this.source=new kA(sn.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},co=class e{constructor(t){t instanceof e?this.source=t.source:t instanceof Vs?this.source=new Ga(sn.fromAsyncIterable(t)):a_(t)?this.source=new Ga(sn.fromNodeStream(t)):Em(t)?this.source=new Ga(sn.fromDOMStream(t)):o_(t)?this.source=new Ga(sn.fromDOMStream(t.body)):ko(t)?this.source=new Ga(sn.fromIterable(t)):Mi(t)?this.source=new Ga(sn.fromAsyncIterable(t)):to(t)&&(this.source=new Ga(sn.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},kA=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,r="read"){return this.source.next({cmd:r,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ve)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ve)}},Ga=class{constructor(t){this.source=t,this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}cancel(t){return P(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,r="read"){return P(this,void 0,void 0,function*(){return yield this.source.next({cmd:r,size:t})})}throw(t){return P(this,void 0,void 0,function*(){let r=this.source.throw&&(yield this.source.throw(t))||Ve;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}return(t){return P(this,void 0,void 0,function*(){let r=this.source.return&&(yield this.source.return(t))||Ve;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}};var sy=class extends js{constructor(t,r){super(),this.position=0,this.buffer=Et(t),this.size=r===void 0?this.buffer.byteLength:r}readInt32(t){let{buffer:r,byteOffset:n}=this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){let{buffer:r,size:n,position:i}=this;return r&&i<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),r.subarray(i,this.position)):null}readAt(t,r){let n=this.buffer,i=Math.min(this.size,t+r);return n?n.subarray(t,i):new Uint8Array(r)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},Ml=class extends co{constructor(t,r){super(),this.position=0,this._handle=t,typeof r=="number"?this.size=r:this._pending=P(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return P(this,void 0,void 0,function*(){let{buffer:r,byteOffset:n}=yield this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)})}seek(t){return P(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return P(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:r,size:n,position:i}=this;if(r&&i<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let o=i,s=0,a=0,c=Math.min(n,o+Math.min(n-o,t)),l=new Uint8Array(Math.max(0,(this.position=c)-o));for(;(o+=a)<c&&(s+=a)<l.byteLength;)({bytesRead:a}=yield r.read(l,s,l.byteLength-s,o));return l}return null})}readAt(t,r){return P(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:n,size:i}=this;if(n&&t+r<i){let o=Math.min(i,t+r),s=new Uint8Array(o-t);return(yield n.read(s,0,r,t)).buffer}return new Uint8Array(r)})}close(){return P(this,void 0,void 0,function*(){let t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return P(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return P(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};var UA={};Ir(UA,{BaseInt64:()=>ay,Int128:()=>cy,Int64:()=>Xa,Uint64:()=>sr});function Gd(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}var Xd=8,CA=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],ay=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){let r=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]),i=r[3]*n[3];this.buffer[0]=i&65535;let o=i>>>16;return i=r[2]*n[3],o+=i,i=r[3]*n[2]>>>0,o+=i,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<i?65536:0,this.buffer[1]+=o>>>16,this.buffer[1]+=r[1]*n[3]+r[2]*n[2]+r[3]*n[1],this.buffer[1]+=r[0]*n[3]+r[1]*n[2]+r[2]*n[1]+r[3]*n[0]<<16,this}_plus(t){let r=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],r<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=r}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Gd(this.buffer[1])} ${Gd(this.buffer[0])}`}},sr=class e extends ay{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,r=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){let n=t.length,i=new e(r);for(let o=0;o<n;){let s=Xd<n-o?Xd:n-o,a=new e(new Uint32Array([Number.parseInt(t.slice(o,o+s),10),0])),c=new e(new Uint32Array([CA[s],0]));i.times(c),i.plus(a),o+=s}return i}static convertArray(t){let r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}},Xa=class e extends ay{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){let r=this.buffer[1]<<0,n=t.buffer[1]<<0;return r<n||r===n&&this.buffer[0]<t.buffer[0]}static from(t,r=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){let n=t.startsWith("-"),i=t.length,o=new e(r);for(let s=n?1:0;s<i;){let a=Xd<i-s?Xd:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),l=new e(new Uint32Array([CA[a],0]));o.times(l),o.plus(c),s+=a}return n?o.negate():o}static convertArray(t){let r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}},cy=class e{constructor(t){this.buffer=t}high(){return new Xa(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Xa(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){let r=new sr(new Uint32Array([this.buffer[3],0])),n=new sr(new Uint32Array([this.buffer[2],0])),i=new sr(new Uint32Array([this.buffer[1],0])),o=new sr(new Uint32Array([this.buffer[0],0])),s=new sr(new Uint32Array([t.buffer[3],0])),a=new sr(new Uint32Array([t.buffer[2],0])),c=new sr(new Uint32Array([t.buffer[1],0])),l=new sr(new Uint32Array([t.buffer[0],0])),u=sr.multiply(o,l);this.buffer[0]=u.low();let f=new sr(new Uint32Array([u.high(),0]));return u=sr.multiply(i,l),f.plus(u),u=sr.multiply(o,c),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new sr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(sr.multiply(n,l)).plus(sr.multiply(i,c)).plus(sr.multiply(o,a)),this.buffer[3]+=sr.multiply(r,l).plus(sr.multiply(n,c)).plus(sr.multiply(i,a)).plus(sr.multiply(o,s)).low(),this}plus(t){let r=new Uint32Array(4);return r[3]=this.buffer[3]+t.buffer[3]>>>0,r[2]=this.buffer[2]+t.buffer[2]>>>0,r[1]=this.buffer[1]+t.buffer[1]>>>0,r[0]=this.buffer[0]+t.buffer[0]>>>0,r[0]<this.buffer[0]>>>0&&++r[1],r[1]<this.buffer[1]>>>0&&++r[2],r[2]<this.buffer[2]>>>0&&++r[3],this.buffer[3]=r[3],this.buffer[2]=r[2],this.buffer[1]=r[1],this.buffer[0]=r[0],this}hex(){return`${Gd(this.buffer[3])} ${Gd(this.buffer[2])} ${Gd(this.buffer[1])} ${Gd(this.buffer[0])}`}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}static from(t,r=new Uint32Array(4)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(4)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(4)){let n=t.startsWith("-"),i=t.length,o=new e(r);for(let s=n?1:0;s<i;){let a=Xd<i-s?Xd:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0,0,0])),l=new e(new Uint32Array([CA[a],0,0,0]));o.times(l),o.plus(c),s+=a}return n?o.negate():o}static convertArray(t){let r=new Uint32Array(t.length*4);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+4*4*n,4));return r}};var ly=class extends _t{constructor(t,r,n,i,o=Ee.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=r,this.buffers=n,this.dictionaries=i,this.metadataVersion=o}visit(t){return super.visit(t instanceof re?t.type:t)}visitNull(t,{length:r}=this.nextFieldNode()){return Vt({type:t,length:r})}visitBool(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return this.metadataVersion<Ee.V5&&this.readNullBitmap(t,n),t.mode===Ue.Sparse?this.visitSparseUnion(t,{length:r,nullCount:n}):this.visitDenseUnion(t,{length:r,nullCount:n})}visitDenseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDuration(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:r,nullCount:n}=this.nextFieldNode()){return Vt({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,r,n=this.nextBufferRange()){return r>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,r){return this.readData(t,r)}readTypeIds(t,r){return this.readData(t,r)}readData(t,{length:r,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+r)}readDictionary(t){return this.dictionaries.get(t.id)}},j_=class extends ly{constructor(t,r,n,i,o){super(new Uint8Array(0),r,n,i,o),this.sources=t}readNullBitmap(t,r,{offset:n}=this.nextBufferRange()){return r<=0?new Uint8Array(0):Wu(this.sources[n])}readOffsets(t,{offset:r}=this.nextBufferRange()){return te(Uint8Array,te(t.OffsetArrayType,this.sources[r]))}readTypeIds(t,{offset:r}=this.nextBufferRange()){return te(Uint8Array,te(t.ArrayType,this.sources[r]))}readData(t,{offset:r}=this.nextBufferRange()){let{sources:n}=this;return J.isTimestamp(t)?te(Uint8Array,Xa.convertArray(n[r])):(J.isInt(t)||J.isTime(t))&&t.bitWidth===64||J.isDuration(t)?te(Uint8Array,Xa.convertArray(n[r])):J.isDate(t)&&t.unit===Tr.MILLISECOND?te(Uint8Array,Xa.convertArray(n[r])):J.isDecimal(t)?te(Uint8Array,cy.convertArray(n[r])):J.isBinary(t)||J.isLargeBinary(t)||J.isFixedSizeBinary(t)?GH(n[r]):J.isBool(t)?Wu(n[r]):J.isUtf8(t)||J.isLargeUtf8(t)?Ts(n[r].join("")):te(Uint8Array,te(t.ArrayType,n[r].map(i=>+i)))}};function GH(e){let t=e.join(""),r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n>>1]=Number.parseInt(t.slice(n,n+2),16);return r}var Hd=class extends fi{constructor(t){super(t),this._values=new Go(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Et(r))}_flushPending(t,r){let n=this._offsets,i=this._values.reserve(r).buffer,o=0;for(let[s,a]of t)if(a===void 0)n.set(s,0);else{let c=a.length;i.set(a,o),n.set(s,c),o+=c}}};var Zd=class extends fi{constructor(t){super(t),this._values=new Go(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Et(r))}_flushPending(t,r){let n=this._offsets,i=this._values.reserve(r).buffer,o=0;for(let[s,a]of t)if(a===void 0)n.set(s,BigInt(0));else{let c=a.length;i.set(a,o),n.set(s,BigInt(c)),o+=c}}};var q_=class extends Ge{constructor(t){super(t),this._values=new Yd}setValue(t,r){this._values.set(t,+r)}};var Zu=class extends Er{};Zu.prototype._setValue=gA;var uy=class extends Zu{};uy.prototype._setValue=y_;var fy=class extends Zu{};fy.prototype._setValue=g_;var dy=class extends Er{};dy.prototype._setValue=_A;var Y_=class extends Ge{constructor({type:t,nullValues:r,dictionaryHashFunction:n}){super({type:new ui(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Ku({type:this.type.indices,nullValues:r}),this.dictionary=Ku({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,r){let n=this.indices;return r=n.setValid(t,r),this.length=n.length,r}setValue(t,r){let n=this._keysToIndices,i=this.valueToKey(r),o=n[i];return o===void 0&&(n[i]=o=this._dictionaryOffset+this.dictionary.append(r).length-1),this.indices.setValue(t,o)}flush(){let t=this.type,r=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=r?r.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}};var hy=class extends Er{};hy.prototype._setValue=yA;var W_=class extends Ge{setValue(t,r){let[n]=this.children,i=t*this.stride;for(let o=-1,s=r.length;++o<s;)n.set(i+o,r[o])}addChild(t,r="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");let n=this.children.push(t);return this.type=new oo(this.type.listSize,new re(r,t.type,!0)),n}};var Qu=class extends Er{setValue(t,r){this._values.set(t,r)}},G_=class extends Qu{setValue(t,r){super.setValue(t,ty(r))}},X_=class extends Qu{},H_=class extends Qu{};var Ju=class extends Er{};Ju.prototype._setValue=wA;var py=class extends Ju{};py.prototype._setValue=A_;var my=class extends Ju{};my.prototype._setValue=M_;var Ha=class extends Er{};Ha.prototype._setValue=vA;var yy=class extends Ha{};yy.prototype._setValue=E_;var gy=class extends Ha{};gy.prototype._setValue=D_;var by=class extends Ha{};by.prototype._setValue=B_;var xy=class extends Ha{};xy.prototype._setValue=O_;var lo=class extends Er{setValue(t,r){this._values.set(t,r)}},Z_=class extends lo{},K_=class extends lo{},Q_=class extends lo{},J_=class extends lo{},t1=class extends lo{},e1=class extends lo{},r1=class extends lo{},n1=class extends lo{};var i1=class extends fi{constructor(t){super(t),this._offsets=new Wd(t.type)}addChild(t,r="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new no(new re(r,t.type,!0)),this.numChildren-1}_flushPending(t){let r=this._offsets,[n]=this.children;for(let[i,o]of t)if(typeof o>"u")r.set(i,0);else{let s=o,a=s.length,c=r.set(i,a).buffer[i];for(let l=-1;++l<a;)n.set(c+l,s[l])}}};var o1=class extends fi{set(t,r){return super.set(t,r)}setValue(t,r){let n=r instanceof Map?r:new Map(Object.entries(r)),i=this._pending||(this._pending=new Map),o=i.get(t);o&&(this._pendingLength-=o.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,r=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new so(new re(r,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){let r=this._offsets,[n]=this.children;for(let[i,o]of t)if(o===void 0)r.set(i,0);else{let{[i]:s,[i+1]:a}=r.set(i,o.size).buffer;for(let c of o.entries())if(n.set(s,c),++s>=a)break}}};var s1=class extends Ge{setValue(t,r){}setValid(t,r){return this.length=Math.max(t+1,this.length),r}};var a1=class extends Ge{setValue(t,r){let{children:n,type:i}=this;switch(Array.isArray(r)||r.constructor){case!0:return i.children.forEach((o,s)=>n[s].set(t,r[s]));case Map:return i.children.forEach((o,s)=>n[s].set(t,r.get(o.name)));default:return i.children.forEach((o,s)=>n[s].set(t,r[o.name]))}}setValid(t,r){return super.setValid(t,r)||this.children.forEach(n=>n.setValid(t,r)),r}addChild(t,r=`${this.numChildren}`){let n=this.children.push(t);return this.type=new Pe([...this.type.children,new re(r,t.type,!0)]),n}};var Za=class extends Er{};Za.prototype._setValue=bA;var _y=class extends Za{};_y.prototype._setValue=b_;var wy=class extends Za{};wy.prototype._setValue=x_;var vy=class extends Za{};vy.prototype._setValue=__;var Sy=class extends Za{};Sy.prototype._setValue=w_;var Ka=class extends Er{};Ka.prototype._setValue=xA;var Iy=class extends Ka{};Iy.prototype._setValue=v_;var Ty=class extends Ka{};Ty.prototype._setValue=S_;var Ay=class extends Ka{};Ay.prototype._setValue=I_;var My=class extends Ka{};My.prototype._setValue=T_;var Kd=class extends Ge{constructor(t){super(t),this._typeIds=new qa(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,r){return this.set(this.length,t,r)}set(t,r,n){return n===void 0&&(n=this._valueToChildTypeId(this,r,t)),this.setValue(t,r,n),this}setValue(t,r,n){this._typeIds.set(t,n);let i=this.type.typeIdToChildIndex[n],o=this.children[i];o?.set(t,r)}addChild(t,r=`${this.children.length}`){let n=this.children.push(t),{type:{children:i,mode:o,typeIds:s}}=this,a=[...i,new re(r,t.type)];return this.type=new io(o,[...s,n],a),n}_valueToChildTypeId(t,r,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}},c1=class extends Kd{},l1=class extends Kd{constructor(t){super(t),this._offsets=new qa(Int32Array)}setValue(t,r,n){let i=this._typeIds.set(t,n).buffer[t],o=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,o.length).buffer[t];o?.set(s,r)}};var Ey=class extends fi{constructor(t){super(t),this._values=new Go(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Ts(r))}_flushPending(t,r){}};Ey.prototype._flushPending=Hd.prototype._flushPending;var Dy=class extends fi{constructor(t){super(t),this._values=new Go(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Ts(r))}_flushPending(t,r){}};Dy.prototype._flushPending=Zd.prototype._flushPending;var PA=class extends _t{visitNull(){return s1}visitBool(){return q_}visitInt(){return lo}visitInt8(){return Z_}visitInt16(){return K_}visitInt32(){return Q_}visitInt64(){return J_}visitUint8(){return t1}visitUint16(){return e1}visitUint32(){return r1}visitUint64(){return n1}visitFloat(){return Qu}visitFloat16(){return G_}visitFloat32(){return X_}visitFloat64(){return H_}visitUtf8(){return Ey}visitLargeUtf8(){return Dy}visitBinary(){return Hd}visitLargeBinary(){return Zd}visitFixedSizeBinary(){return hy}visitDate(){return Zu}visitDateDay(){return uy}visitDateMillisecond(){return fy}visitTimestamp(){return Za}visitTimestampSecond(){return _y}visitTimestampMillisecond(){return wy}visitTimestampMicrosecond(){return vy}visitTimestampNanosecond(){return Sy}visitTime(){return Ka}visitTimeSecond(){return Iy}visitTimeMillisecond(){return Ty}visitTimeMicrosecond(){return Ay}visitTimeNanosecond(){return My}visitDecimal(){return dy}visitList(){return i1}visitStruct(){return a1}visitUnion(){return Kd}visitDenseUnion(){return l1}visitSparseUnion(){return c1}visitDictionary(){return Y_}visitInterval(){return Ju}visitIntervalDayTime(){return py}visitIntervalYearMonth(){return my}visitDuration(){return Ha}visitDurationSecond(){return yy}visitDurationMillisecond(){return gy}visitDurationMicrosecond(){return by}visitDurationNanosecond(){return xy}visitFixedSizeList(){return W_}visitMap(){return o1}},EC=new PA;var It=class extends _t{compareSchemas(t,r){return t===r||r instanceof t.constructor&&this.compareManyFields(t.fields,r.fields)}compareManyFields(t,r){return t===r||Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every((n,i)=>this.compareFields(n,r[i]))}compareFields(t,r){return t===r||r instanceof t.constructor&&t.name===r.name&&t.nullable===r.nullable&&this.visit(t.type,r.type)}};function $n(e,t){return t instanceof e.constructor}function tf(e,t){return e===t||$n(e,t)}function Qa(e,t){return e===t||$n(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function u1(e,t){return e===t||$n(e,t)&&e.precision===t.precision}function XH(e,t){return e===t||$n(e,t)&&e.byteWidth===t.byteWidth}function $A(e,t){return e===t||$n(e,t)&&e.unit===t.unit}function By(e,t){return e===t||$n(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Oy(e,t){return e===t||$n(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function HH(e,t){return e===t||$n(e,t)&&e.children.length===t.children.length&&qs.compareManyFields(e.children,t.children)}function ZH(e,t){return e===t||$n(e,t)&&e.children.length===t.children.length&&qs.compareManyFields(e.children,t.children)}function zA(e,t){return e===t||$n(e,t)&&e.mode===t.mode&&e.typeIds.every((r,n)=>r===t.typeIds[n])&&qs.compareManyFields(e.children,t.children)}function KH(e,t){return e===t||$n(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&qs.visit(e.indices,t.indices)&&qs.visit(e.dictionary,t.dictionary)}function VA(e,t){return e===t||$n(e,t)&&e.unit===t.unit}function Ny(e,t){return e===t||$n(e,t)&&e.unit===t.unit}function QH(e,t){return e===t||$n(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&qs.compareManyFields(e.children,t.children)}function JH(e,t){return e===t||$n(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&qs.compareManyFields(e.children,t.children)}It.prototype.visitNull=tf;It.prototype.visitBool=tf;It.prototype.visitInt=Qa;It.prototype.visitInt8=Qa;It.prototype.visitInt16=Qa;It.prototype.visitInt32=Qa;It.prototype.visitInt64=Qa;It.prototype.visitUint8=Qa;It.prototype.visitUint16=Qa;It.prototype.visitUint32=Qa;It.prototype.visitUint64=Qa;It.prototype.visitFloat=u1;It.prototype.visitFloat16=u1;It.prototype.visitFloat32=u1;It.prototype.visitFloat64=u1;It.prototype.visitUtf8=tf;It.prototype.visitLargeUtf8=tf;It.prototype.visitBinary=tf;It.prototype.visitLargeBinary=tf;It.prototype.visitFixedSizeBinary=XH;It.prototype.visitDate=$A;It.prototype.visitDateDay=$A;It.prototype.visitDateMillisecond=$A;It.prototype.visitTimestamp=By;It.prototype.visitTimestampSecond=By;It.prototype.visitTimestampMillisecond=By;It.prototype.visitTimestampMicrosecond=By;It.prototype.visitTimestampNanosecond=By;It.prototype.visitTime=Oy;It.prototype.visitTimeSecond=Oy;It.prototype.visitTimeMillisecond=Oy;It.prototype.visitTimeMicrosecond=Oy;It.prototype.visitTimeNanosecond=Oy;It.prototype.visitDecimal=tf;It.prototype.visitList=HH;It.prototype.visitStruct=ZH;It.prototype.visitUnion=zA;It.prototype.visitDenseUnion=zA;It.prototype.visitSparseUnion=zA;It.prototype.visitDictionary=KH;It.prototype.visitInterval=VA;It.prototype.visitIntervalDayTime=VA;It.prototype.visitIntervalYearMonth=VA;It.prototype.visitDuration=Ny;It.prototype.visitDurationSecond=Ny;It.prototype.visitDurationMillisecond=Ny;It.prototype.visitDurationMicrosecond=Ny;It.prototype.visitDurationNanosecond=Ny;It.prototype.visitFixedSizeList=QH;It.prototype.visitMap=JH;var qs=new It;function ef(e,t){return qs.compareSchemas(e,t)}function DC(e,t){return qs.compareFields(e,t)}function BC(e,t){return qs.visit(e,t)}function Ku(e){let t=e.type,r=new(EC.getVisitFn(t)())(e);if(t.children&&t.children.length>0){let n=e.children||[],i={nullValues:e.nullValues},o=Array.isArray(n)?(s,a)=>n[a]||i:({name:s})=>n[s]||i;for(let[s,a]of t.children.entries()){let{type:c}=a,l=o(a,s);r.children.push(Ku(Object.assign(Object.assign({},l),{type:c})))}}return r}function f1(e,t){return tZ(e,t.map(r=>r.data.concat()))}function tZ(e,t){let r=[...e.fields],n=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)},o=0,s=0,a=-1,c=t.length,l,u=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),s=Math.min(s,l?l.length:s);Number.isFinite(s)&&(u=eZ(r,s,u,t,i),s>0&&(n[o++]=Vt({type:new Pe(r),length:s,nullCount:0,children:u.slice()})))}return[e=e.assign(r),n.map(f=>new hr(e,f))]}function eZ(e,t,r,n,i){var o;let s=(t+63&-64)>>3;for(let a=-1,c=n.length;++a<c;){let l=r[a],u=l?.length;if(u>=t)u===t?r[a]=l:(r[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,n[a].unshift(l.slice(t,u-t))));else{let f=e[a];e[a]=f.clone({nullable:!0}),r[a]=(o=l?._changeLengthAndBackfillNullBitmap(t))!==null&&o!==void 0?o:Vt({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return r}var OC,di=class e{constructor(...t){var r,n;if(t.length===0)return this.batches=[],this.schema=new Ie([]),this._offsets=[0],this;let i,o;t[0]instanceof Ie&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(o=t.pop());let s=c=>{if(c){if(c instanceof hr)return[c];if(c instanceof e)return c.batches;if(c instanceof _e){if(c.type instanceof Pe)return[new hr(new Ie(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>s(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>s(l));if(typeof c=="object"){let l=Object.keys(c),u=l.map(h=>new le([c[h]])),f=i??new Ie(l.map((h,p)=>new re(String(h),u[p].type,u[p].nullable))),[,d]=f1(f,u);return d.length===0?[new hr(c)]:d}}}return[]},a=t.flatMap(c=>s(c));if(i=(n=i??((r=a[0])===null||r===void 0?void 0:r.schema))!==null&&n!==void 0?n:new Ie([]),!(i instanceof Ie))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let c of a){if(!(c instanceof hr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!ef(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=o??k_(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,r)=>t+r.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=L_(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}[Symbol.iterator](){return this.batches.length>0?qd.visit(new le(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){let r=this.schema,n=this.data.concat(t.flatMap(({data:i})=>i));return new e(r,n.map(i=>new hr(r,i)))}slice(t,r){let n=this.schema;[t,r]=ey({length:this.numRows},t,r);let i=C_(this.data,this._offsets,t,r);return new e(n,i.map(o=>new hr(n,o)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(r=>r.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){let r=this.data.map(n=>n.children[t]);if(r.length===0){let{type:n}=this.schema.fields[t],i=Vt({type:n,length:0,nullCount:0});r.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new le(r)}return null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){r||(r=new le([Vt({type:new An,length:this.numRows})]));let o=n.fields.slice(),s=o[t].clone({type:r.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[o[t],a[t]]=[s,r],[n,i]=f1(n,a)}return new e(n,i)}select(t){let r=this.schema.fields.reduce((n,i,o)=>n.set(i.name,o),new Map);return this.selectAt(t.map(n=>r.get(n)).filter(n=>n>-1))}selectAt(t){let r=this.schema.selectAt(t),n=this.batches.map(i=>i.selectAt(t));return new e(r,n)}assign(t){let r=this.schema.fields,[n,i]=t.schema.fields.reduce((a,c,l)=>{let[u,f]=a,d=r.findIndex(h=>h.name===c.name);return~d?f[d]=l:u.push(l),a},[[],[]]),o=this.schema.assign(t.schema),s=[...r.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...n.map(a=>t.getChildAt(a))].filter(Boolean);return new e(...f1(o,s))}};OC=Symbol.toStringTag;di[OC]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=jd(iy),e.get=jd(Mr.getVisitFn(R.Struct)),e.set=U_(an.getVisitFn(R.Struct)),e.indexOf=P_(Gu.getVisitFn(R.Struct)),"Table"))(di.prototype);var FC,hr=class e{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ie))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Vt({nullCount:0,type:new Pe(this.schema.fields),children:this.schema.fields.map(r=>Vt({type:r.type,nullCount:0}))})]=t,!(this.data instanceof _e))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=NC(this.schema,this.data.children);break}case 1:{let[r]=t,{fields:n,children:i,length:o}=Object.keys(r).reduce((c,l,u)=>(c.children[u]=r[l],c.length=Math.max(c.length,r[l].length),c.fields[u]=re.new({name:l,type:r[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),s=new Ie(n),a=Vt({type:new Pe(n),length:o,children:i,nullCount:0});[this.schema,this.data]=NC(s,a.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=RC(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Mr.visit(this.data,t)}set(t,r){return an.visit(this.data,t,r)}indexOf(t,r){return Gu.visit(this.data,t,r)}[Symbol.iterator](){return qd.visit(new le([this.data]))}toArray(){return[...this]}concat(...t){return new di(this.schema,[this,...t])}slice(t,r){let[n]=new le([this.data]).slice(t,r).data;return new e(this.schema,n)}getChild(t){var r;return this.getChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new le([this.data.children[t]]):null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){r||(r=new le([Vt({type:new An,length:this.numRows})]));let o=n.fields.slice(),s=i.children.slice(),a=o[t].clone({type:r.type});[o[t],s[t]]=[a,r.data[0]],n=new Ie(o,new Map(this.schema.metadata)),i=Vt({type:new Pe(o),children:s})}return new e(n,i)}select(t){let r=this.schema.select(t),n=new Pe(r.fields),i=[];for(let o of t){let s=this.schema.fields.findIndex(a=>a.name===o);~s&&(i[s]=this.data.children[s])}return new e(r,Vt({type:n,length:this.numRows,children:i}))}selectAt(t){let r=this.schema.selectAt(t),n=t.map(o=>this.data.children[o]).filter(Boolean),i=Vt({type:new Pe(r.fields),length:this.numRows,children:n});return new e(r,i)}};FC=Symbol.toStringTag;hr[FC]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(hr.prototype);function NC(e,t,r=t.reduce((n,i)=>Math.max(n,i.length),0)){var n;let i=[...e.fields],o=[...t],s=(r+63&-64)>>3;for(let[a,c]of e.fields.entries()){let l=t[a];(!l||l.length!==r)&&(i[a]=c.clone({nullable:!0}),o[a]=(n=l?._changeLengthAndBackfillNullBitmap(r))!==null&&n!==void 0?n:Vt({type:c.type,length:r,nullCount:r,nullBitmap:new Uint8Array(s)}))}return[e.assign(i),Vt({type:new Pe(i),length:r,children:o})]}function RC(e,t,r=new Map){var n,i;if(((n=e?.length)!==null&&n!==void 0?n:0)>0&&e?.length===t?.length)for(let o=-1,s=e.length;++o<s;){let{type:a}=e[o],c=t[o];for(let l of[c,...((i=c?.dictionary)===null||i===void 0?void 0:i.data)||[]])RC(a.children,l?.children,r);if(J.isDictionary(a)){let{id:l}=a;if(!r.has(l))c?.dictionary&&r.set(l,c.dictionary);else if(r.get(l)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return r}var rf=class extends hr{constructor(t){let r=t.fields.map(i=>Vt({type:i.type})),n=Vt({type:new Pe(t.fields),nullCount:0,children:r});super(t,n)}};var Xo=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMessage(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ee.V1}headerType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):oe.NONE}header(t){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__union(t,this.bb_pos+r):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new $r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,Ee.V1)}static addHeaderType(t,r){t.addFieldInt8(1,r,oe.NONE)}static addHeader(t,r){t.addFieldOffset(2,r,0)}static addBodyLength(t,r){t.addFieldInt64(3,r,BigInt("0"))}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,r){t.finish(r)}static finishSizePrefixedMessageBuffer(t,r){t.finish(r,void 0,!0)}static createMessage(t,r,n,i,o,s){return e.startMessage(t),e.addVersion(t,r),e.addHeaderType(t,n),e.addHeader(t,i),e.addBodyLength(t,o),e.addCustomMetadata(t,s),e.endMessage(t)}};var jA=class extends _t{visit(t,r){return t==null||r==null?void 0:super.visit(t,r)}visitNull(t,r){return Pm.startNull(r),Pm.endNull(r)}visitInt(t,r){return $o.startInt(r),$o.addBitWidth(r,t.bitWidth),$o.addIsSigned(r,t.isSigned),$o.endInt(r)}visitFloat(t,r){return wl.startFloatingPoint(r),wl.addPrecision(r,t.precision),wl.endFloatingPoint(r)}visitBinary(t,r){return Rm.startBinary(r),Rm.endBinary(r)}visitLargeBinary(t,r){return km.startLargeBinary(r),km.endLargeBinary(r)}visitBool(t,r){return Lm.startBool(r),Lm.endBool(r)}visitUtf8(t,r){return zm.startUtf8(r),zm.endUtf8(r)}visitLargeUtf8(t,r){return Cm.startLargeUtf8(r),Cm.endLargeUtf8(r)}visitDecimal(t,r){return Ds.startDecimal(r),Ds.addScale(r,t.scale),Ds.addPrecision(r,t.precision),Ds.addBitWidth(r,t.bitWidth),Ds.endDecimal(r)}visitDate(t,r){return gl.startDate(r),gl.addUnit(r,t.unit),gl.endDate(r)}visitTime(t,r){return za.startTime(r),za.addUnit(r,t.unit),za.addBitWidth(r,t.bitWidth),za.endTime(r)}visitTimestamp(t,r){let n=t.timezone&&r.createString(t.timezone)||void 0;return Va.startTimestamp(r),Va.addUnit(r,t.unit),n!==void 0&&Va.addTimezone(r,n),Va.endTimestamp(r)}visitInterval(t,r){return vl.startInterval(r),vl.addUnit(r,t.unit),vl.endInterval(r)}visitDuration(t,r){return bl.startDuration(r),bl.addUnit(r,t.unit),bl.endDuration(r)}visitList(t,r){return Um.startList(r),Um.endList(r)}visitStruct(t,r){return $m.startStruct_(r),$m.endStruct_(r)}visitUnion(t,r){zo.startTypeIdsVector(r,t.typeIds.length);let n=zo.createTypeIdsVector(r,t.typeIds);return zo.startUnion(r),zo.addMode(r,t.mode),zo.addTypeIds(r,n),zo.endUnion(r)}visitDictionary(t,r){let n=this.visit(t.indices,r);return Es.startDictionaryEncoding(r),Es.addId(r,BigInt(t.id)),Es.addIsOrdered(r,t.isOrdered),n!==void 0&&Es.addIndexType(r,n),Es.endDictionaryEncoding(r)}visitFixedSizeBinary(t,r){return xl.startFixedSizeBinary(r),xl.addByteWidth(r,t.byteWidth),xl.endFixedSizeBinary(r)}visitFixedSizeList(t,r){return _l.startFixedSizeList(r),_l.addListSize(r,t.listSize),_l.endFixedSizeList(r)}visitMap(t,r){return Sl.startMap(r),Sl.addKeysSorted(r,t.keysSorted),Sl.endMap(r)}},d1=new jA;function UC(e,t=new Map){return new Ie(nZ(e,t),h1(e.metadata),t)}function qA(e){return new cn(e.count,$C(e.columns),zC(e.columns))}function PC(e){return new pi(qA(e.data),e.id,e.isDelta)}function nZ(e,t){return(e.fields||[]).filter(Boolean).map(r=>re.fromJSON(r,t))}function LC(e,t){return(e.children||[]).filter(Boolean).map(r=>re.fromJSON(r,t))}function $C(e){return(e||[]).reduce((t,r)=>[...t,new uo(r.count,iZ(r.VALIDITY)),...$C(r.children)],[])}function zC(e,t=[]){for(let r=-1,n=(e||[]).length;++r<n;){let i=e[r];i.VALIDITY&&t.push(new hi(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new hi(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new hi(t.length,i.OFFSET.length)),i.DATA&&t.push(new hi(t.length,i.DATA.length)),t=zC(i.children,t)}return t}function iZ(e){return(e||[]).reduce((t,r)=>t+ +(r===0),0)}function VC(e,t){let r,n,i,o,s,a;return!t||!(o=e.dictionary)?(s=CC(e,LC(e,t)),i=new re(e.name,s,e.nullable,h1(e.metadata))):t.has(r=o.id)?(n=(n=o.indexType)?kC(n):new Yo,a=new ui(t.get(r),n,r,o.isOrdered),i=new re(e.name,a,e.nullable,h1(e.metadata))):(n=(n=o.indexType)?kC(n):new Yo,t.set(r,s=CC(e,LC(e,t))),a=new ui(s,n,r,o.isOrdered),i=new re(e.name,a,e.nullable,h1(e.metadata))),i||null}function h1(e=[]){return new Map(e.map(({key:t,value:r})=>[t,r]))}function kC(e){return new dr(e.isSigned,e.bitWidth)}function CC(e,t){let r=e.type.name;switch(r){case"NONE":return new An;case"null":return new An;case"binary":return new Bs;case"largebinary":return new Os;case"utf8":return new Ns;case"largeutf8":return new Fs;case"bool":return new Rs;case"list":return new no((t||[])[0]);case"struct":return new Pe(t||[]);case"struct_":return new Pe(t||[])}switch(r){case"int":{let n=e.type;return new dr(n.isSigned,n.bitWidth)}case"floatingpoint":{let n=e.type;return new Pn(Re[n.precision])}case"decimal":{let n=e.type;return new Ls(n.scale,n.precision,n.bitWidth)}case"date":{let n=e.type;return new ks(Tr[n.unit])}case"time":{let n=e.type;return new ro(ft[n.unit],n.bitWidth)}case"timestamp":{let n=e.type;return new Cs(ft[n.unit],n.timezone)}case"interval":{let n=e.type;return new Us(Gr[n.unit])}case"duration":{let n=e.type;return new Ps(ft[n.unit])}case"union":{let n=e.type,[i,...o]=(n.mode+"").toLowerCase(),s=i.toUpperCase()+o.join("");return new io(Ue[s],n.typeIds||[],t||[])}case"fixedsizebinary":{let n=e.type;return new $s(n.byteWidth)}case"fixedsizelist":{let n=e.type;return new oo(n.listSize,(t||[])[0])}case"map":{let n=e.type;return new so((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var oZ=Po,sZ=Ar,mi=class e{static fromJSON(t,r){let n=new e(0,Ee.V5,r);return n._createHeader=aZ(t,r),n}static decode(t){t=new sZ(Et(t));let r=Xo.getRootAsMessage(t),n=r.bodyLength(),i=r.version(),o=r.headerType(),s=new e(n,i,o);return s._createHeader=cZ(r,o),s}static encode(t){let r=new oZ,n=-1;return t.isSchema()?n=Ie.encode(r,t.header()):t.isRecordBatch()?n=cn.encode(r,t.header()):t.isDictionaryBatch()&&(n=pi.encode(r,t.header())),Xo.startMessage(r),Xo.addVersion(r,Ee.V5),Xo.addHeader(r,n),Xo.addHeaderType(r,t.headerType),Xo.addBodyLength(r,BigInt(t.bodyLength)),Xo.finishMessageBuffer(r,Xo.endMessage(r)),r.asUint8Array()}static from(t,r=0){if(t instanceof Ie)return new e(0,Ee.V5,oe.Schema,t);if(t instanceof cn)return new e(r,Ee.V5,oe.RecordBatch,t);if(t instanceof pi)return new e(r,Ee.V5,oe.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===oe.Schema}isRecordBatch(){return this.headerType===oe.RecordBatch}isDictionaryBatch(){return this.headerType===oe.DictionaryBatch}constructor(t,r,n,i){this._version=r,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=or(t)}},cn=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,r,n){this._nodes=r,this._buffers=n,this._length=or(t)}},pi=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,r,n=!1){this._data=t,this._isDelta=n,this._id=or(r)}},hi=class{constructor(t,r){this.offset=or(t),this.length=or(r)}},uo=class{constructor(t,r){this.length=or(t),this.nullCount=or(r)}};function aZ(e,t){return()=>{switch(t){case oe.Schema:return Ie.fromJSON(e);case oe.RecordBatch:return cn.fromJSON(e);case oe.DictionaryBatch:return pi.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${oe[t]}, type: ${t} }`)}}function cZ(e,t){return()=>{switch(t){case oe.Schema:return Ie.decode(e.header(new li),new Map,e.version());case oe.RecordBatch:return cn.decode(e.header(new Di),e.version());case oe.DictionaryBatch:return pi.decode(e.header(new $a),e.version())}throw new Error(`Unrecognized Message type: { name: ${oe[t]}, type: ${t} }`)}}re.encode=xZ;re.decode=gZ;re.fromJSON=VC;Ie.encode=bZ;Ie.decode=lZ;Ie.fromJSON=UC;cn.encode=_Z;cn.decode=uZ;cn.fromJSON=qA;pi.encode=wZ;pi.decode=fZ;pi.fromJSON=PC;uo.encode=vZ;uo.decode=hZ;hi.encode=SZ;hi.decode=dZ;function lZ(e,t=new Map,r=Ee.V5){let n=yZ(e,t);return new Ie(n,p1(e),t,r)}function uZ(e,t=Ee.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new cn(e.length(),pZ(e),mZ(e,t))}function fZ(e,t=Ee.V5){return new pi(cn.decode(e.data(),t),e.id(),e.isDelta())}function dZ(e){return new hi(e.offset(),e.length())}function hZ(e){return new uo(e.length(),e.nullCount())}function pZ(e){let t=[];for(let r,n=-1,i=-1,o=e.nodesLength();++n<o;)(r=e.nodes(n))&&(t[++i]=uo.decode(r));return t}function mZ(e,t){let r=[];for(let n,i=-1,o=-1,s=e.buffersLength();++i<s;)(n=e.buffers(i))&&(t<Ee.V4&&(n.bb_pos+=8*(i+1)),r[++o]=hi.decode(n));return r}function yZ(e,t){let r=[];for(let n,i=-1,o=-1,s=e.fieldsLength();++i<s;)(n=e.fields(i))&&(r[++o]=re.decode(n,t));return r}function jC(e,t){let r=[];for(let n,i=-1,o=-1,s=e.childrenLength();++i<s;)(n=e.children(i))&&(r[++o]=re.decode(n,t));return r}function gZ(e,t){let r,n,i,o,s,a;return!t||!(a=e.dictionary())?(i=YC(e,jC(e,t)),n=new re(e.name(),i,e.nullable(),p1(e))):t.has(r=or(a.id()))?(o=(o=a.indexType())?qC(o):new Yo,s=new ui(t.get(r),o,r,a.isOrdered()),n=new re(e.name(),s,e.nullable(),p1(e))):(o=(o=a.indexType())?qC(o):new Yo,t.set(r,i=YC(e,jC(e,t))),s=new ui(i,o,r,a.isOrdered()),n=new re(e.name(),s,e.nullable(),p1(e))),n||null}function p1(e){let t=new Map;if(e)for(let r,n,i=-1,o=Math.trunc(e.customMetadataLength());++i<o;)(r=e.customMetadata(i))&&(n=r.key())!=null&&t.set(n,r.value());return t}function qC(e){return new dr(e.isSigned(),e.bitWidth())}function YC(e,t){let r=e.typeType();switch(r){case Le.NONE:return new An;case Le.Null:return new An;case Le.Binary:return new Bs;case Le.LargeBinary:return new Os;case Le.Utf8:return new Ns;case Le.LargeUtf8:return new Fs;case Le.Bool:return new Rs;case Le.List:return new no((t||[])[0]);case Le.Struct_:return new Pe(t||[])}switch(r){case Le.Int:{let n=e.type(new $o);return new dr(n.isSigned(),n.bitWidth())}case Le.FloatingPoint:{let n=e.type(new wl);return new Pn(n.precision())}case Le.Decimal:{let n=e.type(new Ds);return new Ls(n.scale(),n.precision(),n.bitWidth())}case Le.Date:{let n=e.type(new gl);return new ks(n.unit())}case Le.Time:{let n=e.type(new za);return new ro(n.unit(),n.bitWidth())}case Le.Timestamp:{let n=e.type(new Va);return new Cs(n.unit(),n.timezone())}case Le.Interval:{let n=e.type(new vl);return new Us(n.unit())}case Le.Duration:{let n=e.type(new bl);return new Ps(n.unit())}case Le.Union:{let n=e.type(new zo);return new io(n.mode(),n.typeIdsArray()||[],t||[])}case Le.FixedSizeBinary:{let n=e.type(new xl);return new $s(n.byteWidth())}case Le.FixedSizeList:{let n=e.type(new _l);return new oo(n.listSize(),(t||[])[0])}case Le.Map:{let n=e.type(new Sl);return new so((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Le[r]}" (${r})`)}function bZ(e,t){let r=t.fields.map(o=>re.encode(e,o));li.startFieldsVector(e,r.length);let n=li.createFieldsVector(e,r),i=t.metadata&&t.metadata.size>0?li.createCustomMetadataVector(e,[...t.metadata].map(([o,s])=>{let a=e.createString(`${o}`),c=e.createString(`${s}`);return $r.startKeyValue(e),$r.addKey(e,a),$r.addValue(e,c),$r.endKeyValue(e)})):-1;return li.startSchema(e),li.addFields(e,n),li.addEndianness(e,IZ?yl.Little:yl.Big),i!==-1&&li.addCustomMetadata(e,i),li.endSchema(e)}function xZ(e,t){let r=-1,n=-1,i=-1,o=t.type,s=t.typeId;J.isDictionary(o)?(s=o.dictionary.typeId,i=d1.visit(o,e),n=d1.visit(o.dictionary,e)):n=d1.visit(o,e);let a=(o.children||[]).map(u=>re.encode(e,u)),c=Tn.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Tn.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{let d=e.createString(`${u}`),h=e.createString(`${f}`);return $r.startKeyValue(e),$r.addKey(e,d),$r.addValue(e,h),$r.endKeyValue(e)})):-1;return t.name&&(r=e.createString(t.name)),Tn.startField(e),Tn.addType(e,n),Tn.addTypeType(e,s),Tn.addChildren(e,c),Tn.addNullable(e,!!t.nullable),r!==-1&&Tn.addName(e,r),i!==-1&&Tn.addDictionary(e,i),l!==-1&&Tn.addCustomMetadata(e,l),Tn.endField(e)}function _Z(e,t){let r=t.nodes||[],n=t.buffers||[];Di.startNodesVector(e,r.length);for(let s of r.slice().reverse())uo.encode(e,s);let i=e.endVector();Di.startBuffersVector(e,n.length);for(let s of n.slice().reverse())hi.encode(e,s);let o=e.endVector();return Di.startRecordBatch(e),Di.addLength(e,BigInt(t.length)),Di.addNodes(e,i),Di.addBuffers(e,o),Di.endRecordBatch(e)}function wZ(e,t){let r=cn.encode(e,t.data);return $a.startDictionaryBatch(e),$a.addId(e,BigInt(t.id)),$a.addIsDelta(e,t.isDelta),$a.addData(e,r),$a.endDictionaryBatch(e)}function vZ(e,t){return Ld.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function SZ(e,t){return Rd.createBuffer(e,BigInt(t.offset),BigInt(t.length))}var IZ=(()=>{let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})();var WA=e=>`Expected ${oe[e]} Message in stream, but was null or length 0.`,GA=e=>`Header pointer of flatbuffer-encoded ${oe[e]} Message is null or length 0.`,WC=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,GC=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`,Qd=class{constructor(t){this.source=t instanceof js?t:new js(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done?Ve:t.value===-1&&(t=this.readMetadataLength()).done?Ve:(t=this.readMetadata(t.value)).done?Ve:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(WA(t));return r.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);let r=Et(this.source.read(t));if(r.byteLength<t)throw new Error(GC(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()}readSchema(t=!1){let r=oe.Schema,n=this.readMessage(r),i=n?.header();if(t&&!i)throw new Error(GA(r));return i}readMetadataLength(){let t=this.source.read(m1),r=t&&new Ar(t),n=r?.readInt32(0)||0;return{done:n===0,value:n}}readMetadata(t){let r=this.source.read(t);if(!r)return Ve;if(r.byteLength<t)throw new Error(WC(t,r.byteLength));return{done:!1,value:mi.decode(r)}}},Fy=class{constructor(t,r){this.source=t instanceof co?t:i_(t)?new Ml(t,r):new co(t)}[Symbol.asyncIterator](){return this}next(){return P(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done?Ve:t.value===-1&&(t=yield this.readMetadataLength()).done?Ve:(t=yield this.readMetadata(t.value)).done?Ve:t})}throw(t){return P(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return P(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return P(this,void 0,void 0,function*(){let r;if((r=yield this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(WA(t));return r.value})}readMessageBody(t){return P(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);let r=Et(yield this.source.read(t));if(r.byteLength<t)throw new Error(GC(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()})}readSchema(t=!1){return P(this,void 0,void 0,function*(){let r=oe.Schema,n=yield this.readMessage(r),i=n?.header();if(t&&!i)throw new Error(GA(r));return i})}readMetadataLength(){return P(this,void 0,void 0,function*(){let t=yield this.source.read(m1),r=t&&new Ar(t),n=r?.readInt32(0)||0;return{done:n===0,value:n}})}readMetadata(t){return P(this,void 0,void 0,function*(){let r=yield this.source.read(t);if(!r)return Ve;if(r.byteLength<t)throw new Error(WC(t,r.byteLength));return{done:!1,value:mi.decode(r)}})}},Ry=class extends Qd{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof oy?t:new oy(t)}next(){let{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:mi.fromJSON(t.schema,oe.Schema)};if(this._dictionaryIndex<t.dictionaries.length){let r=t.dictionaries[this._dictionaryIndex++];return this._body=r.data.columns,{done:!1,value:mi.fromJSON(r,oe.DictionaryBatch)}}if(this._batchIndex<t.batches.length){let r=t.batches[this._batchIndex++];return this._body=r.columns,{done:!1,value:mi.fromJSON(r,oe.RecordBatch)}}return this._body=[],Ve}readMessageBody(t){return r(this._body);function r(n){return(n||[]).reduce((i,o)=>[...i,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE_ID&&[o.TYPE_ID]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...r(o.children)],[])}}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(WA(t));return r.value}readSchema(){let t=oe.Schema,r=this.readMessage(t),n=r?.header();if(!r||!n)throw new Error(GA(t));return n}},m1=4,YA="ARROW1",Jd=new Uint8Array(YA.length);for(let e=0;e<YA.length;e+=1)Jd[e]=YA.codePointAt(e);function y1(e,t=0){for(let r=-1,n=Jd.length;++r<n;)if(Jd[r]!==e[t+r])return!1;return!0}var th=Jd.length,XA=th+m1,XC=th*2+m1;var Ni=class e extends Hu{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){let r=this._impl.open(t);return Mi(r)?r.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return sn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return sn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof e?t:r_(t)?AZ(t):i_(t)?DZ(t):Mi(t)?P(this,void 0,void 0,function*(){return yield e.from(yield t)}):o_(t)||Em(t)||a_(t)||to(t)?EZ(new co(t)):MZ(new js(t))}static readAll(t){return t instanceof e?t.isSync()?HC(t):ZC(t):r_(t)||ArrayBuffer.isView(t)||ko(t)||n_(t)?HC(t):ZC(t)}},Ja=class extends Ni{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ze(this,arguments,function*(){yield H(yield*Ji(fr(this[Symbol.iterator]())))})}},nf=class extends Ni{constructor(t){super(t),this._impl=t}readAll(){var t,r,n,i;return P(this,void 0,void 0,function*(){let o=new Array;try{for(var s=!0,a=fr(this),c;c=yield a.next(),t=c.done,!t;s=!0){i=c.value,s=!1;let l=i;o.push(l)}}catch(l){r={error:l}}finally{try{!s&&!t&&(n=a.return)&&(yield n.call(a))}finally{if(r)throw r.error}}return o})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},of=class extends Ja{constructor(t){super(t),this._impl=t}},g1=class extends nf{constructor(t){super(t),this._impl=t}},b1=class{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,r){let n=this._loadVectors(t,r,this.schema.fields),i=Vt({type:new Pe(this.schema.fields),length:t.length,children:n});return new hr(this.schema,i)}_loadDictionaryBatch(t,r){let{id:n,isDelta:i}=t,{dictionaries:o,schema:s}=this,a=o.get(n);if(i||!a){let c=s.dictionaries.get(n),l=this._loadVectors(t.data,r,[c]);return(a&&i?a.concat(new le(l)):new le(l)).memoize()}return a.memoize()}_loadVectors(t,r,n){return new ly(r,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}},eh=class extends b1{constructor(t,r){super(r),this._reader=r_(t)?new Ry(this._handle=t):new Qd(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=KC(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ve}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ve}next(){if(this.closed)return Ve;let t,{_reader:r}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=r.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rf(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},rh=class extends b1{constructor(t,r){super(r),this._reader=new Fy(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return P(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return P(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=KC(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return P(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ve})}return(t){return P(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ve})}next(){return P(this,void 0,void 0,function*(){if(this.closed)return Ve;let t,{_reader:r}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=yield r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=yield r.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rf(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return P(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},x1=class extends eh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,r){super(t instanceof sy?t:new sy(t),r)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(let r of this._footer.dictionaryBatches())r&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var r;if(this.closed)return null;this._footer||this.open();let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(oe.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null}_readDictionaryBatch(t){var r;let n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(oe.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}}_readFooter(){let{_handle:t}=this,r=t.size-XA,n=t.readInt32(r),i=t.readAt(r-n,n);return Ya.decode(i)}_readNextMessageAndValidate(t){var r;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}},HA=class extends rh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...r){let n=typeof r[0]!="number"?r.shift():void 0,i=r[0]instanceof Map?r.shift():void 0;super(t instanceof Ml?t:new Ml(t,n),i)}isFile(){return!0}isAsync(){return!0}open(t){let r=Object.create(null,{open:{get:()=>super.open}});return P(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(let n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield r.open.call(this,t)})}readRecordBatch(t){var r;return P(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(oe.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null})}_readDictionaryBatch(t){var r;return P(this,void 0,void 0,function*(){let n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(oe.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}})}_readFooter(){return P(this,void 0,void 0,function*(){let{_handle:t}=this;t._pending&&(yield t._pending);let r=t.size-XA,n=yield t.readInt32(r),i=yield t.readAt(r-n,n);return Ya.decode(i)})}_readNextMessageAndValidate(t){return P(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let r=this._footer.getRecordBatch(this._recordBatchIndex);if(r&&(yield this._handle.seek(r.offset)))return yield this._reader.readMessage(t)}return null})}},ZA=class extends eh{constructor(t,r){super(t,r)}_loadVectors(t,r,n){return new j_(r,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}};function KC(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*HC(e){let t=Ni.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function ZC(e){return ze(this,arguments,function*(){let r=yield H(Ni.from(e));try{if(!(yield H(r.open({autoDestroy:!1}))).closed)do yield yield H(r);while(!(yield H(r.reset().open())).closed)}finally{yield H(r.cancel())}})}function AZ(e){return new Ja(new ZA(e))}function MZ(e){let t=e.peek(th+7&-8);return t&&t.byteLength>=4?y1(t)?new of(new x1(e.read())):new Ja(new eh(e)):new Ja(new eh(function*(){}()))}function EZ(e){return P(this,void 0,void 0,function*(){let t=yield e.peek(th+7&-8);return t&&t.byteLength>=4?y1(t)?new of(new x1(yield e.read())):new nf(new rh(e)):new nf(new rh(function(){return ze(this,arguments,function*(){})}()))})}function DZ(e){return P(this,void 0,void 0,function*(){let{size:t}=yield e.stat(),r=new Ml(e,t);return t>=XC&&y1(yield r.readAt(0,th+7&-8))?new g1(new HA(r)):new nf(new rh(r))})}var Je=class e extends _t{static assemble(...t){let r=i=>i.flatMap(o=>Array.isArray(o)?r(o):o instanceof hr?o.data.children:o.data),n=new e;return n.visitMany(r(t)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof le)return this.visitMany(t.data),this;let{type:r}=t;if(!J.isDictionary(r)){let{length:n}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(J.isUnion(r))this.nodes.push(new uo(n,0));else{let{nullCount:i}=t;J.isNull(r)||Ho.call(this,i<=0?new Uint8Array(0):Yu(t.offset,n,t.nullBitmap)),this.nodes.push(new uo(n,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function Ho(e){let t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hi(this._byteLength,t)),this._byteLength+=t,this}function BZ(e){var t;let{type:r,length:n,typeIds:i,valueOffsets:o}=e;if(Ho.call(this,i),r.mode===Ue.Sparse)return KA.call(this,e);if(r.mode===Ue.Dense){if(e.offset<=0)return Ho.call(this,o),KA.call(this,e);{let s=new Int32Array(n),a=Object.create(null),c=Object.create(null);for(let l,u,f=-1;++f<n;)(l=i[f])!==void 0&&((u=a[l])===void 0&&(u=a[l]=o[f]),s[f]=o[f]-u,c[l]=((t=c[l])!==null&&t!==void 0?t:0)+1);Ho.call(this,s),this.visitMany(e.children.map((l,u)=>{let f=r.typeIds[u],d=a[f],h=c[f];return l.slice(d,Math.min(n,h))}))}}return this}function OZ(e){let t;return e.nullCount>=e.length?Ho.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Ho.call(this,Yu(e.offset,e.length,t)):Ho.call(this,Wu(e.values))}function tc(e){return Ho.call(this,e.values.subarray(0,e.length*e.stride))}function _1(e){let{length:t,values:r,valueOffsets:n}=e,i=or(n[0]),o=or(n[t]),s=Math.min(o-i,r.byteLength-i);return Ho.call(this,l_(-i,t+1,n)),Ho.call(this,r.subarray(i,i+s)),this}function QA(e){let{length:t,valueOffsets:r}=e;if(r){let{[0]:n,[t]:i}=r;return Ho.call(this,l_(-n,t+1,r)),this.visit(e.children[0].slice(n,i-n))}return this.visit(e.children[0])}function KA(e){return this.visitMany(e.type.children.map((t,r)=>e.children[r]).filter(Boolean))[0]}Je.prototype.visitBool=OZ;Je.prototype.visitInt=tc;Je.prototype.visitFloat=tc;Je.prototype.visitUtf8=_1;Je.prototype.visitLargeUtf8=_1;Je.prototype.visitBinary=_1;Je.prototype.visitLargeBinary=_1;Je.prototype.visitFixedSizeBinary=tc;Je.prototype.visitDate=tc;Je.prototype.visitTimestamp=tc;Je.prototype.visitTime=tc;Je.prototype.visitDecimal=tc;Je.prototype.visitList=QA;Je.prototype.visitStruct=KA;Je.prototype.visitUnion=BZ;Je.prototype.visitInterval=tc;Je.prototype.visitDuration=tc;Je.prototype.visitFixedSizeList=QA;Je.prototype.visitMap=QA;var sf=class extends Hu{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Vs,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Un(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Mi(t)?t.then(r=>this.writeAll(r)):to(t)?tM(this,t):JA(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,r=null){return t===this._sink||t instanceof Vs?this._sink=t:(this._sink=new Vs,t&&fk(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&dk(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!r||!ef(r,this._schema))&&(r==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=r,this._writeSchema(r))),this}write(t){let r=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof di&&!(r=t.schema))return this.finish()&&void 0;if(t instanceof hr&&!(r=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(r&&!ef(r,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,r)}t instanceof hr?t instanceof rf||this._writeRecordBatch(t):t instanceof di?this.writeAll(t.batches):ko(t)&&this.writeAll(t)}_writeMessage(t,r=8){let n=r-1,i=mi.encode(t),o=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=o+s+n&~n,c=a-o-s;return t.headerType===oe.RecordBatch?this._recordBatchBlocks.push(new Wa(a,t.bodyLength,this._position)):t.headerType===oe.DictionaryBatch&&this._dictionaryBlocks.push(new Wa(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),o>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){let r=Et(t);r&&r.byteLength>0&&(this._sink.write(r),this._position+=r.byteLength)}return this}_writeSchema(t){return this._writeMessage(mi.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Jd)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){let{byteLength:r,nodes:n,bufferRegions:i,buffers:o}=Je.assemble(t),s=new cn(t.numRows,n,i),a=mi.from(s,r);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(o)}_writeDictionaryBatch(t,r,n=!1){this._dictionaryDeltaOffsets.set(r,t.length+(this._dictionaryDeltaOffsets.get(r)||0));let{byteLength:i,nodes:o,bufferRegions:s,buffers:a}=Je.assemble(new le([t])),c=new cn(t.length,o,s),l=new pi(c,r,n),u=mi.from(l,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let r,n,i;for(let o=-1,s=t.length;++o<s;)(r=t[o])&&(n=r.byteLength)>0&&(this._write(r),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[r,n]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(r)||0;if(i===0||(n=n?.slice(i)).length>0)for(let o of n.data)this._writeDictionaryBatch(o,r,i>0),i+=o.length}return this}},Ly=class e extends sf{static writeAll(t,r){let n=new e(r);return Mi(t)?t.then(i=>n.writeAll(i)):to(t)?tM(n,t):JA(n,t)}},ky=class e extends sf{static writeAll(t){let r=new e;return Mi(t)?t.then(n=>r.writeAll(n)):to(t)?tM(r,t):JA(r,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){let r=Ya.encode(new Ya(t,Ee.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(r)._write(Int32Array.of(r.byteLength))._writeMagic()}};function JA(e,t){let r=t;t instanceof di&&(r=t.batches,e.reset(void 0,t.schema));for(let n of r)e.write(n);return e.finish()}function tM(e,t){var r,n,i,o,s,a,c;return P(this,void 0,void 0,function*(){try{for(r=!0,n=fr(t);i=yield n.next(),o=i.done,!o;r=!0){c=i.value,r=!1;let l=c;e.write(l)}}catch(l){s={error:l}}finally{try{!r&&!o&&(a=n.return)&&(yield a.call(n))}finally{if(s)throw s.error}}return e.finish()})}function QC(e,t){if(to(e))return FZ(e,t);if(ko(e))return NZ(e,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function NZ(e,t){let r=null,n=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){o(s,r||(r=e[Symbol.iterator]()))},pull(s){r?o(s,r):s.close()},cancel(){(r?.return&&r.return()||!0)&&(r=null)}}),Object.assign({highWaterMark:n?i:void 0},t));function o(s,a){let c,l=null,u=s.desiredSize||null;for(;!(l=a.next(n?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=Et(l.value))&&(u!=null&&n&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()}}function FZ(e,t){let r=null,n=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){return P(this,void 0,void 0,function*(){yield o(s,r||(r=e[Symbol.asyncIterator]()))})},pull(s){return P(this,void 0,void 0,function*(){r?yield o(s,r):s.close()})},cancel(){return P(this,void 0,void 0,function*(){(r?.return&&(yield r.return())||!0)&&(r=null)})}}),Object.assign({highWaterMark:n?i:void 0},t));function o(s,a){return P(this,void 0,void 0,function*(){let c,l=null,u=s.desiredSize||null;for(;!(l=yield a.next(n?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=Et(l.value))&&(u!=null&&n&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()})}}function eU(e){return new eM(e)}var eM=class{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{["readableStrategy"]:r,["writableStrategy"]:n,["queueingStrategy"]:i="count"}=t,o=e_(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Ku(o),this._getSize=i!=="bytes"?JC:tU;let{["highWaterMark"]:s=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},r),{["highWaterMark"]:a=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:c=>{this._maybeFlush(this._builder,this._controller=c)},start:c=>{this._maybeFlush(this._builder,this._controller=c)}},{highWaterMark:s,size:i!=="bytes"?JC:tU}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:c=>this._writeValueAndReturnChunkSize(c)})}_writeValueAndReturnChunkSize(t){let r=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-r}_maybeFlush(t,r){r!=null&&(this._bufferedSize>=r.desiredSize&&++this._numChunks&&this._enqueue(r,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(r,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(r,null)))}_enqueue(t,r){this._bufferedSize=0,this._controller=null,r==null?t.close():t.enqueue(r)}},JC=e=>{var t;return(t=e?.length)!==null&&t!==void 0?t:0},tU=e=>{var t;return(t=e?.byteLength)!==null&&t!==void 0?t:0};function w1(e,t){let r=new Vs,n=null,i=new ReadableStream({cancel(){return P(this,void 0,void 0,function*(){yield r.close()})},start(a){return P(this,void 0,void 0,function*(){yield s(a,n||(n=yield o()))})},pull(a){return P(this,void 0,void 0,function*(){n?yield s(a,n):a.close()})}});return{writable:new WritableStream(r,Object.assign({highWaterMark:Math.pow(2,14)},e)),readable:i};function o(){return P(this,void 0,void 0,function*(){return yield(yield Ni.from(r)).open(t)})}function s(a,c){return P(this,void 0,void 0,function*(){let l=a.desiredSize,u=null;for(;!(u=yield c.next()).done;)if(a.enqueue(u.value),l!=null&&--l<=0)return;a.close()})}}function v1(e,t){let r=new this(e),n=new co(r),i=new ReadableStream({cancel(){return P(this,void 0,void 0,function*(){yield n.cancel()})},pull(s){return P(this,void 0,void 0,function*(){yield o(s)})},start(s){return P(this,void 0,void 0,function*(){yield o(s)})}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(r,e),readable:i};function o(s){return P(this,void 0,void 0,function*(){let a=null,c=s.desiredSize;for(;a=yield n.read(c||null);)if(s.enqueue(a),c!=null&&(c-=a.byteLength)<=0)return;s.close()})}}function af(e){let t=Ni.from(e);return Mi(t)?t.then(r=>af(r)):t.isAsync()?t.readAll().then(r=>new di(r)):new di(t.readAll())}var JZ=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},dA),UA),DA),hA),aA),EA),uA),{compareSchemas:ef,compareFields:DC,compareTypes:BC});sn.toDOMStream=QC;Ge.throughDOM=eU;Ni.throughDOM=w1;of.throughDOM=w1;Ja.throughDOM=w1;sf.throughDOM=v1;ky.throughDOM=v1;Ly.throughDOM=v1;function S1(e="ws://localhost:3000/"){let t=[],r=!1,n=null,i,o={open(){r=!0,c()},close(){for(r=!1,n=null,i=null;t.length;)t.shift().reject("Socket closed")},error(l){if(n){let{reject:u}=n;n=null,c(),u(l)}else console.error("WebSocket error: ",l)},message({data:l}){if(n){let{query:u,resolve:f,reject:d}=n;if(n=null,c(),typeof l=="string"){let h=JSON.parse(l);h.error?d(h.error):f(h)}else if(u.type==="exec")f();else if(u.type==="arrow")f(af(l.arrayBuffer()));else throw new Error(`Unexpected socket data: ${l}`)}else console.log("WebSocket message: ",l)}};function s(){i=new WebSocket(e);for(let l in o)i.addEventListener(l,o[l])}function a(l,u,f){i==null&&s(),t.push({query:l,resolve:u,reject:f}),r&&!n&&c()}function c(){t.length&&(n=t.shift(),i.send(JSON.stringify(n.query)))}return{get connected(){return r},query(l){return new Promise((u,f)=>a(l,u,f))}}}var yi=class{constructor(t,r){t&&(this.table=String(t)),r&&(this.column=r)}get columns(){return this.column?[this.column]:[]}toString(){let{table:t,column:r}=this;if(r){let n=r.startsWith("*")?r:`"${r}"`;return`${t?`${rU(t)}.`:""}${n}`}else return t?rU(t):"NULL"}};function rU(e){return e.split(".").map(r=>`"${r}"`).join(".")}function nU(e,t){return e instanceof yi&&e.column===t}function se(e){return typeof e=="string"?El(e):e}function cf(e){return typeof e=="string"?iU(e):e}function iU(e){return new yi(e)}function El(e,t=null){return arguments.length===1&&(t=e,e=null),new yi(e,t)}function Ys(e){switch(typeof e){case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e}'`;case"number":return Number.isFinite(e)?String(e):"NULL";default:if(e==null)return"NULL";if(e instanceof Date){let t=+e;if(Number.isNaN(t))return"NULL";let r=e.getUTCFullYear(),n=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(r,n,i)?`MAKE_DATE(${r}, ${n+1}, ${i})`:`EPOCH_MS(${t})`}else return e instanceof RegExp?`'${e.source}'`:String(e)}}var ec=e=>typeof e?.addEventListener=="function";function I1(e){return e instanceof Dl}var Dl=class{constructor(t,r,n){this._expr=Array.isArray(t)?t:[t],this._deps=r||[],this.annotate(n);let i=this._expr.filter(o=>ec(o));i.length>0?(this._params=Array.from(new Set(i)),this._params.forEach(o=>{o.addEventListener("value",()=>tK(this,this.map?.get("value")))})):this.addEventListener=void 0}get value(){return this}get columns(){let{_params:t,_deps:r}=this;if(t){let n=new Set(t.flatMap(i=>{let o=i.value?.columns;return Array.isArray(o)?o:[]}));if(n.size){let i=new Set(r);return n.forEach(o=>i.add(o)),Array.from(i)}}return r}get column(){return this._deps.length?this._deps[0]:this.columns[0]}annotate(...t){return Object.assign(this,...t)}toString(){return this._expr.map(t=>ec(t)&&!I1(t)?Ys(t.value):t).join("")}addEventListener(t,r){let n=this.map||(this.map=new Map);(n.get(t)||(n.set(t,new Set),n.get(t))).add(r)}};function tK(e,t){if(t?.size)return Promise.allSettled(Array.from(t,r=>r(e)))}function rM(e,t){let r=[e[0]],n=new Set,i=t.length;for(let o=0,s=0;o<i;){let a=t[o];ec(a)?r[++s]=a:(Array.isArray(a?.columns)&&a.columns.forEach(l=>n.add(l)),r[s]+=typeof a=="string"?a:Ys(a));let c=e[++o];ec(r[s])?r[++s]=c:r[s]+=c}return{spans:r,cols:Array.from(n)}}function q(e,...t){let{spans:r,cols:n}=rM(e,t);return new Dl(r,n)}function nM(e){let t=se(e);return q`${t} DESC NULLS LAST`.annotate({label:t?.label,desc:!0})}var Fi=e=>({value:e,toString:()=>Ys(e)});function Cy(e){e(this.op,this),this.children?.forEach(t=>t.visit(e))}function oU(e,t){let r=t.filter(i=>i!=null).map(se),n=r.map((i,o)=>o?` ${e} `:"");return r.length===1?n.push(""):r.length>1&&(n[0]="(",n.push(")")),q(n,...r).annotate({op:e,children:r,visit:Cy})}var zn=(...e)=>oU("AND",e.flat()),lf=(...e)=>oU("OR",e.flat()),eK=e=>t=>q`(${e} ${se(t)})`.annotate({op:e,a:t,visit:Cy}),iM=eK("NOT"),sU=e=>t=>q`(${se(t)} ${e})`.annotate({op:e,a:t,visit:Cy}),uf=sU("IS NULL"),rc=sU("IS NOT NULL"),Bl=e=>(t,r)=>q`(${se(t)} ${e} ${se(r)})`.annotate({op:e,a:t,b:r,visit:Cy}),nc=Bl("="),ff=Bl("<>"),ic=Bl("<"),Uy=Bl(">"),oc=Bl("<="),oM=Bl(">="),sM=Bl("IS DISTINCT FROM"),Py=Bl("IS NOT DISTINCT FROM");function aU(e,t,r,n){t=se(t);let i=e.startsWith("NOT ")?"NOT ":"";return(r?n?q`${i}(${r[0]} <= ${t} AND ${t} < ${r[1]})`:q`(${t} ${e} ${r[0]} AND ${r[1]})`:q``).annotate({op:e,visit:Cy,field:t,range:r})}var tr=(e,t,r)=>aU("BETWEEN",e,t,r),aM=(e,t,r)=>aU("NOT BETWEEN",e,t,r);function df(e,t){return Array.from({length:e},()=>t)}function ln(e,t){return(...r)=>{let n=r.map(se),i=t?`::${t}`:"";return(n.length?q([`${e}(`,...df(n.length-1,", "),`)${i}`],...n):q`${e}()${i}`).annotate({func:e,args:n})}}var cM=ln("REGEXP_MATCHES"),lM=ln("CONTAINS"),uM=ln("PREFIX"),fM=ln("SUFFIX"),rK=ln("LOWER"),nK=ln("UPPER"),iK=ln("LENGTH"),oK=ln("ISNAN"),sK=ln("ISFINITE"),aK=ln("ISINF");var $y=class e extends Dl{constructor(t,r,n,i,o="",s="",a=""){let c;if(i&&!(o||s||a))c=i?q`${r} OVER "${i}"`:q`${r} OVER ()`;else{let d=o&&s?" ":"",h=(o||s)&&a?" ":"";c=q`${r} OVER (${i?`"${i}" `:""}${o}${d}${s}${h}${a})`}n&&(c=q`(${c})::${n}`);let{_expr:u,_deps:f}=c;super(u,f),this.window=t,this.func=r,this.type=n,this.name=i,this.group=o,this.order=s,this.frame=a}get basis(){return this.column}get label(){let{func:t}=this;return t.label??t.toString()}over(t){let{window:r,func:n,type:i,group:o,order:s,frame:a}=this;return new e(r,n,i,t,o,s,a)}partitionby(...t){let r=t.flat().filter(u=>u).map(se),n=q(["PARTITION BY ",df(r.length-1,", "),""],...r),{window:i,func:o,type:s,name:a,order:c,frame:l}=this;return new e(i,o,s,a,n,c,l)}orderby(...t){let r=t.flat().filter(u=>u).map(se),n=q(["ORDER BY ",df(r.length-1,", "),""],...r),{window:i,func:o,type:s,name:a,group:c,frame:l}=this;return new e(i,o,s,a,c,n,l)}rows(t){let r=cU("ROWS",t),{window:n,func:i,type:o,name:s,group:a,order:c}=this;return new e(n,i,o,s,a,c,r)}range(t){let r=cU("RANGE",t),{window:n,func:i,type:o,name:s,group:a,order:c}=this;return new e(n,i,o,s,a,c,r)}};function cU(e,t){if(ec(t)){let r=q`${t}`;return r.toString=()=>`${e} ${lU(t.value)}`,r}return`${e} ${lU(t)}`}function lU(e){let[t,r]=e,n=t===0?"CURRENT ROW":Number.isFinite(t)?`${Math.abs(t)} PRECEDING`:"UNBOUNDED PRECEDING",i=r===0?"CURRENT ROW":Number.isFinite(r)?`${Math.abs(r)} FOLLOWING`:"UNBOUNDED FOLLOWING";return`BETWEEN ${n} AND ${i}`}function Zo(e,t){return(...r)=>{let n=ln(e)(...r);return new $y(e,n,t)}}var dM=Zo("ROW_NUMBER","INTEGER"),hM=Zo("RANK","INTEGER"),pM=Zo("DENSE_RANK","INTEGER"),mM=Zo("PERCENT_RANK"),yM=Zo("CUME_DIST"),gM=Zo("NTILE"),bM=Zo("LAG"),xM=Zo("LEAD"),_M=Zo("FIRST_VALUE"),wM=Zo("LAST_VALUE"),vM=Zo("NTH_VALUE");function IM(e,...t){return q(e,...t).annotate({aggregate:!0})}var SM=class e extends Dl{constructor(t,r,n,i,o){r=(r||[]).map(se);let{strings:s,exprs:a}=cK(t,r,n,i,o),{spans:c,cols:l}=rM(s,a);super(c,l),this.aggregate=t,this.args=r,this.type=n,this.isDistinct=i,this.filter=o}get basis(){return this.column}get label(){let{aggregate:t,args:r,isDistinct:n}=this,i=n?"DISTINCT"+(r.length?" ":""):"",o=r.length?`(${i}${r.map(lK).join(", ")})`:"";return`${t.toLowerCase()}${o}`}distinct(){let{aggregate:t,args:r,type:n,filter:i}=this;return new e(t,r,n,!0,i)}where(t){let{aggregate:r,args:n,type:i,isDistinct:o}=this;return new e(r,n,i,o,t)}window(){let{aggregate:t,args:r,type:n,isDistinct:i}=this,o=new e(t,r,null,i);return new $y(t,o,n)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}rows(t){return this.window().rows(t)}range(t){return this.window().range(t)}};function cK(e,t,r,n,i){let o=`)${r?`::${r}`:""}`,s=[`${e}(${n?"DISTINCT ":""}`],a=[];return t.length?(s=s.concat([...df(t.length-1,", "),`${o}${i?" FILTER (WHERE ":""}`,...i?[")"]:[]]),a=[...t,...i?[i]:[]]):s[0]+="*"+o,{exprs:a,strings:s}}function lK(e){let t=Ys(e);return t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function me(e,t){return(...r)=>new SM(e,r,t)}var Ri=me("COUNT","INTEGER"),TM=me("AVG"),uK=me("AVG"),AM=me("MAD"),fo=me("MAX"),ho=me("MIN"),Li=me("SUM","DOUBLE"),MM=me("PRODUCT"),EM=me("MEDIAN"),DM=me("QUANTILE"),BM=me("MODE"),OM=me("VARIANCE"),NM=me("STDDEV"),FM=me("SKEWNESS"),RM=me("KURTOSIS"),LM=me("ENTROPY"),kM=me("VAR_POP"),CM=me("STDDEV_POP"),UM=me("CORR"),PM=me("COVAR_POP"),$M=me("REGR_INTERCEPT"),zM=me("REGR_SLOPE"),VM=me("REGR_COUNT"),fK=me("REGR_R2"),jM=me("REGR_SYY"),qM=me("REGR_SXX"),dK=me("REGR_SXY"),YM=me("REGR_AVGX"),hK=me("REGR_AVGY"),WM=me("FIRST"),GM=me("LAST"),nh=me("ARG_MIN"),ih=me("ARG_MAX"),XM=me("STRING_AGG"),HM=me("ARRAY_AGG");function zy(e,t){let r=se(e),n=q`CAST(${r} AS ${t})`;return Object.defineProperty(n,"label",{enumerable:!0,get(){return e.label}}),Object.defineProperty(n,"aggregate",{enumerable:!0,get(){return e.aggregate||!1}}),n}var oh=e=>zy(e,"DOUBLE"),ZM=e=>zy(e,"INTEGER");var KM=e=>q`epoch_ms(${se(e)})`,QM=e=>{let t=se(e);return q`MAKE_DATE(2012, MONTH(${t}), 1)`.annotate({label:"month"})},JM=e=>{let t=se(e);return q`MAKE_DATE(2012, MONTH(${t}), DAY(${t}))`.annotate({label:"date"})},tE=e=>{let t=se(e);return q`MAKE_DATE(2012, 1, DAY(${t}))`.annotate({label:"date"})};var Vy=ln("ST_AsGeoJSON"),uU=ln("ST_X"),fU=ln("ST_Y"),jy=ln("ST_CENTROID"),eE=e=>uU(jy(e)),rE=e=>fU(jy(e));var bt=class e{static select(...t){return new e().select(...t)}static from(...t){return new e().from(...t)}static with(...t){return new e().with(...t)}static union(...t){return new hf("UNION",t.flat())}static unionAll(...t){return new hf("UNION ALL",t.flat())}static intersect(...t){return new hf("INTERSECT",t.flat())}static except(...t){return new hf("EXCEPT",t.flat())}static describe(t){let r=t.clone(),{clone:n,toString:i}=r;return Object.assign(r,{describe:!0,clone:()=>e.describe(n.call(r)),toString:()=>`DESCRIBE ${i.call(r)}`})}constructor(){this.query={with:[],select:[],from:[],where:[],groupby:[],having:[],window:[],qualify:[],orderby:[]},this.cteFor=null}clone(){let t=new e;return t.query={...this.query},t}with(...t){let{query:r}=this;if(t.length===0)return r.with;{let n=[],i=(o,s)=>{let a=s.clone();a.cteFor=this,n.push({as:o,query:a})};return t.flat().forEach(o=>{if(o!=null)if(o.as&&o.query)i(o.as,o.query);else for(let s in o)i(s,o[s])}),r.with=r.with.concat(n),this}}select(...t){let{query:r}=this;if(t.length===0)return r.select;{let n=[];for(let i of t.flat())if(i!=null)if(typeof i=="string")n.push({as:i,expr:se(i)});else if(i instanceof yi)n.push({as:i.column,expr:i});else if(Array.isArray(i))n.push({as:i[0],expr:i[1]});else for(let o in i)n.push({as:T1(o),expr:se(i[o])});return r.select=r.select.concat(n),this}}$select(...t){return this.query.select=[],this.select(...t)}distinct(t=!0){return this.query.distinct=!!t,this}from(...t){let{query:r}=this;if(t.length===0)return r.from;{let n=[];return t.flat().forEach(i=>{if(i!=null)if(typeof i=="string")n.push({as:i,from:cf(i)});else if(i instanceof yi)n.push({as:i.table,from:i});else if(qy(i)||I1(i))n.push({from:i});else if(Array.isArray(i))n.push({as:T1(i[0]),from:cf(i[1])});else for(let o in i)n.push({as:T1(o),from:cf(i[o])})}),r.from=r.from.concat(n),this}}$from(...t){return this.query.from=[],this.from(...t)}sample(t,r){let{query:n}=this;if(arguments.length===0)return n.sample;{let i=t;return typeof t=="number"&&(i=t>0&&t<1?{perc:100*t,method:r}:{rows:Math.round(t),method:r}),n.sample=i,this}}where(...t){let{query:r}=this;return t.length===0?r.where:(r.where=r.where.concat(t.flat().filter(n=>n)),this)}$where(...t){return this.query.where=[],this.where(...t)}groupby(...t){let{query:r}=this;return t.length===0?r.groupby:(r.groupby=r.groupby.concat(t.flat().filter(n=>n).map(se)),this)}$groupby(...t){return this.query.groupby=[],this.groupby(...t)}having(...t){let{query:r}=this;return t.length===0?r.having:(r.having=r.having.concat(t.flat().filter(n=>n)),this)}window(...t){let{query:r}=this;if(t.length===0)return r.window;{let n=[];return t.flat().forEach(i=>{if(i!=null)for(let o in i)n.push({as:T1(o),expr:i[o]})}),r.window=r.window.concat(n),this}}qualify(...t){let{query:r}=this;return t.length===0?r.qualify:(r.qualify=r.qualify.concat(t.flat().filter(n=>n)),this)}orderby(...t){let{query:r}=this;return t.length===0?r.orderby:(r.orderby=r.orderby.concat(t.flat().filter(n=>n).map(se)),this)}limit(t){let{query:r}=this;return arguments.length===0?r.limit:(r.limit=Number.isFinite(t)?t:void 0,this)}offset(t){let{query:r}=this;return arguments.length===0?r.offset:(r.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){let{query:t,cteFor:r}=this,i=(r?.query||t).with?.reduce((s,{as:a,query:c})=>(s[a]=c,s),{}),o=[];return t.from.forEach(({from:s})=>{if(qy(s))o.push(s);else if(i[s.table]){let a=i[s.table];o.push(a)}}),o}toString(){let{with:t,select:r,distinct:n,from:i,sample:o,where:s,groupby:a,having:c,window:l,qualify:u,orderby:f,limit:d,offset:h}=this.query,p=[];if(t.length){let y=t.map(({as:g,query:b})=>`"${g}" AS (${b})`);p.push(`WITH ${y.join(", ")}`)}let m=r.map(({as:y,expr:g})=>nU(g,y)&&!g.table?`${g}`:`${g} AS "${y}"`);if(p.push(`SELECT${n?" DISTINCT":""} ${m.join(", ")}`),i.length){let y=i.map(({as:g,from:b})=>{let x=qy(b)?`(${b})`:`${b}`;return!g||g===b.table?x:`${x} AS "${g}"`});p.push(`FROM ${y.join(", ")}`)}if(s.length){let y=s.map(String).filter(g=>g).join(" AND ");y&&p.push(`WHERE ${y}`)}if(o){let{rows:y,perc:g,method:b,seed:x}=o,_=y?`${y} ROWS`:`${g} PERCENT`,v=b?` (${b}${x!=null?`, ${x}`:""})`:"";p.push(`USING SAMPLE ${_}${v}`)}if(a.length&&p.push(`GROUP BY ${a.join(", ")}`),c.length){let y=c.map(String).filter(g=>g).join(" AND ");y&&p.push(`HAVING ${y}`)}if(l.length){let y=l.map(({as:g,expr:b})=>`"${g}" AS (${b})`);p.push(`WINDOW ${y.join(", ")}`)}if(u.length){let y=u.map(String).filter(g=>g).join(" AND ");y&&p.push(`QUALIFY ${y}`)}return f.length&&p.push(`ORDER BY ${f.join(", ")}`),Number.isFinite(d)&&p.push(`LIMIT ${d}`),Number.isFinite(h)&&p.push(`OFFSET ${h}`),p.join(" ")}},hf=class e{constructor(t,r){this.op=t,this.queries=r.map(n=>n.clone()),this.query={orderby:[]},this.cteFor=null}clone(){let t=new e(this.op,this.queries);return t.query={...this.query},t}orderby(...t){let{query:r}=this;return t.length===0?r.orderby:(r.orderby=r.orderby.concat(t.flat().filter(n=>n).map(se)),this)}limit(t){let{query:r}=this;return arguments.length===0?r.limit:(r.limit=Number.isFinite(t)?t:void 0,this)}offset(t){let{query:r}=this;return arguments.length===0?r.offset:(r.offset=Number.isFinite(t)?t:void 0,this)}get subqueries(){let{queries:t,cteFor:r}=this;return r&&t.forEach(n=>n.cteFor=r),t}toString(){let{op:t,queries:r,query:{orderby:n,limit:i,offset:o}}=this,s=[r.join(` ${t} `)];return n.length&&s.push(`ORDER BY ${n.join(", ")}`),Number.isFinite(i)&&s.push(`LIMIT ${i}`),Number.isFinite(o)&&s.push(`OFFSET ${o}`),s.join(" ")}};function qy(e){return e instanceof bt||e instanceof hf}function nE(e){return qy(e)&&e.describe}function T1(e){return pK(e)?e.slice(1,-1):e}function pK(e){return e[0]==='"'&&e[e.length-1]==='"'}var A1=e=>e;function mK(){return{apply:A1,invert:A1,sqlApply:se,sqlInvert:A1}}function yK({base:e=null}={}){if(e==null||e===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:t=>q`LN(${se(t)})`,sqlInvert:t=>q`EXP(${t})`};if(e===10)return{apply:Math.log10,invert:t=>Math.pow(10,t),sqlApply:t=>q`LOG(${se(t)})`,sqlInvert:t=>q`POW(10, ${t})`};{let t=+e;return{apply:r=>Math.log(r)/Math.log(t),invert:r=>Math.pow(t,r),sqlApply:r=>q`LN(${se(r)}) / LN(${t})`,sqlInvert:r=>q`POW(${t}, ${r})`}}}function gK({constant:e=1}={}){let t=+e;return{apply:r=>Math.sign(r)*Math.log1p(Math.abs(r)),invert:r=>Math.sign(r)*Math.exp(Math.abs(r)-t),sqlApply:r=>(r=se(r),q`SIGN(${r}) * LN(${t} + ABS(${r}))`),sqlInvert:r=>q`SIGN(${r}) * (EXP(ABS(${r})) - ${t})`}}function bK(){return{apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>Math.sign(e)*e*e,sqlApply:e=>(e=se(e),q`SIGN(${e}) * SQRT(ABS(${e}))`),sqlInvert:e=>q`SIGN(${e}) * (${e}) ** 2`}}function xK({exponent:e=1}={}){let t=+e;return{apply:r=>Math.sign(r)*Math.pow(Math.abs(r),t),invert:r=>Math.sign(r)*Math.pow(Math.abs(r),1/t),sqlApply:r=>(r=se(r),q`SIGN(${r}) * POW(ABS(${r}), ${t})`),sqlInvert:r=>q`SIGN(${r}) * POW(ABS(${r}), 1/${t})`}}function dU(){return{apply:e=>+e,invert:e=>new Date(e),sqlApply:e=>e instanceof Date?+e:KM(se(e)),sqlInvert:A1}}var _K={linear:mK,log:yK,symlog:gK,sqrt:bK,pow:xK,time:dU,utc:dU};function Yy(e){let t=_K[e.type];return t?{...e,...t(e)}:null}function Ol(e,t,{replace:r=!1,temp:n=!0,view:i=!1}={}){return"CREATE"+(r?" OR REPLACE ":" ")+(n?"TEMP ":"")+(i?"VIEW":"TABLE")+(r?" ":" IF NOT EXISTS ")+e+" AS "+t}function iE(e){return`INSTALL ${e}; LOAD ${e}`}function hU(e,{columns:t=Object.keys(e?.[0]||{})}={}){let r=[];if(Array.isArray(t)?(r=t,t=r.reduce((i,o)=>(i[o]=o,i),{})):t&&(r=Object.keys(t)),!r.length)throw new Error("Can not create table from empty column set.");let n=[];for(let i of e){let o=r.map(s=>`${Ys(i[s])} AS "${t[s]}"`);n.push(`(SELECT ${o.join(", ")})`)}return n.join(" UNION ALL ")}function M1(e,t,r,n={},i={}){let{select:o=["*"],where:s,view:a,temp:c,replace:l,...u}=n,f=wK({...i,...u}),d=`${e}('${r}'${f?", "+f:""})`,h=s?` WHERE ${s}`:"",p=`SELECT ${o.join(", ")} FROM ${d}${h}`;return Ol(t,p,{view:a,temp:c,replace:l})}function sE(e,t,r){return M1("read_csv",e,t,r,{auto_detect:!0,sample_size:-1})}function aE(e,t,r){return M1("read_json",e,t,r,{auto_detect:!0,json_format:"auto"})}function cE(e,t,r){return M1("read_parquet",e,t,r)}function lE(e,t,r={}){let{options:n,...i}=r;if(n){let o=Array.isArray(n)?n.join(", "):typeof n=="string"?n:Object.entries(n).map(([s,a])=>`${s}=${a}`).join(", ");Object.assign(i,{open_options:o.toUpperCase()})}return M1("st_read",e,t,i)}function uE(e,t,r={}){let{select:n=["*"],...i}=r,o=hU(t),s=n.length===1&&n[0]==="*"?o:`SELECT ${n} FROM ${o}`;return Ol(e,s,i)}function wK(e){return Object.entries(e).map(([t,r])=>`${t}=${oE(r)}`).join(", ")}function oE(e){switch(typeof e){case"boolean":return String(e);case"string":return`'${e}'`;case"undefined":case"object":return e==null?"NULL":Array.isArray(e)?"["+e.map(t=>oE(t)).join(", ")+"]":"{"+Object.entries(e).map(([t,r])=>`'${t}': ${oE(r)}`).join(", ")+"}";default:return e}}function mU(e){let t=2166136261;for(let r=0,n=e.length;r<n;++r){let i=e.charCodeAt(r),o=i&65280;o&&(t=pU(t^o>>8)),t=pU(t^i&255)}return vK(t)}function pU(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function vK(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}var E1=class{constructor(t,{selection:r,temp:n=!0}){this.mc=t,this.selection=r,this.temp=n,this.reset()}reset(){this.enabled=!1,this.clients=null,this.indices=null,this.activeView=null}clear(){this.indices&&(this.mc.cancel(Array.from(this.indices.values(),t=>t.result)),this.indices=null)}index(t,r){if(this.clients!==t){let l=Array.from(t,gU),u=l[0]?.from;this.enabled=l.every(f=>f&&f.from===u),this.clients=t,this.activeView=null,this.clear()}if(!this.enabled)return!1;r=r||this.selection.active;let{source:n}=r;if(n&&n===this.activeView?.source)return!0;if(this.clear(),!n)return!1;let i=this.activeView=SK(r);if(!i)return!1;this.mc.logger().warn("DATA CUBE INDEX CONSTRUCTION");let o=this.selection.remove(n),s=this.indices=new Map,{mc:a,temp:c}=this;for(let l of t){if(o.skip(l,r))continue;let u=gU(l),f=l.query(o.predicate(l)).select({...i.columns,...u.count}).groupby(Object.keys(i.columns)),[d]=f.subqueries;if(d){let b=Object.values(i.columns).map(x=>x.columns[0]);TK(d,b)}let h=f.orderby();f.query.orderby=[];let p=f.toString(),y=`cube_index_${(mU(p)>>>0).toString(16)}`,g=a.exec(Ol(y,p,{temp:c}));s.set(l,{table:y,result:g,order:h,...u})}}async update(){let{clients:t,selection:r,activeView:n}=this,i=n.predicate(r.active.predicate);return Promise.all(Array.from(t).map(o=>this.updateClient(o,i)))}async updateClient(t,r){let n=this.indices.get(t);if(!n)return;r||(r=this.activeView.predicate(this.selection.active.predicate));let{table:i,dims:o,aggr:s,order:a=[]}=n,c=bt.select(o,s).from(i).groupby(o).where(r).orderby(a);return this.mc.updateClient(t,c)}};function SK(e){let{source:t,schema:r}=e,n=e.predicate?.columns;if(!r||!n)return null;let{type:i,scales:o,pixelSize:s=1}=r,a;if(i==="interval"&&o){let c=o.map(l=>IK(l,s));if(c.some(l=>l==null))return null;c.length===1?(a=l=>l?tr("active0",l.range.map(c[0])):[],n={active0:c[0](e.predicate.field)}):(a=l=>l?zn(l.children.map(({range:u},f)=>tr(`active${f}`,u.map(c[f])))):[],n=Object.fromEntries(e.predicate.children.map((l,u)=>[`active${u}`,c[u](l.field)])))}else if(i==="point")a=c=>c,n=Object.fromEntries(n.map(c=>[c.toString(),c]));else return null;return{source:t,columns:n,predicate:a}}function IK(e,t){let{apply:r,sqlApply:n}=Yy(e);if(r){let{domain:i,range:o}=e,s=r(Math.min(...i)),a=r(Math.max(...i)),c=Math.abs(o[1]-o[0])/(a-s)/t,l=t===1?"":`${t}::INTEGER * `;return u=>q`${l}FLOOR(${c}::DOUBLE * (${n(u)} - ${s}::DOUBLE))::INTEGER`}}var yU={from:NaN};function gU(e){if(!e.filterIndexable)return yU;let t=e.query(),r=fE(t);if(!r||!t.groupby)return yU;let n=new Set(t.groupby().map(a=>a.column)),i=[],o=[],s;for(let{as:a,expr:{aggregate:c}}of t.select())switch(c?.toUpperCase?.()){case"COUNT":case"SUM":i.push({[a]:q`SUM("${a}")::DOUBLE`});break;case"AVG":s="_count_",i.push({[a]:q`(SUM("${a}" * ${s}) / SUM(${s}))::DOUBLE`});break;case"MAX":i.push({[a]:q`MAX("${a}")`});break;case"MIN":i.push({[a]:q`MIN("${a}")`});break;default:if(n.has(a))o.push(a);else return null}return{aggr:i,dims:o,count:s?{[s]:q`COUNT(*)`}:{},from:r}}function fE(e){let t=e.subqueries;if(e.select){let n=e.from();if(!n.length)return;if(t.length===0)return n[0].from.table}let r=fE(t[0]);for(let n=1;n<t.length;++n){let i=fE(t[n]);if(i!==void 0&&i!==r)return NaN}return r}function TK(e,t){let r=new Set,n=i=>{r.has(i)||(r.add(i),i.select&&i.from().length&&i.select(t),i.subqueries.forEach(n))};n(e)}var D1=class{constructor(t,r,n=!0){this.mc=t,this.selection=r,this.clients=new Set,this.indexer=n?new E1(this.mc,{...n,selection:r}):null;let{value:i,activate:o}=this.handlers={value:()=>this.update(),activate:s=>this.indexer?.index(this.clients,s)};r.addEventListener("value",i),r.addEventListener("activate",o)}finalize(){let{value:t,activate:r}=this.handlers;this.selection.removeEventListener("value",t),this.selection.removeEventListener("activate",r)}reset(){this.indexer?.reset()}add(t){return(this.clients=new Set(this.clients)).add(t),this}remove(t){return this.clients.has(t)&&(this.clients=new Set(this.clients)).delete(t),this}update(){let{mc:t,indexer:r,clients:n,selection:i}=this;return r?.index(n)?r.update():AK(t,n,i)}};function AK(e,t,r){return Promise.all(Array.from(t).map(n=>{let i=r.predicate(n);if(i!=null)return e.updateClient(n,n.query(i))}))}function B1(){let e,t,r=new Promise((n,i)=>{e=n,t=i});return Object.assign(r,{fulfill:n=>(e(n),r),reject:n=>(t(n),r)})}function MK(e){return(typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:setTimeout)(e)}function bU(e,t,r){let n=[],i=0;function o(){let s=EK(n,t);n=[],i=0;for(let a of s)BK(a,e,r),FK(a,t)}return{add(s,a){s.request.type==="arrow"?(i=i||MK(()=>o()),n.push({entry:s,priority:a,index:n.length})):e(s,a)}}}function EK(e,t){let r=[],n=new Map;for(let i of e){let{entry:{request:o}}=i,s=DK(o.query,t);if(!n.has(s)){let a=[];r.push(a),n.set(s,a)}n.get(s).push(i)}return r}function DK(e,t){let r=`${e}`;if(e instanceof bt&&!t.get(r)){if(e.orderby().length||e.where().length||e.qualify().length||e.having().length)return r;let n=e.clone().$select("*"),i=e.groupby();if(i.length){let o={};e.select().forEach(({as:s,expr:a})=>o[s]=a),n.$groupby(i.map(s=>s instanceof yi&&o[s.column]||s))}return`${n}`}else return r}function BK(e,t,r){if(OK(e))t({request:{type:"arrow",cache:!1,record:!1,query:e.query=NK(e,r)},result:e.result=B1()});else for(let{entry:n,priority:i}of e)t(n,i)}function OK(e){if(e.length>1){let t=`${e[0].entry.request.query}`;for(let r=1;r<e.length;++r)if(t!==`${e[r].entry.request.query}`)return!0}return!1}function NK(e,t){let r=e.maps=[],n=new Map;for(let s of e){let{query:a}=s.entry.request,c=[];r.push(c);for(let{as:l,expr:u}of a.select()){let f=`${u}`;n.has(f)||n.set(f,[`col${n.size}`,u]);let[d]=n.get(f);c.push([d,l])}t(`${a}`)}let i=e[0].entry.request.query.clone(),o=i.groupby();if(o.length){let s={};e.maps[0].forEach(([a,c])=>s[c]=a),i.$groupby(o.map(a=>a instanceof yi&&s[a.column]||a))}return i.$select(Array.from(n.values()))}async function FK(e,t){let{maps:r,query:n,result:i}=e;if(!r)return;let o;try{o=await i}catch(a){for(let{entry:c}of e)c.result.reject(a);return}let s=nE(n);e.forEach(({entry:a},c)=>{let{request:l,result:u}=a,f=r[c],d=s&&f?LK(o,f):f?RK(o,f):o;l.cache&&t.set(String(l.query),d),u.fulfill(d)})}function RK(e,t){let r={};for(let[n,i]of t)r[i]=e.getChild(n);return new e.constructor(r)}function LK(e,t){let r=new Map(t),n=[];for(let i of e)r.has(i.column_name)&&n.push({...i,column_name:r.get(i.column_name)});return n}var kK=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout,xU=()=>({get:()=>{},set:(e,t)=>t,clear:()=>{}});function _U({max:e=1e3,ttl:t=3*60*60*1e3}={}){let r=new Map;function n(){let i=performance.now()-t,o=null,s=1/0;for(let[a,c]of r){let{last:l}=c;l<s&&(o=a,s=l),i>l&&r.delete(a)}o&&r.delete(o)}return{get(i){let o=r.get(i);if(o)return o.last=performance.now(),o.value},set(i,o){return r.set(i,{last:performance.now(),value:o}),r.size>e&&kK(n),o},clear(){r=new Map}}}function wU(e){let t=Array.from({length:e},()=>({head:null,tail:null}));return{isEmpty(){return t.every(r=>!r.head)},insert(r,n){let i=t[n];if(!i)throw new Error(`Invalid queue priority rank: ${n}`);let o={item:r,next:null};i.head===null?i.head=i.tail=o:i.tail=i.tail.next=o},remove(r){for(let n of t){let{head:i,tail:o}=n;for(let s=null,a=i;a;s=a,a=a.next)r(a.item)&&(a===i?i=a.next:s.next=a.next,a===o&&(o=s||i));n.head=i,n.tail=o}},next(){for(let r of t){let{head:n}=r;if(n!==null)return r.head=n.next,r.tail===n&&(r.tail=null),n.item}}}}var Ws={High:0,Normal:1,Low:2};function vU(){let e=wU(3),t,r,n,i=[],o=null,s;function a(){if(o||e.isEmpty())return;let{request:f,result:d}=e.next();o=u(f,d),o.finally(()=>{o=null,a()})}function c(f,d=Ws.Normal){e.insert(f,d),a()}function l(f){i.length&&f&&i.forEach(d=>d.add(f))}async function u(f,d){try{let{query:h,type:p,cache:m=!1,record:y=!0,options:g}=f,b=h?`${h}`:null;if(y&&l(b),m){let v=r.get(b);if(v){n.debug("Cache"),d.fulfill(v);return}}let x=performance.now(),_=await t.query({type:p,sql:b,...g});m&&r.set(b,_),n.debug(`Request: ${(performance.now()-x).toFixed(1)}`),d.fulfill(_)}catch(h){d.reject(h)}}return{cache(f){return f!==void 0?r=f===!0?_U():f||xU():r},logger(f){return f?n=f:n},connector(f){return f?t=f:t},consolidate(f){f&&!s?s=bU(c,r,l):!f&&s&&(s=null)},request(f,d=Ws.Normal){let h=B1(),p={request:f,result:h};return s?s.add(p,d):c(p,d),h},cancel(f){let d=new Set(f);e.remove(({result:h})=>d.has(h))},clear(){e.remove(({result:f})=>(f.reject("Cleared"),!0))},record(){let f=[],d={add(h){f.push(h)},reset(){f=[]},snapshot(){return f.slice()},stop(){return i=i.filter(h=>h!==d),f}};return i.push(d),d}}}function dE(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIMESTAMP WITH TIME ZONE":case"TIME":case"TIMESTAMP_NS":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":return"string";case"ARRAY":case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":case"GEOMETRY":return"object";default:if(e.startsWith("DECIMAL"))return"number";if(e.startsWith("STRUCT")||e.startsWith("MAP"))return"object";if(e.endsWith("]"))return"array";throw new Error(`Unsupported type: ${e}`)}}function Wy(e){return typeof e?.getChild=="function"}function hE(e){if(J.isTimestamp(e))return t=>t==null?t:new Date(t);if(J.isInt(e)&&e.bitWidth>=64)return t=>t==null?t:Number(t);if(J.isDecimal(e)){let t=1/Math.pow(10,e.scale);return r=>r==null?r:IU(r,t)}return t=>t}function pE(e){let{type:t}=e;if(J.isTimestamp(t)){let r=e.length,n=new Array(r);for(let i=0;i<r;++i){let o=e.get(i);n[i]=o==null?null:new Date(o)}return n}if(J.isInt(t)&&t.bitWidth>=64){let r=e.length,n=new Float64Array(r);for(let i=0;i<r;++i){let o=e.get(i);n[i]=o==null?NaN:Number(o)}return n}if(J.isDecimal(t)){let r=1/Math.pow(10,t.scale),n=e.length,i=new Float64Array(n);for(let o=0;o<n;++o){let s=e.get(o);i[o]=s==null?NaN:IU(s,r)}return i}return e.toArray()}var SU=Array.from({length:8},(e,t)=>Math.pow(2,t*32));function IU(e,t){let r=e.length,n=0;if(e.signed&&(e[r-1]|0)<0){for(let i=0;i<r;++i)n+=~e[i]*SU[i];n=-(n+1)}else for(let i=0;i<r;++i)n+=e[i]*SU[i];return n*t}var CK="count",UK="nulls",PK="max",$K="min",zK="distinct";var VK={[CK]:Ri,[zK]:e=>Ri(e).distinct(),[PK]:fo,[$K]:ho,[UK]:e=>Ri().where(uf(e))};function jK(e,t,r){return bt.from(e).select(Array.from(r,n=>[n,VK[n](t)]))}async function TU(e,t){return t.length===1&&`${t[0].column}`=="*"?YK(e,t[0].table):(await Promise.all(t.map(r=>qK(e,r)))).filter(r=>r)}async function qK(e,{table:t,column:r,stats:n}){let i=bt.from({source:t}).select({column:r}).groupby(r.aggregate?q`ALL`:[]),[o]=Array.from(await e.query(bt.describe(i))),s={table:t,column:`${r}`,sqlType:o.column_type,type:dE(o.column_type),nullable:o.null==="YES"};if(!(n?.length||n?.size))return s;let a=await e.query(jK(t,r,n),{persist:!0});for(let c=0;c<a.numCols;++c){let{name:l}=a.schema.fields[c],u=a.getChildAt(c),f=hE(u.type);s[l]=f(u.get(0))}return s}async function YK(e,t){let r=await e.query(`DESCRIBE ${cf(t)}`);return Array.from(r).map(n=>({table:t,column:n.column_name,sqlType:n.column_type,type:dE(n.column_type),nullable:n.null==="YES"}))}function AU(){return{debug(){},info(){},log(){},warn(){},error(){}}}var O1;function po(e){return e?O1=e:O1==null&&(O1=new Gy),O1}var Gy=class{constructor(t=S1(),r={}){let{logger:n=console,manager:i=vU()}=r;this.manager=i,this.logger(n),this.configure(r),this.databaseConnector(t),this.clear()}logger(t){return arguments.length&&(this._logger=t||AU(),this.manager.logger(this._logger)),this._logger}configure({cache:t=!0,consolidate:r=!0,indexes:n=!0}={}){this.manager.cache(t),this.manager.consolidate(r),this.indexes=n}clear({clients:t=!0,cache:r=!0}={}){this.manager.clear(),t&&(this.clients?.forEach(n=>this.disconnect(n)),this.filterGroups?.forEach(n=>n.finalize()),this.clients=new Set,this.filterGroups=new Map),r&&this.manager.cache().clear()}databaseConnector(t){return this.manager.connector(t)}cancel(t){this.manager.cancel(t)}exec(t,{priority:r=Ws.Normal}={}){return t=Array.isArray(t)?t.join(`;
`):t,this.manager.request({type:"exec",query:t},r)}query(t,{type:r="arrow",cache:n=!0,priority:i=Ws.Normal,...o}={}){return this.manager.request({type:r,query:t,cache:n,options:o},i)}prefetch(t,r={}){return this.query(t,{...r,cache:!0,priority:Ws.Low})}createBundle(t,r,n=Ws.Low){let i={name:t,queries:r};return this.manager.request({type:"create-bundle",options:i},n)}loadBundle(t,r=Ws.High){let n={name:t};return this.manager.request({type:"load-bundle",options:n},r)}updateClient(t,r,n=Ws.Normal){return t.queryPending(),this.query(r,{priority:n}).then(i=>t.queryResult(i).update(),i=>{t.queryError(i),this._logger.error(i)})}requestQuery(t,r){return this.filterGroups.get(t.filterBy)?.reset(),r?this.updateClient(t,r):t.update()}async connect(t){let{clients:r,filterGroups:n,indexes:i}=this;if(r.has(t))throw new Error("Client already connected.");r.add(t),t.coordinator=this;let o=t.fields();o?.length&&t.fieldInfo(await TU(this,o));let s=t.filterBy;if(s)if(n.has(s))n.get(s).add(t);else{let a=new D1(this,s,i);n.set(s,a.add(t))}t.requestQuery()}disconnect(t){let{clients:r,filterGroups:n}=this;r.has(t)&&(r.delete(t),n.get(t.filterBy)?.remove(t),t.coordinator=null)}};var N1=class{constructor(){this._callbacks=new Map}addEventListener(t,r){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new mE}),this._callbacks.get(t).callbacks.add(r)}removeEventListener(t,r){let n=this._callbacks.get(t);n&&n.callbacks.delete(r)}willEmit(t,r){return r}emitQueueFilter(t,r){return null}cancel(t){this._callbacks.get(t)?.queue.clear()}emit(t,r){let n=this._callbacks.get(t)||{};if(n.pending)n.queue.enqueue(r,this.emitQueueFilter(t,r));else{let i=this.willEmit(t,r),{callbacks:o,queue:s}=n;if(o?.size){let a=Promise.allSettled(Array.from(o,c=>c(i))).then(()=>{n.pending=null,s.isEmpty()||this.emit(t,s.dequeue())});n.pending=a}}}},mE=class{constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,r){let n={value:t};if(r&&this.next){let i=this;for(;i.next;)r(i.next.value)?i=i.next:i.next=i.next.next;i.next=n}else this.next=n}dequeue(){let{next:t}=this;return this.next=t?.next,t?.value}};function Xy(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?WK(e,t):!0}function WK(e,t){if(e.length!==t.length)return!0;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!0;return!1}function gi(e){return e instanceof Nl}var Nl=class e extends N1{constructor(t){super(),this._value=t}static value(t){return new e(t)}static array(t){if(t.some(r=>gi(r))){let r=new e,n=()=>{r.update(t.map(i=>gi(i)?i.value:i))};return n(),t.forEach(i=>gi(i)?i.addEventListener("value",n):0),r}return new e(t)}get value(){return this._value}update(t,{force:r}={}){return Xy(this._value,t)||r?this.emit("value",t):this.cancel("value"),this}willEmit(t,r){return t==="value"&&(this._value=r),r}};function mo(e){return e instanceof sc}var sc=class e extends Nl{static intersect({cross:t=!1}={}){return new e(new pf({cross:t}))}static union({cross:t=!1}={}){return new e(new pf({cross:t,union:!0}))}static single({cross:t=!1}={}){return new e(new pf({cross:t,single:!0}))}static crossfilter(){return new e(new pf({cross:!0}))}constructor(t=new pf){super([]),this._resolved=this._value,this._resolver=t}clone(){let t=new e(this._resolver);return t._value=t._resolved=this._value,t}remove(t){let r=this.clone();return r._value=r._resolved=r._resolver.resolve(this._resolved,{source:t}),r._value.active={source:t},r}get active(){return this.clauses.active}get value(){return this.active?.value}get clauses(){return super.value}get single(){return this._resolver.single}activate(t){this.emit("activate",t)}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,super.update(this._resolved)}willEmit(t,r){return t==="value"?(this._value=r,this.value):r}emitQueueFilter(t,r){return t==="value"?this._resolver.queueFilter(r):null}skip(t,r){return this._resolver.skip(t,r)}predicate(t,r=!1){let{clauses:n}=this,i=r?null:n.active;return this._resolver.predicate(n,i,t)}},pf=class{constructor({union:t,cross:r,single:n}={}){this.union=!!t,this.cross=!!r,this.single=!!n}resolve(t,r,n=!1){let{source:i,predicate:o}=r,s=t.filter(c=>i!==c.source),a=this.single?[]:s;return this.single&&n&&s.forEach(c=>c.source?.reset?.()),o&&a.push(r),a}skip(t,r){return this.cross&&r?.clients?.has(t)}predicate(t,r,n){let{union:i}=this;if(this.skip(n,r))return;let o=t.filter(s=>!this.skip(n,s)).map(s=>s.predicate);return i&&o.length>1?lf(o):o}queueFilter(t){if(this.cross){let r=t.active?.source;return n=>n.active?.source!==r}return null}};function MU(e="http://localhost:3000/"){return{async query(t){let r=fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return t.type==="exec"?r:t.type==="arrow"?af(r):(await r).json()}}}var wE={};Ir(wE,{compareArrayLike:()=>_E,joinUint8Arrays:()=>ki,memcpy:()=>sh,rebaseValueOffsets:()=>P1,toArrayBufferView:()=>ee,toArrayBufferViewAsyncIterator:()=>Jo,toArrayBufferViewIterator:()=>Gs,toBigInt64Array:()=>JK,toBigUint64Array:()=>rQ,toFloat32Array:()=>nQ,toFloat32ArrayAsyncIterator:()=>xQ,toFloat32ArrayIterator:()=>fQ,toFloat64Array:()=>iQ,toFloat64ArrayAsyncIterator:()=>_Q,toFloat64ArrayIterator:()=>dQ,toInt16Array:()=>QK,toInt16ArrayAsyncIterator:()=>mQ,toInt16ArrayIterator:()=>aQ,toInt32Array:()=>mf,toInt32ArrayAsyncIterator:()=>yQ,toInt32ArrayIterator:()=>cQ,toInt8Array:()=>KK,toInt8ArrayAsyncIterator:()=>pQ,toInt8ArrayIterator:()=>sQ,toUint16Array:()=>tQ,toUint16ArrayAsyncIterator:()=>gQ,toUint16ArrayIterator:()=>lQ,toUint32Array:()=>eQ,toUint32ArrayAsyncIterator:()=>bQ,toUint32ArrayIterator:()=>uQ,toUint8Array:()=>Xt,toUint8ArrayAsyncIterator:()=>xE,toUint8ArrayIterator:()=>bE,toUint8ClampedArray:()=>oQ,toUint8ClampedArrayAsyncIterator:()=>wQ,toUint8ClampedArrayIterator:()=>hQ});var GK=new TextDecoder("utf-8"),Hy=e=>GK.decode(e),XK=new TextEncoder,Fl=e=>XK.encode(e);var HK=e=>typeof e=="number",EU=e=>typeof e=="boolean",zr=e=>typeof e=="function",Vn=e=>e!=null&&Object(e)===e,Ko=e=>Vn(e)&&zr(e.then);var Qo=e=>Vn(e)&&zr(e[Symbol.iterator]),yo=e=>Vn(e)&&zr(e[Symbol.asyncIterator]),F1=e=>Vn(e)&&Vn(e.schema);var R1=e=>Vn(e)&&"done"in e&&"value"in e;var L1=e=>Vn(e)&&zr(e.stat)&&HK(e.fd);var k1=e=>Vn(e)&&Zy(e.body),C1=e=>"_getDOMStream"in e&&"_getNodeStream"in e,DU=e=>Vn(e)&&zr(e.abort)&&zr(e.getWriter)&&!C1(e),Zy=e=>Vn(e)&&zr(e.cancel)&&zr(e.getReader)&&!C1(e),BU=e=>Vn(e)&&zr(e.end)&&zr(e.write)&&EU(e.writable)&&!C1(e),U1=e=>Vn(e)&&zr(e.read)&&zr(e.pipe)&&EU(e.readable)&&!C1(e),OU=e=>Vn(e)&&zr(e.clear)&&zr(e.bytes)&&zr(e.position)&&zr(e.setPosition)&&zr(e.capacity)&&zr(e.getBufferIdentifier)&&zr(e.createLong);var gE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function ZK(e){let t=e[0]?[e[0]]:[],r,n,i,o;for(let s,a,c=0,l=0,u=e.length;++c<u;){if(s=t[l],a=e[c],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:r,byteLength:i}=s,{byteOffset:n,byteLength:o}=a,r+i<n||n+o<r){a&&(t[++l]=a);continue}t[l]=new Uint8Array(s.buffer,r,n-r+o)}return t}function sh(e,t,r=0,n=t.byteLength){let i=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,i),s=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,i));return o.set(s,r),e}function ki(e,t){let r=ZK(e),n=r.reduce((u,f)=>u+f.byteLength,0),i,o,s,a=0,c=-1,l=Math.min(t||Number.POSITIVE_INFINITY,n);for(let u=r.length;++c<u;){if(i=r[c],o=i.subarray(0,Math.min(i.length,l-a)),l<=a+o.length){o.length<i.length?r[c]=i.subarray(o.length):o.length===i.length&&c++,s?sh(s,o,a):s=o;break}sh(s||(s=new Uint8Array(l)),o,a),a+=o.length}return[s||new Uint8Array(0),r.slice(c),n-(s?s.byteLength:0)]}function ee(e,t){let r=R1(t)?t.value:t;return r instanceof e?e===Uint8Array?new e(r.buffer,r.byteOffset,r.byteLength):r:r?(typeof r=="string"&&(r=Fl(r)),r instanceof ArrayBuffer?new e(r):r instanceof gE?new e(r):OU(r)?ee(e,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new e(0):new e(r.buffer,r.byteOffset,r.byteLength/e.BYTES_PER_ELEMENT):e.from(r)):new e(0)}var KK=e=>ee(Int8Array,e),QK=e=>ee(Int16Array,e),mf=e=>ee(Int32Array,e),JK=e=>ee(BigInt64Array,e),Xt=e=>ee(Uint8Array,e),tQ=e=>ee(Uint16Array,e),eQ=e=>ee(Uint32Array,e),rQ=e=>ee(BigUint64Array,e),nQ=e=>ee(Float32Array,e),iQ=e=>ee(Float64Array,e),oQ=e=>ee(Uint8ClampedArray,e),yE=e=>(e.next(),e);function*Gs(e,t){let r=function*(i){yield i},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gE?r(t):Qo(t)?t:r(t);return yield*yE(function*(i){let o=null;do o=i.next(yield ee(e,o));while(!o.done)}(n[Symbol.iterator]())),new e}var sQ=e=>Gs(Int8Array,e),aQ=e=>Gs(Int16Array,e),cQ=e=>Gs(Int32Array,e),bE=e=>Gs(Uint8Array,e),lQ=e=>Gs(Uint16Array,e),uQ=e=>Gs(Uint32Array,e),fQ=e=>Gs(Float32Array,e),dQ=e=>Gs(Float64Array,e),hQ=e=>Gs(Uint8ClampedArray,e);function Jo(e,t){return ze(this,arguments,function*(){if(Ko(t))return yield H(yield H(yield*Ji(fr(Jo(e,yield H(t))))));let n=function(s){return ze(this,arguments,function*(){yield yield H(yield H(s))})},i=function(s){return ze(this,arguments,function*(){yield H(yield*Ji(fr(yE(function*(a){let c=null;do c=a.next(yield c?.value);while(!c.done)}(s[Symbol.iterator]())))))})},o=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gE?n(t):Qo(t)?i(t):yo(t)?t:n(t);return yield H(yield*Ji(fr(yE(function(s){return ze(this,arguments,function*(){let a=null;do a=yield H(s.next(yield yield H(ee(e,a))));while(!a.done)})}(o[Symbol.asyncIterator]()))))),yield H(new e)})}var pQ=e=>Jo(Int8Array,e),mQ=e=>Jo(Int16Array,e),yQ=e=>Jo(Int32Array,e),xE=e=>Jo(Uint8Array,e),gQ=e=>Jo(Uint16Array,e),bQ=e=>Jo(Uint32Array,e),xQ=e=>Jo(Float32Array,e),_Q=e=>Jo(Float64Array,e),wQ=e=>Jo(Uint8ClampedArray,e);function P1(e,t,r){if(e!==0){r=r.slice(0,t);for(let n=-1,i=r.length;++n<i;)r[n]+=e}return r.subarray(0,t)}function _E(e,t){let r=0,n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[r]!==t[r])return!1;while(++r<n);return!0}var un={fromIterable(e){return $1(vQ(e))},fromAsyncIterable(e){return $1(SQ(e))},fromDOMStream(e){return $1(IQ(e))},fromNodeStream(e){return $1(TQ(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},$1=e=>(e.next(),e);function*vQ(e){let t,r=!1,n=[],i,o,s,a=0;function c(){return o==="peek"?ki(n,s)[0]:([i,n,a]=ki(n,s),i)}({cmd:o,size:s}=yield null);let l=bE(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(s-a)?l.next():l.next(s-a),!t&&i.byteLength>0&&(n.push(i),a+=i.byteLength),t||s<=a)do({cmd:o,size:s}=yield c());while(s<a);while(!t)}catch(u){(r=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{r===!1&&typeof l.return=="function"&&l.return(null)}return null}function SQ(e){return ze(this,arguments,function*(){let r,n=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?ki(i,a)[0]:([o,i,c]=ki(i,a),o)}({cmd:s,size:a}=yield yield H(null));let u=xE(e)[Symbol.asyncIterator]();try{do if({done:r,value:o}=Number.isNaN(a-c)?yield H(u.next()):yield H(u.next(a-c)),!r&&o.byteLength>0&&(i.push(o),c+=o.byteLength),r||a<=c)do({cmd:s,size:a}=yield yield H(l()));while(a<c);while(!r)}catch(f){(n=!0)&&typeof u.throw=="function"&&(yield H(u.throw(f)))}finally{n===!1&&typeof u.return=="function"&&(yield H(u.return(new Uint8Array(0))))}return yield H(null)})}function IQ(e){return ze(this,arguments,function*(){let r=!1,n=!1,i=[],o,s,a,c=0;function l(){return s==="peek"?ki(i,a)[0]:([o,i,c]=ki(i,a),o)}({cmd:s,size:a}=yield yield H(null));let u=new SE(e);try{do if({done:r,value:o}=Number.isNaN(a-c)?yield H(u.read()):yield H(u.read(a-c)),!r&&o.byteLength>0&&(i.push(Xt(o)),c+=o.byteLength),r||a<=c)do({cmd:s,size:a}=yield yield H(l()));while(a<c);while(!r)}catch(f){(n=!0)&&(yield H(u.cancel(f)))}finally{n===!1?yield H(u.cancel()):e.locked&&u.releaseLock()}return yield H(null)})}var SE=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return P(this,void 0,void 0,function*(){let{reader:r,source:n}=this;r&&(yield r.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return P(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};let r=yield this.reader.read();return!r.done&&(r.value=Xt(r)),r})}},vE=(e,t)=>{let r=i=>n([t,i]),n;return[t,r,new Promise(i=>(n=i)&&e.once(t,r))]};function TQ(e){return ze(this,arguments,function*(){let r=[],n="error",i=!1,o=null,s,a,c=0,l=[],u;function f(){return s==="peek"?ki(l,a)[0]:([u,l,c]=ki(l,a),u)}if({cmd:s,size:a}=yield yield H(null),e.isTTY)return yield yield H(new Uint8Array(0)),yield H(null);try{r[0]=vE(e,"end"),r[1]=vE(e,"error");do{if(r[2]=vE(e,"readable"),[n,o]=yield H(Promise.race(r.map(h=>h[2]))),n==="error")break;if((i=n==="end")||(Number.isFinite(a-c)?(u=Xt(e.read(a-c)),u.byteLength<a-c&&(u=Xt(e.read()))):u=Xt(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:s,size:a}=yield yield H(f()));while(a<c)}while(!i)}finally{yield H(d(r,n==="error"?o:null))}return yield H(null);function d(h,p){return u=l=null,new Promise((m,y)=>{for(let[g,b]of h)e.off(g,b);try{let g=e.destroy;g&&g.call(e,p),p=void 0}catch(g){p=g||p}finally{p!=null?y(p):m()}})}})}var er;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(er||(er={}));var je;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(je||(je={}));var Xe;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Xe||(Xe={}));var fn;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(fn||(fn={}));var Tt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Tt||(Tt={}));var jn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(jn||(jn={}));var ge;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ge||(ge={}));var N;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(N||(N={}));var go;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(go||(go={}));var VE={};Ir(VE,{clampIndex:()=>yJ,clampRange:()=>tg,createElementComparator:()=>kl});var IE={};Ir(IE,{valueToString:()=>ts});function ts(e){if(e===null)return"null";if(e===void 0)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>ts(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,r)=>typeof r=="bigint"?`${r}`:r)}var AE={};Ir(AE,{BN:()=>Qy,bigNumToBigInt:()=>RU,bigNumToString:()=>lh,isArrowBigNumSymbol:()=>NU});var NU=Symbol.for("isArrowBigNum");function es(e,...t){return t.length===0?Object.setPrototypeOf(ee(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}es.prototype[NU]=!0;es.prototype.toJSON=function(){return`"${lh(this)}"`};es.prototype.valueOf=function(){return FU(this)};es.prototype.toString=function(){return lh(this)};es.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return FU(this);case"string":return lh(this);case"default":return RU(this)}return lh(this)};function ah(...e){return es.apply(this,e)}function ch(...e){return es.apply(this,e)}function Ky(...e){return es.apply(this,e)}Object.setPrototypeOf(ah.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ch.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ky.prototype,Object.create(Uint32Array.prototype));Object.assign(ah.prototype,es.prototype,{constructor:ah,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ch.prototype,es.prototype,{constructor:ch,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Ky.prototype,es.prototype,{constructor:Ky,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function FU(e){let{buffer:t,byteOffset:r,length:n,signed:i}=e,o=new BigUint64Array(t,r,n),s=i&&o.at(-1)&BigInt(1)<<BigInt(63),a=BigInt(s?1:0),c=BigInt(0);if(s){for(let l of o)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(let l of o)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}var lh=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return TE(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return TE(e);t=t.slice();let n=1;for(let o=0;o<t.length;o++){let s=t[o],a=~s+n;t[o]=a,n&=s===0?1:0}return`-${TE(t)}`},RU=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:lh(e);function TE(e){let t="",r=new Uint32Array(2),n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer),o=-1,s=n.length-1;do{for(r[0]=n[o=0];o<s;)n[o++]=r[1]=r[0]/10,r[0]=(r[0]-r[1]*10<<16)+n[o];n[o]=r[1]=r[0]/10,r[0]=r[0]-r[1]*10,t=`${r[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}var Qy=class e{static new(t,r){switch(r){case!0:return new ah(t);case!1:return new ch(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ah(t)}return t.byteLength===16?new Ky(t):new ch(t)}static signed(t){return new ah(t)}static unsigned(t){return new ch(t)}static decimal(t){return new Ky(t)}constructor(t,r){return e.new(t,r)}};function bi(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var LU,kU,CU,UU,PU,$U,zU,VU,jU,qU,YU,WU,GU,XU,HU,ZU,KU,QU,JU,t5,ht=class e{static isNull(t){return t?.typeId===N.Null}static isInt(t){return t?.typeId===N.Int}static isFloat(t){return t?.typeId===N.Float}static isBinary(t){return t?.typeId===N.Binary}static isUtf8(t){return t?.typeId===N.Utf8}static isBool(t){return t?.typeId===N.Bool}static isDecimal(t){return t?.typeId===N.Decimal}static isDate(t){return t?.typeId===N.Date}static isTime(t){return t?.typeId===N.Time}static isTimestamp(t){return t?.typeId===N.Timestamp}static isInterval(t){return t?.typeId===N.Interval}static isDuration(t){return t?.typeId===N.Duration}static isList(t){return t?.typeId===N.List}static isStruct(t){return t?.typeId===N.Struct}static isUnion(t){return t?.typeId===N.Union}static isFixedSizeBinary(t){return t?.typeId===N.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===N.FixedSizeList}static isMap(t){return t?.typeId===N.Map}static isDictionary(t){return t?.typeId===N.Dictionary}static isDenseUnion(t){return e.isUnion(t)&&t.mode===je.Dense}static isSparseUnion(t){return e.isUnion(t)&&t.mode===je.Sparse}get typeId(){return N.NONE}};LU=Symbol.toStringTag;ht[LU]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(ht.prototype);var qn=class extends ht{toString(){return"Null"}get typeId(){return N.Null}};kU=Symbol.toStringTag;qn[kU]=(e=>e[Symbol.toStringTag]="Null")(qn.prototype);var xr=class extends ht{constructor(t,r){super(),this.isSigned=t,this.bitWidth=r}get typeId(){return N.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};CU=Symbol.toStringTag;xr[CU]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(xr.prototype);var z1=class extends xr{constructor(){super(!0,8)}get ArrayType(){return Int8Array}},V1=class extends xr{constructor(){super(!0,16)}get ArrayType(){return Int16Array}},Xs=class extends xr{constructor(){super(!0,32)}get ArrayType(){return Int32Array}},j1=class extends xr{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}},q1=class extends xr{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}},Y1=class extends xr{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}},W1=class extends xr{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}},G1=class extends xr{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(z1.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(V1.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Xs.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(j1.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(q1.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Y1.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(W1.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(G1.prototype,"ArrayType",{value:BigUint64Array});var xi=class extends ht{constructor(t){super(),this.precision=t}get typeId(){return N.Float}get ArrayType(){switch(this.precision){case Xe.HALF:return Uint16Array;case Xe.SINGLE:return Float32Array;case Xe.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};UU=Symbol.toStringTag;xi[UU]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(xi.prototype);var X1=class extends xi{constructor(){super(Xe.HALF)}},H1=class extends xi{constructor(){super(Xe.SINGLE)}},Z1=class extends xi{constructor(){super(Xe.DOUBLE)}};Object.defineProperty(X1.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(H1.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Z1.prototype,"ArrayType",{value:Float64Array});var ac=class extends ht{constructor(){super()}get typeId(){return N.Binary}toString(){return"Binary"}};PU=Symbol.toStringTag;ac[PU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(ac.prototype);var cc=class extends ht{constructor(){super()}get typeId(){return N.Utf8}toString(){return"Utf8"}};$U=Symbol.toStringTag;cc[$U]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(cc.prototype);var lc=class extends ht{constructor(){super()}get typeId(){return N.Bool}toString(){return"Bool"}};zU=Symbol.toStringTag;lc[zU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(lc.prototype);var uc=class extends ht{constructor(t,r,n=128){super(),this.scale=t,this.precision=r,this.bitWidth=n}get typeId(){return N.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};VU=Symbol.toStringTag;uc[VU]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(uc.prototype);var fc=class extends ht{constructor(t){super(),this.unit=t}get typeId(){return N.Date}toString(){return`Date${(this.unit+1)*32}<${fn[this.unit]}>`}};jU=Symbol.toStringTag;fc[jU]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(fc.prototype);var rs=class extends ht{constructor(t,r){super(),this.unit=t,this.bitWidth=r}get typeId(){return N.Time}toString(){return`Time${this.bitWidth}<${Tt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};qU=Symbol.toStringTag;rs[qU]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(rs.prototype);var dc=class extends ht{constructor(t,r){super(),this.unit=t,this.timezone=r}get typeId(){return N.Timestamp}toString(){return`Timestamp<${Tt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};YU=Symbol.toStringTag;dc[YU]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(dc.prototype);var hc=class extends ht{constructor(t){super(),this.unit=t}get typeId(){return N.Interval}toString(){return`Interval<${jn[this.unit]}>`}};WU=Symbol.toStringTag;hc[WU]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(hc.prototype);var pc=class extends ht{constructor(t){super(),this.unit=t}get typeId(){return N.Duration}toString(){return`Duration<${Tt[this.unit]}>`}};GU=Symbol.toStringTag;pc[GU]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(pc.prototype);var ns=class extends ht{constructor(t){super(),this.children=[t]}get typeId(){return N.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};XU=Symbol.toStringTag;ns[XU]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ns.prototype);var qe=class extends ht{constructor(t){super(),this.children=t}get typeId(){return N.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};HU=Symbol.toStringTag;qe[HU]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(qe.prototype);var is=class extends ht{constructor(t,r,n){super(),this.mode=t,this.children=n,this.typeIds=r=Int32Array.from(r),this.typeIdToChildIndex=r.reduce((i,o,s)=>(i[o]=s)&&i||i,Object.create(null))}get typeId(){return N.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};ZU=Symbol.toStringTag;is[ZU]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(is.prototype);var mc=class extends ht{constructor(t){super(),this.byteWidth=t}get typeId(){return N.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};KU=Symbol.toStringTag;mc[KU]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(mc.prototype);var os=class extends ht{constructor(t,r){super(),this.listSize=t,this.children=[r]}get typeId(){return N.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};QU=Symbol.toStringTag;os[QU]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(os.prototype);var ss=class extends ht{constructor(t,r=!1){var n,i,o;if(super(),this.children=[t],this.keysSorted=r,t&&(t.name="entries",!((n=t?.type)===null||n===void 0)&&n.children)){let s=(i=t?.type)===null||i===void 0?void 0:i.children[0];s&&(s.name="key");let a=(o=t?.type)===null||o===void 0?void 0:o.children[1];a&&(a.name="value")}}get typeId(){return N.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};JU=Symbol.toStringTag;ss[JU]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(ss.prototype);var AQ=(e=>()=>++e)(-1),Ci=class extends ht{constructor(t,r,n,i){super(),this.indices=r,this.dictionary=t,this.isOrdered=i||!1,this.id=n==null?AQ():bi(n)}get typeId(){return N.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};t5=Symbol.toStringTag;Ci[t5]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Ci.prototype);function Ui(e){let t=e;switch(e.typeId){case N.Decimal:return e.bitWidth/32;case N.Timestamp:return 2;case N.Date:return 1+t.unit;case N.Interval:return 1+t.unit;case N.FixedSizeList:return t.listSize;case N.FixedSizeBinary:return t.byteWidth;default:return 1}}var mt=class{visitMany(t,...r){return t.map((n,i)=>this.visit(n,...r.map(o=>o[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,r=!0){return MQ(this,t,r)}getVisitFnByTypeId(t,r=!0){return uh(this,t,r)}visitNull(t,...r){return null}visitBool(t,...r){return null}visitInt(t,...r){return null}visitFloat(t,...r){return null}visitUtf8(t,...r){return null}visitBinary(t,...r){return null}visitFixedSizeBinary(t,...r){return null}visitDate(t,...r){return null}visitTimestamp(t,...r){return null}visitTime(t,...r){return null}visitDecimal(t,...r){return null}visitList(t,...r){return null}visitStruct(t,...r){return null}visitUnion(t,...r){return null}visitDictionary(t,...r){return null}visitInterval(t,...r){return null}visitDuration(t,...r){return null}visitFixedSizeList(t,...r){return null}visitMap(t,...r){return null}};function MQ(e,t,r=!0){return typeof t=="number"?uh(e,t,r):typeof t=="string"&&t in N?uh(e,N[t],r):t&&t instanceof ht?uh(e,e5(t),r):t?.type&&t.type instanceof ht?uh(e,e5(t.type),r):uh(e,N.NONE,r)}function uh(e,t,r=!0){let n=null;switch(t){case N.Null:n=e.visitNull;break;case N.Bool:n=e.visitBool;break;case N.Int:n=e.visitInt;break;case N.Int8:n=e.visitInt8||e.visitInt;break;case N.Int16:n=e.visitInt16||e.visitInt;break;case N.Int32:n=e.visitInt32||e.visitInt;break;case N.Int64:n=e.visitInt64||e.visitInt;break;case N.Uint8:n=e.visitUint8||e.visitInt;break;case N.Uint16:n=e.visitUint16||e.visitInt;break;case N.Uint32:n=e.visitUint32||e.visitInt;break;case N.Uint64:n=e.visitUint64||e.visitInt;break;case N.Float:n=e.visitFloat;break;case N.Float16:n=e.visitFloat16||e.visitFloat;break;case N.Float32:n=e.visitFloat32||e.visitFloat;break;case N.Float64:n=e.visitFloat64||e.visitFloat;break;case N.Utf8:n=e.visitUtf8;break;case N.Binary:n=e.visitBinary;break;case N.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case N.Date:n=e.visitDate;break;case N.DateDay:n=e.visitDateDay||e.visitDate;break;case N.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case N.Timestamp:n=e.visitTimestamp;break;case N.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case N.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case N.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case N.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case N.Time:n=e.visitTime;break;case N.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case N.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case N.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case N.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case N.Decimal:n=e.visitDecimal;break;case N.List:n=e.visitList;break;case N.Struct:n=e.visitStruct;break;case N.Union:n=e.visitUnion;break;case N.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case N.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case N.Dictionary:n=e.visitDictionary;break;case N.Interval:n=e.visitInterval;break;case N.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case N.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case N.Duration:n=e.visitDuration;break;case N.DurationSecond:n=e.visitDurationSecond||e.visitDuration;break;case N.DurationMillisecond:n=e.visitDurationMillisecond||e.visitDuration;break;case N.DurationMicrosecond:n=e.visitDurationMicrosecond||e.visitDuration;break;case N.DurationNanosecond:n=e.visitDurationNanosecond||e.visitDuration;break;case N.FixedSizeList:n=e.visitFixedSizeList;break;case N.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${N[t]}'`)}function e5(e){switch(e.typeId){case N.Null:return N.Null;case N.Int:{let{bitWidth:t,isSigned:r}=e;switch(t){case 8:return r?N.Int8:N.Uint8;case 16:return r?N.Int16:N.Uint16;case 32:return r?N.Int32:N.Uint32;case 64:return r?N.Int64:N.Uint64}return N.Int}case N.Float:switch(e.precision){case Xe.HALF:return N.Float16;case Xe.SINGLE:return N.Float32;case Xe.DOUBLE:return N.Float64}return N.Float;case N.Binary:return N.Binary;case N.Utf8:return N.Utf8;case N.Bool:return N.Bool;case N.Decimal:return N.Decimal;case N.Time:switch(e.unit){case Tt.SECOND:return N.TimeSecond;case Tt.MILLISECOND:return N.TimeMillisecond;case Tt.MICROSECOND:return N.TimeMicrosecond;case Tt.NANOSECOND:return N.TimeNanosecond}return N.Time;case N.Timestamp:switch(e.unit){case Tt.SECOND:return N.TimestampSecond;case Tt.MILLISECOND:return N.TimestampMillisecond;case Tt.MICROSECOND:return N.TimestampMicrosecond;case Tt.NANOSECOND:return N.TimestampNanosecond}return N.Timestamp;case N.Date:switch(e.unit){case fn.DAY:return N.DateDay;case fn.MILLISECOND:return N.DateMillisecond}return N.Date;case N.Interval:switch(e.unit){case jn.DAY_TIME:return N.IntervalDayTime;case jn.YEAR_MONTH:return N.IntervalYearMonth}return N.Interval;case N.Duration:switch(e.unit){case Tt.SECOND:return N.DurationSecond;case Tt.MILLISECOND:return N.DurationMillisecond;case Tt.MICROSECOND:return N.DurationMicrosecond;case Tt.NANOSECOND:return N.DurationNanosecond}return N.Duration;case N.Map:return N.Map;case N.List:return N.List;case N.Struct:return N.Struct;case N.Union:switch(e.mode){case je.Dense:return N.DenseUnion;case je.Sparse:return N.SparseUnion}return N.Union;case N.FixedSizeBinary:return N.FixedSizeBinary;case N.FixedSizeList:return N.FixedSizeList;case N.Dictionary:return N.Dictionary}throw new Error(`Unrecognized type '${N[e.typeId]}'`)}mt.prototype.visitInt8=null;mt.prototype.visitInt16=null;mt.prototype.visitInt32=null;mt.prototype.visitInt64=null;mt.prototype.visitUint8=null;mt.prototype.visitUint16=null;mt.prototype.visitUint32=null;mt.prototype.visitUint64=null;mt.prototype.visitFloat16=null;mt.prototype.visitFloat32=null;mt.prototype.visitFloat64=null;mt.prototype.visitDateDay=null;mt.prototype.visitDateMillisecond=null;mt.prototype.visitTimestampSecond=null;mt.prototype.visitTimestampMillisecond=null;mt.prototype.visitTimestampMicrosecond=null;mt.prototype.visitTimestampNanosecond=null;mt.prototype.visitTimeSecond=null;mt.prototype.visitTimeMillisecond=null;mt.prototype.visitTimeMicrosecond=null;mt.prototype.visitTimeNanosecond=null;mt.prototype.visitDenseUnion=null;mt.prototype.visitSparseUnion=null;mt.prototype.visitIntervalDayTime=null;mt.prototype.visitIntervalYearMonth=null;mt.prototype.visitDuration=null;mt.prototype.visitDurationSecond=null;mt.prototype.visitDurationMillisecond=null;mt.prototype.visitDurationMicrosecond=null;mt.prototype.visitDurationNanosecond=null;var ME={};Ir(ME,{float64ToUint16:()=>Jy,uint16ToFloat64:()=>K1});var r5=new Float64Array(1),fh=new Uint32Array(r5.buffer);function K1(e){let t=(e&31744)>>10,r=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(r?Number.NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*Math.pow(2,t-15)*(1+r)}function Jy(e){if(e!==e)return 32256;r5[0]=e;let t=(fh[1]&2147483648)>>16&65535,r=fh[1]&2146435072,n=0;return r>=1089470464?fh[0]>0?r=31744:(r=(r&2080374784)>>16,n=(fh[1]&1048575)>>10):r<=1056964608?(n=1048576+(fh[1]&1048575),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=(fh[1]&1048575)+512>>10),t|r|n&65535}var kt=class extends mt{};function qt(e){return(t,r,n)=>{if(t.setValid(r,n!=null))return e(t,r,n)}}var EQ=(e,t,r)=>{e[t]=Math.trunc(r/864e5)},EE=(e,t,r)=>{e[t]=Math.trunc(r%4294967296),e[t+1]=Math.trunc(r/4294967296)},DQ=(e,t,r)=>{e[t]=Math.trunc(r*1e3%4294967296),e[t+1]=Math.trunc(r*1e3/4294967296)},BQ=(e,t,r)=>{e[t]=Math.trunc(r*1e6%4294967296),e[t+1]=Math.trunc(r*1e6/4294967296)},n5=(e,t,r,n)=>{if(r+1<t.length){let{[r]:i,[r+1]:o}=t;e.set(n.subarray(0,o-i),i)}},OQ=({offset:e,values:t},r,n)=>{let i=e+r;n?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},yc=({values:e},t,r)=>{e[t]=r},DE=({values:e},t,r)=>{e[t]=r},i5=({values:e},t,r)=>{e[t]=Jy(r)},NQ=(e,t,r)=>{switch(e.type.precision){case Xe.HALF:return i5(e,t,r);case Xe.SINGLE:case Xe.DOUBLE:return DE(e,t,r)}},Q1=({values:e},t,r)=>{EQ(e,t,r.valueOf())},J1=({values:e},t,r)=>{EE(e,t*2,r.valueOf())},BE=({stride:e,values:t},r,n)=>{t.set(n.subarray(0,e),e*r)},FQ=({values:e,valueOffsets:t},r,n)=>n5(e,t,r,n),RQ=({values:e,valueOffsets:t},r,n)=>{n5(e,t,r,Fl(n))},OE=(e,t,r)=>{e.type.unit===fn.DAY?Q1(e,t,r):J1(e,t,r)},tw=({values:e},t,r)=>EE(e,t*2,r/1e3),ew=({values:e},t,r)=>EE(e,t*2,r),rw=({values:e},t,r)=>DQ(e,t*2,r),nw=({values:e},t,r)=>BQ(e,t*2,r),NE=(e,t,r)=>{switch(e.type.unit){case Tt.SECOND:return tw(e,t,r);case Tt.MILLISECOND:return ew(e,t,r);case Tt.MICROSECOND:return rw(e,t,r);case Tt.NANOSECOND:return nw(e,t,r)}},iw=({values:e},t,r)=>{e[t]=r},ow=({values:e},t,r)=>{e[t]=r},sw=({values:e},t,r)=>{e[t]=r},aw=({values:e},t,r)=>{e[t]=r},FE=(e,t,r)=>{switch(e.type.unit){case Tt.SECOND:return iw(e,t,r);case Tt.MILLISECOND:return ow(e,t,r);case Tt.MICROSECOND:return sw(e,t,r);case Tt.NANOSECOND:return aw(e,t,r)}},RE=({values:e,stride:t},r,n)=>{e.set(n.subarray(0,t),t*r)},LQ=(e,t,r)=>{let n=e.children[0],i=e.valueOffsets,o=dn.getVisitFn(n);if(Array.isArray(r))for(let s=-1,a=i[t],c=i[t+1];a<c;)o(n,a++,r[++s]);else for(let s=-1,a=i[t],c=i[t+1];a<c;)o(n,a++,r.get(++s))},kQ=(e,t,r)=>{let n=e.children[0],{valueOffsets:i}=e,o=dn.getVisitFn(n),{[t]:s,[t+1]:a}=i,c=r instanceof Map?r.entries():Object.entries(r);for(let l of c)if(o(n,s,l),++s>=a)break},CQ=(e,t)=>(r,n,i,o)=>n&&r(n,e,t[o]),UQ=(e,t)=>(r,n,i,o)=>n&&r(n,e,t.get(o)),PQ=(e,t)=>(r,n,i,o)=>n&&r(n,e,t.get(i.name)),$Q=(e,t)=>(r,n,i,o)=>n&&r(n,e,t[i.name]),zQ=(e,t,r)=>{let n=e.type.children.map(o=>dn.getVisitFn(o.type)),i=r instanceof Map?PQ(t,r):r instanceof ue?UQ(t,r):Array.isArray(r)?CQ(t,r):$Q(t,r);e.type.children.forEach((o,s)=>i(n[s],e.children[s],o,s))},VQ=(e,t,r)=>{e.type.mode===je.Dense?o5(e,t,r):s5(e,t,r)},o5=(e,t,r)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];dn.visit(i,e.valueOffsets[t],r)},s5=(e,t,r)=>{let n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];dn.visit(i,t,r)},jQ=(e,t,r)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],r)},LE=(e,t,r)=>{e.type.unit===jn.DAY_TIME?cw(e,t,r):lw(e,t,r)},cw=({values:e},t,r)=>{e.set(r.subarray(0,2),2*t)},lw=({values:e},t,r)=>{e[t]=r[0]*12+r[1]%12},uw=({values:e},t,r)=>{e[t]=r},fw=({values:e},t,r)=>{e[t]=r},dw=({values:e},t,r)=>{e[t]=r},hw=({values:e},t,r)=>{e[t]=r},kE=(e,t,r)=>{switch(e.type.unit){case Tt.SECOND:return uw(e,t,r);case Tt.MILLISECOND:return fw(e,t,r);case Tt.MICROSECOND:return dw(e,t,r);case Tt.NANOSECOND:return hw(e,t,r)}},qQ=(e,t,r)=>{let{stride:n}=e,i=e.children[0],o=dn.getVisitFn(i);if(Array.isArray(r))for(let s=-1,a=t*n;++s<n;)o(i,a+s,r[s]);else for(let s=-1,a=t*n;++s<n;)o(i,a+s,r.get(s))};kt.prototype.visitBool=qt(OQ);kt.prototype.visitInt=qt(yc);kt.prototype.visitInt8=qt(yc);kt.prototype.visitInt16=qt(yc);kt.prototype.visitInt32=qt(yc);kt.prototype.visitInt64=qt(yc);kt.prototype.visitUint8=qt(yc);kt.prototype.visitUint16=qt(yc);kt.prototype.visitUint32=qt(yc);kt.prototype.visitUint64=qt(yc);kt.prototype.visitFloat=qt(NQ);kt.prototype.visitFloat16=qt(i5);kt.prototype.visitFloat32=qt(DE);kt.prototype.visitFloat64=qt(DE);kt.prototype.visitUtf8=qt(RQ);kt.prototype.visitBinary=qt(FQ);kt.prototype.visitFixedSizeBinary=qt(BE);kt.prototype.visitDate=qt(OE);kt.prototype.visitDateDay=qt(Q1);kt.prototype.visitDateMillisecond=qt(J1);kt.prototype.visitTimestamp=qt(NE);kt.prototype.visitTimestampSecond=qt(tw);kt.prototype.visitTimestampMillisecond=qt(ew);kt.prototype.visitTimestampMicrosecond=qt(rw);kt.prototype.visitTimestampNanosecond=qt(nw);kt.prototype.visitTime=qt(FE);kt.prototype.visitTimeSecond=qt(iw);kt.prototype.visitTimeMillisecond=qt(ow);kt.prototype.visitTimeMicrosecond=qt(sw);kt.prototype.visitTimeNanosecond=qt(aw);kt.prototype.visitDecimal=qt(RE);kt.prototype.visitList=qt(LQ);kt.prototype.visitStruct=qt(zQ);kt.prototype.visitUnion=qt(VQ);kt.prototype.visitDenseUnion=qt(o5);kt.prototype.visitSparseUnion=qt(s5);kt.prototype.visitDictionary=qt(jQ);kt.prototype.visitInterval=qt(LE);kt.prototype.visitIntervalDayTime=qt(cw);kt.prototype.visitIntervalYearMonth=qt(lw);kt.prototype.visitDuration=qt(kE);kt.prototype.visitDurationSecond=qt(uw);kt.prototype.visitDurationMillisecond=qt(fw);kt.prototype.visitDurationMicrosecond=qt(dw);kt.prototype.visitDurationNanosecond=qt(hw);kt.prototype.visitFixedSizeList=qt(qQ);kt.prototype.visitMap=qt(kQ);var dn=new kt;var as=Symbol.for("parent"),dh=Symbol.for("rowIndex"),Rl=class{constructor(t,r){return this[as]=t,this[dh]=r,new Proxy(this,new UE)}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[dh],r=this[as],n=r.type.children,i={};for(let o=-1,s=n.length;++o<s;)i[n[o].name]=Dr.visit(r.children[o],t);return i}toString(){return`{${[...this].map(([t,r])=>`${ts(t)}: ${ts(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new CE(this[as],this[dh])}},CE=class{constructor(t,r){this.childIndex=0,this.children=t.children,this.rowIndex=r,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Dr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(Rl.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[as]:{writable:!0,enumerable:!1,configurable:!1,value:null},[dh]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});var UE=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[as].type.children.map(r=>r.name)}has(t,r){return t[as].type.children.findIndex(n=>n.name===r)!==-1}getOwnPropertyDescriptor(t,r){if(t[as].type.children.findIndex(n=>n.name===r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];let n=t[as].type.children.findIndex(i=>i.name===r);if(n!==-1){let i=Dr.visit(t[as].children[n],t[dh]);return Reflect.set(t,r,i),i}}set(t,r,n){let i=t[as].type.children.findIndex(o=>o.name===r);return i!==-1?(dn.visit(t[as].children[i],t[dh],n),Reflect.set(t,r,n)):Reflect.has(t,r)||typeof r=="symbol"?Reflect.set(t,r,n):!1}};var Dt=class extends mt{};function $t(e){return(t,r)=>t.getValid(r)?e(t,r):null}var YQ=(e,t)=>864e5*e[t],PE=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),WQ=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,GQ=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,a5=e=>new Date(e),XQ=(e,t)=>a5(YQ(e,t)),HQ=(e,t)=>a5(PE(e,t)),ZQ=(e,t)=>null,c5=(e,t,r)=>{if(r+1>=t.length)return null;let n=t[r],i=t[r+1];return e.subarray(n,i)},KQ=({offset:e,values:t},r)=>{let n=e+r;return(t[n>>3]&1<<n%8)!==0},l5=({values:e},t)=>XQ(e,t),u5=({values:e},t)=>HQ(e,t*2),Ll=({stride:e,values:t},r)=>t[e*r],QQ=({stride:e,values:t},r)=>K1(t[e*r]),f5=({values:e},t)=>e[t],JQ=({stride:e,values:t},r)=>t.subarray(e*r,e*(r+1)),tJ=({values:e,valueOffsets:t},r)=>c5(e,t,r),eJ=({values:e,valueOffsets:t},r)=>{let n=c5(e,t,r);return n!==null?Hy(n):null},rJ=({values:e},t)=>e[t],nJ=({type:e,values:t},r)=>e.precision!==Xe.HALF?t[r]:K1(t[r]),iJ=(e,t)=>e.type.unit===fn.DAY?l5(e,t):u5(e,t),d5=({values:e},t)=>1e3*PE(e,t*2),h5=({values:e},t)=>PE(e,t*2),p5=({values:e},t)=>WQ(e,t*2),m5=({values:e},t)=>GQ(e,t*2),oJ=(e,t)=>{switch(e.type.unit){case Tt.SECOND:return d5(e,t);case Tt.MILLISECOND:return h5(e,t);case Tt.MICROSECOND:return p5(e,t);case Tt.NANOSECOND:return m5(e,t)}},y5=({values:e},t)=>e[t],g5=({values:e},t)=>e[t],b5=({values:e},t)=>e[t],x5=({values:e},t)=>e[t],sJ=(e,t)=>{switch(e.type.unit){case Tt.SECOND:return y5(e,t);case Tt.MILLISECOND:return g5(e,t);case Tt.MICROSECOND:return b5(e,t);case Tt.NANOSECOND:return x5(e,t)}},aJ=({values:e,stride:t},r)=>Qy.decimal(e.subarray(t*r,t*(r+1))),cJ=(e,t)=>{let{valueOffsets:r,stride:n,children:i}=e,{[t*n]:o,[t*n+1]:s}=r,c=i[0].slice(o,s-o);return new ue([c])},lJ=(e,t)=>{let{valueOffsets:r,children:n}=e,{[t]:i,[t+1]:o}=r,s=n[0];return new Hs(s.slice(i,o-i))},uJ=(e,t)=>new Rl(e,t),fJ=(e,t)=>e.type.mode===je.Dense?_5(e,t):w5(e,t),_5=(e,t)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Dr.visit(n,e.valueOffsets[t])},w5=(e,t)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Dr.visit(n,t)},dJ=(e,t)=>{var r;return(r=e.dictionary)===null||r===void 0?void 0:r.get(e.values[t])},hJ=(e,t)=>e.type.unit===jn.DAY_TIME?v5(e,t):S5(e,t),v5=({values:e},t)=>e.subarray(2*t,2*(t+1)),S5=({values:e},t)=>{let r=e[t],n=new Int32Array(2);return n[0]=Math.trunc(r/12),n[1]=Math.trunc(r%12),n},I5=({values:e},t)=>e[t],T5=({values:e},t)=>e[t],A5=({values:e},t)=>e[t],M5=({values:e},t)=>e[t],pJ=(e,t)=>{switch(e.type.unit){case Tt.SECOND:return I5(e,t);case Tt.MILLISECOND:return T5(e,t);case Tt.MICROSECOND:return A5(e,t);case Tt.NANOSECOND:return M5(e,t)}},mJ=(e,t)=>{let{stride:r,children:n}=e,o=n[0].slice(t*r,r);return new ue([o])};Dt.prototype.visitNull=$t(ZQ);Dt.prototype.visitBool=$t(KQ);Dt.prototype.visitInt=$t(rJ);Dt.prototype.visitInt8=$t(Ll);Dt.prototype.visitInt16=$t(Ll);Dt.prototype.visitInt32=$t(Ll);Dt.prototype.visitInt64=$t(f5);Dt.prototype.visitUint8=$t(Ll);Dt.prototype.visitUint16=$t(Ll);Dt.prototype.visitUint32=$t(Ll);Dt.prototype.visitUint64=$t(f5);Dt.prototype.visitFloat=$t(nJ);Dt.prototype.visitFloat16=$t(QQ);Dt.prototype.visitFloat32=$t(Ll);Dt.prototype.visitFloat64=$t(Ll);Dt.prototype.visitUtf8=$t(eJ);Dt.prototype.visitBinary=$t(tJ);Dt.prototype.visitFixedSizeBinary=$t(JQ);Dt.prototype.visitDate=$t(iJ);Dt.prototype.visitDateDay=$t(l5);Dt.prototype.visitDateMillisecond=$t(u5);Dt.prototype.visitTimestamp=$t(oJ);Dt.prototype.visitTimestampSecond=$t(d5);Dt.prototype.visitTimestampMillisecond=$t(h5);Dt.prototype.visitTimestampMicrosecond=$t(p5);Dt.prototype.visitTimestampNanosecond=$t(m5);Dt.prototype.visitTime=$t(sJ);Dt.prototype.visitTimeSecond=$t(y5);Dt.prototype.visitTimeMillisecond=$t(g5);Dt.prototype.visitTimeMicrosecond=$t(b5);Dt.prototype.visitTimeNanosecond=$t(x5);Dt.prototype.visitDecimal=$t(aJ);Dt.prototype.visitList=$t(cJ);Dt.prototype.visitStruct=$t(uJ);Dt.prototype.visitUnion=$t(fJ);Dt.prototype.visitDenseUnion=$t(_5);Dt.prototype.visitSparseUnion=$t(w5);Dt.prototype.visitDictionary=$t(dJ);Dt.prototype.visitInterval=$t(hJ);Dt.prototype.visitIntervalDayTime=$t(v5);Dt.prototype.visitIntervalYearMonth=$t(S5);Dt.prototype.visitDuration=$t(pJ);Dt.prototype.visitDurationSecond=$t(I5);Dt.prototype.visitDurationMillisecond=$t(T5);Dt.prototype.visitDurationMicrosecond=$t(A5);Dt.prototype.visitDurationNanosecond=$t(M5);Dt.prototype.visitFixedSizeList=$t(mJ);Dt.prototype.visitMap=$t(lJ);var Dr=new Dt;var bo=Symbol.for("keys"),hh=Symbol.for("vals"),Hs=class{constructor(t){return this[bo]=new ue([t.children[0]]).memoize(),this[hh]=t.children[1],new Proxy(this,new zE)}[Symbol.iterator](){return new $E(this[bo],this[hh])}get size(){return this[bo].length}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[bo],r=this[hh],n={};for(let i=-1,o=t.length;++i<o;)n[t.get(i)]=Dr.visit(r,i);return n}toString(){return`{${[...this].map(([t,r])=>`${ts(t)}: ${ts(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},$E=class{constructor(t,r){this.keys=t,this.vals=r,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){let t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Dr.visit(this.vals,t)]})}},zE=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[bo].toArray().map(String)}has(t,r){return t[bo].includes(r)}getOwnPropertyDescriptor(t,r){if(t[bo].indexOf(r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];let n=t[bo].indexOf(r);if(n!==-1){let i=Dr.visit(Reflect.get(t,hh),n);return Reflect.set(t,r,i),i}}set(t,r,n){let i=t[bo].indexOf(r);return i!==-1?(dn.visit(Reflect.get(t,hh),i,n),Reflect.set(t,r,n)):Reflect.has(t,r)?Reflect.set(t,r,n):!1}};Object.defineProperties(Hs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[bo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[hh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function yJ(e,t,r){let n=e.length,i=t>-1?t:n+t%n;return r?r(e,i):i}var E5;function tg(e,t,r,n){let{length:i=0}=e,o=typeof t!="number"?0:t,s=typeof r!="number"?i:r;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(E5=o,o=s,s=E5),s>i&&(s=i),n?n(e,o,s):[o,s]}var D5=e=>e!==e;function kl(e){if(typeof e!=="object"||e===null)return D5(e)?D5:r=>r===e;if(e instanceof Date){let r=e.valueOf();return n=>n instanceof Date?n.valueOf()===r:!1}return ArrayBuffer.isView(e)?r=>r?_E(e,r):!1:e instanceof Map?bJ(e):Array.isArray(e)?gJ(e):e instanceof ue?xJ(e):_J(e,!0)}function gJ(e){let t=[];for(let r=-1,n=e.length;++r<n;)t[r]=kl(e[r]);return pw(t)}function bJ(e){let t=-1,r=[];for(let n of e.values())r[++t]=kl(n);return pw(r)}function xJ(e){let t=[];for(let r=-1,n=e.length;++r<n;)t[r]=kl(e.get(r));return pw(t)}function _J(e,t=!1){let r=Object.keys(e);if(!t&&r.length===0)return()=>!1;let n=[];for(let i=-1,o=r.length;++i<o;)n[i]=kl(e[r[i]]);return pw(n,r)}function pw(e,t){return r=>{if(!r||typeof r!="object")return!1;switch(r.constructor){case Array:return wJ(e,r);case Map:return B5(e,r,r.keys());case Hs:case Rl:case Object:case void 0:return B5(e,r,t||Object.keys(r))}return r instanceof ue?vJ(e,r):!1}}function wJ(e,t){let r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t[n]))return!1;return!0}function vJ(e,t){let r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t.get(n)))return!1;return!0}function B5(e,t,r){let n=r[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),s=0,a=e.length,c=o.next(),l=n.next(),u=i.next();for(;s<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[s](c.value));++s,l=n.next(),u=i.next(),c=o.next());return s===a&&l.done&&u.done&&c.done?!0:(n.return&&n.return(),i.return&&i.return(),o.return&&o.return(),!1)}var jE={};Ir(jE,{BitIterator:()=>yf,getBit:()=>O5,getBool:()=>yw,packBools:()=>bf,popcnt_array:()=>N5,popcnt_bit_range:()=>eg,popcnt_uint32:()=>mw,setBool:()=>SJ,truncateBitmap:()=>gf});function yw(e,t,r,n){return(r&1<<n)!==0}function O5(e,t,r,n){return(r&1<<n)>>n}function SJ(e,t,r){return r?!!(e[t>>3]|=1<<t%8)||!0:!(e[t>>3]&=~(1<<t%8))&&!1}function gf(e,t,r){let n=r.byteLength+7&-8;if(e>0||r.byteLength<n){let i=new Uint8Array(n);return i.set(e%8===0?r.subarray(e>>3):bf(new yf(r,e,t,null,yw)).subarray(0,n)),i}return r}function bf(e){let t=[],r=0,n=0,i=0;for(let s of e)s&&(i|=1<<n),++n===8&&(t[r++]=i,i=n=0);(r===0||n>0)&&(t[r++]=i);let o=new Uint8Array(t.length+7&-8);return o.set(t),o}var yf=class{constructor(t,r,n,i,o){this.bytes=t,this.length=n,this.context=i,this.get=o,this.bit=r%8,this.byteIndex=r>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function eg(e,t,r){if(r-t<=0)return 0;if(r-t<8){let o=0;for(let s of new yf(e,t,r-t,e,O5))o+=s;return o}let n=r>>3<<3,i=t+(t%8===0?0:8-t%8);return eg(e,t,i)+eg(e,n,r)+N5(e,i>>3,n-i>>3)}function N5(e,t,r){let n=0,i=Math.trunc(t),o=new DataView(e.buffer,e.byteOffset,e.byteLength),s=r===void 0?e.byteLength:i+r;for(;s-i>=4;)n+=mw(o.getUint32(i)),i+=4;for(;s-i>=2;)n+=mw(o.getUint16(i)),i+=2;for(;s-i>=1;)n+=mw(o.getUint8(i)),i+=1;return n}function mw(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}var IJ=-1,De=class e{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){let{type:t}=this;return ht.isSparseUnion(t)?this.children.some(r=>r.nullable):ht.isDenseUnion(t)?this.children.some(r=>r.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0,{valueOffsets:r,values:n,nullBitmap:i,typeIds:o}=this;return r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),this.children.reduce((s,a)=>s+a.byteLength,t)}get nullCount(){if(ht.isUnion(this.type))return this.children.reduce((n,i)=>n+i.nullCount,0);let t=this._nullCount,r;return t<=IJ&&(r=this.nullBitmap)&&(this._nullCount=t=this.length-eg(r,this.offset,this.offset+this.length)),t}constructor(t,r,n,i,o,s=[],a){this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(r||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;o instanceof e?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Ui(t),o&&((c=o[0])&&(this.valueOffsets=c),(c=o[1])&&(this.values=c),(c=o[2])&&(this.nullBitmap=c),(c=o[3])&&(this.typeIds=c)))}getValid(t){let{type:r}=this;if(ht.isUnion(r)){let n=r,i=this.children[n.typeIdToChildIndex[this.typeIds[t]]],o=n.mode===je.Dense?this.valueOffsets[t]:t;return i.getValid(o)}if(this.nullable&&this.nullCount>0){let n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,r){let n,{type:i}=this;if(ht.isUnion(i)){let o=i,s=this.children[o.typeIdToChildIndex[this.typeIds[t]]],a=o.mode===je.Dense?this.valueOffsets[t]:t;n=s.getValid(a),s.setValid(a,r)}else{let{nullBitmap:o}=this,{offset:s,length:a}=this,c=s+t,l=1<<c%8,u=c>>3;(!o||o.byteLength<=u)&&(o=new Uint8Array((s+a+63&-64)>>3).fill(255),this.nullCount>0&&o.set(gf(s,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:o,_nullCount:-1}));let f=o[u];n=(f&l)!==0,r?o[u]=f|l:o[u]=f&~l}return n!==!!r&&(this._nullCount=this.nullCount+(r?-1:1)),r}clone(t=this.type,r=this.offset,n=this.length,i=this._nullCount,o=this,s=this.children){return new e(t,r,n,i,o,s,this.dictionary)}slice(t,r){let{stride:n,typeId:i,children:o}=this,s=+(this._nullCount===0)-1,a=i===16?n:1,c=this._sliceBuffers(t,r,n,i);return this.clone(this.type,this.offset+t,r,s,c,o.length===0||this.valueOffsets?o:this._sliceChildren(o,a*t,a*r))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===N.Null)return this.clone(this.type,0,t,0);let{length:r,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,r>>3);i[r>>3]=(1<<r-(r&-8))-1,n>0&&i.set(gf(this.offset,r,this.nullBitmap),0);let o=this.buffers;return o[go.VALIDITY]=i,this.clone(this.type,0,t,n+(t-r),o)}_sliceBuffers(t,r,n,i){let o,{buffers:s}=this;return(o=s[go.TYPE])&&(s[go.TYPE]=o.subarray(t,t+r)),(o=s[go.OFFSET])&&(s[go.OFFSET]=o.subarray(t,t+r+1))||(o=s[go.DATA])&&(s[go.DATA]=i===6?o:o.subarray(n*t,n*(t+r))),s}_sliceChildren(t,r,n){return t.map(i=>i.slice(r,n))}};De.prototype.children=Object.freeze([]);var qE=class e extends mt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){let{["type"]:r,["offset"]:n=0,["length"]:i=0}=t;return new De(r,n,i,i)}visitBool(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitInt(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitFloat(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitUtf8(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.data),o=Xt(t.nullBitmap),s=mf(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new De(r,n,a,c,[s,i,o])}visitBinary(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.data),o=Xt(t.nullBitmap),s=mf(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new De(r,n,a,c,[s,i,o])}visitFixedSizeBinary(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitDate(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitTimestamp(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitTime(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitDecimal(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitList(t){let{["type"]:r,["offset"]:n=0,["child"]:i}=t,o=Xt(t.nullBitmap),s=mf(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new De(r,n,a,c,[s,void 0,o],[i])}visitStruct(t){let{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,o=Xt(t.nullBitmap),{length:s=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,void 0,o],i)}visitUnion(t){let{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,o=ee(r.ArrayType,t.typeIds),{["length"]:s=o.length,["nullCount"]:a=-1}=t;if(ht.isSparseUnion(r))return new De(r,n,s,a,[void 0,void 0,void 0,o],i);let c=mf(t.valueOffsets);return new De(r,n,s,a,[c,void 0,void 0,o],i)}visitDictionary(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.indices.ArrayType,t.data),{["dictionary"]:s=new ue([new e().visit({type:r.dictionary})])}=t,{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new De(r,n,a,c,[void 0,o,i],[],s)}visitInterval(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitDuration(t){let{["type"]:r,["offset"]:n=0}=t,i=Xt(t.nullBitmap),o=ee(r.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,o,i])}visitFixedSizeList(t){let{["type"]:r,["offset"]:n=0,["child"]:i=new e().visit({type:r.valueType})}=t,o=Xt(t.nullBitmap),{["length"]:s=i.length/Ui(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new De(r,n,s,a,[void 0,void 0,o],[i])}visitMap(t){let{["type"]:r,["offset"]:n=0,["child"]:i=new e().visit({type:r.childType})}=t,o=Xt(t.nullBitmap),s=mf(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new De(r,n,a,c,[s,void 0,o],[i])}},TJ=new qE;function Ht(e){return TJ.visit(e)}var rg=class{constructor(t=0,r){this.numChunks=t,this.getChunkIterator=r,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function gw(e){return e.reduce((t,r)=>t+r.nullCount,0)}function bw(e){return e.reduce((t,r,n)=>(t[n+1]=t[n]+r.length,t),new Uint32Array(e.length+1))}function xw(e,t,r,n){let i=[];for(let o=-1,s=e.length;++o<s;){let a=e[o],c=t[o],{length:l}=a;if(c>=n)break;if(r>=c+l)continue;if(c>=r&&c+l<=n){i.push(a);continue}let u=Math.max(0,r-c),f=Math.min(n-c,l);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function YE(e,t,r,n){let i=0,o=0,s=t.length-1;do{if(i>=s-1)return r<t[s]?n(e,i,r-t[i]):null;o=i+Math.trunc((s-i)*.5),r<t[o]?s=o:i=o}while(i<s)}function ng(e,t){return e.getValid(t)}function Cl(e){function t(r,n,i){return e(r[n],i)}return function(r){let n=this.data;return YE(n,this._offsets,r,t)}}function _w(e){let t;function r(n,i,o){return e(n[i],o,t)}return function(n,i){let o=this.data;t=i;let s=YE(o,this._offsets,n,r);return t=void 0,s}}function ww(e){let t;function r(n,i,o){let s=o,a=0,c=0;for(let l=i-1,u=n.length;++l<u;){let f=n[l];if(~(a=e(f,t,s)))return c+a;s=0,c+=f.length}return-1}return function(n,i){t=n;let o=this.data,s=typeof i!="number"?r(o,0,0):YE(o,this._offsets,i,r);return t=void 0,s}}var Bt=class extends mt{};function AJ(e,t){return t===null&&e.length>0?0:-1}function MJ(e,t){let{nullBitmap:r}=e;if(!r||e.nullCount<=0)return-1;let n=0;for(let i of new yf(r,e.offset+(t||0),e.length,r,yw)){if(!i)return n;++n}return-1}function Zt(e,t,r){if(t===void 0)return-1;if(t===null)switch(e.typeId){case N.Union:break;case N.Dictionary:break;default:return MJ(e,r)}let n=Dr.getVisitFn(e),i=kl(t);for(let o=(r||0)-1,s=e.length;++o<s;)if(i(n(e,o)))return o;return-1}function F5(e,t,r){let n=Dr.getVisitFn(e),i=kl(t);for(let o=(r||0)-1,s=e.length;++o<s;)if(i(n(e,o)))return o;return-1}Bt.prototype.visitNull=AJ;Bt.prototype.visitBool=Zt;Bt.prototype.visitInt=Zt;Bt.prototype.visitInt8=Zt;Bt.prototype.visitInt16=Zt;Bt.prototype.visitInt32=Zt;Bt.prototype.visitInt64=Zt;Bt.prototype.visitUint8=Zt;Bt.prototype.visitUint16=Zt;Bt.prototype.visitUint32=Zt;Bt.prototype.visitUint64=Zt;Bt.prototype.visitFloat=Zt;Bt.prototype.visitFloat16=Zt;Bt.prototype.visitFloat32=Zt;Bt.prototype.visitFloat64=Zt;Bt.prototype.visitUtf8=Zt;Bt.prototype.visitBinary=Zt;Bt.prototype.visitFixedSizeBinary=Zt;Bt.prototype.visitDate=Zt;Bt.prototype.visitDateDay=Zt;Bt.prototype.visitDateMillisecond=Zt;Bt.prototype.visitTimestamp=Zt;Bt.prototype.visitTimestampSecond=Zt;Bt.prototype.visitTimestampMillisecond=Zt;Bt.prototype.visitTimestampMicrosecond=Zt;Bt.prototype.visitTimestampNanosecond=Zt;Bt.prototype.visitTime=Zt;Bt.prototype.visitTimeSecond=Zt;Bt.prototype.visitTimeMillisecond=Zt;Bt.prototype.visitTimeMicrosecond=Zt;Bt.prototype.visitTimeNanosecond=Zt;Bt.prototype.visitDecimal=Zt;Bt.prototype.visitList=Zt;Bt.prototype.visitStruct=Zt;Bt.prototype.visitUnion=Zt;Bt.prototype.visitDenseUnion=F5;Bt.prototype.visitSparseUnion=F5;Bt.prototype.visitDictionary=Zt;Bt.prototype.visitInterval=Zt;Bt.prototype.visitIntervalDayTime=Zt;Bt.prototype.visitIntervalYearMonth=Zt;Bt.prototype.visitDuration=Zt;Bt.prototype.visitDurationSecond=Zt;Bt.prototype.visitDurationMillisecond=Zt;Bt.prototype.visitDurationMicrosecond=Zt;Bt.prototype.visitDurationNanosecond=Zt;Bt.prototype.visitFixedSizeList=Zt;Bt.prototype.visitMap=Zt;var xf=new Bt;var Ot=class extends mt{};function zt(e){let{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===N.Timestamp||t instanceof xr&&t.bitWidth!==64||t instanceof rs&&t.bitWidth!==64||t instanceof xi&&t.precision!==Xe.HALF))return new rg(e.data.length,n=>{let i=e.data[n];return i.values.subarray(0,i.length)[Symbol.iterator]()});let r=0;return new rg(e.data.length,n=>{let o=e.data[n].length,s=e.slice(r,r+o);return r+=o,new WE(s)})}var WE=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};Ot.prototype.visitNull=zt;Ot.prototype.visitBool=zt;Ot.prototype.visitInt=zt;Ot.prototype.visitInt8=zt;Ot.prototype.visitInt16=zt;Ot.prototype.visitInt32=zt;Ot.prototype.visitInt64=zt;Ot.prototype.visitUint8=zt;Ot.prototype.visitUint16=zt;Ot.prototype.visitUint32=zt;Ot.prototype.visitUint64=zt;Ot.prototype.visitFloat=zt;Ot.prototype.visitFloat16=zt;Ot.prototype.visitFloat32=zt;Ot.prototype.visitFloat64=zt;Ot.prototype.visitUtf8=zt;Ot.prototype.visitBinary=zt;Ot.prototype.visitFixedSizeBinary=zt;Ot.prototype.visitDate=zt;Ot.prototype.visitDateDay=zt;Ot.prototype.visitDateMillisecond=zt;Ot.prototype.visitTimestamp=zt;Ot.prototype.visitTimestampSecond=zt;Ot.prototype.visitTimestampMillisecond=zt;Ot.prototype.visitTimestampMicrosecond=zt;Ot.prototype.visitTimestampNanosecond=zt;Ot.prototype.visitTime=zt;Ot.prototype.visitTimeSecond=zt;Ot.prototype.visitTimeMillisecond=zt;Ot.prototype.visitTimeMicrosecond=zt;Ot.prototype.visitTimeNanosecond=zt;Ot.prototype.visitDecimal=zt;Ot.prototype.visitList=zt;Ot.prototype.visitStruct=zt;Ot.prototype.visitUnion=zt;Ot.prototype.visitDenseUnion=zt;Ot.prototype.visitSparseUnion=zt;Ot.prototype.visitDictionary=zt;Ot.prototype.visitInterval=zt;Ot.prototype.visitIntervalDayTime=zt;Ot.prototype.visitIntervalYearMonth=zt;Ot.prototype.visitDuration=zt;Ot.prototype.visitDurationSecond=zt;Ot.prototype.visitDurationMillisecond=zt;Ot.prototype.visitDurationMicrosecond=zt;Ot.prototype.visitDurationNanosecond=zt;Ot.prototype.visitFixedSizeList=zt;Ot.prototype.visitMap=zt;var ph=new Ot;var EJ=(e,t)=>e+t,Zs=class extends mt{visitNull(t,r){return 0}visitInt(t,r){return t.type.bitWidth/8}visitFloat(t,r){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,r){return 1/8}visitDecimal(t,r){return t.type.bitWidth/8}visitDate(t,r){return(t.type.unit+1)*4}visitTime(t,r){return t.type.bitWidth/8}visitTimestamp(t,r){return t.type.unit===Tt.SECOND?4:8}visitInterval(t,r){return(t.type.unit+1)*4}visitDuration(t,r){return 8}visitStruct(t,r){return t.children.reduce((n,i)=>n+Pi.visit(i,r),0)}visitFixedSizeBinary(t,r){return t.type.byteWidth}visitMap(t,r){return 8+t.children.reduce((n,i)=>n+Pi.visit(i,r),0)}visitDictionary(t,r){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[r]))||0)}},DJ=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),BJ=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),OJ=({valueOffsets:e,stride:t,children:r},n)=>{let i=r[0],{[n*t]:o}=e,{[n*t+1]:s}=e,a=Pi.getVisitFn(i.type),c=i.slice(o,s-o),l=8;for(let u=-1,f=s-o;++u<f;)l+=a(c,u);return l},NJ=({stride:e,children:t},r)=>{let n=t[0],i=n.slice(r*e,e),o=Pi.getVisitFn(n.type),s=0;for(let a=-1,c=i.length;++a<c;)s+=o(i,a);return s},FJ=(e,t)=>e.type.mode===je.Dense?R5(e,t):L5(e,t),R5=({type:e,children:t,typeIds:r,valueOffsets:n},i)=>{let o=e.typeIdToChildIndex[r[i]];return 8+Pi.visit(t[o],n[i])},L5=({children:e},t)=>4+Pi.visitMany(e,e.map(()=>t)).reduce(EJ,0);Zs.prototype.visitUtf8=DJ;Zs.prototype.visitBinary=BJ;Zs.prototype.visitList=OJ;Zs.prototype.visitFixedSizeList=NJ;Zs.prototype.visitUnion=FJ;Zs.prototype.visitDenseUnion=R5;Zs.prototype.visitSparseUnion=L5;var Pi=new Zs;var k5,C5={},U5={},ue=class e{constructor(t){var r,n,i;let o=t[0]instanceof e?t.flatMap(a=>a.data):t;if(o.length===0||o.some(a=>!(a instanceof De)))throw new TypeError("Vector constructor expects an Array of Data instances.");let s=(r=o[0])===null||r===void 0?void 0:r.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{let{get:a,set:c,indexOf:l,byteLength:u}=C5[s.typeId],f=o[0];this.isValid=d=>ng(f,d),this.get=d=>a(f,d),this.set=(d,h)=>c(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>u(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,U5[s.typeId]),this._offsets=bw(o);break}this.data=o,this.type=s,this.stride=Ui(s),this.numChildren=(i=(n=s.children)===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,r)=>t+r.byteLength,0)}get nullCount(){return gw(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${N[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}includes(t,r){return this.indexOf(t,r)>-1}getByteLength(t){return 0}[Symbol.iterator](){return ph.visit(this)}concat(...t){return new e(this.data.concat(t.flatMap(r=>r.data).flat(Number.POSITIVE_INFINITY)))}slice(t,r){return new e(tg(this,t,r,({data:n,_offsets:i},o,s)=>xw(n,i,o,s)))}toJSON(){return[...this]}toArray(){let{type:t,data:r,length:n,stride:i,ArrayType:o}=this;switch(t.typeId){case N.Int:case N.Float:case N.Decimal:case N.Time:case N.Timestamp:switch(r.length){case 0:return new o;case 1:return r[0].values.subarray(0,n*i);default:return r.reduce((s,{values:a,length:c})=>(s.array.set(a.subarray(0,c*i),s.offset),s.offset+=c*i,s),{array:new o(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var r;return this.getChildAt((r=this.type.children)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new e(this.data.map(({children:r})=>r[t])):null}get isMemoized(){return ht.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ht.isDictionary(this.type)){let t=new vw(this.data[0].dictionary),r=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new e(r)}return new vw(this)}unmemoize(){if(ht.isDictionary(this.type)&&this.isMemoized){let t=this.data[0].dictionary.unmemoize(),r=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new e(r)}return this}};k5=Symbol.toStringTag;ue[k5]=(e=>{e.type=ht.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;let t=Object.keys(N).map(r=>N[r]).filter(r=>typeof r=="number"&&r!==N.NONE);for(let r of t){let n=Dr.getVisitFnByTypeId(r),i=dn.getVisitFnByTypeId(r),o=xf.getVisitFnByTypeId(r),s=Pi.getVisitFnByTypeId(r);C5[r]={get:n,set:i,indexOf:o,byteLength:s},U5[r]=Object.create(e,{isValid:{value:Cl(ng)},get:{value:Cl(Dr.getVisitFnByTypeId(r))},set:{value:_w(dn.getVisitFnByTypeId(r))},indexOf:{value:ww(xf.getVisitFnByTypeId(r))},getByteLength:{value:Cl(Pi.getVisitFnByTypeId(r))}})}return"Vector"})(ue.prototype);var vw=class e extends ue{constructor(t){super(t.data);let r=this.get,n=this.set,i=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(s){let a=o[s];if(a!==void 0)return a;let c=r.call(this,s);return o[s]=c,c}}),Object.defineProperty(this,"set",{value(s,a){n.call(this,s,a),o[s]=a}}),Object.defineProperty(this,"slice",{value:(s,a)=>new e(i.call(this,s,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ue(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function P5(e){if(!e||e.length<=0)return function(i){return!0};let t="",r=e.filter(n=>n===n);return r.length>0&&(t=`
    switch (x) {${r.map(n=>`
        case ${RJ(n)}:`).join("")}
            return false;
    }`),e.length!==r.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function RJ(e){return typeof e!="bigint"?ts(e):`${ts(e)}n`}var GE=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,LJ=(e,t=0)=>e.length>=t?e.subarray(0,t):sh(new e.constructor(t),e,0),Ul=class{constructor(t,r=1){this.buffer=t,this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/r))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,r){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;let r=this.stride,n=this.length*r,i=this.buffer.length;n>=i&&this._resize(i===0?GE(n*1,this.BYTES_PER_ELEMENT):GE(n*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=GE(t*this.stride,this.BYTES_PER_ELEMENT);let r=LJ(this.buffer,t);return this.clear(),r}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=sh(new this.ArrayType(t),this.buffer)}};Ul.prototype.offset=0;var gc=class extends Ul{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,r){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=r,this}},mh=class extends gc{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,r){let{buffer:n}=this.reserve(t-this.length+1),i=t>>3,o=t%8,s=n[i]>>o&1;return r?s===0&&(n[i]|=1<<o,++this.numValid):s===1&&(n[i]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}},yh=class extends gc{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,r){let n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+r,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}};var He=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:r}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=r,this.stride=Ui(t),this._nulls=new mh,r&&r.length>0&&(this._isValid=P5(r))}toVector(){return new ue([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0,{_offsets:r,_values:n,_nulls:i,_typeIds:o,children:s}=this;return r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),s.reduce((a,c)=>a+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((r,n)=>r+n.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,r){return this.setValid(t,this.isValid(r))&&this.setValue(t,r),this}setValue(t,r){this._setValue(this,t,r)}setValid(t,r){return this.length=this._nulls.set(t,+r).length,r}addChild(t,r=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,r,n,i,{type:o,length:s,nullCount:a,_typeIds:c,_offsets:l,_values:u,_nulls:f}=this;(r=c?.flush(s))?i=l?.flush(s):(i=l?.flush(s))?t=u?.flush(l.last()):t=u?.flush(s),a>0&&(n=f?.flush(s));let d=this.children.map(h=>h.flush());return this.clear(),Ht({type:o,length:s,nullCount:a,children:d,child:d[0],data:t,typeIds:r,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(let t of this.children)t.finish();return this}clear(){var t,r,n,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(r=this._values)===null||r===void 0||r.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(let o of this.children)o.clear();return this}};He.prototype.length=1;He.prototype.stride=1;He.prototype.children=null;He.prototype.finished=!1;He.prototype.nullValues=null;He.prototype._isValid=()=>!0;var Br=class extends He{constructor(t){super(t),this._values=new gc(new this.ArrayType(0),this.stride)}setValue(t,r){let n=this._values;return n.reserve(t-n.length+1),super.setValue(t,r)}},Ks=class extends He{constructor(t){super(t),this._pendingLength=0,this._offsets=new yh}setValue(t,r){let n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=r instanceof Hs?r[bo].length:r.length,n.set(t,r)}setValid(t,r){return super.setValid(t,r)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let t=this._pending,r=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,r),this}};var _f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,r,n,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(n),t.writeInt64(BigInt(r??0)),t.offset()}};var Vr=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}value(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,r){t.addFieldOffset(0,r,0)}static addValue(t,r){t.addFieldOffset(1,r,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,n){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,n),e.endKeyValue(t)}};var Pl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Pl||(Pl={}));var $l;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})($l||($l={}));var ig;(function(e){e[e.DenseArray=0]="DenseArray"})(ig||(ig={}));var cs=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,r){t.addFieldInt32(0,r,0)}static addIsSigned(t,r){t.addFieldInt8(1,+r,0)}static endInt(t){return t.endObject()}static createInt(t,r,n){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,n),e.endInt(t)}};var Qs=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryEncoding(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new cs).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ig.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addIndexType(t,r){t.addFieldOffset(1,r,0)}static addIsOrdered(t,r){t.addFieldInt8(2,+r,0)}static addDictionaryKind(t,r){t.addFieldInt16(3,r,ig.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}};var og=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}};var sg=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}};var ag;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ag||(ag={}));var zl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDate(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ag.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,ag.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,r){return e.startDate(t),e.addUnit(t,r),e.endDate(t)}};var Js=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,r){t.addFieldInt32(0,r,0)}static addScale(t,r){t.addFieldInt32(1,r,0)}static addBitWidth(t,r){t.addFieldInt32(2,r,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,n,i){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,n),e.addBitWidth(t,i),e.endDecimal(t)}};var ls;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ls||(ls={}));var Vl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDuration(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ls.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,ls.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,r){return e.startDuration(t),e.addUnit(t,r),e.endDuration(t)}};var jl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}};var ql=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}};var cg;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(cg||(cg={}));var Yl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFloatingPoint(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cg.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,r){t.addFieldInt16(0,r,cg.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,r){return e.startFloatingPoint(t),e.addPrecision(t,r),e.endFloatingPoint(t)}};var lg;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(lg||(lg={}));var Wl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInterval(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lg.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,lg.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,r){return e.startInterval(t),e.addUnit(t,r),e.endInterval(t)}};var ug=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}};var Gl=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,r){t.addFieldInt8(0,+r,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}};var fg=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}};var dg=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}};var bc=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTime(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ls.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,ls.MILLISECOND)}static addBitWidth(t,r){t.addFieldInt32(1,r,32)}static endTime(t){return t.endObject()}static createTime(t,r,n){return e.startTime(t),e.addUnit(t,r),e.addBitWidth(t,n),e.endTime(t)}};var xc=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTimestamp(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ls.SECOND}timezone(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,ls.SECOND)}static addTimezone(t,r){t.addFieldOffset(1,r,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,r,n){return e.startTimestamp(t),e.addUnit(t,r),e.addTimezone(t,n),e.endTimestamp(t)}};var hg;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(hg||(hg={}));var us=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUnion(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}mode(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hg.Sparse}typeIds(t){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb.__vector(this.bb_pos+r)+t*4):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,r){t.addFieldInt16(0,r,hg.Sparse)}static addTypeIds(t,r){t.addFieldOffset(1,r,0)}static createTypeIdsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addInt32(r[n]);return t.endVector()}static startTypeIdsVector(t,r){t.startVector(4,r,4)}static endUnion(t){return t.endObject()}static createUnion(t,r,n){return e.startUnion(t),e.addMode(t,r),e.addTypeIds(t,n),e.endUnion(t)}};var pg=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}};var Ye;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ye||(Ye={}));var Mn=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsField(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}name(t){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ye.NONE}type(t){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__union(t,this.bb_pos+r):null}dictionary(t){let r=this.bb.__offset(this.bb_pos,12);return r?(t||new Qs).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(t,r){let n=this.bb.__offset(this.bb_pos,14);return n?(r||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,16);return n?(r||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,r){t.addFieldOffset(0,r,0)}static addNullable(t,r){t.addFieldInt8(1,+r,0)}static addTypeType(t,r){t.addFieldInt8(2,r,Ye.NONE)}static addType(t,r){t.addFieldOffset(3,r,0)}static addDictionary(t,r){t.addFieldOffset(4,r,0)}static addChildren(t,r){t.addFieldOffset(5,r,0)}static createChildrenVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startChildrenVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(6,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endField(t){return t.endObject()}};var _i=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsSchema(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$l.Little}fields(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new Mn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb.__vector(this.bb_pos+r)+t*8):BigInt(0)}featuresLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,r){t.addFieldInt16(0,r,$l.Little)}static addFields(t,r){t.addFieldOffset(1,r,0)}static createFieldsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startFieldsVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(2,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static addFeatures(t,r){t.addFieldOffset(3,r,0)}static createFeaturesVector(t,r){t.startVector(8,r.length,8);for(let n=r.length-1;n>=0;n--)t.addInt64(r[n]);return t.endVector()}static startFeaturesVector(t,r){t.startVector(8,r,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,r){t.finish(r)}static finishSizePrefixedSchemaBuffer(t,r){t.finish(r,void 0,!0)}static createSchema(t,r,n,i,o){return e.startSchema(t),e.addEndianness(t,r),e.addFields(t,n),e.addCustomMetadata(t,i),e.addFeatures(t,o),e.endSchema(t)}};var $i=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFooter(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pl.V1}schema(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new _i).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dictionaries(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new _f).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,r){let n=this.bb.__offset(this.bb_pos,10);return n?(r||new _f).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,Pl.V1)}static addSchema(t,r){t.addFieldOffset(1,r,0)}static addDictionaries(t,r){t.addFieldOffset(2,r,0)}static startDictionariesVector(t,r){t.startVector(24,r,8)}static addRecordBatches(t,r){t.addFieldOffset(3,r,0)}static startRecordBatchesVector(t,r){t.startVector(24,r,8)}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,r){t.finish(r)}static finishSizePrefixedFooterBuffer(t,r){t.finish(r,void 0,!0)}};var Te=class e{constructor(t=[],r,n,i=er.V5){this.fields=t||[],this.metadata=r||new Map,n||(n=XE(t)),this.dictionaries=n,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,r)=>`${r}: ${t}`).join(", ")} }>`}select(t){let r=new Set(t),n=this.fields.filter(i=>r.has(i.name));return new e(n,this.metadata)}selectAt(t){let r=t.map(n=>this.fields[n]).filter(Boolean);return new e(r,this.metadata)}assign(...t){let r=t[0]instanceof e?t[0]:Array.isArray(t[0])?new e(t[0]):new e(t),n=[...this.fields],i=Sw(Sw(new Map,this.metadata),r.metadata),o=r.fields.filter(a=>{let c=n.findIndex(l=>l.name===a.name);return~c?(n[c]=a.clone({metadata:Sw(Sw(new Map,n[c].metadata),a.metadata)}))&&!1:!0}),s=XE(o,new Map);return new e([...n,...o],i,new Map([...this.dictionaries,...s]))}};Te.prototype.fields=null;Te.prototype.metadata=null;Te.prototype.dictionaries=null;var ne=class e{static new(...t){let[r,n,i,o]=t;return t[0]&&typeof t[0]=="object"&&({name:r}=t[0],n===void 0&&(n=t[0].type),i===void 0&&(i=t[0].nullable),o===void 0&&(o=t[0].metadata)),new e(`${r}`,n,i,o)}constructor(t,r,n=!1,i){this.name=t,this.type=r,this.nullable=n,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[r,n,i,o]=t;return!t[0]||typeof t[0]!="object"?[r=this.name,n=this.type,i=this.nullable,o=this.metadata]=t:{name:r=this.name,type:n=this.type,nullable:i=this.nullable,metadata:o=this.metadata}=t[0],e.new(r,n,i,o)}};ne.prototype.type=null;ne.prototype.name=null;ne.prototype.nullable=null;ne.prototype.metadata=null;function Sw(e,t){return new Map([...e||new Map,...t||new Map])}function XE(e,t=new Map){for(let r=-1,n=e.length;++r<n;){let o=e[r].type;if(ht.isDictionary(o)){if(!t.has(o.id))t.set(o.id,o.dictionary);else if(t.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&XE(o.children,t)}return t}var kJ=Po,CJ=Ar,_c=class{static decode(t){t=new CJ(Xt(t));let r=$i.getRootAsFooter(t),n=Te.decode(r.schema(),new Map,r.version());return new HE(n,r)}static encode(t){let r=new kJ,n=Te.encode(r,t.schema);$i.startRecordBatchesVector(r,t.numRecordBatches);for(let s of[...t.recordBatches()].slice().reverse())wc.encode(r,s);let i=r.endVector();$i.startDictionariesVector(r,t.numDictionaries);for(let s of[...t.dictionaryBatches()].slice().reverse())wc.encode(r,s);let o=r.endVector();return $i.startFooter(r),$i.addSchema(r,n),$i.addVersion(r,er.V5),$i.addRecordBatches(r,i),$i.addDictionaries(r,o),$i.finishFooterBuffer(r,$i.endFooter(r)),r.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,r=er.V5,n,i){this.schema=t,this.version=r,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,r=-1,n=this.numRecordBatches;++r<n;)(t=this.getRecordBatch(r))&&(yield t)}*dictionaryBatches(){for(let t,r=-1,n=this.numDictionaries;++r<n;)(t=this.getDictionaryBatch(r))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}};var HE=class extends _c{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,r){super(t,r.version()),this._footer=r}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){let r=this._footer.recordBatches(t);if(r)return wc.decode(r)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){let r=this._footer.dictionaries(t);if(r)return wc.decode(r)}return null}},wc=class e{static decode(t){return new e(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,r){let{metaDataLength:n}=r,i=BigInt(r.offset),o=BigInt(r.bodyLength);return _f.createBlock(t,i,n,o)}constructor(t,r,n){this.metaDataLength=t,this.offset=bi(n),this.bodyLength=bi(r)}};var We=Object.freeze({done:!0,value:void 0}),mg=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},wf=class{tee(){return this._getDOMStream().tee()}pipe(t,r){return this._getNodeStream().pipe(t,r)}pipeTo(t,r){return this._getDOMStream().pipeTo(t,r)}pipeThrough(t,r){return this._getDOMStream().pipeThrough(t,r)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},Iw=class extends wf{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return P(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){let{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(We);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return un.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return un.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return P(this,void 0,void 0,function*(){return yield this.abort(t),We})}return(t){return P(this,void 0,void 0,function*(){return yield this.close(),We})}read(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,n)=>{this.resolvers.push({resolve:r,reject:n})}):Promise.resolve(We)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}};var ta=class extends Iw{write(t){if((t=Xt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Hy(this.toUint8Array(!0)):this.toUint8Array(!1).then(Hy)}toUint8Array(t=!1){return t?ki(this._values)[0]:P(this,void 0,void 0,function*(){var r,n,i,o;let s=[],a=0;try{for(var c=!0,l=fr(this),u;u=yield l.next(),r=u.done,!r;c=!0){o=u.value,c=!1;let f=o;s.push(f),a+=f.byteLength}}catch(f){n={error:f}}finally{try{!c&&!r&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return ki(s,a)[0]})}},ea=class{constructor(t){t&&(this.source=new ZE(un.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},xo=class e{constructor(t){t instanceof e?this.source=t.source:t instanceof ta?this.source=new vc(un.fromAsyncIterable(t)):U1(t)?this.source=new vc(un.fromNodeStream(t)):Zy(t)?this.source=new vc(un.fromDOMStream(t)):k1(t)?this.source=new vc(un.fromDOMStream(t.body)):Qo(t)?this.source=new vc(un.fromIterable(t)):Ko(t)?this.source=new vc(un.fromAsyncIterable(t)):yo(t)&&(this.source=new vc(un.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},ZE=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,r="read"){return this.source.next({cmd:r,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||We)}return(t){return Object.create(this.source.return&&this.source.return(t)||We)}},vc=class{constructor(t){this.source=t,this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}cancel(t){return P(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return P(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,r="read"){return P(this,void 0,void 0,function*(){return yield this.source.next({cmd:r,size:t})})}throw(t){return P(this,void 0,void 0,function*(){let r=this.source.throw&&(yield this.source.throw(t))||We;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}return(t){return P(this,void 0,void 0,function*(){let r=this.source.return&&(yield this.source.return(t))||We;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}};var yg=class extends ea{constructor(t,r){super(),this.position=0,this.buffer=Xt(t),this.size=r===void 0?this.buffer.byteLength:r}readInt32(t){let{buffer:r,byteOffset:n}=this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){let{buffer:r,size:n,position:i}=this;return r&&i<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),r.subarray(i,this.position)):null}readAt(t,r){let n=this.buffer,i=Math.min(this.size,t+r);return n?n.subarray(t,i):new Uint8Array(r)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},Xl=class extends xo{constructor(t,r){super(),this.position=0,this._handle=t,typeof r=="number"?this.size=r:this._pending=P(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return P(this,void 0,void 0,function*(){let{buffer:r,byteOffset:n}=yield this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)})}seek(t){return P(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return P(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:r,size:n,position:i}=this;if(r&&i<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let o=i,s=0,a=0,c=Math.min(n,o+Math.min(n-o,t)),l=new Uint8Array(Math.max(0,(this.position=c)-o));for(;(o+=a)<c&&(s+=a)<l.byteLength;)({bytesRead:a}=yield r.read(l,s,l.byteLength-s,o));return l}return null})}readAt(t,r){return P(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:n,size:i}=this;if(n&&t+r<i){let o=Math.min(i,t+r),s=new Uint8Array(o-t);return(yield n.read(s,0,r,t)).buffer}return new Uint8Array(r)})}close(){return P(this,void 0,void 0,function*(){let t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return P(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return P(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};var QE={};Ir(QE,{BaseInt64:()=>gg,Int128:()=>bg,Int64:()=>Sc,Uint64:()=>ar});function gh(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}var bh=8,KE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],gg=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){let r=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]),i=r[3]*n[3];this.buffer[0]=i&65535;let o=i>>>16;return i=r[2]*n[3],o+=i,i=r[3]*n[2]>>>0,o+=i,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<i?65536:0,this.buffer[1]+=o>>>16,this.buffer[1]+=r[1]*n[3]+r[2]*n[2]+r[3]*n[1],this.buffer[1]+=r[0]*n[3]+r[1]*n[2]+r[2]*n[1]+r[3]*n[0]<<16,this}_plus(t){let r=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],r<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=r}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${gh(this.buffer[1])} ${gh(this.buffer[0])}`}},ar=class e extends gg{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,r=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){let n=t.length,i=new e(r);for(let o=0;o<n;){let s=bh<n-o?bh:n-o,a=new e(new Uint32Array([Number.parseInt(t.slice(o,o+s),10),0])),c=new e(new Uint32Array([KE[s],0]));i.times(c),i.plus(a),o+=s}return i}static convertArray(t){let r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}},Sc=class e extends gg{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){let r=this.buffer[1]<<0,n=t.buffer[1]<<0;return r<n||r===n&&this.buffer[0]<t.buffer[0]}static from(t,r=new Uint32Array(2)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){let n=t.startsWith("-"),i=t.length,o=new e(r);for(let s=n?1:0;s<i;){let a=bh<i-s?bh:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),l=new e(new Uint32Array([KE[a],0]));o.times(l),o.plus(c),s+=a}return n?o.negate():o}static convertArray(t){let r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}},bg=class e{constructor(t){this.buffer=t}high(){return new Sc(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Sc(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){let r=new ar(new Uint32Array([this.buffer[3],0])),n=new ar(new Uint32Array([this.buffer[2],0])),i=new ar(new Uint32Array([this.buffer[1],0])),o=new ar(new Uint32Array([this.buffer[0],0])),s=new ar(new Uint32Array([t.buffer[3],0])),a=new ar(new Uint32Array([t.buffer[2],0])),c=new ar(new Uint32Array([t.buffer[1],0])),l=new ar(new Uint32Array([t.buffer[0],0])),u=ar.multiply(o,l);this.buffer[0]=u.low();let f=new ar(new Uint32Array([u.high(),0]));return u=ar.multiply(i,l),f.plus(u),u=ar.multiply(o,c),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ar(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ar.multiply(n,l)).plus(ar.multiply(i,c)).plus(ar.multiply(o,a)),this.buffer[3]+=ar.multiply(r,l).plus(ar.multiply(n,c)).plus(ar.multiply(i,a)).plus(ar.multiply(o,s)).low(),this}plus(t){let r=new Uint32Array(4);return r[3]=this.buffer[3]+t.buffer[3]>>>0,r[2]=this.buffer[2]+t.buffer[2]>>>0,r[1]=this.buffer[1]+t.buffer[1]>>>0,r[0]=this.buffer[0]+t.buffer[0]>>>0,r[0]<this.buffer[0]>>>0&&++r[1],r[1]<this.buffer[1]>>>0&&++r[2],r[2]<this.buffer[2]>>>0&&++r[3],this.buffer[3]=r[3],this.buffer[2]=r[2],this.buffer[1]=r[1],this.buffer[0]=r[0],this}hex(){return`${gh(this.buffer[3])} ${gh(this.buffer[2])} ${gh(this.buffer[1])} ${gh(this.buffer[0])}`}static multiply(t,r){return new e(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new e(new Uint32Array(t.buffer)).plus(r)}static from(t,r=new Uint32Array(4)){return e.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(4)){return e.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(4)){let n=t.startsWith("-"),i=t.length,o=new e(r);for(let s=n?1:0;s<i;){let a=bh<i-s?bh:i-s,c=new e(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0,0,0])),l=new e(new Uint32Array([KE[a],0,0,0]));o.times(l),o.plus(c),s+=a}return n?o.negate():o}static convertArray(t){let r=new Uint32Array(t.length*4);for(let n=-1,i=t.length;++n<i;)e.from(t[n],new Uint32Array(r.buffer,r.byteOffset+4*4*n,4));return r}};var xg=class extends mt{constructor(t,r,n,i,o=er.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=r,this.buffers=n,this.dictionaries=i,this.metadataVersion=o}visit(t){return super.visit(t instanceof ne?t.type:t)}visitNull(t,{length:r}=this.nextFieldNode()){return Ht({type:t,length:r})}visitBool(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return this.metadataVersion<er.V5&&this.readNullBitmap(t,n),t.mode===je.Sparse?this.visitSparseUnion(t,{length:r,nullCount:n}):this.visitDenseUnion(t,{length:r,nullCount:n})}visitDenseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDuration(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:r,nullCount:n}=this.nextFieldNode()){return Ht({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,r,n=this.nextBufferRange()){return r>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,r){return this.readData(t,r)}readTypeIds(t,r){return this.readData(t,r)}readData(t,{length:r,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+r)}readDictionary(t){return this.dictionaries.get(t.id)}},Tw=class extends xg{constructor(t,r,n,i,o){super(new Uint8Array(0),r,n,i,o),this.sources=t}readNullBitmap(t,r,{offset:n}=this.nextBufferRange()){return r<=0?new Uint8Array(0):bf(this.sources[n])}readOffsets(t,{offset:r}=this.nextBufferRange()){return ee(Uint8Array,ee(Int32Array,this.sources[r]))}readTypeIds(t,{offset:r}=this.nextBufferRange()){return ee(Uint8Array,ee(t.ArrayType,this.sources[r]))}readData(t,{offset:r}=this.nextBufferRange()){let{sources:n}=this;return ht.isTimestamp(t)?ee(Uint8Array,Sc.convertArray(n[r])):(ht.isInt(t)||ht.isTime(t))&&t.bitWidth===64||ht.isDuration(t)?ee(Uint8Array,Sc.convertArray(n[r])):ht.isDate(t)&&t.unit===fn.MILLISECOND?ee(Uint8Array,Sc.convertArray(n[r])):ht.isDecimal(t)?ee(Uint8Array,bg.convertArray(n[r])):ht.isBinary(t)||ht.isFixedSizeBinary(t)?UJ(n[r]):ht.isBool(t)?bf(n[r]):ht.isUtf8(t)?Fl(n[r].join("")):ee(Uint8Array,ee(t.ArrayType,n[r].map(i=>+i)))}};function UJ(e){let t=e.join(""),r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n>>1]=Number.parseInt(t.slice(n,n+2),16);return r}var xh=class extends Ks{constructor(t){super(t),this._values=new Ul(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Xt(r))}_flushPending(t,r){let n=this._offsets,i=this._values.reserve(r).buffer,o=0;for(let[s,a]of t)if(a===void 0)n.set(s,0);else{let c=a.length;i.set(a,o),n.set(s,c),o+=c}}};var Aw=class extends He{constructor(t){super(t),this._values=new mh}setValue(t,r){this._values.set(t,+r)}};var vf=class extends Br{};vf.prototype._setValue=OE;var _g=class extends vf{};_g.prototype._setValue=Q1;var wg=class extends vf{};wg.prototype._setValue=J1;var vg=class extends Br{};vg.prototype._setValue=RE;var Mw=class extends He{constructor({type:t,nullValues:r,dictionaryHashFunction:n}){super({type:new Ci(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Sf({type:this.type.indices,nullValues:r}),this.dictionary=Sf({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,r){let n=this.indices;return r=n.setValid(t,r),this.length=n.length,r}setValue(t,r){let n=this._keysToIndices,i=this.valueToKey(r),o=n[i];return o===void 0&&(n[i]=o=this._dictionaryOffset+this.dictionary.append(r).length-1),this.indices.setValue(t,o)}flush(){let t=this.type,r=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=r?r.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}};var Sg=class extends Br{};Sg.prototype._setValue=BE;var Ew=class extends He{setValue(t,r){let[n]=this.children,i=t*this.stride;for(let o=-1,s=r.length;++o<s;)n.set(i+o,r[o])}addChild(t,r="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");let n=this.children.push(t);return this.type=new os(this.type.listSize,new ne(r,t.type,!0)),n}};var If=class extends Br{setValue(t,r){this._values.set(t,r)}},Dw=class extends If{setValue(t,r){super.setValue(t,Jy(r))}},Bw=class extends If{},Ow=class extends If{};var Tf=class extends Br{};Tf.prototype._setValue=LE;var Ig=class extends Tf{};Ig.prototype._setValue=cw;var Tg=class extends Tf{};Tg.prototype._setValue=lw;var Ic=class extends Br{};Ic.prototype._setValue=kE;var Ag=class extends Ic{};Ag.prototype._setValue=uw;var Mg=class extends Ic{};Mg.prototype._setValue=fw;var Eg=class extends Ic{};Eg.prototype._setValue=dw;var Dg=class extends Ic{};Dg.prototype._setValue=hw;var _o=class extends Br{setValue(t,r){this._values.set(t,r)}},Nw=class extends _o{},Fw=class extends _o{},Rw=class extends _o{},Lw=class extends _o{},kw=class extends _o{},Cw=class extends _o{},Uw=class extends _o{},Pw=class extends _o{};var $w=class extends Ks{constructor(t){super(t),this._offsets=new yh}addChild(t,r="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ns(new ne(r,t.type,!0)),this.numChildren-1}_flushPending(t){let r=this._offsets,[n]=this.children;for(let[i,o]of t)if(typeof o>"u")r.set(i,0);else{let s=o,a=s.length,c=r.set(i,a).buffer[i];for(let l=-1;++l<a;)n.set(c+l,s[l])}}};var zw=class extends Ks{set(t,r){return super.set(t,r)}setValue(t,r){let n=r instanceof Map?r:new Map(Object.entries(r)),i=this._pending||(this._pending=new Map),o=i.get(t);o&&(this._pendingLength-=o.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,r=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ss(new ne(r,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){let r=this._offsets,[n]=this.children;for(let[i,o]of t)if(o===void 0)r.set(i,0);else{let{[i]:s,[i+1]:a}=r.set(i,o.size).buffer;for(let c of o.entries())if(n.set(s,c),++s>=a)break}}};var Vw=class extends He{setValue(t,r){}setValid(t,r){return this.length=Math.max(t+1,this.length),r}};var jw=class extends He{setValue(t,r){let{children:n,type:i}=this;switch(Array.isArray(r)||r.constructor){case!0:return i.children.forEach((o,s)=>n[s].set(t,r[s]));case Map:return i.children.forEach((o,s)=>n[s].set(t,r.get(o.name)));default:return i.children.forEach((o,s)=>n[s].set(t,r[o.name]))}}setValid(t,r){return super.setValid(t,r)||this.children.forEach(n=>n.setValid(t,r)),r}addChild(t,r=`${this.numChildren}`){let n=this.children.push(t);return this.type=new qe([...this.type.children,new ne(r,t.type,!0)]),n}};var Tc=class extends Br{};Tc.prototype._setValue=NE;var Bg=class extends Tc{};Bg.prototype._setValue=tw;var Og=class extends Tc{};Og.prototype._setValue=ew;var Ng=class extends Tc{};Ng.prototype._setValue=rw;var Fg=class extends Tc{};Fg.prototype._setValue=nw;var Ac=class extends Br{};Ac.prototype._setValue=FE;var Rg=class extends Ac{};Rg.prototype._setValue=iw;var Lg=class extends Ac{};Lg.prototype._setValue=ow;var kg=class extends Ac{};kg.prototype._setValue=sw;var Cg=class extends Ac{};Cg.prototype._setValue=aw;var _h=class extends He{constructor(t){super(t),this._typeIds=new gc(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,r){return this.set(this.length,t,r)}set(t,r,n){return n===void 0&&(n=this._valueToChildTypeId(this,r,t)),this.setValue(t,r,n),this}setValue(t,r,n){this._typeIds.set(t,n);let i=this.type.typeIdToChildIndex[n],o=this.children[i];o?.set(t,r)}addChild(t,r=`${this.children.length}`){let n=this.children.push(t),{type:{children:i,mode:o,typeIds:s}}=this,a=[...i,new ne(r,t.type)];return this.type=new is(o,[...s,n],a),n}_valueToChildTypeId(t,r,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}},qw=class extends _h{},Yw=class extends _h{constructor(t){super(t),this._offsets=new gc(new Int32Array(0))}setValue(t,r,n){let i=this._typeIds.set(t,n).buffer[t],o=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,o.length).buffer[t];o?.set(s,r)}};var Ug=class extends Ks{constructor(t){super(t),this._values=new Ul(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,r){return super.setValue(t,Fl(r))}_flushPending(t,r){}};Ug.prototype._flushPending=xh.prototype._flushPending;var JE=class extends mt{visitNull(){return Vw}visitBool(){return Aw}visitInt(){return _o}visitInt8(){return Nw}visitInt16(){return Fw}visitInt32(){return Rw}visitInt64(){return Lw}visitUint8(){return kw}visitUint16(){return Cw}visitUint32(){return Uw}visitUint64(){return Pw}visitFloat(){return If}visitFloat16(){return Dw}visitFloat32(){return Bw}visitFloat64(){return Ow}visitUtf8(){return Ug}visitBinary(){return xh}visitFixedSizeBinary(){return Sg}visitDate(){return vf}visitDateDay(){return _g}visitDateMillisecond(){return wg}visitTimestamp(){return Tc}visitTimestampSecond(){return Bg}visitTimestampMillisecond(){return Og}visitTimestampMicrosecond(){return Ng}visitTimestampNanosecond(){return Fg}visitTime(){return Ac}visitTimeSecond(){return Rg}visitTimeMillisecond(){return Lg}visitTimeMicrosecond(){return kg}visitTimeNanosecond(){return Cg}visitDecimal(){return vg}visitList(){return $w}visitStruct(){return jw}visitUnion(){return _h}visitDenseUnion(){return Yw}visitSparseUnion(){return qw}visitDictionary(){return Mw}visitInterval(){return Tf}visitIntervalDayTime(){return Ig}visitIntervalYearMonth(){return Tg}visitDuration(){return Ic}visitDurationSecond(){return Ag}visitDurationMillisecond(){return Mg}visitDurationMicrosecond(){return Eg}visistDurationNanosecond(){return Dg}visitFixedSizeList(){return Ew}visitMap(){return zw}},$5=new JE;var Nt=class extends mt{compareSchemas(t,r){return t===r||r instanceof t.constructor&&this.compareManyFields(t.fields,r.fields)}compareManyFields(t,r){return t===r||Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every((n,i)=>this.compareFields(n,r[i]))}compareFields(t,r){return t===r||r instanceof t.constructor&&t.name===r.name&&t.nullable===r.nullable&&this.visit(t.type,r.type)}};function Yn(e,t){return t instanceof e.constructor}function Pg(e,t){return e===t||Yn(e,t)}function Mc(e,t){return e===t||Yn(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Ww(e,t){return e===t||Yn(e,t)&&e.precision===t.precision}function PJ(e,t){return e===t||Yn(e,t)&&e.byteWidth===t.byteWidth}function tD(e,t){return e===t||Yn(e,t)&&e.unit===t.unit}function $g(e,t){return e===t||Yn(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function zg(e,t){return e===t||Yn(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function $J(e,t){return e===t||Yn(e,t)&&e.children.length===t.children.length&&ra.compareManyFields(e.children,t.children)}function zJ(e,t){return e===t||Yn(e,t)&&e.children.length===t.children.length&&ra.compareManyFields(e.children,t.children)}function eD(e,t){return e===t||Yn(e,t)&&e.mode===t.mode&&e.typeIds.every((r,n)=>r===t.typeIds[n])&&ra.compareManyFields(e.children,t.children)}function VJ(e,t){return e===t||Yn(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ra.visit(e.indices,t.indices)&&ra.visit(e.dictionary,t.dictionary)}function rD(e,t){return e===t||Yn(e,t)&&e.unit===t.unit}function Vg(e,t){return e===t||Yn(e,t)&&e.unit===t.unit}function jJ(e,t){return e===t||Yn(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ra.compareManyFields(e.children,t.children)}function qJ(e,t){return e===t||Yn(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ra.compareManyFields(e.children,t.children)}Nt.prototype.visitNull=Pg;Nt.prototype.visitBool=Pg;Nt.prototype.visitInt=Mc;Nt.prototype.visitInt8=Mc;Nt.prototype.visitInt16=Mc;Nt.prototype.visitInt32=Mc;Nt.prototype.visitInt64=Mc;Nt.prototype.visitUint8=Mc;Nt.prototype.visitUint16=Mc;Nt.prototype.visitUint32=Mc;Nt.prototype.visitUint64=Mc;Nt.prototype.visitFloat=Ww;Nt.prototype.visitFloat16=Ww;Nt.prototype.visitFloat32=Ww;Nt.prototype.visitFloat64=Ww;Nt.prototype.visitUtf8=Pg;Nt.prototype.visitBinary=Pg;Nt.prototype.visitFixedSizeBinary=PJ;Nt.prototype.visitDate=tD;Nt.prototype.visitDateDay=tD;Nt.prototype.visitDateMillisecond=tD;Nt.prototype.visitTimestamp=$g;Nt.prototype.visitTimestampSecond=$g;Nt.prototype.visitTimestampMillisecond=$g;Nt.prototype.visitTimestampMicrosecond=$g;Nt.prototype.visitTimestampNanosecond=$g;Nt.prototype.visitTime=zg;Nt.prototype.visitTimeSecond=zg;Nt.prototype.visitTimeMillisecond=zg;Nt.prototype.visitTimeMicrosecond=zg;Nt.prototype.visitTimeNanosecond=zg;Nt.prototype.visitDecimal=Pg;Nt.prototype.visitList=$J;Nt.prototype.visitStruct=zJ;Nt.prototype.visitUnion=eD;Nt.prototype.visitDenseUnion=eD;Nt.prototype.visitSparseUnion=eD;Nt.prototype.visitDictionary=VJ;Nt.prototype.visitInterval=rD;Nt.prototype.visitIntervalDayTime=rD;Nt.prototype.visitIntervalYearMonth=rD;Nt.prototype.visitDuration=Vg;Nt.prototype.visitDurationSecond=Vg;Nt.prototype.visitDurationMillisecond=Vg;Nt.prototype.visitDurationMicrosecond=Vg;Nt.prototype.visitDurationNanosecond=Vg;Nt.prototype.visitFixedSizeList=jJ;Nt.prototype.visitMap=qJ;var ra=new Nt;function Af(e,t){return ra.compareSchemas(e,t)}function z5(e,t){return ra.compareFields(e,t)}function V5(e,t){return ra.visit(e,t)}function Sf(e){let t=e.type,r=new($5.getVisitFn(t)())(e);if(t.children&&t.children.length>0){let n=e.children||[],i={nullValues:e.nullValues},o=Array.isArray(n)?(s,a)=>n[a]||i:({name:s})=>n[s]||i;for(let[s,a]of t.children.entries()){let{type:c}=a,l=o(a,s);r.children.push(Sf(Object.assign(Object.assign({},l),{type:c})))}}return r}function Gw(e,t){return YJ(e,t.map(r=>r.data.concat()))}function YJ(e,t){let r=[...e.fields],n=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)},o=0,s=0,a=-1,c=t.length,l,u=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),s=Math.min(s,l?l.length:s);Number.isFinite(s)&&(u=WJ(r,s,u,t,i),s>0&&(n[o++]=Ht({type:new qe(r),length:s,nullCount:0,children:u.slice()})))}return[e=e.assign(r),n.map(f=>new pr(e,f))]}function WJ(e,t,r,n,i){var o;let s=(t+63&-64)>>3;for(let a=-1,c=n.length;++a<c;){let l=r[a],u=l?.length;if(u>=t)u===t?r[a]=l:(r[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,n[a].unshift(l.slice(t,u-t))));else{let f=e[a];e[a]=f.clone({nullable:!0}),r[a]=(o=l?._changeLengthAndBackfillNullBitmap(t))!==null&&o!==void 0?o:Ht({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return r}var j5,Wn=class e{constructor(...t){var r,n;if(t.length===0)return this.batches=[],this.schema=new Te([]),this._offsets=[0],this;let i,o;t[0]instanceof Te&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(o=t.pop());let s=c=>{if(c){if(c instanceof pr)return[c];if(c instanceof e)return c.batches;if(c instanceof De){if(c.type instanceof qe)return[new pr(new Te(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>s(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>s(l));if(typeof c=="object"){let l=Object.keys(c),u=l.map(h=>new ue([c[h]])),f=new Te(l.map((h,p)=>new ne(String(h),u[p].type))),[,d]=Gw(f,u);return d.length===0?[new pr(c)]:d}}}return[]},a=t.flatMap(c=>s(c));if(i=(n=i??((r=a[0])===null||r===void 0?void 0:r.schema))!==null&&n!==void 0?n:new Te([]),!(i instanceof Te))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let c of a){if(!(c instanceof pr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Af(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=o??bw(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,r)=>t+r.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=gw(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?ph.visit(new ue(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){let r=this.schema,n=this.data.concat(t.flatMap(({data:i})=>i));return new e(r,n.map(i=>new pr(r,i)))}slice(t,r){let n=this.schema;[t,r]=tg({length:this.numRows},t,r);let i=xw(this.data,this._offsets,t,r);return new e(n,i.map(o=>new pr(n,o)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(r=>r.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){let r=this.data.map(n=>n.children[t]);if(r.length===0){let{type:n}=this.schema.fields[t],i=Ht({type:n,length:0,nullCount:0});r.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ue(r)}return null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){r||(r=new ue([Ht({type:new qn,length:this.numRows})]));let o=n.fields.slice(),s=o[t].clone({type:r.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[o[t],a[t]]=[s,r],[n,i]=Gw(n,a)}return new e(n,i)}select(t){let r=this.schema.fields.reduce((n,i,o)=>n.set(i.name,o),new Map);return this.selectAt(t.map(n=>r.get(n)).filter(n=>n>-1))}selectAt(t){let r=this.schema.selectAt(t),n=this.batches.map(i=>i.selectAt(t));return new e(r,n)}assign(t){let r=this.schema.fields,[n,i]=t.schema.fields.reduce((a,c,l)=>{let[u,f]=a,d=r.findIndex(h=>h.name===c.name);return~d?f[d]=l:u.push(l),a},[[],[]]),o=this.schema.assign(t.schema),s=[...r.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...n.map(a=>t.getChildAt(a))].filter(Boolean);return new e(...Gw(o,s))}};j5=Symbol.toStringTag;Wn[j5]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Cl(ng),e.get=Cl(Dr.getVisitFn(N.Struct)),e.set=_w(dn.getVisitFn(N.Struct)),e.indexOf=ww(xf.getVisitFn(N.Struct)),e.getByteLength=Cl(Pi.getVisitFn(N.Struct)),"Table"))(Wn.prototype);var Y5,pr=class e{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Te))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ht({nullCount:0,type:new qe(this.schema.fields),children:this.schema.fields.map(r=>Ht({type:r.type,nullCount:0}))})]=t,!(this.data instanceof De))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=q5(this.schema,this.data.children);break}case 1:{let[r]=t,{fields:n,children:i,length:o}=Object.keys(r).reduce((c,l,u)=>(c.children[u]=r[l],c.length=Math.max(c.length,r[l].length),c.fields[u]=ne.new({name:l,type:r[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),s=new Te(n),a=Ht({type:new qe(n),length:o,children:i,nullCount:0});[this.schema,this.data]=q5(s,a.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=W5(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Dr.visit(this.data,t)}set(t,r){return dn.visit(this.data,t,r)}indexOf(t,r){return xf.visit(this.data,t,r)}getByteLength(t){return Pi.visit(this.data,t)}[Symbol.iterator](){return ph.visit(new ue([this.data]))}toArray(){return[...this]}concat(...t){return new Wn(this.schema,[this,...t])}slice(t,r){let[n]=new ue([this.data]).slice(t,r).data;return new e(this.schema,n)}getChild(t){var r;return this.getChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ue([this.data.children[t]]):null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){r||(r=new ue([Ht({type:new qn,length:this.numRows})]));let o=n.fields.slice(),s=i.children.slice(),a=o[t].clone({type:r.type});[o[t],s[t]]=[a,r.data[0]],n=new Te(o,new Map(this.schema.metadata)),i=Ht({type:new qe(o),children:s})}return new e(n,i)}select(t){let r=this.schema.select(t),n=new qe(r.fields),i=[];for(let o of t){let s=this.schema.fields.findIndex(a=>a.name===o);~s&&(i[s]=this.data.children[s])}return new e(r,Ht({type:n,length:this.numRows,children:i}))}selectAt(t){let r=this.schema.selectAt(t),n=t.map(o=>this.data.children[o]).filter(Boolean),i=Ht({type:new qe(r.fields),length:this.numRows,children:n});return new e(r,i)}};Y5=Symbol.toStringTag;pr[Y5]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(pr.prototype);function q5(e,t,r=t.reduce((n,i)=>Math.max(n,i.length),0)){var n;let i=[...e.fields],o=[...t],s=(r+63&-64)>>3;for(let[a,c]of e.fields.entries()){let l=t[a];(!l||l.length!==r)&&(i[a]=c.clone({nullable:!0}),o[a]=(n=l?._changeLengthAndBackfillNullBitmap(r))!==null&&n!==void 0?n:Ht({type:c.type,length:r,nullCount:r,nullBitmap:new Uint8Array(s)}))}return[e.assign(i),Ht({type:new qe(i),length:r,children:o})]}function W5(e,t,r=new Map){var n,i;if(((n=e?.length)!==null&&n!==void 0?n:0)>0&&e?.length===t?.length)for(let o=-1,s=e.length;++o<s;){let{type:a}=e[o],c=t[o];for(let l of[c,...((i=c?.dictionary)===null||i===void 0?void 0:i.data)||[]])W5(a.children,l?.children,r);if(ht.isDictionary(a)){let{id:l}=a;if(!r.has(l))c?.dictionary&&r.set(l,c.dictionary);else if(r.get(l)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return r}var Mf=class extends pr{constructor(t){let r=t.fields.map(i=>Ht({type:i.type})),n=Ht({type:new qe(t.fields),nullCount:0,children:r});super(t,n)}};var jg;(function(e){e[e.BUFFER=0]="BUFFER"})(jg||(jg={}));var qg;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(qg||(qg={}));var Xw=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBodyCompression(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}codec(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):qg.LZ4_FRAME}method(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):jg.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,r){t.addFieldInt8(0,r,qg.LZ4_FRAME)}static addMethod(t,r){t.addFieldInt8(1,r,jg.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,r,n){return e.startBodyCompression(t),e.addCodec(t,r),e.addMethod(t,n),e.endBodyCompression(t)}};var wh=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,r,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(r??0)),t.offset()}};var vh=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,r,n){return t.prep(8,16),t.writeInt64(BigInt(n??0)),t.writeInt64(BigInt(r??0)),t.offset()}};var zi=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsRecordBatch(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new vh).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new wh).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){let r=this.bb.__offset(this.bb_pos,10);return r?(t||new Xw).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addNodes(t,r){t.addFieldOffset(1,r,0)}static startNodesVector(t,r){t.startVector(16,r,8)}static addBuffers(t,r){t.addFieldOffset(2,r,0)}static startBuffersVector(t,r){t.startVector(16,r,8)}static addCompression(t,r){t.addFieldOffset(3,r,0)}static endRecordBatch(t){return t.endObject()}};var Ec=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryBatch(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new zi).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,r){t.addFieldInt64(0,r,BigInt("0"))}static addData(t,r){t.addFieldOffset(1,r,0)}static addIsDelta(t,r){t.addFieldInt8(2,+r,0)}static endDictionaryBatch(t){return t.endObject()}};var Sh;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Sh||(Sh={}));var fs=class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMessage(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pl.V1}headerType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Sh.NONE}header(t){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__union(t,this.bb_pos+r):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,Pl.V1)}static addHeaderType(t,r){t.addFieldInt8(1,r,Sh.NONE)}static addHeader(t,r){t.addFieldOffset(2,r,0)}static addBodyLength(t,r){t.addFieldInt64(3,r,BigInt("0"))}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,r){t.finish(r)}static finishSizePrefixedMessageBuffer(t,r){t.finish(r,void 0,!0)}static createMessage(t,r,n,i,o,s){return e.startMessage(t),e.addVersion(t,r),e.addHeaderType(t,n),e.addHeader(t,i),e.addBodyLength(t,o),e.addCustomMetadata(t,s),e.endMessage(t)}};var nD=class extends mt{visit(t,r){return t==null||r==null?void 0:super.visit(t,r)}visitNull(t,r){return fg.startNull(r),fg.endNull(r)}visitInt(t,r){return cs.startInt(r),cs.addBitWidth(r,t.bitWidth),cs.addIsSigned(r,t.isSigned),cs.endInt(r)}visitFloat(t,r){return Yl.startFloatingPoint(r),Yl.addPrecision(r,t.precision),Yl.endFloatingPoint(r)}visitBinary(t,r){return og.startBinary(r),og.endBinary(r)}visitBool(t,r){return sg.startBool(r),sg.endBool(r)}visitUtf8(t,r){return pg.startUtf8(r),pg.endUtf8(r)}visitDecimal(t,r){return Js.startDecimal(r),Js.addScale(r,t.scale),Js.addPrecision(r,t.precision),Js.addBitWidth(r,t.bitWidth),Js.endDecimal(r)}visitDate(t,r){return zl.startDate(r),zl.addUnit(r,t.unit),zl.endDate(r)}visitTime(t,r){return bc.startTime(r),bc.addUnit(r,t.unit),bc.addBitWidth(r,t.bitWidth),bc.endTime(r)}visitTimestamp(t,r){let n=t.timezone&&r.createString(t.timezone)||void 0;return xc.startTimestamp(r),xc.addUnit(r,t.unit),n!==void 0&&xc.addTimezone(r,n),xc.endTimestamp(r)}visitInterval(t,r){return Wl.startInterval(r),Wl.addUnit(r,t.unit),Wl.endInterval(r)}visitDuration(t,r){return Vl.startDuration(r),Vl.addUnit(r,t.unit),Vl.endDuration(r)}visitList(t,r){return ug.startList(r),ug.endList(r)}visitStruct(t,r){return dg.startStruct_(r),dg.endStruct_(r)}visitUnion(t,r){us.startTypeIdsVector(r,t.typeIds.length);let n=us.createTypeIdsVector(r,t.typeIds);return us.startUnion(r),us.addMode(r,t.mode),us.addTypeIds(r,n),us.endUnion(r)}visitDictionary(t,r){let n=this.visit(t.indices,r);return Qs.startDictionaryEncoding(r),Qs.addId(r,BigInt(t.id)),Qs.addIsOrdered(r,t.isOrdered),n!==void 0&&Qs.addIndexType(r,n),Qs.endDictionaryEncoding(r)}visitFixedSizeBinary(t,r){return jl.startFixedSizeBinary(r),jl.addByteWidth(r,t.byteWidth),jl.endFixedSizeBinary(r)}visitFixedSizeList(t,r){return ql.startFixedSizeList(r),ql.addListSize(r,t.listSize),ql.endFixedSizeList(r)}visitMap(t,r){return Gl.startMap(r),Gl.addKeysSorted(r,t.keysSorted),Gl.endMap(r)}},Hw=new nD;function Z5(e,t=new Map){return new Te(XJ(e,t),Zw(e.metadata),t)}function iD(e){return new hn(e.count,Q5(e.columns),J5(e.columns))}function K5(e){return new vi(iD(e.data),e.id,e.isDelta)}function XJ(e,t){return(e.fields||[]).filter(Boolean).map(r=>ne.fromJSON(r,t))}function G5(e,t){return(e.children||[]).filter(Boolean).map(r=>ne.fromJSON(r,t))}function Q5(e){return(e||[]).reduce((t,r)=>[...t,new wo(r.count,HJ(r.VALIDITY)),...Q5(r.children)],[])}function J5(e,t=[]){for(let r=-1,n=(e||[]).length;++r<n;){let i=e[r];i.VALIDITY&&t.push(new wi(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new wi(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new wi(t.length,i.OFFSET.length)),i.DATA&&t.push(new wi(t.length,i.DATA.length)),t=J5(i.children,t)}return t}function HJ(e){return(e||[]).reduce((t,r)=>t+ +(r===0),0)}function tP(e,t){let r,n,i,o,s,a;return!t||!(o=e.dictionary)?(s=H5(e,G5(e,t)),i=new ne(e.name,s,e.nullable,Zw(e.metadata))):t.has(r=o.id)?(n=(n=o.indexType)?X5(n):new Xs,a=new Ci(t.get(r),n,r,o.isOrdered),i=new ne(e.name,a,e.nullable,Zw(e.metadata))):(n=(n=o.indexType)?X5(n):new Xs,t.set(r,s=H5(e,G5(e,t))),a=new Ci(s,n,r,o.isOrdered),i=new ne(e.name,a,e.nullable,Zw(e.metadata))),i||null}function Zw(e=[]){return new Map(e.map(({key:t,value:r})=>[t,r]))}function X5(e){return new xr(e.isSigned,e.bitWidth)}function H5(e,t){let r=e.type.name;switch(r){case"NONE":return new qn;case"null":return new qn;case"binary":return new ac;case"utf8":return new cc;case"bool":return new lc;case"list":return new ns((t||[])[0]);case"struct":return new qe(t||[]);case"struct_":return new qe(t||[])}switch(r){case"int":{let n=e.type;return new xr(n.isSigned,n.bitWidth)}case"floatingpoint":{let n=e.type;return new xi(Xe[n.precision])}case"decimal":{let n=e.type;return new uc(n.scale,n.precision,n.bitWidth)}case"date":{let n=e.type;return new fc(fn[n.unit])}case"time":{let n=e.type;return new rs(Tt[n.unit],n.bitWidth)}case"timestamp":{let n=e.type;return new dc(Tt[n.unit],n.timezone)}case"interval":{let n=e.type;return new hc(jn[n.unit])}case"duration":{let n=e.type;return new pc(Tt[n.unit])}case"union":{let n=e.type,[i,...o]=(n.mode+"").toLowerCase(),s=i.toUpperCase()+o.join("");return new is(je[s],n.typeIds||[],t||[])}case"fixedsizebinary":{let n=e.type;return new mc(n.byteWidth)}case"fixedsizelist":{let n=e.type;return new os(n.listSize,(t||[])[0])}case"map":{let n=e.type;return new ss((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var ZJ=Po,KJ=Ar,Si=class e{static fromJSON(t,r){let n=new e(0,er.V5,r);return n._createHeader=QJ(t,r),n}static decode(t){t=new KJ(Xt(t));let r=fs.getRootAsMessage(t),n=r.bodyLength(),i=r.version(),o=r.headerType(),s=new e(n,i,o);return s._createHeader=JJ(r,o),s}static encode(t){let r=new ZJ,n=-1;return t.isSchema()?n=Te.encode(r,t.header()):t.isRecordBatch()?n=hn.encode(r,t.header()):t.isDictionaryBatch()&&(n=vi.encode(r,t.header())),fs.startMessage(r),fs.addVersion(r,er.V5),fs.addHeader(r,n),fs.addHeaderType(r,t.headerType),fs.addBodyLength(r,BigInt(t.bodyLength)),fs.finishMessageBuffer(r,fs.endMessage(r)),r.asUint8Array()}static from(t,r=0){if(t instanceof Te)return new e(0,er.V5,ge.Schema,t);if(t instanceof hn)return new e(r,er.V5,ge.RecordBatch,t);if(t instanceof vi)return new e(r,er.V5,ge.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ge.Schema}isRecordBatch(){return this.headerType===ge.RecordBatch}isDictionaryBatch(){return this.headerType===ge.DictionaryBatch}constructor(t,r,n,i){this._version=r,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=bi(t)}},hn=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,r,n){this._nodes=r,this._buffers=n,this._length=bi(t)}},vi=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,r,n=!1){this._data=t,this._isDelta=n,this._id=bi(r)}},wi=class{constructor(t,r){this.offset=bi(t),this.length=bi(r)}},wo=class{constructor(t,r){this.length=bi(t),this.nullCount=bi(r)}};function QJ(e,t){return()=>{switch(t){case ge.Schema:return Te.fromJSON(e);case ge.RecordBatch:return hn.fromJSON(e);case ge.DictionaryBatch:return vi.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ge[t]}, type: ${t} }`)}}function JJ(e,t){return()=>{switch(t){case ge.Schema:return Te.decode(e.header(new _i),new Map,e.version());case ge.RecordBatch:return hn.decode(e.header(new zi),e.version());case ge.DictionaryBatch:return vi.decode(e.header(new Ec),e.version())}throw new Error(`Unrecognized Message type: { name: ${ge[t]}, type: ${t} }`)}}ne.encode=utt;ne.decode=ctt;ne.fromJSON=tP;Te.encode=ltt;Te.decode=ttt;Te.fromJSON=Z5;hn.encode=ftt;hn.decode=ett;hn.fromJSON=iD;vi.encode=dtt;vi.decode=rtt;vi.fromJSON=K5;wo.encode=htt;wo.decode=itt;wi.encode=ptt;wi.decode=ntt;function ttt(e,t=new Map,r=er.V5){let n=att(e,t);return new Te(n,Kw(e),t,r)}function ett(e,t=er.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new hn(e.length(),ott(e),stt(e,t))}function rtt(e,t=er.V5){return new vi(hn.decode(e.data(),t),e.id(),e.isDelta())}function ntt(e){return new wi(e.offset(),e.length())}function itt(e){return new wo(e.length(),e.nullCount())}function ott(e){let t=[];for(let r,n=-1,i=-1,o=e.nodesLength();++n<o;)(r=e.nodes(n))&&(t[++i]=wo.decode(r));return t}function stt(e,t){let r=[];for(let n,i=-1,o=-1,s=e.buffersLength();++i<s;)(n=e.buffers(i))&&(t<er.V4&&(n.bb_pos+=8*(i+1)),r[++o]=wi.decode(n));return r}function att(e,t){let r=[];for(let n,i=-1,o=-1,s=e.fieldsLength();++i<s;)(n=e.fields(i))&&(r[++o]=ne.decode(n,t));return r}function eP(e,t){let r=[];for(let n,i=-1,o=-1,s=e.childrenLength();++i<s;)(n=e.children(i))&&(r[++o]=ne.decode(n,t));return r}function ctt(e,t){let r,n,i,o,s,a;return!t||!(a=e.dictionary())?(i=nP(e,eP(e,t)),n=new ne(e.name(),i,e.nullable(),Kw(e))):t.has(r=bi(a.id()))?(o=(o=a.indexType())?rP(o):new Xs,s=new Ci(t.get(r),o,r,a.isOrdered()),n=new ne(e.name(),s,e.nullable(),Kw(e))):(o=(o=a.indexType())?rP(o):new Xs,t.set(r,i=nP(e,eP(e,t))),s=new Ci(i,o,r,a.isOrdered()),n=new ne(e.name(),s,e.nullable(),Kw(e))),n||null}function Kw(e){let t=new Map;if(e)for(let r,n,i=-1,o=Math.trunc(e.customMetadataLength());++i<o;)(r=e.customMetadata(i))&&(n=r.key())!=null&&t.set(n,r.value());return t}function rP(e){return new xr(e.isSigned(),e.bitWidth())}function nP(e,t){let r=e.typeType();switch(r){case Ye.NONE:return new qn;case Ye.Null:return new qn;case Ye.Binary:return new ac;case Ye.Utf8:return new cc;case Ye.Bool:return new lc;case Ye.List:return new ns((t||[])[0]);case Ye.Struct_:return new qe(t||[])}switch(r){case Ye.Int:{let n=e.type(new cs);return new xr(n.isSigned(),n.bitWidth())}case Ye.FloatingPoint:{let n=e.type(new Yl);return new xi(n.precision())}case Ye.Decimal:{let n=e.type(new Js);return new uc(n.scale(),n.precision(),n.bitWidth())}case Ye.Date:{let n=e.type(new zl);return new fc(n.unit())}case Ye.Time:{let n=e.type(new bc);return new rs(n.unit(),n.bitWidth())}case Ye.Timestamp:{let n=e.type(new xc);return new dc(n.unit(),n.timezone())}case Ye.Interval:{let n=e.type(new Wl);return new hc(n.unit())}case Ye.Duration:{let n=e.type(new Vl);return new pc(n.unit())}case Ye.Union:{let n=e.type(new us);return new is(n.mode(),n.typeIdsArray()||[],t||[])}case Ye.FixedSizeBinary:{let n=e.type(new jl);return new mc(n.byteWidth())}case Ye.FixedSizeList:{let n=e.type(new ql);return new os(n.listSize(),(t||[])[0])}case Ye.Map:{let n=e.type(new Gl);return new ss((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Ye[r]}" (${r})`)}function ltt(e,t){let r=t.fields.map(o=>ne.encode(e,o));_i.startFieldsVector(e,r.length);let n=_i.createFieldsVector(e,r),i=t.metadata&&t.metadata.size>0?_i.createCustomMetadataVector(e,[...t.metadata].map(([o,s])=>{let a=e.createString(`${o}`),c=e.createString(`${s}`);return Vr.startKeyValue(e),Vr.addKey(e,a),Vr.addValue(e,c),Vr.endKeyValue(e)})):-1;return _i.startSchema(e),_i.addFields(e,n),_i.addEndianness(e,mtt?$l.Little:$l.Big),i!==-1&&_i.addCustomMetadata(e,i),_i.endSchema(e)}function utt(e,t){let r=-1,n=-1,i=-1,o=t.type,s=t.typeId;ht.isDictionary(o)?(s=o.dictionary.typeId,i=Hw.visit(o,e),n=Hw.visit(o.dictionary,e)):n=Hw.visit(o,e);let a=(o.children||[]).map(u=>ne.encode(e,u)),c=Mn.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Mn.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{let d=e.createString(`${u}`),h=e.createString(`${f}`);return Vr.startKeyValue(e),Vr.addKey(e,d),Vr.addValue(e,h),Vr.endKeyValue(e)})):-1;return t.name&&(r=e.createString(t.name)),Mn.startField(e),Mn.addType(e,n),Mn.addTypeType(e,s),Mn.addChildren(e,c),Mn.addNullable(e,!!t.nullable),r!==-1&&Mn.addName(e,r),i!==-1&&Mn.addDictionary(e,i),l!==-1&&Mn.addCustomMetadata(e,l),Mn.endField(e)}function ftt(e,t){let r=t.nodes||[],n=t.buffers||[];zi.startNodesVector(e,r.length);for(let s of r.slice().reverse())wo.encode(e,s);let i=e.endVector();zi.startBuffersVector(e,n.length);for(let s of n.slice().reverse())wi.encode(e,s);let o=e.endVector();return zi.startRecordBatch(e),zi.addLength(e,BigInt(t.length)),zi.addNodes(e,i),zi.addBuffers(e,o),zi.endRecordBatch(e)}function dtt(e,t){let r=hn.encode(e,t.data);return Ec.startDictionaryBatch(e),Ec.addId(e,BigInt(t.id)),Ec.addIsDelta(e,t.isDelta),Ec.addData(e,r),Ec.endDictionaryBatch(e)}function htt(e,t){return vh.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function ptt(e,t){return wh.createBuffer(e,BigInt(t.offset),BigInt(t.length))}var mtt=(()=>{let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})();var sD=e=>`Expected ${ge[e]} Message in stream, but was null or length 0.`,aD=e=>`Header pointer of flatbuffer-encoded ${ge[e]} Message is null or length 0.`,iP=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,oP=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`,Ih=class{constructor(t){this.source=t instanceof ea?t:new ea(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done?We:t.value===-1&&(t=this.readMetadataLength()).done?We:(t=this.readMetadata(t.value)).done?We:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(sD(t));return r.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);let r=Xt(this.source.read(t));if(r.byteLength<t)throw new Error(oP(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()}readSchema(t=!1){let r=ge.Schema,n=this.readMessage(r),i=n?.header();if(t&&!i)throw new Error(aD(r));return i}readMetadataLength(){let t=this.source.read(Qw),r=t&&new Ar(t),n=r?.readInt32(0)||0;return{done:n===0,value:n}}readMetadata(t){let r=this.source.read(t);if(!r)return We;if(r.byteLength<t)throw new Error(iP(t,r.byteLength));return{done:!1,value:Si.decode(r)}}},Yg=class{constructor(t,r){this.source=t instanceof xo?t:L1(t)?new Xl(t,r):new xo(t)}[Symbol.asyncIterator](){return this}next(){return P(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done?We:t.value===-1&&(t=yield this.readMetadataLength()).done?We:(t=yield this.readMetadata(t.value)).done?We:t})}throw(t){return P(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return P(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return P(this,void 0,void 0,function*(){let r;if((r=yield this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(sD(t));return r.value})}readMessageBody(t){return P(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);let r=Xt(yield this.source.read(t));if(r.byteLength<t)throw new Error(oP(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()})}readSchema(t=!1){return P(this,void 0,void 0,function*(){let r=ge.Schema,n=yield this.readMessage(r),i=n?.header();if(t&&!i)throw new Error(aD(r));return i})}readMetadataLength(){return P(this,void 0,void 0,function*(){let t=yield this.source.read(Qw),r=t&&new Ar(t),n=r?.readInt32(0)||0;return{done:n===0,value:n}})}readMetadata(t){return P(this,void 0,void 0,function*(){let r=yield this.source.read(t);if(!r)return We;if(r.byteLength<t)throw new Error(iP(t,r.byteLength));return{done:!1,value:Si.decode(r)}})}},Wg=class extends Ih{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof mg?t:new mg(t)}next(){let{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Si.fromJSON(t.schema,ge.Schema)};if(this._dictionaryIndex<t.dictionaries.length){let r=t.dictionaries[this._dictionaryIndex++];return this._body=r.data.columns,{done:!1,value:Si.fromJSON(r,ge.DictionaryBatch)}}if(this._batchIndex<t.batches.length){let r=t.batches[this._batchIndex++];return this._body=r.columns,{done:!1,value:Si.fromJSON(r,ge.RecordBatch)}}return this._body=[],We}readMessageBody(t){return r(this._body);function r(n){return(n||[]).reduce((i,o)=>[...i,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE_ID&&[o.TYPE_ID]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...r(o.children)],[])}}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(sD(t));return r.value}readSchema(){let t=ge.Schema,r=this.readMessage(t),n=r?.header();if(!r||!n)throw new Error(aD(t));return n}},Qw=4,oD="ARROW1",Th=new Uint8Array(oD.length);for(let e=0;e<oD.length;e+=1)Th[e]=oD.codePointAt(e);function Jw(e,t=0){for(let r=-1,n=Th.length;++r<n;)if(Th[r]!==e[t+r])return!1;return!0}var Ah=Th.length,cD=Ah+Qw,sP=Ah*2+Qw;var pn=class e extends wf{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){let r=this._impl.open(t);return Ko(r)?r.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return un.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return un.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof e?t:F1(t)?gtt(t):L1(t)?_tt(t):Ko(t)?P(this,void 0,void 0,function*(){return yield e.from(yield t)}):k1(t)||Zy(t)||U1(t)||yo(t)?xtt(new xo(t)):btt(new ea(t))}static readAll(t){return t instanceof e?t.isSync()?aP(t):cP(t):F1(t)||ArrayBuffer.isView(t)||Qo(t)||R1(t)?aP(t):cP(t)}},na=class extends pn{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ze(this,arguments,function*(){yield H(yield*Ji(fr(this[Symbol.iterator]())))})}},Hl=class extends pn{constructor(t){super(t),this._impl=t}readAll(){var t,r,n,i;return P(this,void 0,void 0,function*(){let o=new Array;try{for(var s=!0,a=fr(this),c;c=yield a.next(),t=c.done,!t;s=!0){i=c.value,s=!1;let l=i;o.push(l)}}catch(l){r={error:l}}finally{try{!s&&!t&&(n=a.return)&&(yield n.call(a))}finally{if(r)throw r.error}}return o})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},Zl=class extends na{constructor(t){super(t),this._impl=t}},Gg=class extends Hl{constructor(t){super(t),this._impl=t}},tv=class{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,r){let n=this._loadVectors(t,r,this.schema.fields),i=Ht({type:new qe(this.schema.fields),length:t.length,children:n});return new pr(this.schema,i)}_loadDictionaryBatch(t,r){let{id:n,isDelta:i}=t,{dictionaries:o,schema:s}=this,a=o.get(n);if(i||!a){let c=s.dictionaries.get(n),l=this._loadVectors(t.data,r,[c]);return(a&&i?a.concat(new ue(l)):new ue(l)).memoize()}return a.memoize()}_loadVectors(t,r,n){return new xg(r,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}},Mh=class extends tv{constructor(t,r){super(r),this._reader=F1(t)?new Wg(this._handle=t):new Ih(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=lP(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):We}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):We}next(){if(this.closed)return We;let t,{_reader:r}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=r.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Mf(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},Eh=class extends tv{constructor(t,r){super(r),this._reader=new Yg(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return P(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return P(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=lP(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return P(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):We})}return(t){return P(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):We})}next(){return P(this,void 0,void 0,function*(){if(this.closed)return We;let t,{_reader:r}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=yield r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=yield r.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Mf(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return P(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},ev=class extends Mh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,r){super(t instanceof yg?t:new yg(t),r)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(let r of this._footer.dictionaryBatches())r&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var r;if(this.closed)return null;this._footer||this.open();let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(ge.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null}_readDictionaryBatch(t){var r;let n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(ge.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}}_readFooter(){let{_handle:t}=this,r=t.size-cD,n=t.readInt32(r),i=t.readAt(r-n,n);return _c.decode(i)}_readNextMessageAndValidate(t){var r;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}},lD=class extends Eh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...r){let n=typeof r[0]!="number"?r.shift():void 0,i=r[0]instanceof Map?r.shift():void 0;super(t instanceof Xl?t:new Xl(t,n),i)}isFile(){return!0}isAsync(){return!0}open(t){let r=Object.create(null,{open:{get:()=>super.open}});return P(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(let n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield r.open.call(this,t)})}readRecordBatch(t){var r;return P(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());let n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(ge.RecordBatch);if(i?.isRecordBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null})}_readDictionaryBatch(t){var r;return P(this,void 0,void 0,function*(){let n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(ge.DictionaryBatch);if(i?.isDictionaryBatch()){let o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}})}_readFooter(){return P(this,void 0,void 0,function*(){let{_handle:t}=this;t._pending&&(yield t._pending);let r=t.size-cD,n=yield t.readInt32(r),i=yield t.readAt(r-n,n);return _c.decode(i)})}_readNextMessageAndValidate(t){return P(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let r=this._footer.getRecordBatch(this._recordBatchIndex);if(r&&(yield this._handle.seek(r.offset)))return yield this._reader.readMessage(t)}return null})}},uD=class extends Mh{constructor(t,r){super(t,r)}_loadVectors(t,r,n){return new Tw(r,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}};function lP(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*aP(e){let t=pn.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function cP(e){return ze(this,arguments,function*(){let r=yield H(pn.from(e));try{if(!(yield H(r.open({autoDestroy:!1}))).closed)do yield yield H(r);while(!(yield H(r.reset().open())).closed)}finally{yield H(r.cancel())}})}function gtt(e){return new na(new uD(e))}function btt(e){let t=e.peek(Ah+7&-8);return t&&t.byteLength>=4?Jw(t)?new Zl(new ev(e.read())):new na(new Mh(e)):new na(new Mh(function*(){}()))}function xtt(e){return P(this,void 0,void 0,function*(){let t=yield e.peek(Ah+7&-8);return t&&t.byteLength>=4?Jw(t)?new Zl(new ev(yield e.read())):new Hl(new Eh(e)):new Hl(new Eh(function(){return ze(this,arguments,function*(){})}()))})}function _tt(e){return P(this,void 0,void 0,function*(){let{size:t}=yield e.stat(),r=new Xl(e,t);return t>=sP&&Jw(yield r.readAt(0,Ah+7&-8))?new Gg(new lD(r)):new Hl(new Eh(r))})}var mr=class e extends mt{static assemble(...t){let r=i=>i.flatMap(o=>Array.isArray(o)?r(o):o instanceof pr?o.data.children:o.data),n=new e;return n.visitMany(r(t)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ue)return this.visitMany(t.data),this;let{type:r}=t;if(!ht.isDictionary(r)){let{length:n}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ht.isUnion(r))this.nodes.push(new wo(n,0));else{let{nullCount:i}=t;ht.isNull(r)||ds.call(this,i<=0?new Uint8Array(0):gf(t.offset,n,t.nullBitmap)),this.nodes.push(new wo(n,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function ds(e){let t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new wi(this._byteLength,t)),this._byteLength+=t,this}function wtt(e){var t;let{type:r,length:n,typeIds:i,valueOffsets:o}=e;if(ds.call(this,i),r.mode===je.Sparse)return fD.call(this,e);if(r.mode===je.Dense){if(e.offset<=0)return ds.call(this,o),fD.call(this,e);{let s=new Int32Array(n),a=Object.create(null),c=Object.create(null);for(let l,u,f=-1;++f<n;)(l=i[f])!==void 0&&((u=a[l])===void 0&&(u=a[l]=o[f]),s[f]=o[f]-u,c[l]=((t=c[l])!==null&&t!==void 0?t:0)+1);ds.call(this,s),this.visitMany(e.children.map((l,u)=>{let f=r.typeIds[u],d=a[f],h=c[f];return l.slice(d,Math.min(n,h))}))}}return this}function vtt(e){let t;return e.nullCount>=e.length?ds.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ds.call(this,gf(e.offset,e.length,t)):ds.call(this,bf(e.values))}function Dc(e){return ds.call(this,e.values.subarray(0,e.length*e.stride))}function uP(e){let{length:t,values:r,valueOffsets:n}=e,{[0]:i,[t]:o}=n,s=Math.min(o-i,r.byteLength-i);return ds.call(this,P1(-i,t+1,n)),ds.call(this,r.subarray(i,i+s)),this}function dD(e){let{length:t,valueOffsets:r}=e;if(r){let{[0]:n,[t]:i}=r;return ds.call(this,P1(-n,t+1,r)),this.visit(e.children[0].slice(n,i-n))}return this.visit(e.children[0])}function fD(e){return this.visitMany(e.type.children.map((t,r)=>e.children[r]).filter(Boolean))[0]}mr.prototype.visitBool=vtt;mr.prototype.visitInt=Dc;mr.prototype.visitFloat=Dc;mr.prototype.visitUtf8=uP;mr.prototype.visitBinary=uP;mr.prototype.visitFixedSizeBinary=Dc;mr.prototype.visitDate=Dc;mr.prototype.visitTimestamp=Dc;mr.prototype.visitTime=Dc;mr.prototype.visitDecimal=Dc;mr.prototype.visitList=dD;mr.prototype.visitStruct=fD;mr.prototype.visitUnion=wtt;mr.prototype.visitInterval=Dc;mr.prototype.visitDuration=Dc;mr.prototype.visitFixedSizeList=dD;mr.prototype.visitMap=dD;var Ef=class extends wf{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new ta,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Vn(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ko(t)?t.then(r=>this.writeAll(r)):yo(t)?pD(this,t):hD(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,r=null){return t===this._sink||t instanceof ta?this._sink=t:(this._sink=new ta,t&&DU(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&BU(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!r||!Af(r,this._schema))&&(r==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=r,this._writeSchema(r))),this}write(t){let r=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Wn&&!(r=t.schema))return this.finish()&&void 0;if(t instanceof pr&&!(r=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(r&&!Af(r,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,r)}t instanceof pr?t instanceof Mf||this._writeRecordBatch(t):t instanceof Wn?this.writeAll(t.batches):Qo(t)&&this.writeAll(t)}_writeMessage(t,r=8){let n=r-1,i=Si.encode(t),o=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=o+s+n&~n,c=a-o-s;return t.headerType===ge.RecordBatch?this._recordBatchBlocks.push(new wc(a,t.bodyLength,this._position)):t.headerType===ge.DictionaryBatch&&this._dictionaryBlocks.push(new wc(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),o>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){let r=Xt(t);r&&r.byteLength>0&&(this._sink.write(r),this._position+=r.byteLength)}return this}_writeSchema(t){return this._writeMessage(Si.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Th)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){let{byteLength:r,nodes:n,bufferRegions:i,buffers:o}=mr.assemble(t),s=new hn(t.numRows,n,i),a=Si.from(s,r);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(o)}_writeDictionaryBatch(t,r,n=!1){this._dictionaryDeltaOffsets.set(r,t.length+(this._dictionaryDeltaOffsets.get(r)||0));let{byteLength:i,nodes:o,bufferRegions:s,buffers:a}=mr.assemble(new ue([t])),c=new hn(t.length,o,s),l=new vi(c,r,n),u=Si.from(l,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let r,n,i;for(let o=-1,s=t.length;++o<s;)(r=t[o])&&(n=r.byteLength)>0&&(this._write(r),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[r,n]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(r)||0;if(i===0||(n=n?.slice(i)).length>0)for(let o of n.data)this._writeDictionaryBatch(o,r,i>0),i+=o.length}return this}},Df=class e extends Ef{static writeAll(t,r){let n=new e(r);return Ko(t)?t.then(i=>n.writeAll(i)):yo(t)?pD(n,t):hD(n,t)}},Bf=class e extends Ef{static writeAll(t){let r=new e;return Ko(t)?t.then(n=>r.writeAll(n)):yo(t)?pD(r,t):hD(r,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){let r=_c.encode(new _c(t,er.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(r)._write(Int32Array.of(r.byteLength))._writeMagic()}};function hD(e,t){let r=t;t instanceof Wn&&(r=t.batches,e.reset(void 0,t.schema));for(let n of r)e.write(n);return e.finish()}function pD(e,t){var r,n,i,o,s,a,c;return P(this,void 0,void 0,function*(){try{for(r=!0,n=fr(t);i=yield n.next(),o=i.done,!o;r=!0){c=i.value,r=!1;let l=c;e.write(l)}}catch(l){s={error:l}}finally{try{!r&&!o&&(a=n.return)&&(yield a.call(n))}finally{if(s)throw s.error}}return e.finish()})}function fP(e,t){if(yo(e))return Itt(e,t);if(Qo(e))return Stt(e,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function Stt(e,t){let r=null,n=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){o(s,r||(r=e[Symbol.iterator]()))},pull(s){r?o(s,r):s.close()},cancel(){(r?.return&&r.return()||!0)&&(r=null)}}),Object.assign({highWaterMark:n?i:void 0},t));function o(s,a){let c,l=null,u=s.desiredSize||null;for(;!(l=a.next(n?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=Xt(l.value))&&(u!=null&&n&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()}}function Itt(e,t){let r=null,n=t?.type==="bytes"||!1,i=t?.highWaterMark||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(s){return P(this,void 0,void 0,function*(){yield o(s,r||(r=e[Symbol.asyncIterator]()))})},pull(s){return P(this,void 0,void 0,function*(){r?yield o(s,r):s.close()})},cancel(){return P(this,void 0,void 0,function*(){(r?.return&&(yield r.return())||!0)&&(r=null)})}}),Object.assign({highWaterMark:n?i:void 0},t));function o(s,a){return P(this,void 0,void 0,function*(){let c,l=null,u=s.desiredSize||null;for(;!(l=yield a.next(n?u:null)).done;)if(ArrayBuffer.isView(l.value)&&(c=Xt(l.value))&&(u!=null&&n&&(u=u-c.byteLength+1),l.value=c),s.enqueue(l.value),u!=null&&--u<=0)return;s.close()})}}function pP(e){return new mD(e)}var mD=class{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{["readableStrategy"]:r,["writableStrategy"]:n,["queueingStrategy"]:i="count"}=t,o=e_(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Sf(o),this._getSize=i!=="bytes"?dP:hP;let{["highWaterMark"]:s=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},r),{["highWaterMark"]:a=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:c=>{this._maybeFlush(this._builder,this._controller=c)},start:c=>{this._maybeFlush(this._builder,this._controller=c)}},{highWaterMark:s,size:i!=="bytes"?dP:hP}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:c=>this._writeValueAndReturnChunkSize(c)})}_writeValueAndReturnChunkSize(t){let r=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-r}_maybeFlush(t,r){r!=null&&(this._bufferedSize>=r.desiredSize&&++this._numChunks&&this._enqueue(r,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(r,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(r,null)))}_enqueue(t,r){this._bufferedSize=0,this._controller=null,r==null?t.close():t.enqueue(r)}},dP=e=>{var t;return(t=e?.length)!==null&&t!==void 0?t:0},hP=e=>{var t;return(t=e?.byteLength)!==null&&t!==void 0?t:0};function rv(e,t){let r=new ta,n=null,i=new ReadableStream({cancel(){return P(this,void 0,void 0,function*(){yield r.close()})},start(a){return P(this,void 0,void 0,function*(){yield s(a,n||(n=yield o()))})},pull(a){return P(this,void 0,void 0,function*(){n?yield s(a,n):a.close()})}});return{writable:new WritableStream(r,Object.assign({highWaterMark:Math.pow(2,14)},e)),readable:i};function o(){return P(this,void 0,void 0,function*(){return yield(yield pn.from(r)).open(t)})}function s(a,c){return P(this,void 0,void 0,function*(){let l=a.desiredSize,u=null;for(;!(u=yield c.next()).done;)if(a.enqueue(u.value),l!=null&&--l<=0)return;a.close()})}}function nv(e,t){let r=new this(e),n=new xo(r),i=new ReadableStream({cancel(){return P(this,void 0,void 0,function*(){yield n.cancel()})},pull(s){return P(this,void 0,void 0,function*(){yield o(s)})},start(s){return P(this,void 0,void 0,function*(){yield o(s)})}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(r,e),readable:i};function o(s){return P(this,void 0,void 0,function*(){let a=null,c=s.desiredSize;for(;a=yield n.read(c||null);)if(s.enqueue(a),c!=null&&(c-=a.byteLength)<=0)return;s.close()})}}function iv(e,t="stream"){return(t==="stream"?Df:Bf).writeAll(e).toUint8Array(!0)}var Ett=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},AE),QE),jE),ME),wE),VE),IE),{compareSchemas:Af,compareFields:z5,compareTypes:V5});un.toDOMStream=fP;He.throughDOM=pP;pn.throughDOM=rv;Zl.throughDOM=rv;na.throughDOM=rv;Ef.throughDOM=nv;Bf.throughDOM=nv;Df.throughDOM=nv;var Dtt=Object.create,yP=Object.defineProperty,Btt=Object.getOwnPropertyDescriptor,Ott=Object.getOwnPropertyNames,Ntt=Object.getPrototypeOf,Ftt=Object.prototype.hasOwnProperty,Rtt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ltt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ott(t))!Ftt.call(e,i)&&i!==r&&yP(e,i,{get:()=>t[i],enumerable:!(n=Btt(t,i))||n.enumerable});return e},ktt=(e,t,r)=>(r=e!=null?Dtt(Ntt(e)):{},Ltt(t||!e||!e.__esModule?yP(r,"default",{value:e,enumerable:!0}):r,e)),Ctt=Rtt((e,t)=>{t.exports=Worker}),Utt=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Utt||{}),Ptt=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(Ptt||{}),$tt=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))($tt||{}),ztt=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(ztt||{}),Vtt=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Vtt||{}),jtt=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(jtt||{}),gP=class{log(e){}},bP=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}};var qtt=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(qtt||{}),Ytt=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),r=pn.from(t);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new Wn(r)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let r=new xP(this._bindings,this._conn,t),n=await pn.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new Wtt(this._bindings,this._conn,t)}async insertArrowTable(e,t){let r=iv(e,"stream");await this.insertArrowFromIPCStream(r,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},xP=class{constructor(e,t,r){this.db=e,this.conn=t,this.header=r,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},Wtt=class{constructor(e,t,r){this.bindings=e,this.connectionId=t,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),r=pn.from(t);return console.assert(r.isSync()),console.assert(r.isFile()),new Wn(r)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),r=new xP(this.bindings,this.connectionId,t),n=await pn.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}},Gtt=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(Gtt||{}),Xtt=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Xtt||{}),be=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((r,n)=>{this.promiseResolver=r,this.promiseRejecter=n})}};function ov(e){switch(e.typeId){case N.Binary:return{sqlType:"binary"};case N.Bool:return{sqlType:"bool"};case N.Date:return{sqlType:"date"};case N.DateDay:return{sqlType:"date32[d]"};case N.DateMillisecond:return{sqlType:"date64[ms]"};case N.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case N.Float:return{sqlType:"float"};case N.Float16:return{sqlType:"float16"};case N.Float32:return{sqlType:"float32"};case N.Float64:return{sqlType:"float64"};case N.Int:return{sqlType:"int32"};case N.Int16:return{sqlType:"int16"};case N.Int32:return{sqlType:"int32"};case N.Int64:return{sqlType:"int64"};case N.Uint16:return{sqlType:"uint16"};case N.Uint32:return{sqlType:"uint32"};case N.Uint64:return{sqlType:"uint64"};case N.Uint8:return{sqlType:"uint8"};case N.IntervalDayTime:return{sqlType:"interval[dt]"};case N.IntervalYearMonth:return{sqlType:"interval[m]"};case N.List:return{sqlType:"list",valueType:ov(e.valueType)};case N.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case N.Null:return{sqlType:"null"};case N.Utf8:return{sqlType:"utf8"};case N.Struct:return{sqlType:"struct",fields:e.children.map(t=>wD(t.name,t.type))};case N.Map:{let t=e;return{sqlType:"map",keyType:ov(t.keyType),valueType:ov(t.valueType)}}case N.Time:return{sqlType:"time[s]"};case N.TimeMicrosecond:return{sqlType:"time[us]"};case N.TimeMillisecond:return{sqlType:"time[ms]"};case N.TimeNanosecond:return{sqlType:"time[ns]"};case N.TimeSecond:return{sqlType:"time[s]"};case N.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case N.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case N.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case N.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case N.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function wD(e,t){let r=ov(t);return r.name=e,r}var Htt=new TextEncoder,_P=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,r)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let r=this._nextMessageId++;return this._pendingRequests.set(r,e),this._worker.postMessage({messageId:r,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let r=e.data;switch(r.type){case"LOG":{this._logger.log(r.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(r.data);return}}let n=this._pendingRequests.get(r.requestId);if(!n){console.warn("unassociated response: [".concat(r.requestId,", ").concat(r.type.toString(),"]"));return}if(this._pendingRequests.delete(r.requestId),r.type=="ERROR"){let i=new Error(r.data.message);i.name=r.data.name,(t=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&t.writable&&(i.stack=r.data.stack),n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(r.type=="OK"){n.promiseResolver(r.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],r.type=="OK"){n.promiseResolver(r.data);return}break;case"GLOB_FILE_INFOS":if(r.type=="FILE_INFOS"){n.promiseResolver(r.data);return}break;case"GET_VERSION":if(r.type=="VERSION_STRING"){n.promiseResolver(r.data);return}break;case"GET_FEATURE_FLAGS":if(r.type=="FEATURE_FLAGS"){n.promiseResolver(r.data);return}break;case"GET_TABLE_NAMES":if(r.type=="TABLE_NAMES"){n.promiseResolver(r.data);return}break;case"TOKENIZE":if(r.type=="SCRIPT_TOKENS"){n.promiseResolver(r.data);return}break;case"COPY_FILE_TO_BUFFER":if(r.type=="FILE_BUFFER"){n.promiseResolver(r.data);return}break;case"EXPORT_FILE_STATISTICS":if(r.type=="FILE_STATISTICS"){n.promiseResolver(r.data);return}break;case"CONNECT":if(r.type=="CONNECTION_INFO"){n.promiseResolver(r.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(r.type=="QUERY_RESULT"){n.promiseResolver(r.data);return}break;case"SEND_PREPARED":if(r.type=="QUERY_RESULT_HEADER"){n.promiseResolver(r.data);return}break;case"START_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(r.data);return}break;case"POLL_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(r.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],r.type=="SUCCESS"){n.promiseResolver(r.data);return}break;case"FETCH_QUERY_RESULTS":if(r.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(r.data);return}break;case"CREATE_PREPARED":if(r.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(r.data);return}break}n.promiseRejecter(new Error("unexpected response type: ".concat(r.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new be("RESET",null);return await this.postTask(e)}async ping(){let e=new be("PING",null);await this.postTask(e)}async dropFile(e){let t=new be("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new be("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new be("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,r=n=>{}){this._onInstantiationProgress.push(r);let n=new be("INSTANTIATE",[e,t]);return await this.postTask(n)}async getVersion(){let e=new be("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new be("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new be("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new be("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new be("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new Ytt(this,e)}async disconnect(e){let t=new be("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let r=new be("RUN_QUERY",[e,t]);return await this.postTask(r)}async startPendingQuery(e,t){let r=new be("START_PENDING_QUERY",[e,t]);return await this.postTask(r)}async pollPendingQuery(e){let t=new be("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new be("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new be("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let r=new be("GET_TABLE_NAMES",[e,t]);return await this.postTask(r)}async createPrepared(e,t){let r=new be("CREATE_PREPARED",[e,t]);return await this.postTask(r)}async closePrepared(e,t){let r=new be("CLOSE_PREPARED",[e,t]);await this.postTask(r)}async runPrepared(e,t,r){let n=new be("RUN_PREPARED",[e,t,r]);return await this.postTask(n)}async sendPrepared(e,t,r){let n=new be("SEND_PREPARED",[e,t,r]);return await this.postTask(n)}async globFiles(e){let t=new be("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let r=Htt.encode(t);await this.registerFileBuffer(e,r)}async registerFileURL(e,t,r,n){t===void 0&&(t=e);let i=new be("REGISTER_FILE_URL",[e,t,r,n]);await this.postTask(i)}async registerEmptyFileBuffer(e){let t=new be("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let r=new be("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(r,[t.buffer])}async registerFileHandle(e,t,r,n){let i=new be("REGISTER_FILE_HANDLE",[e,t,r,n]);await this.postTask(i,[])}async collectFileStatistics(e,t){let r=new be("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(r,[])}async exportFileStatistics(e){let t=new be("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new be("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let r=new be("COPY_FILE_TO_PATH",[e,t]);await this.postTask(r)}async insertArrowFromIPCStream(e,t,r){if(t.length==0)return;let n=new be("INSERT_ARROW_FROM_IPC_STREAM",[e,t,r]);await this.postTask(n,[t.buffer])}async insertCSVFromPath(e,t,r){if(r.columns!==void 0){let i=[];for(let o in r.columns){let s=r.columns[o];i.push(wD(o,s))}r.columnsFlat=i,delete r.columns}let n=new be("IMPORT_CSV_FROM_PATH",[e,t,r]);await this.postTask(n)}async insertJSONFromPath(e,t,r){if(r.columns!==void 0){let i=[];for(let o in r.columns){let s=r.columns[o];i.push(wD(o,s))}r.columnsFlat=i,delete r.columns}let n=new be("IMPORT_JSON_FROM_PATH",[e,t,r]);await this.postTask(n)}};var Ztt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),Ktt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),Qtt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Jtt=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),vD={name:"@duckdb/duckdb-wasm",version:"1.28.1-dev99.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^14.0.1"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.18.0","@typescript-eslint/parser":"^6.18.0",esbuild:"^0.19.10",eslint:"^8.56.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.10.1",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.2",puppeteer:"^21.7.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},tet=vD.name,eet=vD.version,SD=vD.version.split("."),pBt=SD[0],mBt=SD[1],yBt=SD[2],ret=()=>typeof navigator>"u";function wP(){let e="https://cdn.jsdelivr.net/npm/".concat(tet,"@").concat(eet,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}var yD=null,gD=null,bD=null,xD=null,_D=null;async function net(){return yD==null&&(yD=typeof BigInt64Array<"u"),gD==null&&(gD=await Ktt()),bD==null&&(bD=await Jtt()),xD==null&&(xD=await Qtt()),_D==null&&(_D=await Ztt()),{bigInt64Array:yD,crossOriginIsolated:ret()||globalThis.crossOriginIsolated||!1,wasmExceptions:gD,wasmSIMD:xD,wasmThreads:bD,wasmBulkMemory:_D}}async function vP(e){let t=await net();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}var gBt=ktt(Ctt());function iet(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}var bBt=iet(),oet=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(oet||{});function SP(e={}){let{duckdb:t,connection:r,...n}=e,i=t,o=r,s;function a(){return s||(s=(i?Promise.resolve(i):aet(n).then(u=>i=u)).then(u=>u.connect()).then(u=>o=u)),s}async function c(){return i||await a(),i}async function l(){return o||await a(),o}return{getDuckDB:c,getConnection:l,query:async u=>{let{type:f,sql:d}=u,p=await(await l()).query(d);return f==="exec"?void 0:f==="arrow"?p:Array.from(p)}}}async function aet({log:e=!1}={}){let t=wP(),r=await vP(t),n=URL.createObjectURL(new Blob([`importScripts("${r.mainWorker}");`],{type:"text/javascript"})),i=new Worker(n),o=e?new bP:new gP,s=new _P(o,i);return await s.instantiate(r.mainModule,r.pthreadWorker),URL.revokeObjectURL(n),s}function ID(){let e=new Set,t,r=new Promise(n=>t=n);return{pending(n){e.add(n)},ready(n){return e.delete(n),e.size===0},resolve(){r=new Promise(n=>{t(),t=n})},get promise(){return r}}}var nk={};Ir(nk,{Fixed:()=>ia,Param:()=>Nl,Query:()=>bt,Selection:()=>sc,agg:()=>IM,align:()=>KF,and:()=>zn,area:()=>O4,areaX:()=>N4,areaY:()=>F4,argmax:()=>ih,argmin:()=>nh,arrayAgg:()=>HM,arrow:()=>I8,aspectRatio:()=>QF,avg:()=>TM,axis:()=>JF,axisFx:()=>D8,axisFy:()=>B8,axisX:()=>M8,axisY:()=>E8,barX:()=>C4,barY:()=>U4,bin:()=>QT,cast:()=>zy,castDouble:()=>oh,castInteger:()=>ZM,cell:()=>P4,cellX:()=>$4,cellY:()=>z4,centroid:()=>jy,centroidX:()=>eE,centroidY:()=>rE,circle:()=>X4,colorBase:()=>CL,colorClamp:()=>AL,colorConstant:()=>PL,colorDomain:()=>IL,colorExponent:()=>UL,colorInterpolate:()=>BL,colorLabel:()=>FL,colorLegend:()=>tk,colorN:()=>ML,colorNice:()=>EL,colorPivot:()=>OL,colorRange:()=>TL,colorReverse:()=>RL,colorScale:()=>SL,colorScheme:()=>DL,colorSymmetric:()=>NL,colorTickFormat:()=>kL,colorZero:()=>LL,column:()=>El,contour:()=>d8,coordinator:()=>po,corr:()=>UM,count:()=>Ri,covarPop:()=>PM,create:()=>Ol,cume_dist:()=>yM,dateDay:()=>tE,dateMonth:()=>QM,dateMonthDay:()=>JM,delaunayLink:()=>w8,delaunayMesh:()=>v8,denseLine:()=>f8,dense_rank:()=>pM,density:()=>u8,densityX:()=>c8,densityY:()=>l8,dot:()=>Y4,dotX:()=>W4,dotY:()=>G4,entropy:()=>LM,eq:()=>nc,facetGrid:()=>wR,facetLabel:()=>vR,facetMargin:()=>yR,facetMarginBottom:()=>bR,facetMarginLeft:()=>xR,facetMarginRight:()=>_R,facetMarginTop:()=>gR,first:()=>WM,first_value:()=>_M,frame:()=>A8,from:()=>XG,fxAlign:()=>BR,fxAriaDescription:()=>XR,fxAriaLabel:()=>GR,fxAxis:()=>RR,fxDomain:()=>SR,fxFontVariant:()=>WR,fxGrid:()=>zR,fxInset:()=>AR,fxInsetLeft:()=>MR,fxInsetRight:()=>ER,fxLabel:()=>jR,fxLabelAnchor:()=>qR,fxLabelOffset:()=>YR,fxLine:()=>VR,fxNice:()=>TR,fxPadding:()=>OR,fxPaddingInner:()=>NR,fxPaddingOuter:()=>FR,fxRange:()=>IR,fxReverse:()=>HR,fxRound:()=>DR,fxTickFormat:()=>PR,fxTickPadding:()=>UR,fxTickRotate:()=>$R,fxTickSize:()=>kR,fxTickSpacing:()=>CR,fxTicks:()=>LR,fyAlign:()=>nL,fyAriaDescription:()=>wL,fyAriaLabel:()=>_L,fyAxis:()=>aL,fyDomain:()=>ZR,fyFontVariant:()=>xL,fyGrid:()=>pL,fyInset:()=>JR,fyInsetBottom:()=>eL,fyInsetTop:()=>tL,fyLabel:()=>yL,fyLabelAnchor:()=>gL,fyLabelOffset:()=>bL,fyLine:()=>mL,fyNice:()=>QR,fyPadding:()=>iL,fyPaddingInner:()=>oL,fyPaddingOuter:()=>sL,fyRange:()=>KR,fyReverse:()=>vL,fyRound:()=>rL,fyTickFormat:()=>dL,fyTickPadding:()=>fL,fyTickRotate:()=>hL,fyTickSize:()=>lL,fyTickSpacing:()=>uL,fyTicks:()=>cL,geo:()=>L8,geojson:()=>Vy,graticule:()=>C8,grid:()=>e6,gridFx:()=>F8,gridFy:()=>R8,gridX:()=>O8,gridY:()=>N8,gt:()=>Uy,gte:()=>oM,hconcat:()=>zG,heatmap:()=>h8,height:()=>WF,hexagon:()=>H4,hexbin:()=>y8,hexgrid:()=>g8,highlight:()=>U8,hspace:()=>qG,hull:()=>S8,image:()=>a8,inset:()=>t6,intervalX:()=>q8,intervalXY:()=>W8,intervalY:()=>Y8,isBetween:()=>tr,isDistinct:()=>sM,isNotBetween:()=>aM,isNotDistinct:()=>Py,isNotNull:()=>rc,isNull:()=>uf,kurtosis:()=>RM,label:()=>r6,lag:()=>bM,last:()=>GM,last_value:()=>wM,lead:()=>xM,lengthBase:()=>y4,lengthClamp:()=>h4,lengthConstant:()=>b4,lengthDomain:()=>f4,lengthExponent:()=>g4,lengthNice:()=>p4,lengthRange:()=>d4,lengthScale:()=>u4,lengthZero:()=>m4,line:()=>R4,lineX:()=>L4,lineY:()=>k4,link:()=>T8,literal:()=>Fi,loadCSV:()=>sE,loadExtension:()=>iE,loadJSON:()=>aE,loadObjects:()=>uE,loadParquet:()=>cE,loadSpatial:()=>lE,lt:()=>ic,lte:()=>oc,mad:()=>AM,margin:()=>VF,marginBottom:()=>ZF,marginLeft:()=>GF,marginRight:()=>XF,marginTop:()=>HF,margins:()=>zF,max:()=>fo,median:()=>EM,menu:()=>LG,min:()=>ho,mode:()=>BM,name:()=>PF,nearestX:()=>V8,nearestY:()=>j8,neq:()=>ff,not:()=>iM,nth_value:()=>vM,ntile:()=>gM,opacityBase:()=>HL,opacityClamp:()=>jL,opacityConstant:()=>KL,opacityDomain:()=>zL,opacityExponent:()=>ZL,opacityLabel:()=>YL,opacityLegend:()=>ek,opacityNice:()=>qL,opacityRange:()=>VL,opacityReverse:()=>WL,opacityScale:()=>$L,opacityTickFormat:()=>XL,opacityZero:()=>GL,or:()=>lf,padding:()=>n6,pan:()=>G8,panX:()=>X8,panY:()=>H8,panZoom:()=>Z8,panZoomX:()=>K8,panZoomY:()=>Q8,percent_rank:()=>mM,plot:()=>QG,product:()=>MM,projectionClip:()=>D4,projectionDomain:()=>S4,projectionInset:()=>I4,projectionInsetBottom:()=>E4,projectionInsetLeft:()=>T4,projectionInsetRight:()=>A4,projectionInsetTop:()=>M4,projectionParallels:()=>_4,projectionPrecision:()=>w4,projectionRotate:()=>v4,projectionType:()=>x4,quantile:()=>DM,rBase:()=>a4,rClamp:()=>i4,rConstant:()=>l4,rDomain:()=>r4,rExponent:()=>c4,rNice:()=>o4,rRange:()=>n4,rScale:()=>e4,rZero:()=>s4,rank:()=>hM,raster:()=>p8,rasterTile:()=>m8,rect:()=>V4,rectX:()=>j4,rectY:()=>q4,regressionY:()=>b8,row_number:()=>dM,ruleX:()=>J4,ruleY:()=>t8,search:()=>kG,skewness:()=>FM,slider:()=>CG,sphere:()=>k8,spike:()=>s8,sql:()=>q,stddev:()=>NM,stddevPop:()=>CM,stringAgg:()=>XM,style:()=>qF,sum:()=>Li,symbolDomain:()=>JL,symbolLegend:()=>rk,symbolRange:()=>t4,symbolScale:()=>QL,table:()=>UG,text:()=>Z4,textX:()=>K4,textY:()=>Q4,tickX:()=>e8,tickY:()=>r8,toggle:()=>Im,toggleColor:()=>z8,toggleX:()=>P8,toggleY:()=>$8,varPop:()=>kM,variance:()=>OM,vconcat:()=>$G,vector:()=>n8,vectorX:()=>i8,vectorY:()=>o8,voronoi:()=>x8,voronoiMesh:()=>_8,vspace:()=>jG,width:()=>YF,xAlign:()=>h6,xAriaDescription:()=>O6,xAriaLabel:()=>B6,xAxis:()=>g6,xBase:()=>R6,xClamp:()=>f6,xConstant:()=>k6,xDomain:()=>o6,xExponent:()=>L6,xFontVariant:()=>D6,xGrid:()=>I6,xInset:()=>c6,xInsetLeft:()=>l6,xInsetRight:()=>u6,xLabel:()=>A6,xLabelAnchor:()=>M6,xLabelOffset:()=>E6,xLine:()=>T6,xNice:()=>a6,xPadding:()=>p6,xPaddingInner:()=>m6,xPaddingOuter:()=>y6,xRange:()=>s6,xReverse:()=>N6,xRound:()=>d6,xScale:()=>i6,xTickFormat:()=>v6,xTickPadding:()=>w6,xTickRotate:()=>S6,xTickSize:()=>x6,xTickSpacing:()=>_6,xTicks:()=>b6,xZero:()=>F6,xyDomain:()=>jF,yAlign:()=>W6,yAriaDescription:()=>uR,yAriaLabel:()=>lR,yAxis:()=>Z6,yBase:()=>hR,yClamp:()=>q6,yConstant:()=>mR,yDomain:()=>U6,yExponent:()=>pR,yFontVariant:()=>cR,yGrid:()=>nR,yInset:()=>z6,yInsetBottom:()=>j6,yInsetTop:()=>V6,yLabel:()=>oR,yLabelAnchor:()=>sR,yLabelOffset:()=>aR,yLine:()=>iR,yNice:()=>$6,yPadding:()=>G6,yPaddingInner:()=>X6,yPaddingOuter:()=>H6,yRange:()=>P6,yReverse:()=>fR,yRound:()=>Y6,yScale:()=>C6,yTickFormat:()=>eR,yTickPadding:()=>tR,yTickRotate:()=>rR,yTickSize:()=>Q6,yTickSpacing:()=>J6,yTicks:()=>K6,yZero:()=>dR});var ia=Symbol("Fixed"),mn=Symbol("Transient"),Xg=Symbol("Transform");var Bx={};Ir(Bx,{Area:()=>vd,Arrow:()=>sx,BarX:()=>ax,BarY:()=>cx,Cell:()=>Sd,Contour:()=>_x,Density:()=>Sx,Dot:()=>Id,Frame:()=>Qb,Geo:()=>Ix,Hexgrid:()=>Tx,Image:()=>Ax,Line:()=>Td,Link:()=>ix,Mark:()=>Ft,Raster:()=>yx,Rect:()=>Md,RuleX:()=>Gb,RuleY:()=>Xb,Text:()=>xd,TickX:()=>dx,TickY:()=>hx,Tip:()=>Jb,Vector:()=>wd,area:()=>nx,areaX:()=>Nu,areaY:()=>fl,arrow:()=>bY,auto:()=>DY,autoSpec:()=>W3,axisFx:()=>cT,axisFy:()=>aT,axisX:()=>Zb,axisY:()=>Hb,barX:()=>Ra,barY:()=>La,bin:()=>ul,binX:()=>Na,binY:()=>Fa,bollinger:()=>ku,bollingerX:()=>LY,bollingerY:()=>kY,boxX:()=>CY,boxY:()=>UY,cell:()=>Fu,cellX:()=>_Y,cellY:()=>wY,centroid:()=>RW,circle:()=>IY,cluster:()=>FW,column:()=>en,contour:()=>GY,crosshair:()=>ZY,crosshairX:()=>KY,crosshairY:()=>QY,delaunayLink:()=>eW,delaunayMesh:()=>rW,density:()=>aW,differenceY:()=>uW,dodgeX:()=>XW,dodgeY:()=>HW,dot:()=>Lo,dotX:()=>vY,dotY:()=>SY,filter:()=>OV,find:()=>$V,formatIsoDate:()=>p3,formatMonth:()=>zj,formatWeekday:()=>Vj,frame:()=>Hp,geo:()=>NT,geoCentroid:()=>LW,graticule:()=>dW,gridFx:()=>dT,gridFy:()=>uT,gridX:()=>fT,gridY:()=>lT,group:()=>Pb,groupX:()=>Su,groupY:()=>Iu,groupZ:()=>Ub,hexagon:()=>TY,hexbin:()=>hW,hexgrid:()=>pW,hull:()=>nW,identity:()=>K,image:()=>yW,indexOf:()=>nr,initializer:()=>Qe,interpolateNearest:()=>bx,interpolateNone:()=>OT,interpolatorBarycentric:()=>gx,interpolatorRandomWalk:()=>xx,legend:()=>$q,line:()=>Ad,lineX:()=>Ru,lineY:()=>Lu,linearRegressionX:()=>xW,linearRegressionY:()=>_W,link:()=>vT,map:()=>Ti,mapX:()=>cm,mapY:()=>lm,marks:()=>Ur,normalize:()=>zT,normalizeX:()=>JW,normalizeY:()=>tG,plot:()=>ex,pointer:()=>qp,pointerX:()=>Yp,pointerY:()=>md,raster:()=>jY,rect:()=>ux,rectX:()=>om,rectY:()=>sm,reverse:()=>NV,ruleX:()=>Zi,ruleY:()=>Ki,scale:()=>Mu,select:()=>rG,selectFirst:()=>bF,selectLast:()=>xF,selectMaxX:()=>oG,selectMaxY:()=>sG,selectMinX:()=>nG,selectMinY:()=>iG,shiftX:()=>eG,shuffle:()=>FV,sort:()=>AI,sphere:()=>fW,spike:()=>_q,stackX:()=>j3,stackX1:()=>lY,stackX2:()=>uY,stackY:()=>q3,stackY1:()=>fY,stackY2:()=>dY,text:()=>Oa,textX:()=>tT,textY:()=>eT,tickX:()=>ET,tickY:()=>DT,tip:()=>mT,transform:()=>rn,tree:()=>dF,treeLink:()=>CT,treeNode:()=>Mx,valueof:()=>At,vector:()=>N3,vectorX:()=>iT,vectorY:()=>oT,voronoi:()=>iW,voronoiMesh:()=>oW,window:()=>um,windowX:()=>BY,windowY:()=>OY});function ie(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bc(e){let t,r,n;e.length!==2?(t=ie,r=(a,c)=>ie(e(a),c),n=(a,c)=>e(a)-c):(t=e===ie||e===Gn?e:cet,r=e,n=e);function i(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;r(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;r(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){let f=i(a,c,l,u-1);return f>l&&n(a[f-1],c)>-n(a[f],c)?f-1:f}return{left:i,center:s,right:o}}function cet(){return 0}function Hg(e){return e===null?NaN:+e}function*IP(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}var TP=Bc(ie),AP=TP.right,uet=TP.left,fet=Bc(Hg).center,Oc=AP;var Zg=MP(EP),TD=MP(det);function MP(e){return function(t,r,n=r){if(!((r=+r)>=0))throw new RangeError("invalid rx");if(!((n=+n)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:s}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((s=Math.floor(s!==void 0?s:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!s||!r&&!n)return t;let a=r&&e(r),c=n&&e(n),l=i.slice();return a&&c?(Dh(a,l,i,o,s),Dh(a,i,l,o,s),Dh(a,l,i,o,s),Bh(c,i,l,o,s),Bh(c,l,i,o,s),Bh(c,i,l,o,s)):a?(Dh(a,i,l,o,s),Dh(a,l,i,o,s),Dh(a,i,l,o,s)):c&&(Bh(c,i,l,o,s),Bh(c,l,i,o,s),Bh(c,i,l,o,s)),t}}function Dh(e,t,r,n,i){for(let o=0,s=n*i;o<s;)e(t,r,o,o+=n,1)}function Bh(e,t,r,n,i){for(let o=0,s=n*i;o<n;++o)e(t,r,o,o+s,n)}function det(e){let t=EP(e);return(r,n,i,o,s)=>{i<<=2,o<<=2,s<<=2,t(r,n,i+0,o+0,s),t(r,n,i+1,o+1,s),t(r,n,i+2,o+2,s),t(r,n,i+3,o+3,s)}}function EP(e){let t=Math.floor(e);if(t===e)return het(e);let r=e-t,n=2*e+1;return(i,o,s,a,c)=>{if(!((a-=c)>=s))return;let l=t*o[s],u=c*t,f=u+c;for(let d=s,h=s+u;d<h;d+=c)l+=o[Math.min(a,d)];for(let d=s,h=a;d<=h;d+=c)l+=o[Math.min(a,d+u)],i[d]=(l+r*(o[Math.max(s,d-f)]+o[Math.min(a,d+f)]))/n,l-=o[Math.max(s,d-u)]}}function het(e){let t=2*e+1;return(r,n,i,o,s)=>{if(!((o-=s)>=i))return;let a=e*n[i],c=s*e;for(let l=i,u=i+c;l<u;l+=s)a+=n[Math.min(o,l)];for(let l=i,u=o;l<=u;l+=s)a+=n[Math.min(o,l+c)],r[l]=a/t,a-=n[Math.max(i,l-c)]}}function oa(e,t){let r=0;if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&++r;else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&++r}return r}function pet(e){return e.length|0}function met(e){return!(e>0)}function yet(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function get(e){return t=>e(...t)}function sv(...e){let t=typeof e[e.length-1]=="function"&&get(e.pop());e=e.map(yet);let r=e.map(pet),n=e.length-1,i=new Array(n+1).fill(0),o=[];if(n<0||r.some(met))return o;for(;;){o.push(i.map((a,c)=>e[c][a]));let s=n;for(;++i[s]===r[s];){if(s===0)return t?o.map(t):o;i[s--]=0}}}function av(e,t){var r=0,n=0;return Float64Array.from(e,t===void 0?i=>r+=+i||0:i=>r+=+t(i,n++,e)||0)}function Kl(e,t){let r=0,n,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i))}if(r>1)return o/(r-1)}function vo(e,t){let r=Kl(e,t);return r&&Math.sqrt(r)}function Be(e,t){let r,n;if(t===void 0)for(let i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var yn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let r=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let o=r[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(r[n++]=a),t=s}return r[n]=t,this._n=n+1,this}valueOf(){let t=this._partials,r=this._n,n,i,o,s=0;if(r>0){for(s=t[--r];r>0&&(n=s,i=t[--r],s=n+i,o=i-(s-n),!o););r>0&&(o<0&&t[r-1]<0||o>0&&t[r-1]>0)&&(i=o*2,n=s+i,i==n-s&&(s=n))}return s}};var Xn=class extends Map{constructor(t,r=OP){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[n,i]of t)this.set(n,i)}get(t){return super.get(AD(this,t))}has(t){return super.has(AD(this,t))}set(t,r){return super.set(DP(this,t),r)}delete(t){return super.delete(BP(this,t))}},Hn=class extends Set{constructor(t,r=OP){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let n of t)this.add(n)}has(t){return super.has(AD(this,t))}add(t){return super.add(DP(this,t))}delete(t){return super.delete(BP(this,t))}};function AD({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function DP({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function BP({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function OP(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Kg(e){return e}function Xr(e,...t){return ED(e,Kg,Kg,t)}function hs(e,t,...r){return ED(e,Kg,t,r)}function MD(e,t,...r){return ED(e,Array.from,t,r)}function ED(e,t,r,n){return function i(o,s){if(s>=n.length)return r(o);let a=new Xn,c=n[s++],l=-1;for(let u of o){let f=c(u,++l,o),d=a.get(f);d?d.push(u):a.set(f,[u])}for(let[u,f]of a)a.set(u,i(f,s));return t(a)}(e,0)}function DD(e,t){return Array.from(t,r=>e[r])}function Nc(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[r]=t;if(r&&r.length!==2||t.length>1){let n=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),n.sort((i,o)=>{for(let s of t){let a=Of(s[i],s[o]);if(a)return a}})):(r=e.map(r),n.sort((i,o)=>Of(r[i],r[o]))),DD(e,n)}return e.sort(Qg(r))}function Qg(e=ie){if(e===ie)return Of;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Of(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Oh(e,t,r){return(t.length!==2?Nc(hs(e,t,r),([n,i],[o,s])=>ie(i,s)||ie(n,o)):Nc(Xr(e,r),([n,i],[o,s])=>t(i,s)||ie(n,o))).map(([n])=>n)}var bet=Math.sqrt(50),xet=Math.sqrt(10),_et=Math.sqrt(2);function cv(e,t,r){let n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=bet?10:o>=xet?5:o>=_et?2:1,a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=r&&r<2?cv(e,t,r*2):[a,c,l]}function gn(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let n=t<e,[i,o,s]=n?cv(t,e,r):cv(e,t,r);if(!(o>=i))return[];let a=o-i+1,c=new Array(a);if(n)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(i+l)/-s;else for(let l=0;l<a;++l)c[l]=(i+l)*s;return c}function Fc(e,t,r){return t=+t,e=+e,r=+r,cv(e,t,r)[2]}function Nh(e,t,r){t=+t,e=+e,r=+r;let n=t<e,i=n?Fc(t,e,r):Fc(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Fh(e,t,r){let n;for(;;){let i=Fc(e,t,r);if(i===n||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),n=i}}function Ql(e){return Math.max(1,Math.ceil(Math.log(oa(e))/Math.LN2)+1)}function he(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function lv(e,t){let r,n=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(r<o||r===void 0&&o>=o)&&(r=o,n=i);else for(let o of e)(o=t(o,++i,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o,n=i);return n}function Oe(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function uv(e,t){let r,n=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(r>o||r===void 0&&o>=o)&&(r=o,n=i);else for(let o of e)(o=t(o,++i,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o,n=i);return n}function fv(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?Of:Qg(i);n>r;){if(n-r>600){let c=n-r+1,l=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),h=Math.max(r,Math.floor(t-l*f/c+d)),p=Math.min(n,Math.floor(t+(c-l)*f/c+d));fv(e,t,h,p,i)}let o=e[t],s=r,a=n;for(Jg(e,r,t),i(e[n],o)>0&&Jg(e,r,n);s<a;){for(Jg(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[r],o)===0?Jg(e,r,a):(++a,Jg(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Jg(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function Nf(e,t=ie){let r,n=!1;if(t.length===1){let i;for(let o of e){let s=t(o);(n?ie(s,i)>0:ie(s,s)===0)&&(r=o,i=s,n=!0)}}else for(let i of e)(n?t(i,r)>0:t(i,i)===0)&&(r=i,n=!0);return r}function Zn(e,t,r){if(e=Float64Array.from(IP(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Oe(e);if(t>=1)return he(e);var n,i=(n-1)*t,o=Math.floor(i),s=he(fv(e,o).subarray(0,o+1)),a=Oe(e.subarray(o+1));return s+(a-s)*(i-o)}}function BD(e,t,r=Hg){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),s=+r(e[o],o,e),a=+r(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function dv(e,t,r){let n=oa(e),i=Zn(e,.75)-Zn(e,.25);return n&&i?Math.ceil((r-t)/(2*i*Math.pow(n,-1/3))):1}function t0(e,t,r){let n=oa(e),i=vo(e);return n&&i?Math.ceil((r-t)*Math.cbrt(n)/(3.49*i)):1}function Rc(e,t){let r=0,n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++r,n+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++r,n+=o)}if(r)return n/r}function ps(e,t){return Zn(e,.5,t)}function*vet(e){for(let t of e)yield*t}function Rh(e){return Array.from(vet(e))}function Lh(e,t){let r=new Xn;if(t===void 0)for(let o of e)o!=null&&o>=o&&r.set(o,(r.get(o)||0)+1);else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&s>=s&&r.set(s,(r.get(s)||0)+1)}let n,i=0;for(let[o,s]of r)s>i&&(i=s,n=o);return n}function hv(e,t=Iet){let r=[],n,i=!1;for(let o of e)i&&r.push(t(n,o)),n=o,i=!0;return r}function Iet(e,t){return[e,t]}function _r(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function e0(e,t=ie){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let r=Array.from(e),n=new Float64Array(r.length);t.length!==2&&(r=r.map(t),t=ie);let i=(a,c)=>t(r[a],r[c]),o,s;return e=Uint32Array.from(r,(a,c)=>c),e.sort(t===ie?(a,c)=>Of(r[a],r[c]):Qg(i)),e.forEach((a,c)=>{let l=i(a,o===void 0?a:o);l>=0?((o===void 0||l>0)&&(o=a,s=c),n[a]=s):n[a]=NaN}),n}function pv(e,t=ie){let r,n=!1;if(t.length===1){let i;for(let o of e){let s=t(o);(n?ie(s,i)<0:ie(s,s)===0)&&(r=o,i=s,n=!0)}}else for(let i of e)(n?t(i,r)<0:t(i,i)===0)&&(r=i,n=!0);return r}function bn(e,t){let r=0;if(t===void 0)for(let n of e)(n=+n)&&(r+=n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}function Jl(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function NP(e){return e}var OD=1,ND=2,FD=3,mv=4,FP=1e-6;function Tet(e){return"translate("+e+",0)"}function Aet(e){return"translate(0,"+e+")"}function Met(e){return t=>+e(t)}function Eet(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function Det(){return!this.__axis}function Bet(e,t){var r=[],n=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===OD||e===mv?-1:1,u=e===mv||e===ND?"x":"y",f=e===OD||e===FD?Tet:Aet;function d(h){var p=n??(t.ticks?t.ticks.apply(t,r):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,r):NP),y=Math.max(o,0)+a,g=t.range(),b=+g[0]+c,x=+g[g.length-1]+c,_=(t.bandwidth?Eet:Met)(t.copy(),c),v=h.selection?h.selection():h,w=v.selectAll(".domain").data([null]),T=v.selectAll(".tick").data(p,t).order(),E=T.exit(),I=T.enter().append("g").attr("class","tick"),B=T.select("line"),A=T.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(I),B=B.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),A=A.merge(I.append("text").attr("fill","currentColor").attr(u,l*y).attr("dy",e===OD?"0em":e===FD?"0.71em":"0.32em")),h!==v&&(w=w.transition(h),T=T.transition(h),B=B.transition(h),A=A.transition(h),E=E.transition(h).attr("opacity",FP).attr("transform",function(O){return isFinite(O=_(O))?f(O+c):this.getAttribute("transform")}),I.attr("opacity",FP).attr("transform",function(O){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(O))?L:_(O))+c)})),E.remove(),w.attr("d",e===mv||e===ND?s?"M"+l*s+","+b+"H"+c+"V"+x+"H"+l*s:"M"+c+","+b+"V"+x:s?"M"+b+","+l*s+"V"+c+"H"+x+"V"+l*s:"M"+b+","+c+"H"+x),T.attr("opacity",1).attr("transform",function(O){return f(_(O)+c)}),B.attr(u+"2",l*o),A.attr(u,l*y).text(m),v.filter(Det).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===ND?"start":e===mv?"end":"middle"),v.each(function(){this.__axis=_})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return r=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(r=h==null?[]:Array.from(h),d):r.slice()},d.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),d):n&&n.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=s=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(s=+h,d):s},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(c=+h,d):c},d}function RD(e){return Bet(FD,e)}var Oet={value:()=>{}};function LP(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new yv(r)}function yv(e){this._=e}function Net(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}yv.prototype=LP.prototype={constructor:yv,on:function(e,t){var r=this._,n=Net(e+"",r),i,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((i=(e=n[o]).type)&&(i=Fet(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=n[o]).type)r[i]=RP(r[i],e.name,t);else if(t==null)for(i in r)r[i]=RP(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new yv(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function Fet(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function RP(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=Oet,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Ff=LP;var gv="http://www.w3.org/1999/xhtml",So={svg:"http://www.w3.org/2000/svg",xhtml:gv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lc(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function Ret(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===gv&&t.documentElement.namespaceURI===gv?t.createElement(e):t.createElementNS(r,e)}}function Let(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kc(e){var t=Lc(e);return(t.local?Let:Ret)(t)}function ket(){}function Rf(e){return e==null?ket:function(){return this.querySelector(e)}}function kP(e){typeof e!="function"&&(e=Rf(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],s=o.length,a=n[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new yr(n,this._parents)}function LD(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cet(){return[]}function r0(e){return e==null?Cet:function(){return this.querySelectorAll(e)}}function Uet(e){return function(){return LD(e.apply(this,arguments))}}function CP(e){typeof e=="function"?e=Uet(e):e=r0(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var s=t[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(n.push(e.call(c,c.__data__,l,s)),i.push(c));return new yr(n,i)}function n0(e){return function(){return this.matches(e)}}function bv(e){return function(t){return t.matches(e)}}var Pet=Array.prototype.find;function $et(e){return function(){return Pet.call(this.children,e)}}function zet(){return this.firstElementChild}function UP(e){return this.select(e==null?zet:$et(typeof e=="function"?e:bv(e)))}var Vet=Array.prototype.filter;function jet(){return Array.from(this.children)}function qet(e){return function(){return Vet.call(this.children,e)}}function PP(e){return this.selectAll(e==null?jet:qet(typeof e=="function"?e:bv(e)))}function $P(e){typeof e!="function"&&(e=n0(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],s=o.length,a=n[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new yr(n,this._parents)}function xv(e){return new Array(e.length)}function zP(){return new yr(this._enter||this._groups.map(xv),this._parents)}function i0(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}i0.prototype={constructor:i0,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function VP(e){return function(){return e}}function Yet(e,t,r,n,i,o){for(var s=0,a,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],n[s]=a):r[s]=new i0(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function Wet(e,t,r,n,i,o,s){var a,c,l=new Map,u=t.length,f=o.length,d=new Array(u),h;for(a=0;a<u;++a)(c=t[a])&&(d[a]=h=s.call(c,c.__data__,a,t)+"",l.has(h)?i[a]=c:l.set(h,c));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(c=l.get(h))?(n[a]=c,c.__data__=o[a],l.delete(h)):r[a]=new i0(e,o[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(d[a])===c&&(i[a]=c)}function Get(e){return e.__data__}function jP(e,t){if(!arguments.length)return Array.from(this,Get);var r=t?Wet:Yet,n=this._parents,i=this._groups;typeof e!="function"&&(e=VP(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=n[l],f=i[l],d=f.length,h=Xet(e.call(u,u&&u.__data__,l,n)),p=h.length,m=a[l]=new Array(p),y=s[l]=new Array(p),g=c[l]=new Array(d);r(u,f,m,y,g,h,t);for(var b=0,x=0,_,v;b<p;++b)if(_=m[b]){for(b>=x&&(x=b+1);!(v=y[x])&&++x<p;);_._next=v||null}}return s=new yr(s,n),s._enter=a,s._exit=c,s}function Xet(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qP(){return new yr(this._exit||this._groups.map(xv),this._parents)}function YP(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function WP(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=r[c],u=n[c],f=l.length,d=a[c]=new Array(f),h,p=0;p<f;++p)(h=l[p]||u[p])&&(d[p]=h);for(;c<i;++c)a[c]=r[c];return new yr(a,this._parents)}function GP(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],s;--i>=0;)(s=n[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function XP(e){e||(e=Het);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var s=r[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new yr(i,this._parents).order()}function Het(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function HP(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ZP(){return Array.from(this)}function KP(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var s=n[i];if(s)return s}return null}function QP(){let e=0;for(let t of this)++e;return e}function JP(){return!this.node()}function t7(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Zet(e){return function(){this.removeAttribute(e)}}function Ket(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qet(e,t){return function(){this.setAttribute(e,t)}}function Jet(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function trt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function ert(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function e7(e,t){var r=Lc(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Ket:Zet:typeof t=="function"?r.local?ert:trt:r.local?Jet:Qet)(r,t))}function _v(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rrt(e){return function(){this.style.removeProperty(e)}}function nrt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function irt(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function r7(e,t,r){return arguments.length>1?this.each((t==null?rrt:typeof t=="function"?irt:nrt)(e,t,r??"")):tu(this.node(),e)}function tu(e,t){return e.style.getPropertyValue(t)||_v(e).getComputedStyle(e,null).getPropertyValue(t)}function ort(e){return function(){delete this[e]}}function srt(e,t){return function(){this[e]=t}}function art(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function n7(e,t){return arguments.length>1?this.each((t==null?ort:typeof t=="function"?art:srt)(e,t)):this.node()[e]}function i7(e){return e.trim().split(/^|\s+/)}function kD(e){return e.classList||new o7(e)}function o7(e){this._node=e,this._names=i7(e.getAttribute("class")||"")}o7.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function s7(e,t){for(var r=kD(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function a7(e,t){for(var r=kD(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function crt(e){return function(){s7(this,e)}}function lrt(e){return function(){a7(this,e)}}function urt(e,t){return function(){(t.apply(this,arguments)?s7:a7)(this,e)}}function c7(e,t){var r=i7(e+"");if(arguments.length<2){for(var n=kD(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?urt:t?crt:lrt)(r,t))}function frt(){this.textContent=""}function drt(e){return function(){this.textContent=e}}function hrt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function l7(e){return arguments.length?this.each(e==null?frt:(typeof e=="function"?hrt:drt)(e)):this.node().textContent}function prt(){this.innerHTML=""}function mrt(e){return function(){this.innerHTML=e}}function yrt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function u7(e){return arguments.length?this.each(e==null?prt:(typeof e=="function"?yrt:mrt)(e)):this.node().innerHTML}function grt(){this.nextSibling&&this.parentNode.appendChild(this)}function f7(){return this.each(grt)}function brt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function d7(){return this.each(brt)}function h7(e){var t=typeof e=="function"?e:kc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xrt(){return null}function p7(e,t){var r=typeof e=="function"?e:kc(e),n=t==null?xrt:typeof t=="function"?t:Rf(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _rt(){var e=this.parentNode;e&&e.removeChild(this)}function m7(){return this.each(_rt)}function wrt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vrt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function y7(e){return this.select(e?vrt:wrt)}function g7(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Srt(e){return function(t){e.call(this,t,this.__data__)}}function Irt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Trt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function Art(e,t,r){return function(){var n=this.__on,i,o=Srt(t);if(n){for(var s=0,a=n.length;s<a;++s)if((i=n[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function b7(e,t,r){var n=Irt(e+""),i,o=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=n[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Art:Trt,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function x7(e,t,r){var n=_v(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Mrt(e,t){return function(){return x7(this,e,t)}}function Ert(e,t){return function(){return x7(this,e,t.apply(this,arguments))}}function _7(e,t){return this.each((typeof t=="function"?Ert:Mrt)(e,t))}function*w7(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,s;i<o;++i)(s=n[i])&&(yield s)}var CD=[null];function yr(e,t){this._groups=e,this._parents=t}function v7(){return new yr([[document.documentElement]],CD)}function Drt(){return this}yr.prototype=v7.prototype={constructor:yr,select:kP,selectAll:CP,selectChild:UP,selectChildren:PP,filter:$P,data:jP,enter:zP,exit:qP,join:YP,merge:WP,selection:Drt,order:GP,sort:XP,call:HP,nodes:ZP,node:KP,size:QP,empty:JP,each:t7,attr:e7,style:r7,property:n7,classed:c7,text:l7,html:u7,raise:f7,lower:d7,append:h7,insert:p7,remove:m7,clone:y7,datum:g7,on:b7,dispatch:_7,[Symbol.iterator]:w7};var Cc=v7;function ae(e){return typeof e=="string"?new yr([[document.querySelector(e)]],[document.documentElement]):new yr([[e]],CD)}function S7(e){let t;for(;t=e.sourceEvent;)e=t;return e}function En(e,t){if(e=S7(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var wv={capture:!0,passive:!1};function vv(e){e.preventDefault(),e.stopImmediatePropagation()}function o0(e){var t=e.document.documentElement,r=ae(e).on("dragstart.drag",vv,wv);"onselectstart"in t?r.on("selectstart.drag",vv,wv):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function s0(e,t){var r=e.document.documentElement,n=ae(e).on("dragstart.drag",null);t&&(n.on("click.drag",vv,wv),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function Uc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function eu(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function aa(){}var ru=.7,Cf=1/ru,kh="\\s*([+-]?\\d+)\\s*",a0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Brt=/^#([0-9a-f]{3,8})$/,Ort=new RegExp(`^rgb\\(${kh},${kh},${kh}\\)$`),Nrt=new RegExp(`^rgb\\(${sa},${sa},${sa}\\)$`),Frt=new RegExp(`^rgba\\(${kh},${kh},${kh},${a0}\\)$`),Rrt=new RegExp(`^rgba\\(${sa},${sa},${sa},${a0}\\)$`),Lrt=new RegExp(`^hsl\\(${a0},${sa},${sa}\\)$`),krt=new RegExp(`^hsla\\(${a0},${sa},${sa},${a0}\\)$`),I7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Uc(aa,Vi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:T7,formatHex:T7,formatHex8:Crt,formatHsl:Urt,formatRgb:A7,toString:A7});function T7(){return this.rgb().formatHex()}function Crt(){return this.rgb().formatHex8()}function Urt(){return N7(this).formatHsl()}function A7(){return this.rgb().formatRgb()}function Vi(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Brt.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?M7(t):r===3?new Or(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Sv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Sv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ort.exec(e))?new Or(t[1],t[2],t[3],1):(t=Nrt.exec(e))?new Or(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Frt.exec(e))?Sv(t[1],t[2],t[3],t[4]):(t=Rrt.exec(e))?Sv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lrt.exec(e))?B7(t[1],t[2]/100,t[3]/100,1):(t=krt.exec(e))?B7(t[1],t[2]/100,t[3]/100,t[4]):I7.hasOwnProperty(e)?M7(I7[e]):e==="transparent"?new Or(NaN,NaN,NaN,0):null}function M7(e){return new Or(e>>16&255,e>>8&255,e&255,1)}function Sv(e,t,r,n){return n<=0&&(e=t=r=NaN),new Or(e,t,r,n)}function c0(e){return e instanceof aa||(e=Vi(e)),e?(e=e.rgb(),new Or(e.r,e.g,e.b,e.opacity)):new Or}function jr(e,t,r,n){return arguments.length===1?c0(e):new Or(e,t,r,n??1)}function Or(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Uc(Or,jr,eu(aa,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new Or(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ru:Math.pow(ru,e),new Or(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Or(kf(this.r),kf(this.g),kf(this.b),Tv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E7,formatHex:E7,formatHex8:Prt,formatRgb:D7,toString:D7}));function E7(){return`#${Lf(this.r)}${Lf(this.g)}${Lf(this.b)}`}function Prt(){return`#${Lf(this.r)}${Lf(this.g)}${Lf(this.b)}${Lf((isNaN(this.opacity)?1:this.opacity)*255)}`}function D7(){let e=Tv(this.opacity);return`${e===1?"rgb(":"rgba("}${kf(this.r)}, ${kf(this.g)}, ${kf(this.b)}${e===1?")":`, ${e})`}`}function Tv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lf(e){return e=kf(e),(e<16?"0":"")+e.toString(16)}function B7(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ms(e,t,r,n)}function N7(e){if(e instanceof ms)return new ms(e.h,e.s,e.l,e.opacity);if(e instanceof aa||(e=Vi(e)),!e)return new ms;if(e instanceof ms)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-t)/a+2:s=(t-r)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new ms(s,a,c,e.opacity)}function l0(e,t,r,n){return arguments.length===1?N7(e):new ms(e,t,r,n??1)}function ms(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Uc(ms,l0,eu(aa,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new ms(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ru:Math.pow(ru,e),new ms(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Or(UD(e>=240?e-240:e+120,i,n),UD(e,i,n),UD(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ms(O7(this.h),Iv(this.s),Iv(this.l),Tv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Tv(this.opacity);return`${e===1?"hsl(":"hsla("}${O7(this.h)}, ${Iv(this.s)*100}%, ${Iv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function O7(e){return e=(e||0)%360,e<0?e+360:e}function Iv(e){return Math.max(0,Math.min(1,e||0))}function UD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Av=Math.PI/180,Mv=180/Math.PI;var Ev=18,F7=.96422,R7=1,L7=.82521,k7=4/29,Ch=6/29,C7=3*Ch*Ch,$rt=Ch*Ch*Ch;function U7(e){if(e instanceof ca)return new ca(e.l,e.a,e.b,e.opacity);if(e instanceof Pc)return P7(e);e instanceof Or||(e=c0(e));var t=VD(e.r),r=VD(e.g),n=VD(e.b),i=PD((.2225045*t+.7168786*r+.0606169*n)/R7),o,s;return t===r&&r===n?o=s=i:(o=PD((.4360747*t+.3850649*r+.1430804*n)/F7),s=PD((.0139322*t+.0971045*r+.7141733*n)/L7)),new ca(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Uh(e,t,r,n){return arguments.length===1?U7(e):new ca(e,t,r,n??1)}function ca(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}Uc(ca,Uh,eu(aa,{brighter(e){return new ca(this.l+Ev*(e??1),this.a,this.b,this.opacity)},darker(e){return new ca(this.l-Ev*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=F7*$D(t),e=R7*$D(e),r=L7*$D(r),new Or(zD(3.1338561*t-1.6168667*e-.4906146*r),zD(-.9787684*t+1.9161415*e+.033454*r),zD(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function PD(e){return e>$rt?Math.pow(e,1/3):e/C7+k7}function $D(e){return e>Ch?e*e*e:C7*(e-k7)}function zD(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function VD(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function zrt(e){if(e instanceof Pc)return new Pc(e.h,e.c,e.l,e.opacity);if(e instanceof ca||(e=U7(e)),e.a===0&&e.b===0)return new Pc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Mv;return new Pc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function u0(e,t,r,n){return arguments.length===1?zrt(e):new Pc(e,t,r,n??1)}function Pc(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function P7(e){if(isNaN(e.h))return new ca(e.l,0,0,e.opacity);var t=e.h*Av;return new ca(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Uc(Pc,u0,eu(aa,{brighter(e){return new Pc(this.h,this.c,this.l+Ev*(e??1),this.opacity)},darker(e){return new Pc(this.h,this.c,this.l-Ev*(e??1),this.opacity)},rgb(){return P7(this).rgb()}}));var j7=-.14861,jD=1.78277,qD=-.29227,Dv=-.90649,f0=1.97294,$7=f0*Dv,z7=f0*jD,V7=jD*qD-Dv*j7;function Vrt(e){if(e instanceof Uf)return new Uf(e.h,e.s,e.l,e.opacity);e instanceof Or||(e=c0(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(V7*n+$7*t-z7*r)/(V7+$7-z7),o=n-i,s=(f0*(r-i)-qD*o)/Dv,a=Math.sqrt(s*s+o*o)/(f0*i*(1-i)),c=a?Math.atan2(s,o)*Mv-120:NaN;return new Uf(c<0?c+360:c,a,i,e.opacity)}function Kn(e,t,r,n){return arguments.length===1?Vrt(e):new Uf(e,t,r,n??1)}function Uf(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Uc(Uf,Kn,eu(aa,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new Uf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ru:Math.pow(ru,e),new Uf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Av,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new Or(255*(t+r*(j7*n+jD*i)),255*(t+r*(qD*n+Dv*i)),255*(t+r*(f0*n)),this.opacity)}}));function YD(e,t,r,n,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*r+(1+3*e+3*o-3*s)*n+s*i)/6}function q7(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],o=e[n+1],s=n>0?e[n-1]:2*i-o,a=n<t-1?e[n+2]:2*o-i;return YD((r-n/t)*t,s,i,o,a)}}function Y7(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],o=e[n%t],s=e[(n+1)%t],a=e[(n+2)%t];return YD((r-n/t)*t,i,o,s,a)}}var Ph=e=>()=>e;function W7(e,t){return function(r){return e+r*t}}function jrt(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function $h(e,t){var r=t-e;return r?W7(e,r>180||r<-180?r-360*Math.round(r/360):r):Ph(isNaN(e)?t:e)}function G7(e){return(e=+e)==1?rr:function(t,r){return r-t?jrt(t,r,e):Ph(isNaN(t)?r:t)}}function rr(e,t){var r=t-e;return r?W7(e,r):Ph(isNaN(e)?t:e)}var Io=function e(t){var r=G7(t);function n(i,o){var s=r((i=jr(i)).r,(o=jr(o)).r),a=r(i.g,o.g),c=r(i.b,o.b),l=rr(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return n.gamma=e,n}(1);function X7(e){return function(t){var r=t.length,n=new Array(r),i=new Array(r),o=new Array(r),s,a;for(s=0;s<r;++s)a=jr(t[s]),n[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return n=e(n),i=e(i),o=e(o),a.opacity=1,function(c){return a.r=n(c),a.g=i(c),a.b=o(c),a+""}}}var WD=X7(q7),qrt=X7(Y7);function H7(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function Z7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function K7(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=ji(e[s],t[s]);for(;s<r;++s)o[s]=t[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function Q7(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ze(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function J7(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=ji(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var XD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GD=new RegExp(XD.source,"g");function Yrt(e){return function(){return e}}function Wrt(e){return function(t){return e(t)+""}}function d0(e,t){var r=XD.lastIndex=GD.lastIndex=0,n,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(n=XD.exec(e))&&(i=GD.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Ze(n,i)})),r=GD.lastIndex;return r<t.length&&(o=t.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Wrt(c[0].x):Yrt(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function ji(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ph(t):(r==="number"?Ze:r==="string"?(n=Vi(t))?(t=n,Io):d0:t instanceof Vi?Io:t instanceof Date?Q7:Z7(t)?H7:Array.isArray(t)?K7:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?J7:Ze)(e,t)}function Pf(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var t9=180/Math.PI,Bv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HD(e,t,r,n,i,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),e*n<t*r&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*t9,skewX:Math.atan(c)*t9,scaleX:s,scaleY:a}}var Ov;function e9(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bv:HD(t.a,t.b,t.c,t.d,t.e,t.f)}function r9(e){return e==null?Bv:(Ov||(Ov=document.createElementNS("http://www.w3.org/2000/svg","g")),Ov.setAttribute("transform",e),(e=Ov.transform.baseVal.consolidate())?(e=e.matrix,HD(e.a,e.b,e.c,e.d,e.e,e.f)):Bv)}function n9(e,t,r,n){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,h,p){if(l!==f||u!==d){var m=h.push("translate(",null,t,null,r);p.push({i:m-4,x:Ze(l,f)},{i:m-2,x:Ze(u,d)})}else(f||d)&&h.push("translate("+f+t+d+r)}function s(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,n)-2,x:Ze(l,u)})):u&&f.push(i(f)+"rotate("+u+n)}function a(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,n)-2,x:Ze(l,u)}):u&&f.push(i(f)+"skewX("+u+n)}function c(l,u,f,d,h,p){if(l!==f||u!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Ze(l,f)},{i:m-2,x:Ze(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),s(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(h){for(var p=-1,m=d.length,y;++p<m;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var ZD=n9(e9,"px, ","px)","deg)"),KD=n9(r9,", ",")",")");var Grt=1e-12;function i9(e){return((e=Math.exp(e))+1/e)/2}function Xrt(e){return((e=Math.exp(e))-1/e)/2}function Hrt(e){return((e=Math.exp(2*e))-1)/(e+1)}var QD=function e(t,r,n){function i(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],f=s[1],d=s[2],h=u-a,p=f-c,m=h*h+p*p,y,g;if(m<Grt)g=Math.log(d/l)/t,y=function(T){return[a+T*h,c+T*p,l*Math.exp(t*T*g)]};else{var b=Math.sqrt(m),x=(d*d-l*l+n*m)/(2*l*r*b),_=(d*d-l*l-n*m)/(2*d*r*b),v=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(_*_+1)-_);g=(w-v)/t,y=function(T){var E=T*g,I=i9(v),B=l/(r*b)*(I*Hrt(t*E+v)-Xrt(v));return[a+B*h,c+B*p,l*I/i9(t*E+v)]}}return y.duration=g*1e3*t/Math.SQRT2,y}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},i}(Math.SQRT2,2,4);function o9(e){return function(t,r){var n=e((t=l0(t)).h,(r=l0(r)).h),i=rr(t.s,r.s),o=rr(t.l,r.l),s=rr(t.opacity,r.opacity);return function(a){return t.h=n(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}var JD=o9($h),Zrt=o9(rr);function Nv(e,t){var r=rr((e=Uh(e)).l,(t=Uh(t)).l),n=rr(e.a,t.a),i=rr(e.b,t.b),o=rr(e.opacity,t.opacity);return function(s){return e.l=r(s),e.a=n(s),e.b=i(s),e.opacity=o(s),e+""}}function s9(e){return function(t,r){var n=e((t=u0(t)).h,(r=u0(r)).h),i=rr(t.c,r.c),o=rr(t.l,r.l),s=rr(t.opacity,r.opacity);return function(a){return t.h=n(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}var tB=s9($h),Krt=s9(rr);function a9(e){return function t(r){r=+r;function n(i,o){var s=e((i=Kn(i)).h,(o=Kn(o)).h),a=rr(i.s,o.s),c=rr(i.l,o.l),l=rr(i.opacity,o.opacity);return function(u){return i.h=s(u),i.s=a(u),i.l=c(Math.pow(u,r)),i.opacity=l(u),i+""}}return n.gamma=t,n}(1)}var Qrt=a9($h),zh=a9(rr);function la(e,t){t===void 0&&(t=e,e=ji);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function Dn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r}var Vh=0,p0=0,h0=0,l9=1e3,Fv,m0,Rv=0,$f=0,Lv=0,y0=typeof performance=="object"&&performance.now?performance:Date,u9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function b0(){return $f||(u9(Jrt),$f=y0.now()+Lv)}function Jrt(){$f=0}function g0(){this._call=this._time=this._next=null}g0.prototype=kv.prototype={constructor:g0,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?b0():+r)+(t==null?0:+t),!this._next&&m0!==this&&(m0?m0._next=this:Fv=this,m0=this),this._call=e,this._time=r,eB()},stop:function(){this._call&&(this._call=null,this._time=1/0,eB())}};function kv(e,t,r){var n=new g0;return n.restart(e,t,r),n}function f9(){b0(),++Vh;for(var e=Fv,t;e;)(t=$f-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vh}function c9(){$f=(Rv=y0.now())+Lv,Vh=p0=0;try{f9()}finally{Vh=0,ent(),$f=0}}function tnt(){var e=y0.now(),t=e-Rv;t>l9&&(Lv-=t,Rv=e)}function ent(){for(var e,t=Fv,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Fv=r);m0=e,eB(n)}function eB(e){if(!Vh){p0&&(p0=clearTimeout(p0));var t=e-$f;t>24?(e<1/0&&(p0=setTimeout(c9,e-y0.now()-Lv)),h0&&(h0=clearInterval(h0))):(h0||(Rv=y0.now(),h0=setInterval(tnt,l9)),Vh=1,u9(c9))}}function Cv(e,t,r){var n=new g0;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var rnt=Ff("start","end","cancel","interrupt"),nnt=[],p9=0,d9=1,Pv=2,Uv=3,h9=4,$v=5,x0=6;function nu(e,t,r,n,i,o){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;int(e,r,{name:t,index:n,group:i,on:rnt,tween:nnt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:p9})}function _0(e,t){var r=qr(e,t);if(r.state>p9)throw new Error("too late; already scheduled");return r}function xn(e,t){var r=qr(e,t);if(r.state>Uv)throw new Error("too late; already running");return r}function qr(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function int(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=kv(o,0,r.time);function o(l){r.state=d9,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var u,f,d,h;if(r.state!==d9)return c();for(u in n)if(h=n[u],h.name===r.name){if(h.state===Uv)return Cv(s);h.state===h9?(h.state=x0,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[u]):+u<t&&(h.state=x0,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[u])}if(Cv(function(){r.state===Uv&&(r.state=h9,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=Pv,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Pv){for(r.state=Uv,i=new Array(d=r.tween.length),u=0,f=-1;u<d;++u)(h=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=$v,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);r.state===$v&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=x0,r.timer.stop(),delete n[t];for(var l in n)return;delete e.__transition}}function ua(e,t){var r=e.__transition,n,i,o=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){o=!1;continue}i=n.state>Pv&&n.state<$v,n.state=x0,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}o&&delete e.__transition}}function m9(e){return this.each(function(){ua(this,e)})}function ont(e,t){var r,n;return function(){var i=xn(this,e),o=i.tween;if(o!==r){n=r=o;for(var s=0,a=n.length;s<a;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function snt(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=xn(this,e),s=o.tween;if(s!==n){i=(n=s).slice();for(var a={name:t,value:r},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function y9(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=qr(this.node(),r).tween,i=0,o=n.length,s;i<o;++i)if((s=n[i]).name===e)return s.value;return null}return this.each((t==null?ont:snt)(r,e,t))}function jh(e,t,r){var n=e._id;return e.each(function(){var i=xn(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return qr(i,n).value[t]}}function zv(e,t){var r;return(typeof t=="number"?Ze:t instanceof Vi?Io:(r=Vi(t))?(t=r,Io):d0)(e,t)}function ant(e){return function(){this.removeAttribute(e)}}function cnt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lnt(e,t,r){var n,i=r+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===n?o:o=t(n=s,r)}}function unt(e,t,r){var n,i=r+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===n?o:o=t(n=s,r)}}function fnt(e,t,r){var n,i,o;return function(){var s,a=r(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===n&&c===i?o:(i=c,o=t(n=s,a)))}}function dnt(e,t,r){var n,i,o;return function(){var s,a=r(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===n&&c===i?o:(i=c,o=t(n=s,a)))}}function g9(e,t){var r=Lc(e),n=r==="transform"?KD:zv;return this.attrTween(e,typeof t=="function"?(r.local?dnt:fnt)(r,n,jh(this,"attr."+e,t)):t==null?(r.local?cnt:ant)(r):(r.local?unt:lnt)(r,n,t))}function hnt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function pnt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function mnt(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&pnt(e,o)),r}return i._value=t,i}function ynt(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&hnt(e,o)),r}return i._value=t,i}function b9(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Lc(e);return this.tween(r,(n.local?mnt:ynt)(n,t))}function gnt(e,t){return function(){_0(this,e).delay=+t.apply(this,arguments)}}function bnt(e,t){return t=+t,function(){_0(this,e).delay=t}}function x9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gnt:bnt)(t,e)):qr(this.node(),t).delay}function xnt(e,t){return function(){xn(this,e).duration=+t.apply(this,arguments)}}function _nt(e,t){return t=+t,function(){xn(this,e).duration=t}}function _9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xnt:_nt)(t,e)):qr(this.node(),t).duration}function wnt(e,t){if(typeof t!="function")throw new Error;return function(){xn(this,e).ease=t}}function w9(e){var t=this._id;return arguments.length?this.each(wnt(t,e)):qr(this.node(),t).ease}function vnt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;xn(this,e).ease=r}}function v9(e){if(typeof e!="function")throw new Error;return this.each(vnt(this._id,e))}function S9(e){typeof e!="function"&&(e=n0(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],s=o.length,a=n[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new Qn(n,this._parents,this._name,this._id)}function I9(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),s=new Array(n),a=0;a<o;++a)for(var c=t[a],l=r[a],u=c.length,f=s[a]=new Array(u),d,h=0;h<u;++h)(d=c[h]||l[h])&&(f[h]=d);for(;a<n;++a)s[a]=t[a];return new Qn(s,this._parents,this._name,this._id)}function Snt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Int(e,t,r){var n,i,o=Snt(t)?_0:xn;return function(){var s=o(this,e),a=s.on;a!==n&&(i=(n=a).copy()).on(t,r),s.on=i}}function T9(e,t){var r=this._id;return arguments.length<2?qr(this.node(),r).on.on(e):this.each(Int(r,e,t))}function Tnt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function A9(){return this.on("end.remove",Tnt(this._id))}function M9(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Rf(e));for(var n=this._groups,i=n.length,o=new Array(i),s=0;s<i;++s)for(var a=n[s],c=a.length,l=o[s]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,nu(l[d],t,r,d,l,qr(u,r)));return new Qn(o,this._parents,t,r)}function E9(e){var t=this._name,r=this._id;typeof e!="function"&&(e=r0(e));for(var n=this._groups,i=n.length,o=[],s=[],a=0;a<i;++a)for(var c=n[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),h,p=qr(u,r),m=0,y=d.length;m<y;++m)(h=d[m])&&nu(h,t,r,m,d,p);o.push(d),s.push(u)}return new Qn(o,s,t,r)}var Ant=Cc.prototype.constructor;function D9(){return new Ant(this._groups,this._parents)}function Mnt(e,t){var r,n,i;return function(){var o=tu(this,e),s=(this.style.removeProperty(e),tu(this,e));return o===s?null:o===r&&s===n?i:i=t(r=o,n=s)}}function B9(e){return function(){this.style.removeProperty(e)}}function Ent(e,t,r){var n,i=r+"",o;return function(){var s=tu(this,e);return s===i?null:s===n?o:o=t(n=s,r)}}function Dnt(e,t,r){var n,i,o;return function(){var s=tu(this,e),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),tu(this,e))),s===c?null:s===n&&c===i?o:(i=c,o=t(n=s,a))}}function Bnt(e,t){var r,n,i,o="style."+t,s="end."+o,a;return function(){var c=xn(this,e),l=c.on,u=c.value[o]==null?a||(a=B9(t)):void 0;(l!==r||i!==u)&&(n=(r=l).copy()).on(s,i=u),c.on=n}}function O9(e,t,r){var n=(e+="")=="transform"?ZD:zv;return t==null?this.styleTween(e,Mnt(e,n)).on("end.style."+e,B9(e)):typeof t=="function"?this.styleTween(e,Dnt(e,n,jh(this,"style."+e,t))).each(Bnt(this._id,e)):this.styleTween(e,Ent(e,n,t),r).on("end.style."+e,null)}function Ont(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Nnt(e,t,r){var n,i;function o(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Ont(e,s,r)),n}return o._value=t,o}function N9(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Nnt(e,t,r??""))}function Fnt(e){return function(){this.textContent=e}}function Rnt(e){return function(){var t=e(this);this.textContent=t??""}}function F9(e){return this.tween("text",typeof e=="function"?Rnt(jh(this,"text",e)):Fnt(e==null?"":e+""))}function Lnt(e){return function(t){this.textContent=e.call(this,t)}}function knt(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&Lnt(i)),t}return n._value=e,n}function R9(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,knt(e))}function L9(){for(var e=this._name,t=this._id,r=Vv(),n=this._groups,i=n.length,o=0;o<i;++o)for(var s=n[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=qr(c,t);nu(c,e,r,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Qn(n,this._parents,e,r)}function k9(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};r.each(function(){var l=xn(this,n),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&o()})}var Cnt=0;function Qn(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function C9(e){return Cc().transition(e)}function Vv(){return++Cnt}var $c=Cc.prototype;Qn.prototype=C9.prototype={constructor:Qn,select:M9,selectAll:E9,selectChild:$c.selectChild,selectChildren:$c.selectChildren,filter:S9,merge:I9,selection:D9,transition:L9,call:$c.call,nodes:$c.nodes,node:$c.node,size:$c.size,empty:$c.empty,each:$c.each,on:T9,attr:g9,attrTween:b9,style:O9,styleTween:N9,text:F9,textTween:R9,remove:A9,tween:y9,delay:x9,duration:_9,ease:w9,easeVarying:v9,end:k9,[Symbol.iterator]:$c[Symbol.iterator]};function jv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Unt={time:null,delay:0,duration:250,ease:jv};function Pnt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function U9(e){var t,r;e instanceof Qn?(t=e._id,e=e._name):(t=Vv(),(r=Unt).time=b0(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var s=n[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&nu(c,e,t,l,s,r||Pnt(c,t));return new Qn(n,this._parents,e,t)}Cc.prototype.interrupt=m9;Cc.prototype.transition=U9;var qv=e=>()=>e;function rB(e,{sourceEvent:t,target:r,selection:n,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function P9(e){e.stopImmediatePropagation()}function Yv(e){e.preventDefault(),e.stopImmediatePropagation()}var $9={name:"drag"},nB={name:"space"},qh={name:"handle"},Yh={name:"center"},{abs:z9,max:Bn,min:On}=Math;function V9(e){return[+e[0],+e[1]]}function oB(e){return[V9(e[0]),V9(e[1])]}var Wv={name:"x",handles:["w","e"].map(w0),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Gv={name:"y",handles:["n","s"].map(w0),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},$nt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(w0),input:function(e){return e==null?null:oB(e)},output:function(e){return e}},zc={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},j9={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},q9={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},znt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Vnt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function w0(e){return{type:e}}function jnt(e){return!e.ctrlKey&&!e.button}function qnt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ynt(){return navigator.maxTouchPoints||"ontouchstart"in this}function iB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Wnt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function sB(){return lB(Wv)}function aB(){return lB(Gv)}function cB(){return lB($nt)}function lB(e){var t=qnt,r=jnt,n=Ynt,i=!0,o=Ff("start","brush","end"),s=6,a;function c(y){var g=y.property("__brush",m).selectAll(".overlay").data([w0("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",zc.overlay).merge(g).each(function(){var x=iB(this).extent;ae(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),y.selectAll(".selection").data([w0("selection")]).enter().append("rect").attr("class","selection").attr("cursor",zc.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=y.selectAll(".handle").data(e.handles,function(x){return x.type});b.exit().remove(),b.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return zc[x.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(n).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(y,g,b){y.tween?y.on("start.brush",function(x){u(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){u(this,arguments).end(x)}).tween("brush",function(){var x=this,_=x.__brush,v=u(x,arguments),w=_.selection,T=e.input(typeof g=="function"?g.apply(this,arguments):g,_.extent),E=ji(w,T);function I(B){_.selection=B===1&&T===null?null:E(B),l.call(x),v.brush()}return w!==null&&T!==null?I:I(1)}):y.each(function(){var x=this,_=arguments,v=x.__brush,w=e.input(typeof g=="function"?g.apply(x,_):g,v.extent),T=u(x,_).beforestart();ua(x),v.selection=w===null?null:w,l.call(x),T.start(b).brush(b).end(b)})},c.clear=function(y,g){c.move(y,null,g)};function l(){var y=ae(this),g=iB(this).selection;g?(y.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?g[1][0]-s/2:g[0][0]-s/2}).attr("y",function(b){return b.type[0]==="s"?g[1][1]-s/2:g[0][1]-s/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?g[1][0]-g[0][0]+s:s}).attr("height",function(b){return b.type==="e"||b.type==="w"?g[1][1]-g[0][1]+s:s})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(y,g,b){var x=y.__brush.emitter;return x&&(!b||!x.clean)?x:new f(y,g,b)}function f(y,g,b){this.that=y,this.args=g,this.state=y.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,g){return this.starting?(this.starting=!1,this.emit("start",y,g)):this.emit("brush",y),this},brush:function(y,g){return this.emit("brush",y,g),this},end:function(y,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,g)),this},emit:function(y,g,b){var x=ae(this.that).datum();o.call(y,this.that,new rB(y,{sourceEvent:g,target:c,selection:e.output(this.state.selection),mode:b,dispatch:o}),x)}};function d(y){if(a&&!y.touches||!r.apply(this,arguments))return;var g=this,b=y.target.__data__.type,x=(i&&y.metaKey?b="overlay":b)==="selection"?$9:i&&y.altKey?Yh:qh,_=e===Gv?null:znt[b],v=e===Wv?null:Vnt[b],w=iB(g),T=w.extent,E=w.selection,I=T[0][0],B,A,O=T[0][1],L,S,M=T[1][0],D,C,U=T[1][1],k,$,z=0,V=0,Q,st=_&&v&&i&&y.shiftKey,ct,ut,X=Array.from(y.touches||[y],nt=>{let Me=nt.identifier;return nt=En(nt,g),nt.point0=nt.slice(),nt.identifier=Me,nt});ua(g);var lt=u(g,arguments,!0).beforestart();if(b==="overlay"){E&&(Q=!0);let nt=[X[0],X[1]||X[0]];w.selection=E=[[B=e===Gv?I:On(nt[0][0],nt[1][0]),L=e===Wv?O:On(nt[0][1],nt[1][1])],[D=e===Gv?M:Bn(nt[0][0],nt[1][0]),k=e===Wv?U:Bn(nt[0][1],nt[1][1])]],X.length>1&&Qt(y)}else B=E[0][0],L=E[0][1],D=E[1][0],k=E[1][1];A=B,S=L,C=D,$=k;var Y=ae(g).attr("pointer-events","none"),tt=Y.selectAll(".overlay").attr("cursor",zc[b]);if(y.touches)lt.moved=j,lt.ended=gt;else{var at=ae(y.view).on("mousemove.brush",j,!0).on("mouseup.brush",gt,!0);i&&at.on("keydown.brush",de,!0).on("keyup.brush",pe,!0),o0(y.view)}l.call(g),lt.start(y,x.name);function j(nt){for(let Me of nt.changedTouches||[nt])for(let Ai of X)Ai.identifier===Me.identifier&&(Ai.cur=En(Me,g));if(st&&!ct&&!ut&&X.length===1){let Me=X[0];z9(Me.cur[0]-Me[0])>z9(Me.cur[1]-Me[1])?ut=!0:ct=!0}for(let Me of X)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);Q=!0,Yv(nt),Qt(nt)}function Qt(nt){let Me=X[0],Ai=Me.point0;var Ss;switch(z=Me[0]-Ai[0],V=Me[1]-Ai[1],x){case nB:case $9:{_&&(z=Bn(I-B,On(M-D,z)),A=B+z,C=D+z),v&&(V=Bn(O-L,On(U-k,V)),S=L+V,$=k+V);break}case qh:{X[1]?(_&&(A=Bn(I,On(M,X[0][0])),C=Bn(I,On(M,X[1][0])),_=1),v&&(S=Bn(O,On(U,X[0][1])),$=Bn(O,On(U,X[1][1])),v=1)):(_<0?(z=Bn(I-B,On(M-B,z)),A=B+z,C=D):_>0&&(z=Bn(I-D,On(M-D,z)),A=B,C=D+z),v<0?(V=Bn(O-L,On(U-L,V)),S=L+V,$=k):v>0&&(V=Bn(O-k,On(U-k,V)),S=L,$=k+V));break}case Yh:{_&&(A=Bn(I,On(M,B-z*_)),C=Bn(I,On(M,D+z*_))),v&&(S=Bn(O,On(U,L-V*v)),$=Bn(O,On(U,k+V*v)));break}}C<A&&(_*=-1,Ss=B,B=D,D=Ss,Ss=A,A=C,C=Ss,b in j9&&tt.attr("cursor",zc[b=j9[b]])),$<S&&(v*=-1,Ss=L,L=k,k=Ss,Ss=S,S=$,$=Ss,b in q9&&tt.attr("cursor",zc[b=q9[b]])),w.selection&&(E=w.selection),ct&&(A=E[0][0],C=E[1][0]),ut&&(S=E[0][1],$=E[1][1]),(E[0][0]!==A||E[0][1]!==S||E[1][0]!==C||E[1][1]!==$)&&(w.selection=[[A,S],[C,$]],l.call(g),lt.brush(nt,x.name))}function gt(nt){if(P9(nt),nt.touches){if(nt.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else s0(nt.view,Q),at.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Y.attr("pointer-events","all"),tt.attr("cursor",zc.overlay),w.selection&&(E=w.selection),Wnt(E)&&(w.selection=null,l.call(g)),lt.end(nt,x.name)}function de(nt){switch(nt.keyCode){case 16:{st=_&&v;break}case 18:{x===qh&&(_&&(D=C-z*_,B=A+z*_),v&&(k=$-V*v,L=S+V*v),x=Yh,Qt(nt));break}case 32:{(x===qh||x===Yh)&&(_<0?D=C-z:_>0&&(B=A-z),v<0?k=$-V:v>0&&(L=S-V),x=nB,tt.attr("cursor",zc.selection),Qt(nt));break}default:return}Yv(nt)}function pe(nt){switch(nt.keyCode){case 16:{st&&(ct=ut=st=!1,Qt(nt));break}case 18:{x===Yh&&(_<0?D=C:_>0&&(B=A),v<0?k=$:v>0&&(L=S),x=qh,Qt(nt));break}case 32:{x===nB&&(nt.altKey?(_&&(D=C-z*_,B=A+z*_),v&&(k=$-V*v,L=S+V*v),x=Yh):(_<0?D=C:_>0&&(B=A),v<0?k=$:v>0&&(L=S),x=qh),tt.attr("cursor",zc[b]),Qt(nt));break}default:return}Yv(nt)}}function h(y){u(this,arguments).moved(y)}function p(y){u(this,arguments).ended(y)}function m(){var y=this.__brush||{selection:null};return y.extent=oB(t.apply(this,arguments)),y.dim=e,y}return c.extent=function(y){return arguments.length?(t=typeof y=="function"?y:qv(oB(y)),c):t},c.filter=function(y){return arguments.length?(r=typeof y=="function"?y:qv(!!y),c):r},c.touchable=function(y){return arguments.length?(n=typeof y=="function"?y:qv(!!y),c):n},c.handleSize=function(y){return arguments.length?(s=+y,c):s},c.keyModifiers=function(y){return arguments.length?(i=!!y,c):i},c.on=function(){var y=o.on.apply(o,arguments);return y===o?c:y},c}var uB=Math.PI,fB=2*uB,zf=1e-6,Gnt=fB-zf;function Y9(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Xnt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Y9;let r=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}var iu=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Y9:Xnt(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,o,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,r,n,i,o){if(t=+t,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=n-t,l=i-r,u=s-t,f=a-r,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(d>zf)if(!(Math.abs(f*c-l*u)>zf)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,p=i-a,m=c*c+l*l,y=h*h+p*p,g=Math.sqrt(m),b=Math.sqrt(d),x=o*Math.tan((uB-Math.acos((m+d-y)/(2*g*b)))/2),_=x/b,v=x/g;Math.abs(_-1)>zf&&this._append`L${t+_*u},${r+_*f}`,this._append`A${o},${o},0,0,${+(f*h>u*p)},${this._x1=t+v*c},${this._y1=r+v*l}`}}arc(t,r,n,i,o,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),c=n*Math.sin(i),l=t+a,u=r+c,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>zf||Math.abs(this._y1-u)>zf)&&this._append`L${l},${u}`,n&&(d<0&&(d=d%fB+fB),d>Gnt?this._append`A${n},${n},0,1,${f},${t-a},${r-c}A${n},${n},0,1,${f},${this._x1=l},${this._y1=u}`:d>zf&&this._append`A${n},${n},0,${+(d>=uB)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function W9(){return new iu}W9.prototype=iu.prototype;function Jn(e=3){return new iu(+e)}var Hnt=Array.prototype,Xv=Hnt.slice;function G9(e,t){return e-t}function X9(e){for(var t=0,r=e.length,n=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n}var fa=e=>()=>e;function H9(e,t){for(var r=-1,n=t.length,i;++r<n;)if(i=Znt(e,t[r]))return i;return 0}function Znt(e,t){for(var r=t[0],n=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var c=e[o],l=c[0],u=c[1],f=e[a],d=f[0],h=f[1];if(Knt(c,f,t))return 0;u>n!=h>n&&r<(d-l)*(n-u)/(h-u)+l&&(i=-i)}return i}function Knt(e,t,r){var n;return Qnt(e,t,r)&&Jnt(e[n=+(e[0]===t[0])],r[n],t[n])}function Qnt(e,t,r){return(t[0]-e[0])*(r[1]-e[1])===(r[0]-e[0])*(t[1]-e[1])}function Jnt(e,t,r){return e<=t&&t<=r||r<=t&&t<=e}function Z9(){}var Vc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ou(){var e=1,t=1,r=Ql,n=c;function i(l){var u=r(l);if(Array.isArray(u))u=u.slice().sort(G9);else{let f=Be(l,tit);for(u=gn(...Fh(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>o(l,f))}function o(l,u){let f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],h=[];return s(l,f,function(p){n(p,l,f),X9(p)>0?d.push([p]):h.push(p)}),h.forEach(function(p){for(var m=0,y=d.length,g;m<y;++m)if(H9((g=d[m])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function s(l,u,f){var d=new Array,h=new Array,p,m,y,g,b,x;for(p=m=-1,g=Vf(l[0],u),Vc[g<<1].forEach(_);++p<e-1;)y=g,g=Vf(l[p+1],u),Vc[y|g<<1].forEach(_);for(Vc[g<<0].forEach(_);++m<t-1;){for(p=-1,g=Vf(l[m*e+e],u),b=Vf(l[m*e],u),Vc[g<<1|b<<2].forEach(_);++p<e-1;)y=g,g=Vf(l[m*e+e+p+1],u),x=b,b=Vf(l[m*e+p+1],u),Vc[y|g<<1|b<<2|x<<3].forEach(_);Vc[g|b<<3].forEach(_)}for(p=-1,b=l[m*e]>=u,Vc[b<<2].forEach(_);++p<e-1;)x=b,b=Vf(l[m*e+p+1],u),Vc[b<<2|x<<3].forEach(_);Vc[b<<3].forEach(_);function _(v){var w=[v[0][0]+p,v[0][1]+m],T=[v[1][0]+p,v[1][1]+m],E=a(w),I=a(T),B,A;(B=h[E])?(A=d[I])?(delete h[B.end],delete d[A.start],B===A?(B.ring.push(T),f(B.ring)):d[B.start]=h[A.end]={start:B.start,end:A.end,ring:B.ring.concat(A.ring)}):(delete h[B.end],B.ring.push(T),h[B.end=I]=B):(B=d[I])?(A=h[E])?(delete d[B.start],delete h[A.end],B===A?(B.ring.push(T),f(B.ring)):d[A.start]=h[B.end]={start:A.start,end:B.end,ring:A.ring.concat(B.ring)}):(delete d[B.start],B.ring.unshift(w),d[B.start=E]=B):d[E]=h[I]={start:E,end:I,ring:[w,T]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function c(l,u,f){l.forEach(function(d){var h=d[0],p=d[1],m=h|0,y=p|0,g=dB(u[y*e+m]);h>0&&h<e&&m===h&&(d[0]=K9(h,dB(u[y*e+m-1]),g,f)),p>0&&p<t&&y===p&&(d[1]=K9(p,dB(u[(y-1)*e+m]),g,f))})}return i.contour=o,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(l){return arguments.length?(r=typeof l=="function"?l:Array.isArray(l)?fa(Xv.call(l)):fa(l),i):r},i.smooth=function(l){return arguments.length?(n=l?c:Z9,i):n===c},i}function tit(e){return isFinite(e)?e:NaN}function Vf(e,t){return e==null?!1:+e>=t}function dB(e){return e==null||isNaN(e=+e)?-1/0:e}function K9(e,t,r,n){let i=n-t,o=r-t,s=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(s)?e:e+s-.5}function eit(e){return e[0]}function rit(e){return e[1]}function nit(){return 1}function hB(){var e=eit,t=rit,r=nit,n=960,i=500,o=20,s=2,a=o*3,c=n+a*2>>s,l=i+a*2>>s,u=fa(20);function f(b){var x=new Float32Array(c*l),_=Math.pow(2,-s),v=-1;for(let L of b){var w=(e(L,++v,b)+a)*_,T=(t(L,v,b)+a)*_,E=+r(L,v,b);if(E&&w>=0&&w<c&&T>=0&&T<l){var I=Math.floor(w),B=Math.floor(T),A=w-I-.5,O=T-B-.5;x[I+B*c]+=(1-A)*(1-O)*E,x[I+1+B*c]+=A*(1-O)*E,x[I+1+(B+1)*c]+=A*O*E,x[I+(B+1)*c]+=(1-A)*O*E}}return Zg({data:x,width:c,height:l},o*_),x}function d(b){var x=f(b),_=u(x),v=Math.pow(2,2*s);return Array.isArray(_)||(_=gn(Number.MIN_VALUE,he(x)/v,_)),ou().size([c,l]).thresholds(_.map(w=>w*v))(x).map((w,T)=>(w.value=+_[T],h(w)))}d.contours=function(b){var x=f(b),_=ou().size([c,l]),v=Math.pow(2,2*s),w=T=>{T=+T;var E=h(_.contour(x,T*v));return E.value=T,E};return Object.defineProperty(w,"max",{get:()=>he(x)/v}),w};function h(b){return b.coordinates.forEach(p),b}function p(b){b.forEach(m)}function m(b){b.forEach(y)}function y(b){b[0]=b[0]*Math.pow(2,s)-a,b[1]=b[1]*Math.pow(2,s)-a}function g(){return a=o*3,c=n+a*2>>s,l=i+a*2>>s,d}return d.x=function(b){return arguments.length?(e=typeof b=="function"?b:fa(+b),d):e},d.y=function(b){return arguments.length?(t=typeof b=="function"?b:fa(+b),d):t},d.weight=function(b){return arguments.length?(r=typeof b=="function"?b:fa(+b),d):r},d.size=function(b){if(!arguments.length)return[n,i];var x=+b[0],_=+b[1];if(!(x>=0&&_>=0))throw new Error("invalid size");return n=x,i=_,g()},d.cellSize=function(b){if(!arguments.length)return 1<<s;if(!((b=+b)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(b)/Math.LN2),g()},d.thresholds=function(b){return arguments.length?(u=typeof b=="function"?b:Array.isArray(b)?fa(Xv.call(b)):fa(b),d):u},d.bandwidth=function(b){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((b=+b)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*b*b+1)-1)/2,g()},d}var xe=11102230246251565e-32,Nr=134217729,v0=(3+8*xe)*xe;function jf(e,t,r,n,i){let o,s,a,c,l=t[0],u=n[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=n[++d]);let h=0;if(f<e&&d<r)for(u>l==u>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=u+o,a=o-(s-u),u=n[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<r;)u>l==u>-l?(s=o+l,c=s-o,a=o-(s-c)+(l-c),l=t[++f]):(s=o+u,c=s-o,a=o-(s-c)+(u-c),u=n[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,c=s-o,a=o-(s-c)+(l-c),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<r;)s=o+u,c=s-o,a=o-(s-c)+(u-c),u=n[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function S0(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function G(e){return new Float64Array(e)}var iit=(3+16*xe)*xe,oit=(2+12*xe)*xe,sit=(9+64*xe)*xe*xe,Wh=G(4),Q9=G(8),J9=G(12),t$=G(16),ti=G(4);function ait(e,t,r,n,i,o,s){let a,c,l,u,f,d,h,p,m,y,g,b,x,_,v,w,T,E,I=e-i,B=r-i,A=t-o,O=n-o;_=I*O,d=Nr*I,h=d-(d-I),p=I-h,d=Nr*O,m=d-(d-O),y=O-m,v=p*y-(_-h*m-p*m-h*y),w=A*B,d=Nr*A,h=d-(d-A),p=A-h,d=Nr*B,m=d-(d-B),y=B-m,T=p*y-(w-h*m-p*m-h*y),g=v-T,f=v-g,Wh[0]=v-(g+f)+(f-T),b=_+g,f=b-_,x=_-(b-f)+(g-f),g=x-w,f=x-g,Wh[1]=x-(g+f)+(f-w),E=b+g,f=E-b,Wh[2]=b-(E-f)+(g-f),Wh[3]=E;let L=S0(4,Wh),S=oit*s;if(L>=S||-L>=S||(f=e-I,a=e-(I+f)+(f-i),f=r-B,l=r-(B+f)+(f-i),f=t-A,c=t-(A+f)+(f-o),f=n-O,u=n-(O+f)+(f-o),a===0&&c===0&&l===0&&u===0)||(S=sit*s+v0*Math.abs(L),L+=I*u+O*a-(A*l+B*c),L>=S||-L>=S))return L;_=a*O,d=Nr*a,h=d-(d-a),p=a-h,d=Nr*O,m=d-(d-O),y=O-m,v=p*y-(_-h*m-p*m-h*y),w=c*B,d=Nr*c,h=d-(d-c),p=c-h,d=Nr*B,m=d-(d-B),y=B-m,T=p*y-(w-h*m-p*m-h*y),g=v-T,f=v-g,ti[0]=v-(g+f)+(f-T),b=_+g,f=b-_,x=_-(b-f)+(g-f),g=x-w,f=x-g,ti[1]=x-(g+f)+(f-w),E=b+g,f=E-b,ti[2]=b-(E-f)+(g-f),ti[3]=E;let M=jf(4,Wh,4,ti,Q9);_=I*u,d=Nr*I,h=d-(d-I),p=I-h,d=Nr*u,m=d-(d-u),y=u-m,v=p*y-(_-h*m-p*m-h*y),w=A*l,d=Nr*A,h=d-(d-A),p=A-h,d=Nr*l,m=d-(d-l),y=l-m,T=p*y-(w-h*m-p*m-h*y),g=v-T,f=v-g,ti[0]=v-(g+f)+(f-T),b=_+g,f=b-_,x=_-(b-f)+(g-f),g=x-w,f=x-g,ti[1]=x-(g+f)+(f-w),E=b+g,f=E-b,ti[2]=b-(E-f)+(g-f),ti[3]=E;let D=jf(M,Q9,4,ti,J9);_=a*u,d=Nr*a,h=d-(d-a),p=a-h,d=Nr*u,m=d-(d-u),y=u-m,v=p*y-(_-h*m-p*m-h*y),w=c*l,d=Nr*c,h=d-(d-c),p=c-h,d=Nr*l,m=d-(d-l),y=l-m,T=p*y-(w-h*m-p*m-h*y),g=v-T,f=v-g,ti[0]=v-(g+f)+(f-T),b=_+g,f=b-_,x=_-(b-f)+(g-f),g=x-w,f=x-g,ti[1]=x-(g+f)+(f-w),E=b+g,f=E-b,ti[2]=b-(E-f)+(g-f),ti[3]=E;let C=jf(D,J9,4,ti,t$);return t$[C-1]}function Gh(e,t,r,n,i,o){let s=(t-o)*(r-i),a=(e-i)*(n-o),c=s-a,l=Math.abs(s+a);return Math.abs(c)>=iit*l?c:-ait(e,t,r,n,i,o,l)}var G8t=(7+56*xe)*xe,X8t=(3+28*xe)*xe,H8t=(26+288*xe)*xe*xe,Z8t=G(4),K8t=G(4),Q8t=G(4),J8t=G(4),tkt=G(4),ekt=G(4),rkt=G(4),nkt=G(4),ikt=G(4),okt=G(8),skt=G(8),akt=G(8),ckt=G(4),lkt=G(8),ukt=G(8),fkt=G(8),dkt=G(12),hkt=G(192),pkt=G(192);var gkt=(10+96*xe)*xe,bkt=(4+48*xe)*xe,xkt=(44+576*xe)*xe*xe,_kt=G(4),wkt=G(4),vkt=G(4),Skt=G(4),Ikt=G(4),Tkt=G(4),Akt=G(4),Mkt=G(4),Ekt=G(8),Dkt=G(8),Bkt=G(8),Okt=G(8),Nkt=G(8),Fkt=G(8),Rkt=G(8),Lkt=G(8),kkt=G(8),Ckt=G(4),Ukt=G(4),Pkt=G(4),$kt=G(8),zkt=G(16),Vkt=G(16),jkt=G(16),qkt=G(32),Ykt=G(32),Wkt=G(48),Gkt=G(64),Xkt=G(1152),Hkt=G(1152);var Jkt=(16+224*xe)*xe,tCt=(5+72*xe)*xe,eCt=(71+1408*xe)*xe*xe,rCt=G(4),nCt=G(4),iCt=G(4),oCt=G(4),sCt=G(4),aCt=G(4),cCt=G(4),lCt=G(4),uCt=G(4),fCt=G(4),dCt=G(24),hCt=G(24),pCt=G(24),mCt=G(24),yCt=G(24),gCt=G(24),bCt=G(24),xCt=G(24),_Ct=G(24),wCt=G(24),vCt=G(1152),SCt=G(1152),ICt=G(1152),TCt=G(1152),ACt=G(1152),MCt=G(2304),ECt=G(2304),DCt=G(3456),BCt=G(5760),OCt=G(8),NCt=G(8),FCt=G(8),RCt=G(16),LCt=G(24),kCt=G(48),CCt=G(48),UCt=G(96),PCt=G(192),$Ct=G(384),zCt=G(384),VCt=G(384),jCt=G(768);var qCt=G(96),YCt=G(96),WCt=G(96),GCt=G(1152);var r$=Math.pow(2,-52),Hv=new Uint32Array(512),Hh=class e{static from(t,r=hit,n=pit){let i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){let a=t[s];o[2*s]=r(a),o[2*s+1]=n(a)}return new e(o)}constructor(t){let r=t.length>>1;if(r>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let n=Math.max(2*r-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(r)),this._hullPrev=new Uint32Array(r),this._hullNext=new Uint32Array(r),this._hullTri=new Uint32Array(r),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(r),this._dists=new Float64Array(r),this.update()}update(){let{coords:t,_hullPrev:r,_hullNext:n,_hullTri:i,_hullHash:o}=this,s=t.length>>1,a=1/0,c=1/0,l=-1/0,u=-1/0;for(let I=0;I<s;I++){let B=t[2*I],A=t[2*I+1];B<a&&(a=B),A<c&&(c=A),B>l&&(l=B),A>u&&(u=A),this._ids[I]=I}let f=(a+l)/2,d=(c+u)/2,h,p,m;for(let I=0,B=1/0;I<s;I++){let A=pB(f,d,t[2*I],t[2*I+1]);A<B&&(h=I,B=A)}let y=t[2*h],g=t[2*h+1];for(let I=0,B=1/0;I<s;I++){if(I===h)continue;let A=pB(y,g,t[2*I],t[2*I+1]);A<B&&A>0&&(p=I,B=A)}let b=t[2*p],x=t[2*p+1],_=1/0;for(let I=0;I<s;I++){if(I===h||I===p)continue;let B=fit(y,g,b,x,t[2*I],t[2*I+1]);B<_&&(m=I,_=B)}let v=t[2*m],w=t[2*m+1];if(_===1/0){for(let A=0;A<s;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Xh(this._ids,this._dists,0,s-1);let I=new Uint32Array(s),B=0;for(let A=0,O=-1/0;A<s;A++){let L=this._ids[A],S=this._dists[L];S>O&&(I[B++]=L,O=S)}this.hull=I.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Gh(y,g,b,x,v,w)<0){let I=p,B=b,A=x;p=m,b=v,x=w,m=I,v=B,w=A}let T=dit(y,g,b,x,v,w);this._cx=T.x,this._cy=T.y;for(let I=0;I<s;I++)this._dists[I]=pB(t[2*I],t[2*I+1],T.x,T.y);Xh(this._ids,this._dists,0,s-1),this._hullStart=h;let E=3;n[h]=r[m]=p,n[p]=r[h]=m,n[m]=r[p]=h,i[h]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,g)]=h,o[this._hashKey(b,x)]=p,o[this._hashKey(v,w)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let I=0,B,A;I<this._ids.length;I++){let O=this._ids[I],L=t[2*O],S=t[2*O+1];if(I>0&&Math.abs(L-B)<=r$&&Math.abs(S-A)<=r$||(B=L,A=S,O===h||O===p||O===m))continue;let M=0;for(let $=0,z=this._hashKey(L,S);$<this._hashSize&&(M=o[(z+$)%this._hashSize],!(M!==-1&&M!==n[M]));$++);M=r[M];let D=M,C;for(;C=n[D],Gh(L,S,t[2*D],t[2*D+1],t[2*C],t[2*C+1])>=0;)if(D=C,D===M){D=-1;break}if(D===-1)continue;let U=this._addTriangle(D,O,n[D],-1,-1,i[D]);i[O]=this._legalize(U+2),i[D]=U,E++;let k=n[D];for(;C=n[k],Gh(L,S,t[2*k],t[2*k+1],t[2*C],t[2*C+1])<0;)U=this._addTriangle(k,O,C,i[O],-1,i[k]),i[O]=this._legalize(U+2),n[k]=k,E--,k=C;if(D===M)for(;C=r[D],Gh(L,S,t[2*C],t[2*C+1],t[2*D],t[2*D+1])<0;)U=this._addTriangle(C,O,D,-1,i[D],i[C]),this._legalize(U+2),i[C]=U,n[D]=D,E--,D=C;this._hullStart=r[O]=D,n[D]=r[k]=O,n[O]=k,o[this._hashKey(L,S)]=O,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(E);for(let I=0,B=this._hullStart;I<E;I++)this.hull[I]=B,B=n[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,r){return Math.floor(lit(t-this._cx,r-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:r,_halfedges:n,coords:i}=this,o=0,s=0;for(;;){let a=n[t],c=t-t%3;if(s=c+(t+2)%3,a===-1){if(o===0)break;t=Hv[--o];continue}let l=a-a%3,u=c+(t+1)%3,f=l+(a+2)%3,d=r[s],h=r[t],p=r[u],m=r[f];if(uit(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){r[t]=m,r[a]=d;let g=n[f];if(g===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,g),this._link(a,n[s]),this._link(s,f);let b=l+(a+1)%3;o<Hv.length&&(Hv[o++]=b)}else{if(o===0)break;t=Hv[--o]}}return s}_link(t,r){this._halfedges[t]=r,r!==-1&&(this._halfedges[r]=t)}_addTriangle(t,r,n,i,o,s){let a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=r,this._triangles[a+2]=n,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}};function lit(e,t){let r=e/(Math.abs(e)+Math.abs(t));return(t>0?3-r:1+r)/4}function pB(e,t,r,n){let i=e-r,o=t-n;return i*i+o*o}function uit(e,t,r,n,i,o,s,a){let c=e-s,l=t-a,u=r-s,f=n-a,d=i-s,h=o-a,p=c*c+l*l,m=u*u+f*f,y=d*d+h*h;return c*(f*y-m*h)-l*(u*y-m*d)+p*(u*h-f*d)<0}function fit(e,t,r,n,i,o){let s=r-e,a=n-t,c=i-e,l=o-t,u=s*s+a*a,f=c*c+l*l,d=.5/(s*l-a*c),h=(l*u-a*f)*d,p=(s*f-c*u)*d;return h*h+p*p}function dit(e,t,r,n,i,o){let s=r-e,a=n-t,c=i-e,l=o-t,u=s*s+a*a,f=c*c+l*l,d=.5/(s*l-a*c),h=e+(l*u-a*f)*d,p=t+(s*f-c*u)*d;return{x:h,y:p}}function Xh(e,t,r,n){if(n-r<=20)for(let i=r+1;i<=n;i++){let o=e[i],s=t[o],a=i-1;for(;a>=r&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let i=r+n>>1,o=r+1,s=n;I0(e,i,o),t[e[r]]>t[e[n]]&&I0(e,r,n),t[e[o]]>t[e[n]]&&I0(e,o,n),t[e[r]]>t[e[o]]&&I0(e,r,o);let a=e[o],c=t[a];for(;;){do o++;while(t[e[o]]<c);do s--;while(t[e[s]]>c);if(s<o)break;I0(e,o,s)}e[r+1]=e[s],e[s]=a,n-o+1>=s-r?(Xh(e,t,o,n),Xh(e,t,r,s-1)):(Xh(e,t,r,s-1),Xh(e,t,o,n))}}function I0(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function hit(e){return e[0]}function pit(e){return e[1]}var To=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,r){this._+=`L${this._x1=+t},${this._y1=+r}`}arc(t,r,n){t=+t,r=+r,n=+n;let i=t+n,o=r;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),n&&(this._+=`A${n},${n},0,1,1,${t-n},${r}A${n},${n},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,r,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${+n}v${+i}h${-n}Z`}value(){return this._||null}};var su=class{constructor(){this._=[]}moveTo(t,r){this._.push([t,r])}closePath(){this._.push(this._[0].slice())}lineTo(t,r){this._.push([t,r])}value(){return this._.length?this._:null}};var T0=class{constructor(t,[r,n,i,o]=[0,0,960,500]){if(!((i=+i)>=(r=+r))||!((o=+o)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=r,this.ymax=o,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:r,triangles:n},vectors:i}=this,o,s,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let m=0,y=0,g=n.length,b,x;m<g;m+=3,y+=2){let _=n[m]*2,v=n[m+1]*2,w=n[m+2]*2,T=t[_],E=t[_+1],I=t[v],B=t[v+1],A=t[w],O=t[w+1],L=I-T,S=B-E,M=A-T,D=O-E,C=(L*D-S*M)*2;if(Math.abs(C)<1e-9){if(o===void 0){o=s=0;for(let k of r)o+=t[k*2],s+=t[k*2+1];o/=r.length,s/=r.length}let U=1e9*Math.sign((o-T)*D-(s-E)*M);b=(T+A)/2-U*D,x=(E+O)/2+U*M}else{let U=1/C,k=L*L+S*S,$=M*M+D*D;b=T+(D*k-S*$)*U,x=E+(L*$-M*k)*U}a[y]=b,a[y+1]=x}let c=r[r.length-1],l,u=c*4,f,d=t[2*c],h,p=t[2*c+1];i.fill(0);for(let m=0;m<r.length;++m)c=r[m],l=u,f=d,h=p,u=c*4,d=t[2*c],p=t[2*c+1],i[l+2]=i[u]=h-p,i[l+3]=i[u+1]=d-f}render(t){let r=t==null?t=new To:void 0,{delaunay:{halfedges:n,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,f=n.length;u<f;++u){let d=n[u];if(d<u)continue;let h=Math.floor(u/3)*2,p=Math.floor(d/3)*2,m=s[h],y=s[h+1],g=s[p],b=s[p+1];this._renderSegment(m,y,g,b,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],p=c*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return r&&r.value()}renderBounds(t){let r=t==null?t=new To:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),r&&r.value()}renderCell(t,r){let n=r==null?r=new To:void 0,i=this._clip(t);if(i===null||!i.length)return;r.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&r.lineTo(i[s],i[s+1]);return r.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let r=0,n=t.length/2;r<n;++r){let i=this.cellPolygon(r);i&&(i.index=r,yield i)}}cellPolygon(t){let r=new su;return this.renderCell(t,r),r.value()}_renderSegment(t,r,n,i,o){let s,a=this._regioncode(t,r),c=this._regioncode(n,i);a===0&&c===0?(o.moveTo(t,r),o.lineTo(n,i)):(s=this._clipSegment(t,r,n,i,a,c))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,r,n){return r=+r,r!==r||(n=+n,n!==n)?!1:this.delaunay._step(t,r,n)===t}*neighbors(t){let r=this._clip(t);if(r)for(let n of this.delaunay.neighbors(t)){let i=this._clip(n);if(i){t:for(let o=0,s=r.length;o<s;o+=2)for(let a=0,c=i.length;a<c;a+=2)if(r[o]===i[a]&&r[o+1]===i[a+1]&&r[(o+2)%s]===i[(a+c-2)%c]&&r[(o+3)%s]===i[(a+c-1)%c]){yield n;break t}}}}_cell(t){let{circumcenters:r,delaunay:{inedges:n,halfedges:i,triangles:o}}=this,s=n[t];if(s===-1)return null;let a=[],c=s;do{let l=Math.floor(c/3);if(a.push(r[l*2],r[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==s&&c!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let r=this._cell(t);if(r===null)return null;let{vectors:n}=this,i=t*4;return this._simplify(n[i]||n[i+1]?this._clipInfinite(t,r,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,r))}_clipFinite(t,r){let n=r.length,i=null,o,s,a=r[n-2],c=r[n-1],l,u=this._regioncode(a,c),f,d=0;for(let h=0;h<n;h+=2)if(o=a,s=c,a=r[h],c=r[h+1],l=u,u=this._regioncode(a,c),l===0&&u===0)f=d,d=0,i?i.push(a,c):i=[a,c];else{let p,m,y,g,b;if(l===0){if((p=this._clipSegment(o,s,a,c,l,u))===null)continue;[m,y,g,b]=p}else{if((p=this._clipSegment(a,c,o,s,u,l))===null)continue;[g,b,m,y]=p,f=d,d=this._edgecode(m,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,y):i=[m,y]}f=d,d=this._edgecode(g,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,b):i=[g,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,r,n,i,o,s){let a=o<s;for(a&&([t,r,n,i,o,s]=[n,i,t,r,s,o]);;){if(o===0&&s===0)return a?[n,i,t,r]:[t,r,n,i];if(o&s)return null;let c,l,u=o||s;u&8?(c=t+(n-t)*(this.ymax-r)/(i-r),l=this.ymax):u&4?(c=t+(n-t)*(this.ymin-r)/(i-r),l=this.ymin):u&2?(l=r+(i-r)*(this.xmax-t)/(n-t),c=this.xmax):(l=r+(i-r)*(this.xmin-t)/(n-t),c=this.xmin),o?(t=c,r=l,o=this._regioncode(t,r)):(n=c,i=l,s=this._regioncode(n,i))}}_clipInfinite(t,r,n,i,o,s){let a=Array.from(r),c;if((c=this._project(a[0],a[1],n,i))&&a.unshift(c[0],c[1]),(c=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(c[0],c[1]),a=this._clipFinite(t,a))for(let l=0,u=a.length,f,d=this._edgecode(a[u-2],a[u-1]);l<u;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,r,n,i,o){for(;r!==n;){let s,a;switch(r){case 5:r=4;continue;case 4:r=6,s=this.xmax,a=this.ymin;break;case 6:r=2;continue;case 2:r=10,s=this.xmax,a=this.ymax;break;case 10:r=8;continue;case 8:r=9,s=this.xmin,a=this.ymax;break;case 9:r=1;continue;case 1:r=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,r,n,i){let o=1/0,s,a,c;if(i<0){if(r<=this.ymin)return null;(s=(this.ymin-r)/i)<o&&(c=this.ymin,a=t+(o=s)*n)}else if(i>0){if(r>=this.ymax)return null;(s=(this.ymax-r)/i)<o&&(c=this.ymax,a=t+(o=s)*n)}if(n>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/n)<o&&(a=this.xmax,c=r+(o=s)*i)}else if(n<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/n)<o&&(a=this.xmin,c=r+(o=s)*i)}return[a,c]}_edgecode(t,r){return(t===this.xmin?1:t===this.xmax?2:0)|(r===this.ymin?4:r===this.ymax?8:0)}_regioncode(t,r){return(t<this.xmin?1:t>this.xmax?2:0)|(r<this.ymin?4:r>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let r=0;r<t.length;r+=2){let n=(r+2)%t.length,i=(r+4)%t.length;(t[r]===t[n]&&t[n]===t[i]||t[r+1]===t[n+1]&&t[n+1]===t[i+1])&&(t.splice(n,2),r-=2)}t.length||(t=null)}return t}};var mit=2*Math.PI,Zh=Math.pow;function yit(e){return e[0]}function git(e){return e[1]}function bit(e){let{triangles:t,coords:r}=e;for(let n=0;n<t.length;n+=3){let i=2*t[n],o=2*t[n+1],s=2*t[n+2];if((r[s]-r[i])*(r[o+1]-r[i+1])-(r[o]-r[i])*(r[s+1]-r[i+1])>1e-10)return!1}return!0}function xit(e,t,r){return[e+Math.sin(e+t)*r,t+Math.cos(e-t)*r]}var Ao=class e{static from(t,r=yit,n=git,i){return new e("length"in t?_it(t,r,n,i):Float64Array.from(wit(t,r,n,i)))}constructor(t){this._delaunator=new Hh(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,r=this.points;if(t.hull&&t.hull.length>2&&bit(t)){this.collinear=Int32Array.from({length:r.length/2},(d,h)=>h).sort((d,h)=>r[2*d]-r[2*h]||r[2*d+1]-r[2*h+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[r[2*c],r[2*c+1],r[2*l],r[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=r.length/2;d<h;++d){let p=xit(r[2*d],r[2*d+1],f);r[2*d]=p[0],r[2*d+1]=p[1]}this._delaunator=new Hh(r)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let c=0,l=n.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(n[c]===-1||s[u]===-1)&&(s[u]=c)}for(let c=0,l=i.length;c<l;++c)a[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new T0(this,t)}*neighbors(t){let{inedges:r,hull:n,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){let f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}let c=r[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){let f=n[(i[t]+1)%n.length];f!==u&&(yield f);return}}while(l!==c)}find(t,r,n=0){if(t=+t,t!==t||(r=+r,r!==r))return-1;let i=n,o;for(;(o=this._step(n,t,r))>=0&&o!==n&&o!==i;)n=o;return o}_step(t,r,n){let{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=Zh(r-l[t*2],2)+Zh(n-l[t*2+1],2),d=i[t],h=d;do{let p=c[h],m=Zh(r-l[p*2],2)+Zh(n-l[p*2+1],2);if(m<f&&(f=m,u=p),h=h%3===2?h-2:h+1,c[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&Zh(r-l[h*2],2)+Zh(n-l[h*2+1],2)<f)return h;break}}while(h!==d);return u}render(t){let r=t==null?t=new To:void 0,{points:n,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){let c=i[s];if(c<s)continue;let l=o[s]*2,u=o[c]*2;t.moveTo(n[l],n[l+1]),t.lineTo(n[u],n[u+1])}return this.renderHull(t),r&&r.value()}renderPoints(t,r){r===void 0&&(!t||typeof t.moveTo!="function")&&(r=t,t=null),r=r==null?2:+r;let n=t==null?t=new To:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){let a=i[o],c=i[o+1];t.moveTo(a+r,c),t.arc(a,c,r,0,mit)}return n&&n.value()}renderHull(t){let r=t==null?t=new To:void 0,{hull:n,points:i}=this,o=n[0]*2,s=n.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){let c=2*n[a];t.lineTo(i[c],i[c+1])}return t.closePath(),r&&r.value()}hullPolygon(){let t=new su;return this.renderHull(t),t.value()}renderTriangle(t,r){let n=r==null?r=new To:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,c=o[t+2]*2;return r.moveTo(i[s],i[s+1]),r.lineTo(i[a],i[a+1]),r.lineTo(i[c],i[c+1]),r.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:t}=this;for(let r=0,n=t.length/3;r<n;++r)yield this.trianglePolygon(r)}trianglePolygon(t){let r=new su;return this.renderTriangle(t,r),r.value()}};function _it(e,t,r,n){let i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){let a=e[s];o[s*2]=t.call(n,a,s,e),o[s*2+1]=r.call(n,a,s,e)}return o}function*wit(e,t,r,n){let i=0;for(let o of e)yield t.call(n,o,i,e),yield r.call(n,o,i,e),++i}function n$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function da(e){return e=qf(Math.abs(e)),e?e[1]:NaN}function i$(e,t){return function(r,n){for(var i=r.length,o=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>n&&(a=Math.max(1,n-c)),o.push(r.substring(i-=a,i+a)),!((c+=a+1)>n));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function o$(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var vit=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ha(e){if(!(t=vit.exec(e)))throw new Error("invalid format: "+e);var t;return new Zv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ha.prototype=Zv.prototype;function Zv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function s$(e){t:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break t;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var mB;function a$(e,t){var r=qf(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(mB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+qf(e,Math.max(0,t+o-1))[0]}function yB(e,t){var r=qf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var gB={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:n$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yB(e*100,t),r:yB,s:a$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bB(e){return e}var c$=Array.prototype.map,l$=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function u$(e){var t=e.grouping===void 0||e.thousands===void 0?bB:i$(c$.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?bB:o$(c$.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ha(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,y=f.zero,g=f.width,b=f.comma,x=f.precision,_=f.trim,v=f.type;v==="n"?(b=!0,v="g"):gB[v]||(x===void 0&&(x=12),_=!0,v="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var w=m==="$"?r:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",T=m==="$"?n:/[%p]/.test(v)?s:"",E=gB[v],I=/[defgprs%]/.test(v);x=x===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function B(A){var O=w,L=T,S,M,D;if(v==="c")L=E(A)+L,A="";else{A=+A;var C=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),x),_&&(A=s$(A)),C&&+A==0&&p!=="+"&&(C=!1),O=(C?p==="("?p:a:p==="-"||p==="("?"":p)+O,L=(v==="s"?l$[8+mB/3]:"")+L+(C&&p==="("?")":""),I){for(S=-1,M=A.length;++S<M;)if(D=A.charCodeAt(S),48>D||D>57){L=(D===46?i+A.slice(S+1):A.slice(S))+L,A=A.slice(0,S);break}}}b&&!y&&(A=t(A,1/0));var U=O.length+A.length+L.length,k=U<g?new Array(g-U+1).join(d):"";switch(b&&y&&(A=t(k+A,k.length?g-L.length:1/0),k=""),h){case"<":A=O+A+L+k;break;case"=":A=O+k+A+L;break;case"^":A=k.slice(0,U=k.length>>1)+O+A+L+k.slice(U);break;default:A=k+O+A+L;break}return o(A)}return B.toString=function(){return f+""},B}function u(f,d){var h=l((f=ha(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(da(d)/3)))*3,m=Math.pow(10,-p),y=l$[8+p/3];return function(g){return h(m*g)+y}}return{format:l,formatPrefix:u}}var Kv,Mo,Qv;xB({thousands:",",grouping:[3],currency:["$",""]});function xB(e){return Kv=u$(e),Mo=Kv.format,Qv=Kv.formatPrefix,Kv}function _B(e){return Math.max(0,-da(Math.abs(e)))}function wB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(da(t)/3)))*3-da(Math.abs(e)))}function vB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,da(t)-da(e))+1}var ot=1e-6,Yf=1e-12,Yt=Math.PI,ke=Yt/2,SB=Yt/4,Hr=Yt*2,gr=180/Yt,ce=Yt/180,Jt=Math.abs,Eo=Math.atan,Fr=Math.atan2,rt=Math.cos,A0=Math.ceil,Jv=Math.exp;var tS=Math.hypot,Wf=Math.log,eS=Math.pow,et=Math.sin,Nn=Math.sign||function(e){return e>0?1:e<0?-1:0},Ce=Math.sqrt,Kh=Math.tan;function rS(e){return e>1?0:e<-1?Yt:Math.acos(e)}function Ke(e){return e>1?ke:e<-1?-ke:Math.asin(e)}function Rr(){}function nS(e,t){e&&d$.hasOwnProperty(e.type)&&d$[e.type](e,t)}var f$={Feature:function(e,t){nS(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)nS(r[n].geometry,t)}},d$={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){IB(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)IB(r[n],t,0)},Polygon:function(e,t){h$(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)h$(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)nS(r[n],t)}};function IB(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function h$(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)IB(e[r],t,1);t.polygonEnd()}function qi(e,t){e&&f$.hasOwnProperty(e.type)?f$[e.type](e,t):nS(e,t)}function M0(e){return[Fr(e[1],e[0]),Ke(e[2])]}function pa(e){var t=e[0],r=e[1],n=rt(r);return[n*rt(t),n*et(t),et(r)]}function E0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function iS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function D0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function B0(e){var t=Ce(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var O0,oS,sS,aS,cS,lS,uS,fS,TB,AB,MB,y$,g$,ei,ri,ni,ys={sphere:Rr,point:EB,lineStart:p$,lineEnd:m$,polygonStart:function(){ys.lineStart=Tit,ys.lineEnd=Ait},polygonEnd:function(){ys.lineStart=p$,ys.lineEnd=m$}};function EB(e,t){e*=ce,t*=ce;var r=rt(t);N0(r*rt(e),r*et(e),et(t))}function N0(e,t,r){++O0,sS+=(e-sS)/O0,aS+=(t-aS)/O0,cS+=(r-cS)/O0}function p$(){ys.point=Sit}function Sit(e,t){e*=ce,t*=ce;var r=rt(t);ei=r*rt(e),ri=r*et(e),ni=et(t),ys.point=Iit,N0(ei,ri,ni)}function Iit(e,t){e*=ce,t*=ce;var r=rt(t),n=r*rt(e),i=r*et(e),o=et(t),s=Fr(Ce((s=ri*o-ni*i)*s+(s=ni*n-ei*o)*s+(s=ei*i-ri*n)*s),ei*n+ri*i+ni*o);oS+=s,lS+=s*(ei+(ei=n)),uS+=s*(ri+(ri=i)),fS+=s*(ni+(ni=o)),N0(ei,ri,ni)}function m$(){ys.point=EB}function Tit(){ys.point=Mit}function Ait(){b$(y$,g$),ys.point=EB}function Mit(e,t){y$=e,g$=t,e*=ce,t*=ce,ys.point=b$;var r=rt(t);ei=r*rt(e),ri=r*et(e),ni=et(t),N0(ei,ri,ni)}function b$(e,t){e*=ce,t*=ce;var r=rt(t),n=r*rt(e),i=r*et(e),o=et(t),s=ri*o-ni*i,a=ni*n-ei*o,c=ei*i-ri*n,l=tS(s,a,c),u=Ke(l),f=l&&-u/l;TB.add(f*s),AB.add(f*a),MB.add(f*c),oS+=u,lS+=u*(ei+(ei=n)),uS+=u*(ri+(ri=i)),fS+=u*(ni+(ni=o)),N0(ei,ri,ni)}function DB(e){O0=oS=sS=aS=cS=lS=uS=fS=0,TB=new yn,AB=new yn,MB=new yn,qi(e,ys);var t=+TB,r=+AB,n=+MB,i=tS(t,r,n);return i<Yf&&(t=lS,r=uS,n=fS,oS<ot&&(t=sS,r=aS,n=cS),i=tS(t,r,n),i<Yf)?[NaN,NaN]:[Fr(r,t)*gr,Ke(n/i)*gr]}function F0(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function BB(e,t){return Jt(e)>Yt&&(e-=Math.round(e/Hr)*Hr),[e,t]}BB.invert=BB;function OB(e,t,r){return(e%=Hr)?t||r?F0(_$(e),w$(t,r)):_$(e):t||r?w$(t,r):BB}function x$(e){return function(t,r){return t+=e,Jt(t)>Yt&&(t-=Math.round(t/Hr)*Hr),[t,r]}}function _$(e){var t=x$(e);return t.invert=x$(-e),t}function w$(e,t){var r=rt(e),n=et(e),i=rt(t),o=et(t);function s(a,c){var l=rt(c),u=rt(a)*l,f=et(a)*l,d=et(c),h=d*r+u*n;return[Fr(f*i-h*o,u*r-d*n),Ke(h*i+f*o)]}return s.invert=function(a,c){var l=rt(c),u=rt(a)*l,f=et(a)*l,d=et(c),h=d*i-f*o;return[Fr(f*i+d*o,u*r+h*n),Ke(h*r-u*n)]},s}function v$(e){e=OB(e[0]*ce,e[1]*ce,e.length>2?e[2]*ce:0);function t(r){return r=e(r[0]*ce,r[1]*ce),r[0]*=gr,r[1]*=gr,r}return t.invert=function(r){return r=e.invert(r[0]*ce,r[1]*ce),r[0]*=gr,r[1]*=gr,r},t}function I$(e,t,r,n,i,o){if(r){var s=rt(t),a=et(t),c=n*r;i==null?(i=t+n*Hr,o=t-c/2):(i=S$(s,i),o=S$(s,o),(n>0?i<o:i>o)&&(i+=n*Hr));for(var l,u=i;n>0?u>o:u<o;u-=c)l=M0([s,-a*rt(u),-a*et(u)]),e.point(l[0],l[1])}}function S$(e,t){t=pa(t),t[0]-=e,B0(t);var r=rS(-t[1]);return((-t[2]<0?-r:r)+Hr-ot)%Hr}function dS(){var e=[],t;return{point:function(r,n,i){t.push([r,n,i])},lineStart:function(){e.push(t=[])},lineEnd:Rr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Jh(e,t){return Jt(e[0]-t[0])<ot&&Jt(e[1]-t[1])<ot}function hS(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function pS(e,t,r,n,i){var o=[],s=[],a,c;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],g=p[m],b;if(Jh(y,g)){if(!y[2]&&!g[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}g[0]+=2*ot}o.push(b=new hS(y,p,null,!0)),s.push(b.o=new hS(y,null,b,!1)),o.push(b=new hS(g,p,null,!1)),s.push(b.o=new hS(g,null,b,!0))}}),!!o.length){for(s.sort(t),T$(o),T$(s),a=0,c=s.length;a<c;++a)s[a].e=r=!r;for(var l=o[0],u,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,c=u.length;a<c;++a)i.point((f=u[a])[0],f[1]);else n(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else n(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function T$(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function NB(e){return Jt(e[0])<=Yt?e[0]:Nn(e[0])*((Jt(e[0])+Yt)%Hr-Yt)}function A$(e,t){var r=NB(t),n=t[1],i=et(n),o=[et(r),-rt(r),0],s=0,a=0,c=new yn;i===1?n=ke+ot:i===-1&&(n=-ke-ot);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=NB(h),m=h[1]/2+SB,y=et(m),g=rt(m),b=0;b<d;++b,p=_,y=w,g=T,h=x){var x=f[b],_=NB(x),v=x[1]/2+SB,w=et(v),T=rt(v),E=_-p,I=E>=0?1:-1,B=I*E,A=B>Yt,O=y*w;if(c.add(Fr(O*I*et(B),g*T+O*rt(B))),s+=A?E+I*Hr:E,A^p>=r^_>=r){var L=Qh(pa(h),pa(x));B0(L);var S=Qh(o,L);B0(S);var M=(A^E>=0?-1:1)*Ke(S[2]);(n>M||n===M&&(L[0]||L[1]))&&(a+=A^E>=0?1:-1)}}return(s<-ot||s<ot&&c<-Yf)^a&1}function mS(e,t,r,n){return function(i){var o=t(i),s=dS(),a=t(s),c=!1,l,u,f,d={point:h,lineStart:m,lineEnd:y,polygonStart:function(){d.point=g,d.lineStart=b,d.lineEnd=x,u=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=y,u=Rh(u);var _=A$(l,n);u.length?(c||(i.polygonStart(),c=!0),pS(u,Dit,_,r,i)):_&&(c||(i.polygonStart(),c=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,v){e(_,v)&&i.point(_,v)}function p(_,v){o.point(_,v)}function m(){d.point=p,o.lineStart()}function y(){d.point=h,o.lineEnd()}function g(_,v){f.push([_,v]),a.point(_,v)}function b(){a.lineStart(),f=[]}function x(){g(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),v=s.result(),w,T=v.length,E,I,B;if(f.pop(),l.push(f),f=null,!!T){if(_&1){if(I=v[0],(E=I.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),w=0;w<E;++w)i.point((B=I[w])[0],B[1]);i.lineEnd()}return}T>1&&_&2&&v.push(v.pop().concat(v.shift())),u.push(v.filter(Eit))}}return d}}function Eit(e){return e.length>1}function Dit(e,t){return((e=e.x)[0]<0?e[1]-ke-ot:ke-e[1])-((t=t.x)[0]<0?t[1]-ke-ot:ke-t[1])}var FB=mS(function(){return!0},Bit,Nit,[-Yt,-ke]);function Bit(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Yt:-Yt,c=Jt(o-t);Jt(c-Yt)<ot?(e.point(t,r=(r+s)/2>0?ke:-ke),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&c>=Yt&&(Jt(t-n)<ot&&(t-=n*ot),Jt(o-a)<ot&&(o-=a*ot),r=Oit(t,r,o,s),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=s),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Oit(e,t,r,n){var i,o,s=et(e-r);return Jt(s)>ot?Eo((et(t)*(o=rt(n))*et(r)-et(n)*(i=rt(t))*et(e))/(i*o*s)):(t+n)/2}function Nit(e,t,r,n){var i;if(e==null)i=r*ke,n.point(-Yt,i),n.point(0,i),n.point(Yt,i),n.point(Yt,0),n.point(Yt,-i),n.point(0,-i),n.point(-Yt,-i),n.point(-Yt,0),n.point(-Yt,i);else if(Jt(e[0]-t[0])>ot){var o=e[0]<t[0]?Yt:-Yt;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function M$(e){var t=rt(e),r=6*ce,n=t>0,i=Jt(t)>ot;function o(u,f,d,h){I$(h,e,r,d,u,f)}function s(u,f){return rt(u)*rt(f)>t}function a(u){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(y,g){var b=[y,g],x,_=s(y,g),v=n?_?0:l(y,g):_?l(y+(y<0?Yt:-Yt),g):0;if(!f&&(p=h=_)&&u.lineStart(),_!==h&&(x=c(f,b),(!x||Jh(f,x)||Jh(b,x))&&(b[2]=1)),_!==h)m=0,_?(u.lineStart(),x=c(b,f),u.point(x[0],x[1])):(x=c(f,b),u.point(x[0],x[1],2),u.lineEnd()),f=x;else if(i&&f&&n^_){var w;!(v&d)&&(w=c(b,f,!0))&&(m=0,n?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}_&&(!f||!Jh(f,b))&&u.point(b[0],b[1]),f=b,h=_,d=v},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function c(u,f,d){var h=pa(u),p=pa(f),m=[1,0,0],y=Qh(h,p),g=E0(y,y),b=y[0],x=g-b*b;if(!x)return!d&&u;var _=t*g/x,v=-t*b/x,w=Qh(m,y),T=D0(m,_),E=D0(y,v);iS(T,E);var I=w,B=E0(T,I),A=E0(I,I),O=B*B-A*(E0(T,T)-1);if(!(O<0)){var L=Ce(O),S=D0(I,(-B-L)/A);if(iS(S,T),S=M0(S),!d)return S;var M=u[0],D=f[0],C=u[1],U=f[1],k;D<M&&(k=M,M=D,D=k);var $=D-M,z=Jt($-Yt)<ot,V=z||$<ot;if(!z&&U<C&&(k=C,C=U,U=k),V?z?C+U>0^S[1]<(Jt(S[0]-M)<ot?C:U):C<=S[1]&&S[1]<=U:$>Yt^(M<=S[0]&&S[0]<=D)){var Q=D0(I,(-B+L)/A);return iS(Q,T),[S,M0(Q)]}}}function l(u,f){var d=n?e:Yt-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return mS(s,a,o,n?[0,-e]:[-Yt,e-Yt])}function E$(e,t,r,n,i,o){var s=e[0],a=e[1],c=t[0],l=t[1],u=0,f=1,d=c-s,h=l-a,p;if(p=r-s,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=n-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=s+u*d,e[1]=a+u*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var R0=1e9,yS=-R0;function tp(e,t,r,n){function i(l,u){return e<=l&&l<=r&&t<=u&&u<=n}function o(l,u,f,d){var h=0,p=0;if(l==null||(h=s(l,f))!==(p=s(u,f))||c(l,u)<0^f>0)do d.point(h===0||h===3?e:r,h>1?n:t);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function s(l,u){return Jt(l[0]-e)<ot?u>0?0:3:Jt(l[0]-r)<ot?u>0?2:1:Jt(l[1]-t)<ot?u>0?1:0:u>0?3:2}function a(l,u){return c(l.x,u.x)}function c(l,u){var f=s(l,1),d=s(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=dS(),d,h,p,m,y,g,b,x,_,v,w,T={point:E,lineStart:O,lineEnd:L,polygonStart:B,polygonEnd:A};function E(M,D){i(M,D)&&u.point(M,D)}function I(){for(var M=0,D=0,C=h.length;D<C;++D)for(var U=h[D],k=1,$=U.length,z=U[0],V,Q,st=z[0],ct=z[1];k<$;++k)V=st,Q=ct,z=U[k],st=z[0],ct=z[1],Q<=n?ct>n&&(st-V)*(n-Q)>(ct-Q)*(e-V)&&++M:ct<=n&&(st-V)*(n-Q)<(ct-Q)*(e-V)&&--M;return M}function B(){u=f,d=[],h=[],w=!0}function A(){var M=I(),D=w&&M,C=(d=Rh(d)).length;(D||C)&&(l.polygonStart(),D&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),C&&pS(d,a,M,o,l),l.polygonEnd()),u=l,d=h=p=null}function O(){T.point=S,h&&h.push(p=[]),v=!0,_=!1,b=x=NaN}function L(){d&&(S(m,y),g&&_&&f.rejoin(),d.push(f.result())),T.point=E,_&&u.lineEnd()}function S(M,D){var C=i(M,D);if(h&&p.push([M,D]),v)m=M,y=D,g=C,v=!1,C&&(u.lineStart(),u.point(M,D));else if(C&&_)u.point(M,D);else{var U=[b=Math.max(yS,Math.min(R0,b)),x=Math.max(yS,Math.min(R0,x))],k=[M=Math.max(yS,Math.min(R0,M)),D=Math.max(yS,Math.min(R0,D))];E$(U,k,e,t,r,n)?(_||(u.lineStart(),u.point(U[0],U[1])),u.point(k[0],k[1]),C||u.lineEnd(),w=!1):C&&(u.lineStart(),u.point(M,D),w=!1)}b=M,x=D,_=C}return T}}function D$(e,t,r){var n=_r(e,t-ot,r).concat(t);return function(i){return n.map(function(o){return[i,o]})}}function B$(e,t,r){var n=_r(e,t-ot,r).concat(t);return function(i){return n.map(function(o){return[o,i]})}}function RB(){var e,t,r,n,i,o,s,a,c=10,l=c,u=90,f=360,d,h,p,m,y=2.5;function g(){return{type:"MultiLineString",coordinates:b()}}function b(){return _r(A0(n/u)*u,r,u).map(p).concat(_r(A0(a/f)*f,s,f).map(m)).concat(_r(A0(t/c)*c,e,c).filter(function(x){return Jt(x%u)>ot}).map(d)).concat(_r(A0(o/l)*l,i,l).filter(function(x){return Jt(x%f)>ot}).map(h))}return g.lines=function(){return b().map(function(x){return{type:"LineString",coordinates:x}})},g.outline=function(){return{type:"Polygon",coordinates:[p(n).concat(m(s).slice(1),p(r).reverse().slice(1),m(a).reverse().slice(1))]}},g.extent=function(x){return arguments.length?g.extentMajor(x).extentMinor(x):g.extentMinor()},g.extentMajor=function(x){return arguments.length?(n=+x[0][0],r=+x[1][0],a=+x[0][1],s=+x[1][1],n>r&&(x=n,n=r,r=x),a>s&&(x=a,a=s,s=x),g.precision(y)):[[n,a],[r,s]]},g.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),g.precision(y)):[[t,o],[e,i]]},g.step=function(x){return arguments.length?g.stepMajor(x).stepMinor(x):g.stepMinor()},g.stepMajor=function(x){return arguments.length?(u=+x[0],f=+x[1],g):[u,f]},g.stepMinor=function(x){return arguments.length?(c=+x[0],l=+x[1],g):[c,l]},g.precision=function(x){return arguments.length?(y=+x,d=D$(o,i,90),h=B$(t,e,y),p=D$(a,s,90),m=B$(n,r,y),g):y},g.extentMajor([[-180,-90+ot],[180,90-ot]]).extentMinor([[-180,-80-ot],[180,80+ot]])}function LB(){return RB()()}var L0=e=>e;var kB=new yn,CB=new yn,O$,N$,UB,PB,au={point:Rr,lineStart:Rr,lineEnd:Rr,polygonStart:function(){au.lineStart=Fit,au.lineEnd=Lit},polygonEnd:function(){au.lineStart=au.lineEnd=au.point=Rr,kB.add(Jt(CB)),CB=new yn},result:function(){var e=kB/2;return kB=new yn,e}};function Fit(){au.point=Rit}function Rit(e,t){au.point=F$,O$=UB=e,N$=PB=t}function F$(e,t){CB.add(PB*e-UB*t),UB=e,PB=t}function Lit(){F$(O$,N$)}var $B=au;var ep=1/0,gS=ep,k0=-ep,bS=k0,kit={point:Cit,lineStart:Rr,lineEnd:Rr,polygonStart:Rr,polygonEnd:Rr,result:function(){var e=[[ep,gS],[k0,bS]];return k0=bS=-(gS=ep=1/0),e}};function Cit(e,t){e<ep&&(ep=e),e>k0&&(k0=e),t<gS&&(gS=t),t>bS&&(bS=t)}var rp=kit;var zB=0,VB=0,C0=0,xS=0,_S=0,np=0,jB=0,qB=0,U0=0,k$,C$,ma,ya,gs={point:Gf,lineStart:R$,lineEnd:L$,polygonStart:function(){gs.lineStart=$it,gs.lineEnd=zit},polygonEnd:function(){gs.point=Gf,gs.lineStart=R$,gs.lineEnd=L$},result:function(){var e=U0?[jB/U0,qB/U0]:np?[xS/np,_S/np]:C0?[zB/C0,VB/C0]:[NaN,NaN];return zB=VB=C0=xS=_S=np=jB=qB=U0=0,e}};function Gf(e,t){zB+=e,VB+=t,++C0}function R$(){gs.point=Uit}function Uit(e,t){gs.point=Pit,Gf(ma=e,ya=t)}function Pit(e,t){var r=e-ma,n=t-ya,i=Ce(r*r+n*n);xS+=i*(ma+e)/2,_S+=i*(ya+t)/2,np+=i,Gf(ma=e,ya=t)}function L$(){gs.point=Gf}function $it(){gs.point=Vit}function zit(){U$(k$,C$)}function Vit(e,t){gs.point=U$,Gf(k$=ma=e,C$=ya=t)}function U$(e,t){var r=e-ma,n=t-ya,i=Ce(r*r+n*n);xS+=i*(ma+e)/2,_S+=i*(ya+t)/2,np+=i,i=ya*e-ma*t,jB+=i*(ma+e),qB+=i*(ya+t),U0+=i*3,Gf(ma=e,ya=t)}var YB=gs;function wS(e){this._context=e}wS.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Hr);break}}},result:Rr};var GB=new yn,WB,P$,$$,P0,$0,vS={point:Rr,lineStart:function(){vS.point=jit},lineEnd:function(){WB&&z$(P$,$$),vS.point=Rr},polygonStart:function(){WB=!0},polygonEnd:function(){WB=null},result:function(){var e=+GB;return GB=new yn,e}};function jit(e,t){vS.point=z$,P$=P0=e,$$=$0=t}function z$(e,t){P0-=e,$0-=t,GB.add(Ce(P0*P0+$0*$0)),P0=e,$0=t}var XB=vS;var V$,SS,j$,q$,ip=class{constructor(t){this._append=t==null?Y$:qit(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==j$||this._append!==SS){let n=this._radius,i=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,j$=n,SS=this._append,q$=this._,this._=i}this._+=q$;break}}}result(){let t=this._;return this._="",t.length?t:null}};function Y$(e){let t=1;this._+=e[0];for(let r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function qit(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Y$;if(t!==V$){let r=10**t;V$=t,SS=function(i){let o=1;this._+=i[0];for(let s=i.length;o<s;++o)this._+=Math.round(arguments[o]*r)/r+i[o]}}return SS}function _n(e,t){let r=3,n=4.5,i,o;function s(a){return a&&(typeof n=="function"&&o.pointRadius(+n.apply(this,arguments)),qi(a,i(o))),o.result()}return s.area=function(a){return qi(a,i($B)),$B.result()},s.measure=function(a){return qi(a,i(XB)),XB.result()},s.bounds=function(a){return qi(a,i(rp)),rp.result()},s.centroid=function(a){return qi(a,i(YB)),YB.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,L0):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new ip(r)):new wS(t=a),typeof n!="function"&&o.pointRadius(n),s):t},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(o.pointRadius(+a),+a),s):n},s.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{let c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);r=c}return t===null&&(o=new ip(r)),s},s.projection(e).digits(r).context(t)}function Xf(e){return{stream:op(e)}}function op(e){return function(t){var r=new HB;for(var n in e)r[n]=e[n];return r.stream=t,r}}function HB(){}HB.prototype={constructor:HB,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ZB(e,t,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),qi(r,e.stream(rp)),t(rp.result()),n!=null&&e.clipExtent(n),e}function z0(e,t,r){return ZB(e,function(n){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),a=+t[0][0]+(i-s*(n[1][0]+n[0][0]))/2,c=+t[0][1]+(o-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([a,c])},r)}function IS(e,t,r){return z0(e,[[0,0],t],r)}function TS(e,t,r){return ZB(e,function(n){var i=+t,o=i/(n[1][0]-n[0][0]),s=(i-o*(n[1][0]+n[0][0]))/2,a=-o*n[0][1];e.scale(150*o).translate([s,a])},r)}function AS(e,t,r){return ZB(e,function(n){var i=+t,o=i/(n[1][1]-n[0][1]),s=-o*n[0][0],a=(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([s,a])},r)}var W$=16,Yit=rt(30*ce);function KB(e,t){return+t?Git(e,t):Wit(e)}function Wit(e){return op({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function Git(e,t){function r(n,i,o,s,a,c,l,u,f,d,h,p,m,y){var g=l-n,b=u-i,x=g*g+b*b;if(x>4*t&&m--){var _=s+d,v=a+h,w=c+p,T=Ce(_*_+v*v+w*w),E=Ke(w/=T),I=Jt(Jt(w)-1)<ot||Jt(o-f)<ot?(o+f)/2:Fr(v,_),B=e(I,E),A=B[0],O=B[1],L=A-n,S=O-i,M=b*L-g*S;(M*M/x>t||Jt((g*L+b*S)/x-.5)>.3||s*d+a*h+c*p<Yit)&&(r(n,i,o,s,a,c,A,O,I,_/=T,v/=T,w,m,y),y.point(A,O),r(A,O,I,_,v,w,l,u,f,d,h,p,m,y))}}return function(n){var i,o,s,a,c,l,u,f,d,h,p,m,y={point:g,lineStart:b,lineEnd:_,polygonStart:function(){n.polygonStart(),y.lineStart=v},polygonEnd:function(){n.polygonEnd(),y.lineStart=b}};function g(E,I){E=e(E,I),n.point(E[0],E[1])}function b(){f=NaN,y.point=x,n.lineStart()}function x(E,I){var B=pa([E,I]),A=e(E,I);r(f,d,u,h,p,m,f=A[0],d=A[1],u=E,h=B[0],p=B[1],m=B[2],W$,n),n.point(f,d)}function _(){y.point=g,n.lineEnd()}function v(){b(),y.point=w,y.lineEnd=T}function w(E,I){x(i=E,I),o=f,s=d,a=h,c=p,l=m,y.point=x}function T(){r(f,d,u,h,p,m,o,s,i,a,c,l,W$,n),y.lineEnd=_,_()}return y}}var Xit=op({point:function(e,t){this.stream.point(e*ce,t*ce)}});function Hit(e){return op({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}})}function Zit(e,t,r,n,i){function o(s,a){return s*=n,a*=i,[t+e*s,r-e*a]}return o.invert=function(s,a){return[(s-t)/e*n,(r-a)/e*i]},o}function G$(e,t,r,n,i,o){if(!o)return Zit(e,t,r,n,i);var s=rt(o),a=et(o),c=s*e,l=a*e,u=s/e,f=a/e,d=(a*r-s*t)/e,h=(a*t+s*r)/e;function p(m,y){return m*=n,y*=i,[c*m-l*y+t,r-l*m-c*y]}return p.invert=function(m,y){return[n*(u*m-f*y+d),i*(h-f*m-u*y)]},p}function wn(e){return QB(function(){return e})()}function QB(e){var t,r=150,n=480,i=250,o=0,s=0,a=0,c=0,l=0,u,f=0,d=1,h=1,p=null,m=FB,y=null,g,b,x,_=L0,v=.5,w,T,E,I,B;function A(M){return E(M[0]*ce,M[1]*ce)}function O(M){return M=E.invert(M[0],M[1]),M&&[M[0]*gr,M[1]*gr]}A.stream=function(M){return I&&B===M?I:I=Xit(Hit(u)(m(w(_(B=M)))))},A.preclip=function(M){return arguments.length?(m=M,p=void 0,S()):m},A.postclip=function(M){return arguments.length?(_=M,y=g=b=x=null,S()):_},A.clipAngle=function(M){return arguments.length?(m=+M?M$(p=M*ce):(p=null,FB),S()):p*gr},A.clipExtent=function(M){return arguments.length?(_=M==null?(y=g=b=x=null,L0):tp(y=+M[0][0],g=+M[0][1],b=+M[1][0],x=+M[1][1]),S()):y==null?null:[[y,g],[b,x]]},A.scale=function(M){return arguments.length?(r=+M,L()):r},A.translate=function(M){return arguments.length?(n=+M[0],i=+M[1],L()):[n,i]},A.center=function(M){return arguments.length?(o=M[0]%360*ce,s=M[1]%360*ce,L()):[o*gr,s*gr]},A.rotate=function(M){return arguments.length?(a=M[0]%360*ce,c=M[1]%360*ce,l=M.length>2?M[2]%360*ce:0,L()):[a*gr,c*gr,l*gr]},A.angle=function(M){return arguments.length?(f=M%360*ce,L()):f*gr},A.reflectX=function(M){return arguments.length?(d=M?-1:1,L()):d<0},A.reflectY=function(M){return arguments.length?(h=M?-1:1,L()):h<0},A.precision=function(M){return arguments.length?(w=KB(T,v=M*M),S()):Ce(v)},A.fitExtent=function(M,D){return z0(A,M,D)},A.fitSize=function(M,D){return IS(A,M,D)},A.fitWidth=function(M,D){return TS(A,M,D)},A.fitHeight=function(M,D){return AS(A,M,D)};function L(){var M=G$(r,0,0,d,h,f).apply(null,t(o,s)),D=G$(r,n-M[0],i-M[1],d,h,f);return u=OB(a,c,l),T=F0(t,D),E=F0(u,T),w=KB(T,v),S()}function S(){return I=B=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&O,L()}}function sp(e){var t=0,r=Yt/3,n=QB(e),i=n(t,r);return i.parallels=function(o){return arguments.length?n(t=o[0]*ce,r=o[1]*ce):[t*gr,r*gr]},i}function X$(e){var t=rt(e);function r(n,i){return[n*t,et(i)/t]}return r.invert=function(n,i){return[n/t,Ke(i*t)]},r}function H$(e,t){var r=et(e),n=(r+et(t))/2;if(Jt(n)<ot)return X$(e);var i=1+r*(2*n-r),o=Ce(i)/n;function s(a,c){var l=Ce(i-2*n*et(c))/n;return[l*et(a*=n),o-l*rt(a)]}return s.invert=function(a,c){var l=o-c,u=Fr(a,Jt(l))*Nn(l);return l*n<0&&(u-=Yt*Nn(a)*Nn(l)),[u/n,Ke((i-(a*a+l*l)*n*n)/(2*n))]},s}function cu(){return sp(H$).scale(155.424).center([0,33.6442])}function V0(){return cu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Kit(e){var t=e.length;return{point:function(r,n){for(var i=-1;++i<t;)e[i].point(r,n)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function JB(){var e,t,r=V0(),n,i=cu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=cu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,c,l={point:function(d,h){c=[d,h]}};function u(d){var h=d[0],p=d[1];return c=null,n.point(h,p),c||(o.point(h,p),c)||(a.point(h,p),c)}u.invert=function(d){var h=r.scale(),p=r.translate(),m=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?s:r).invert(d)},u.stream=function(d){return e&&t===d?e:e=Kit([r.stream(t=d),i.stream(d),s.stream(d)])},u.precision=function(d){return arguments.length?(r.precision(d),i.precision(d),s.precision(d),f()):r.precision()},u.scale=function(d){return arguments.length?(r.scale(d),i.scale(d*.35),s.scale(d),u.translate(r.translate())):r.scale()},u.translate=function(d){if(!arguments.length)return r.translate();var h=r.scale(),p=+d[0],m=+d[1];return n=r.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),o=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+ot,m+.12*h+ot],[p-.214*h-ot,m+.234*h-ot]]).stream(l),a=s.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+ot,m+.166*h+ot],[p-.115*h-ot,m+.234*h-ot]]).stream(l),f()},u.fitExtent=function(d,h){return z0(u,d,h)},u.fitSize=function(d,h){return IS(u,d,h)},u.fitWidth=function(d,h){return TS(u,d,h)},u.fitHeight=function(d,h){return AS(u,d,h)};function f(){return e=t=null,u}return u.scale(1070)}function MS(e){return function(t,r){var n=rt(t),i=rt(r),o=e(n*i);return o===1/0?[2,0]:[o*i*et(t),o*et(r)]}}function ga(e){return function(t,r){var n=Ce(t*t+r*r),i=e(n),o=et(i),s=rt(i);return[Fr(t*o,n*s),Ke(n&&r*o/n)]}}var tO=MS(function(e){return Ce(2/(1+e))});tO.invert=ga(function(e){return 2*Ke(e/2)});function eO(){return wn(tO).scale(124.75).clipAngle(180-.001)}var rO=MS(function(e){return(e=rS(e))&&e/et(e)});rO.invert=ga(function(e){return e});function nO(){return wn(rO).scale(79.4188).clipAngle(180-.001)}function ap(e,t){return[e,Wf(Kh((ke+t)/2))]}ap.invert=function(e,t){return[e,2*Eo(Jv(t))-ke]};function iO(){return oO(ap).scale(961/Hr)}function oO(e){var t=wn(e),r=t.center,n=t.scale,i=t.translate,o=t.clipExtent,s=null,a,c,l;t.scale=function(f){return arguments.length?(n(f),u()):n()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(r(f),u()):r()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=c=l=null:(s=+f[0][0],a=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):s==null?null:[[s,a],[c,l]]};function u(){var f=Yt*n(),d=t(v$(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===ap?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,c),l]]:[[s,Math.max(d[1]-f,a)],[c,Math.min(d[1]+f,l)]])}return u()}function ES(e){return Kh((ke+e)/2)}function Z$(e,t){var r=rt(e),n=e===t?et(e):Wf(r/rt(t))/Wf(ES(t)/ES(e)),i=r*eS(ES(e),n)/n;if(!n)return ap;function o(s,a){i>0?a<-ke+ot&&(a=-ke+ot):a>ke-ot&&(a=ke-ot);var c=i/eS(ES(a),n);return[c*et(n*s),i-c*rt(n*s)]}return o.invert=function(s,a){var c=i-a,l=Nn(n)*Ce(s*s+c*c),u=Fr(s,Jt(c))*Nn(c);return c*n<0&&(u-=Yt*Nn(s)*Nn(c)),[u/n,2*Eo(eS(i/l,1/n))-ke]},o}function sO(){return sp(Z$).scale(109.5).parallels([30,30])}function cp(e,t){return[e,t]}cp.invert=cp;function aO(){return wn(cp).scale(152.63)}function K$(e,t){var r=rt(e),n=e===t?et(e):(r-rt(t))/(t-e),i=r/n+e;if(Jt(n)<ot)return cp;function o(s,a){var c=i-a,l=n*s;return[c*et(l),i-c*rt(l)]}return o.invert=function(s,a){var c=i-a,l=Fr(s,Jt(c))*Nn(c);return c*n<0&&(l-=Yt*Nn(s)*Nn(c)),[l/n,i-Nn(n)*Ce(s*s+c*c)]},o}function cO(){return sp(K$).scale(131.154).center([0,13.9389])}var j0=1.340264,q0=-.081106,Y0=893e-6,W0=.003796,DS=Ce(3)/2,Qit=12;function lO(e,t){var r=Ke(DS*et(t)),n=r*r,i=n*n*n;return[e*rt(r)/(DS*(j0+3*q0*n+i*(7*Y0+9*W0*n))),r*(j0+q0*n+i*(Y0+W0*n))]}lO.invert=function(e,t){for(var r=t,n=r*r,i=n*n*n,o=0,s,a,c;o<Qit&&(a=r*(j0+q0*n+i*(Y0+W0*n))-t,c=j0+3*q0*n+i*(7*Y0+9*W0*n),r-=s=a/c,n=r*r,i=n*n*n,!(Jt(s)<Yf));++o);return[DS*e*(j0+3*q0*n+i*(7*Y0+9*W0*n))/rt(r),Ke(et(r)/DS)]};function uO(){return wn(lO).scale(177.158)}function fO(e,t){var r=rt(t),n=rt(e)*r;return[r*et(e)/n,et(t)/n]}fO.invert=ga(Eo);function dO(){return wn(fO).scale(144.049).clipAngle(60)}function hO(e,t){return[rt(t)*et(e),et(t)]}hO.invert=ga(Ke);function pO(){return wn(hO).scale(249.5).clipAngle(90+ot)}function mO(e,t){var r=rt(t),n=1+rt(e)*r;return[r*et(e)/n,et(t)/n]}mO.invert=ga(function(e){return 2*Eo(e)});function yO(){return wn(mO).scale(250).clipAngle(142)}function gO(e,t){return[Wf(Kh((ke+t)/2)),-e]}gO.invert=function(e,t){return[-t,2*Eo(Jv(e))-ke]};function bO(){var e=oO(gO),t=e.center,r=e.rotate;return e.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},e.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):(n=r(),[n[0],n[1],n[2]-90])},r([0,0,90]).scale(159.155)}function Jit(e,t){return e.parent===t.parent?1:2}function tot(e){return e.reduce(eot,0)/e.length}function eot(e,t){return e+t.x}function rot(e){return 1+e.reduce(not,0)}function not(e,t){return Math.max(e,t.y)}function iot(e){for(var t;t=e.children;)e=t[0];return e}function oot(e){for(var t;t=e.children;)e=t[t.length-1];return e}function BS(){var e=Jit,t=1,r=1,n=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=tot(h),d.y=rot(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var c=iot(o),l=oot(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(n?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*r}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*r})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(n=!1,t=+o[0],r=+o[1],i):n?null:[t,r]},i.nodeSize=function(o){return arguments.length?(n=!0,t=+o[0],r=+o[1],i):n?[t,r]:null},i}function sot(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;e.value=t}function Q$(){return this.eachAfter(sot)}function J$(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this}function tz(e,t){for(var r=this,n=[r],i,o,s=-1;r=n.pop();)if(e.call(t,r,++s,this),i=r.children)for(o=i.length-1;o>=0;--o)n.push(i[o]);return this}function ez(e,t){for(var r=this,n=[r],i=[],o,s,a,c=-1;r=n.pop();)if(i.push(r),o=r.children)for(s=0,a=o.length;s<a;++s)n.push(o[s]);for(;r=i.pop();)e.call(t,r,++c,this);return this}function rz(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n}function nz(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,i=n&&n.length;--i>=0;)r+=n[i].value;t.value=r})}function iz(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function oz(e){for(var t=this,r=aot(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var i=n.length;e!==r;)n.splice(i,0,e),e=e.parent;return n}function aot(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),i=null;for(e=r.pop(),t=n.pop();e===t;)i=e,e=r.pop(),t=n.pop();return i}function sz(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function az(){return Array.from(this)}function cz(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function lz(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*uz(){var e=this,t,r=[e],n,i,o;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,n=e.children)for(i=0,o=n.length;i<o;++i)r.push(n[i]);while(r.length)}function xO(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=uot)):t===void 0&&(t=lot);for(var r=new lu(e),n,i=[r],o,s,a,c;n=i.pop();)if((s=t(n.data))&&(c=(s=Array.from(s)).length))for(n.children=s,a=c-1;a>=0;--a)i.push(o=s[a]=new lu(s[a])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(_O)}function cot(){return xO(this).eachBefore(fot)}function lot(e){return e.children}function uot(e){return Array.isArray(e)?e[1]:null}function fot(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _O(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function lu(e){this.data=e,this.depth=this.height=0,this.parent=null}lu.prototype=xO.prototype={constructor:lu,count:Q$,each:J$,eachAfter:ez,eachBefore:tz,find:rz,sum:nz,sort:iz,path:oz,ancestors:sz,descendants:az,leaves:cz,links:lz,copy:cot,[Symbol.iterator]:uz};function OS(e){return e==null?null:dot(e)}function dot(e){if(typeof e!="function")throw new Error;return e}var hot={depth:-1},fz={},wO={};function pot(e){return e.id}function mot(e){return e.parentId}function NS(){var e=pot,t=mot,r;function n(i){var o=Array.from(i),s=e,a=t,c,l,u,f,d,h,p,m,y=new Map;if(r!=null){let g=o.map((_,v)=>yot(r(_,v,i))),b=g.map(dz),x=new Set(g).add("");for(let _ of b)x.has(_)||(x.add(_),g.push(_),b.push(dz(_)),o.push(wO));s=(_,v)=>g[v],a=(_,v)=>b[v]}for(u=0,c=o.length;u<c;++u)l=o[u],h=o[u]=new lu(l),(p=s(l,u,i))!=null&&(p+="")&&(m=h.id=p,y.set(m,y.has(m)?fz:h)),(p=a(l,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<c;++u)if(h=o[u],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===fz)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(r!=null){for(;f.data===wO&&f.children.length===1;)f=f.children[0],--c;for(let g=o.length-1;g>=0&&(h=o[g],h.data===wO);--g)h.data=null}if(f.parent=hot,f.eachBefore(function(g){g.depth=g.parent.depth+1,--c}).eachBefore(_O),f.parent=null,c>0)throw new Error("cycle");return f}return n.id=function(i){return arguments.length?(e=OS(i),n):e},n.parentId=function(i){return arguments.length?(t=OS(i),n):t},n.path=function(i){return arguments.length?(r=OS(i),n):r},n}function yot(e){e=`${e}`;let t=e.length;return vO(e,t-1)&&!vO(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function dz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!vO(e,t););return e.slice(0,t)}function vO(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if(!(r&1))return!0}return!1}function got(e,t){return e.parent===t.parent?1:2}function SO(e){var t=e.children;return t?t[0]:e.t}function IO(e){var t=e.children;return t?t[t.length-1]:e.t}function bot(e,t,r){var n=r/(t.i-e.i);t.c-=n,t.s+=r,e.c+=n,t.z+=r,t.m+=r}function xot(e){for(var t=0,r=0,n=e.children,i=n.length,o;--i>=0;)o=n[i],o.z+=t,o.m+=t,t+=o.s+(r+=o.c)}function _ot(e,t,r){return e.a.parent===t.parent?e.a:r}function FS(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}FS.prototype=Object.create(lu.prototype);function wot(e){for(var t=new FS(e,0),r,n=[t],i,o,s,a;r=n.pop();)if(o=r._.children)for(r.children=new Array(a=o.length),s=a-1;s>=0;--s)n.push(i=r.children[s]=new FS(o[s],s)),i.parent=r;return(t.parent=new FS(null,0)).children=[t],t}function Hf(){var e=got,t=1,r=1,n=null;function i(l){var u=wot(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),n)l.eachBefore(c);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,y=t/(d.x+p+m),g=r/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*y,b.y=b.depth*g})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){xot(l);var h=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,u,f){if(u){for(var d=l,h=l,p=u,m=d.parent.children[0],y=d.m,g=h.m,b=p.m,x=m.m,_;p=IO(p),d=SO(d),p&&d;)m=SO(m),h=IO(h),h.a=l,_=p.z+b-d.z-y+e(p._,d._),_>0&&(bot(_ot(p,l,f),l,_),y+=_,g+=_),b+=p.m,y+=d.m,x+=m.m,g+=h.m;p&&!IO(h)&&(h.t=p,h.m+=b-g),d&&!SO(m)&&(m.t=d,m.m+=y-x,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*r}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(n=!1,t=+l[0],r=+l[1],i):n?null:[t,r]},i.nodeSize=function(l){return arguments.length?(n=!0,t=+l[0],r=+l[1],i):n?[t,r]:null},i}var hz=23283064365386963e-26;function Zf(e=Math.random()){let t=(0<=e&&e<1?e/hz:Math.abs(e))|0;return()=>(t=1664525*t+1013904223|0,hz*(t>>>0))}function Lr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function G0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var X0=Symbol("implicit");function Kf(){var e=new Xn,t=[],r=[],n=X0;function i(o){let s=e.get(o);if(s===void 0){if(n!==X0)return n;e.set(o,s=t.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Xn;for(let s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Kf(t,r).unknown(n)},Lr.apply(i,arguments),i}function uu(){var e=Kf().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,s,a=!1,c=0,l=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<n,p=h?i:n,m=h?n:i;o=(m-p)/Math.max(1,d-c+l*2),a&&(o=Math.floor(o)),p+=(m-p-o*(d-c))*u,s=o*(1-c),a&&(p=Math.round(p),s=Math.round(s));var y=_r(d).map(function(g){return p+o*g});return r(h?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([n,i]=d,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(d){return[n,i]=d,n=+n,i=+i,a=!0,f()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(c=Math.min(1,l=+d),f()):c},e.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),f()):c},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return uu(t(),[n,i]).round(a).paddingInner(c).paddingOuter(l).align(u)},Lr.apply(f(),arguments)}function pz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pz(t())},e}function TO(){return pz(uu.apply(null,arguments).paddingInner(1))}function AO(e){return function(){return e}}function lp(e){return+e}var mz=[0,1];function Ii(e){return e}function MO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:AO(isNaN(t)?NaN:.5)}function vot(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Sot(e,t,r){var n=e[0],i=e[1],o=t[0],s=t[1];return i<n?(n=MO(i,n),o=r(s,o)):(n=MO(n,i),o=r(o,s)),function(a){return o(n(a))}}function Iot(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=MO(e[s],e[s+1]),o[s]=r(t[s],t[s+1]);return function(a){var c=Oc(e,a,1,n)-1;return o[c](i[c](a))}}function ba(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qf(){var e=mz,t=mz,r=ji,n,i,o,s=Ii,a,c,l;function u(){var d=Math.min(e.length,t.length);return s!==Ii&&(s=vot(e[0],e[d-1])),a=d>2?Iot:Sot,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=a(e.map(n),t,r)))(n(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(n),Ze)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,lp),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),r=Pf,u()},f.clamp=function(d){return arguments.length?(s=d?!0:Ii,u()):s!==Ii},f.interpolate=function(d){return arguments.length?(r=d,u()):r},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return n=d,i=h,u()}}function H0(){return Qf()(Ii,Ii)}function EO(e,t,r,n){var i=Nh(e,t,r),o;switch(n=ha(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=wB(i,s))&&(n.precision=o),Qv(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=vB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=_B(i))&&(n.precision=o-(n.type==="%")*2);break}}return Mo(n)}function jc(e){var t=e.domain;return e.ticks=function(r){var n=t();return gn(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return EO(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,s=n[i],a=n[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=Fc(s,a,r),l===c)return n[i]=s,n[o]=a,t(n);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function qc(){var e=H0();return e.copy=function(){return ba(e,qc())},Lr.apply(e,arguments),jc(e)}function Z0(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,lp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Z0(e).unknown(t)},e=arguments.length?Array.from(e,lp):[0,1],jc(r)}function K0(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],o=e[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),e[r]=t.floor(i),e[n]=t.ceil(o),e}function yz(e){return Math.log(e)}function gz(e){return Math.exp(e)}function Tot(e){return-Math.log(-e)}function Aot(e){return-Math.exp(-e)}function Mot(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Eot(e){return e===10?Mot:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Dot(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function bz(e){return(t,r)=>-e(-t,r)}function DO(e){let t=e(yz,gz),r=t.domain,n=10,i,o;function s(){return i=Dot(n),o=Eot(n),r()[0]<0?(i=bz(i),o=bz(o),e(Tot,Aot)):e(yz,gz),t}return t.base=function(a){return arguments.length?(n=+a,s()):n},t.domain=function(a){return arguments.length?(r(a),s()):r()},t.ticks=a=>{let c=r(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),h=i(u),p,m,y=a==null?10:+a,g=[];if(!(n%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<n;++p)if(m=d<0?p/o(-d):p*o(d),!(m<l)){if(m>u)break;g.push(m)}}else for(;d<=h;++d)for(p=n-1;p>=1;--p)if(m=d>0?p/o(-d):p*o(d),!(m<l)){if(m>u)break;g.push(m)}g.length*2<y&&(g=gn(l,u,y))}else g=gn(d,h,Math.min(h-d,y)).map(o);return f?g.reverse():g},t.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ha(c)).precision==null&&(c.trim=!0),c=Mo(c)),a===1/0)return c;let l=Math.max(1,n*a/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*n<n-.5&&(f*=n),f<=l?c(u):""}},t.nice=()=>r(K0(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function Q0(){let e=DO(Qf()).domain([1,10]);return e.copy=()=>ba(e,Q0()).base(e.base()),Lr.apply(e,arguments),e}function xz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _z(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function BO(e){var t=1,r=e(xz(t),_z(t));return r.constant=function(n){return arguments.length?e(xz(t=+n),_z(t)):t},jc(r)}function J0(){var e=BO(Qf());return e.copy=function(){return ba(e,J0()).constant(e.constant())},Lr.apply(e,arguments)}function wz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bot(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oot(e){return e<0?-e*e:e*e}function OO(e){var t=e(Ii,Ii),r=1;function n(){return r===1?e(Ii,Ii):r===.5?e(Bot,Oot):e(wz(r),wz(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},jc(t)}function tb(){var e=OO(Qf());return e.copy=function(){return ba(e,tb()).exponent(e.exponent())},Lr.apply(e,arguments),e}function eb(){var e=[],t=[],r=[],n;function i(){var s=0,a=Math.max(1,t.length);for(r=new Array(a-1);++s<a;)r[s-1]=BD(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:t[Oc(r,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ie),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return eb().domain(e).range(t).unknown(n)},Lr.apply(o,arguments)}function rb(){var e=[.5],t=[0,1],r,n=1;function i(o){return o!=null&&o<=o?t[Oc(e,o,0,n)]:r}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return rb().domain(e).range(t).unknown(r)},Lr.apply(i,arguments)}var NO=new Date,FO=new Date;function $e(e,t,r,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{let c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let l;do c.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return c},i.filter=o=>$e(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),r&&(i.count=(o,s)=>(NO.setTime(+o),FO.setTime(+s),e(NO),e(FO),Math.floor(r(NO,FO))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}var nb=$e(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);nb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$e(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):nb);var nzt=nb.range;var Zr=$e(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),vz=Zr.range;var Yc=$e(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),Not=Yc.range,Wc=$e(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),Fot=Wc.range;var Gc=$e(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),Rot=Gc.range,Xc=$e(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),Lot=Xc.range;var Do=$e(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),kot=Do.range,ed=$e(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),Cot=ed.range,rd=$e(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),Uot=rd.range;function nd(e){return $e(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Yi=nd(0),fu=nd(1),RS=nd(2),LS=nd(3),_a=nd(4),kS=nd(5),CS=nd(6),Iz=Yi.range,Pot=fu.range,$ot=RS.range,zot=LS.range,Vot=_a.range,jot=kS.range,qot=CS.range;function id(e){return $e(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/6048e5)}var Wi=id(0),du=id(1),US=id(2),PS=id(3),wa=id(4),$S=id(5),zS=id(6),Tz=Wi.range,Yot=du.range,Wot=US.range,Got=PS.range,Xot=wa.range,Hot=$S.range,Zot=zS.range;var Hc=$e(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Kot=Hc.range,Zc=$e(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),Qot=Zc.range;var Fn=$e(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$e(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});var Jot=Fn.range,Rn=$e(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$e(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});var tst=Rn.range;function Mz(e,t,r,n,i,o){let s=[[Zr,1,1e3],[Zr,5,5*1e3],[Zr,15,15*1e3],[Zr,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function a(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let h=f&&typeof f.range=="function"?f:c(l,u,f),p=h?h.range(l,+u+1):[];return d?p.reverse():p}function c(l,u,f){let d=Math.abs(u-l)/f,h=Bc(([,,y])=>y).right(s,d);if(h===s.length)return e.every(Nh(l/31536e6,u/31536e6,f));if(h===0)return nb.every(Math.max(Nh(l,u,f),1));let[p,m]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(m)}return[a,c]}var[RO,ob]=Mz(Rn,Zc,Wi,rd,Xc,Wc),[LO,kO]=Mz(Fn,Hc,Yi,Do,Gc,Yc);function CO(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function UO(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function PO(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,c=e.shortMonths,l=ab(i),u=cb(i),f=ab(o),d=cb(o),h=ab(s),p=cb(s),m=ab(a),y=cb(a),g=ab(c),b=cb(c),x={a:C,A:U,b:k,B:$,c:null,d:Fz,e:Fz,f:Ist,g:Rst,G:kst,H:wst,I:vst,j:Sst,L:Uz,m:Tst,M:Ast,p:z,q:V,Q:kz,s:Cz,S:Mst,u:Est,U:Dst,V:Bst,w:Ost,W:Nst,x:null,X:null,y:Fst,Y:Lst,Z:Cst,"%":Lz},_={a:Q,A:st,b:ct,B:ut,c:null,d:Rz,e:Rz,f:zst,g:Kst,G:Jst,H:Ust,I:Pst,j:$st,L:$z,m:Vst,M:jst,p:X,q:lt,Q:kz,s:Cz,S:qst,u:Yst,U:Wst,V:Gst,w:Xst,W:Hst,x:null,X:null,y:Zst,Y:Qst,Z:tat,"%":Lz},v={a:B,A,b:O,B:L,c:S,d:Oz,e:Oz,f:gst,g:Bz,G:Dz,H:Nz,I:Nz,j:hst,L:yst,m:dst,M:pst,p:I,q:fst,Q:xst,s:_st,S:mst,u:sst,U:ast,V:cst,w:ost,W:lst,x:M,X:D,y:Bz,Y:Dz,Z:ust,"%":bst};x.x=w(r,x),x.X=w(n,x),x.c=w(t,x),_.x=w(r,_),_.X=w(n,_),_.c=w(t,_);function w(Y,tt){return function(at){var j=[],Qt=-1,gt=0,de=Y.length,pe,nt,Me;for(at instanceof Date||(at=new Date(+at));++Qt<de;)Y.charCodeAt(Qt)===37&&(j.push(Y.slice(gt,Qt)),(nt=Ez[pe=Y.charAt(++Qt)])!=null?pe=Y.charAt(++Qt):nt=pe==="e"?" ":"0",(Me=tt[pe])&&(pe=Me(at,nt)),j.push(pe),gt=Qt+1);return j.push(Y.slice(gt,Qt)),j.join("")}}function T(Y,tt){return function(at){var j=sb(1900,void 0,1),Qt=E(j,Y,at+="",0),gt,de;if(Qt!=at.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(tt&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(gt=UO(sb(j.y,0,1)),de=gt.getUTCDay(),gt=de>4||de===0?du.ceil(gt):du(gt),gt=ed.offset(gt,(j.V-1)*7),j.y=gt.getUTCFullYear(),j.m=gt.getUTCMonth(),j.d=gt.getUTCDate()+(j.w+6)%7):(gt=CO(sb(j.y,0,1)),de=gt.getDay(),gt=de>4||de===0?fu.ceil(gt):fu(gt),gt=Do.offset(gt,(j.V-1)*7),j.y=gt.getFullYear(),j.m=gt.getMonth(),j.d=gt.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),de="Z"in j?UO(sb(j.y,0,1)).getUTCDay():CO(sb(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(de+5)%7:j.w+j.U*7-(de+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,UO(j)):CO(j)}}function E(Y,tt,at,j){for(var Qt=0,gt=tt.length,de=at.length,pe,nt;Qt<gt;){if(j>=de)return-1;if(pe=tt.charCodeAt(Qt++),pe===37){if(pe=tt.charAt(Qt++),nt=v[pe in Ez?tt.charAt(Qt++):pe],!nt||(j=nt(Y,at,j))<0)return-1}else if(pe!=at.charCodeAt(j++))return-1}return j}function I(Y,tt,at){var j=l.exec(tt.slice(at));return j?(Y.p=u.get(j[0].toLowerCase()),at+j[0].length):-1}function B(Y,tt,at){var j=h.exec(tt.slice(at));return j?(Y.w=p.get(j[0].toLowerCase()),at+j[0].length):-1}function A(Y,tt,at){var j=f.exec(tt.slice(at));return j?(Y.w=d.get(j[0].toLowerCase()),at+j[0].length):-1}function O(Y,tt,at){var j=g.exec(tt.slice(at));return j?(Y.m=b.get(j[0].toLowerCase()),at+j[0].length):-1}function L(Y,tt,at){var j=m.exec(tt.slice(at));return j?(Y.m=y.get(j[0].toLowerCase()),at+j[0].length):-1}function S(Y,tt,at){return E(Y,t,tt,at)}function M(Y,tt,at){return E(Y,r,tt,at)}function D(Y,tt,at){return E(Y,n,tt,at)}function C(Y){return s[Y.getDay()]}function U(Y){return o[Y.getDay()]}function k(Y){return c[Y.getMonth()]}function $(Y){return a[Y.getMonth()]}function z(Y){return i[+(Y.getHours()>=12)]}function V(Y){return 1+~~(Y.getMonth()/3)}function Q(Y){return s[Y.getUTCDay()]}function st(Y){return o[Y.getUTCDay()]}function ct(Y){return c[Y.getUTCMonth()]}function ut(Y){return a[Y.getUTCMonth()]}function X(Y){return i[+(Y.getUTCHours()>=12)]}function lt(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var tt=w(Y+="",x);return tt.toString=function(){return Y},tt},parse:function(Y){var tt=T(Y+="",!1);return tt.toString=function(){return Y},tt},utcFormat:function(Y){var tt=w(Y+="",_);return tt.toString=function(){return Y},tt},utcParse:function(Y){var tt=T(Y+="",!0);return tt.toString=function(){return Y},tt}}}var Ez={"-":"",_:" ",0:"0"},Kr=/^\s*\d+/,rst=/^%/,nst=/[\\^$*+?|[\]().{}]/g;function we(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function ist(e){return e.replace(nst,"\\$&")}function ab(e){return new RegExp("^(?:"+e.map(ist).join("|")+")","i")}function cb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ost(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sst(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ast(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cst(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function lst(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Dz(e,t,r){var n=Kr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Bz(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ust(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fst(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function dst(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Oz(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hst(e,t,r){var n=Kr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Nz(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function pst(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mst(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function yst(e,t,r){var n=Kr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gst(e,t,r){var n=Kr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function bst(e,t,r){var n=rst.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xst(e,t,r){var n=Kr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function _st(e,t,r){var n=Kr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Fz(e,t){return we(e.getDate(),t,2)}function wst(e,t){return we(e.getHours(),t,2)}function vst(e,t){return we(e.getHours()%12||12,t,2)}function Sst(e,t){return we(1+Do.count(Fn(e),e),t,3)}function Uz(e,t){return we(e.getMilliseconds(),t,3)}function Ist(e,t){return Uz(e,t)+"000"}function Tst(e,t){return we(e.getMonth()+1,t,2)}function Ast(e,t){return we(e.getMinutes(),t,2)}function Mst(e,t){return we(e.getSeconds(),t,2)}function Est(e){var t=e.getDay();return t===0?7:t}function Dst(e,t){return we(Yi.count(Fn(e)-1,e),t,2)}function Pz(e){var t=e.getDay();return t>=4||t===0?_a(e):_a.ceil(e)}function Bst(e,t){return e=Pz(e),we(_a.count(Fn(e),e)+(Fn(e).getDay()===4),t,2)}function Ost(e){return e.getDay()}function Nst(e,t){return we(fu.count(Fn(e)-1,e),t,2)}function Fst(e,t){return we(e.getFullYear()%100,t,2)}function Rst(e,t){return e=Pz(e),we(e.getFullYear()%100,t,2)}function Lst(e,t){return we(e.getFullYear()%1e4,t,4)}function kst(e,t){var r=e.getDay();return e=r>=4||r===0?_a(e):_a.ceil(e),we(e.getFullYear()%1e4,t,4)}function Cst(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+we(t/60|0,"0",2)+we(t%60,"0",2)}function Rz(e,t){return we(e.getUTCDate(),t,2)}function Ust(e,t){return we(e.getUTCHours(),t,2)}function Pst(e,t){return we(e.getUTCHours()%12||12,t,2)}function $st(e,t){return we(1+ed.count(Rn(e),e),t,3)}function $z(e,t){return we(e.getUTCMilliseconds(),t,3)}function zst(e,t){return $z(e,t)+"000"}function Vst(e,t){return we(e.getUTCMonth()+1,t,2)}function jst(e,t){return we(e.getUTCMinutes(),t,2)}function qst(e,t){return we(e.getUTCSeconds(),t,2)}function Yst(e){var t=e.getUTCDay();return t===0?7:t}function Wst(e,t){return we(Wi.count(Rn(e)-1,e),t,2)}function zz(e){var t=e.getUTCDay();return t>=4||t===0?wa(e):wa.ceil(e)}function Gst(e,t){return e=zz(e),we(wa.count(Rn(e),e)+(Rn(e).getUTCDay()===4),t,2)}function Xst(e){return e.getUTCDay()}function Hst(e,t){return we(du.count(Rn(e)-1,e),t,2)}function Zst(e,t){return we(e.getUTCFullYear()%100,t,2)}function Kst(e,t){return e=zz(e),we(e.getUTCFullYear()%100,t,2)}function Qst(e,t){return we(e.getUTCFullYear()%1e4,t,4)}function Jst(e,t){var r=e.getUTCDay();return e=r>=4||r===0?wa(e):wa.ceil(e),we(e.getUTCFullYear()%1e4,t,4)}function tat(){return"+0000"}function Lz(){return"%"}function kz(e){return+e}function Cz(e){return Math.floor(+e/1e3)}var up,fp,Vz,va,jz;$O({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $O(e){return up=PO(e),fp=up.format,Vz=up.parse,va=up.utcFormat,jz=up.utcParse,up}function eat(e){return new Date(e)}function rat(e){return e instanceof Date?+e:+new Date(+e)}function VS(e,t,r,n,i,o,s,a,c,l){var u=H0(),f=u.invert,d=u.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),g=l("%a %d"),b=l("%b %d"),x=l("%B"),_=l("%Y");function v(w){return(c(w)<w?h:a(w)<w?p:s(w)<w?m:o(w)<w?y:n(w)<w?i(w)<w?g:b:r(w)<w?x:_)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?d(Array.from(w,rat)):d().map(eat)},u.ticks=function(w){var T=d();return e(T[0],T[T.length-1],w??10)},u.tickFormat=function(w,T){return T==null?v:l(T)},u.nice=function(w){var T=d();return(!w||typeof w.range!="function")&&(w=t(T[0],T[T.length-1],w??10)),w?d(K0(T,w)):u},u.copy=function(){return ba(u,VS(e,t,r,n,i,o,s,a,c,l))},u}function jS(){return Lr.apply(VS(LO,kO,Fn,Hc,Yi,Do,Gc,Yc,Zr,fp).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qS(){return Lr.apply(VS(RO,ob,Rn,Zc,Wi,ed,Xc,Wc,Zr,va).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YS(){var e=0,t=.5,r=1,n=1,i,o,s,a,c,l=Ii,u,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(n*m<n*o?a:c),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,r]=m,i=u(e=+e),o=u(t=+t),s=u(r=+r),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),n=o<i?-1:1,h):[e,t,r]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var g,b,x;return arguments.length?([g,b,x]=y,l=la(m,[g,b,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(ji),h.rangeRound=p(Pf),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return u=m,i=m(e),o=m(t),s=m(r),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),n=o<i?-1:1,h}}function ub(){var e=jc(YS()(Ii));return e.copy=function(){return lb(e,ub())},G0.apply(e,arguments)}function WS(){var e=DO(YS()).domain([.1,1,10]);return e.copy=function(){return lb(e,WS()).base(e.base())},G0.apply(e,arguments)}function GS(){var e=BO(YS());return e.copy=function(){return lb(e,GS()).constant(e.constant())},G0.apply(e,arguments)}function XS(){var e=OO(YS());return e.copy=function(){return lb(e,XS()).exponent(e.exponent())},G0.apply(e,arguments)}function Z(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}var zO=Z("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var VO=Z("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var jO=Z("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var qO=Z("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var YO=Z("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var WO=Z("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var GO=Z("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var XO=Z("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var HO=Z("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var ZO=Z("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var KO=Z("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var xt=e=>WD(e[e.length-1]);var HS=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Z),ZS=xt(HS);var KS=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Z),QS=xt(KS);var JS=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Z),t2=xt(JS);var e2=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Z),r2=xt(e2);var fb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Z),dp=xt(fb);var n2=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Z),i2=xt(n2);var db=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Z),hp=xt(db);var o2=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Z),s2=xt(o2);var a2=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Z),c2=xt(a2);var l2=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Z),u2=xt(l2);var f2=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Z),d2=xt(f2);var h2=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Z),p2=xt(h2);var m2=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Z),y2=xt(m2);var g2=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Z),b2=xt(g2);var x2=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Z),_2=xt(x2);var w2=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Z),v2=xt(w2);var S2=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Z),I2=xt(S2);var T2=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Z),A2=xt(T2);var M2=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Z),E2=xt(M2);var D2=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Z),B2=xt(D2);var O2=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Z),N2=xt(O2);var F2=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Z),R2=xt(F2);var L2=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Z),k2=xt(L2);var C2=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Z),U2=xt(C2);var P2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Z),$2=xt(P2);var z2=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Z),V2=xt(z2);var j2=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Z),q2=xt(j2);function Y2(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var W2=zh(Kn(300,.5,0),Kn(-240,.5,1));var X2=zh(Kn(-100,.75,.35),Kn(80,1.5,.8)),H2=zh(Kn(260,.75,.35),Kn(80,1.5,.8)),G2=Kn();function Z2(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return G2.h=360*e-100,G2.s=1.5-1.5*t,G2.l=.8-.9*t,G2+""}var K2=jr(),nat=Math.PI/3,iat=Math.PI*2/3;function Q2(e){var t;return e=(.5-e)*Math.PI,K2.r=255*(t=Math.sin(e))*t,K2.g=255*(t=Math.sin(e+nat))*t,K2.b=255*(t=Math.sin(e+iat))*t,K2+""}function J2(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function tI(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var eI=tI(Z("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),rI=tI(Z("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),nI=tI(Z("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),iI=tI(Z("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function kr(e){return function(){return e}}var QO=Math.cos;var pp=Math.min,hb=Math.sin,ve=Math.sqrt,JO=1e-12,od=Math.PI,EYt=od/2,mp=2*od;function oI(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new iu(t)}var NYt=Array.prototype.slice;function sI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qz(e){this._context=e}qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Kc(e){return new qz(e)}function aI(e){return e[0]}function cI(e){return e[1]}function pb(e,t){var r=kr(!0),n=null,i=Kc,o=null,s=oI(a);e=typeof e=="function"?e:e===void 0?aI:kr(e),t=typeof t=="function"?t:t===void 0?cI:kr(t);function a(c){var l,u=(c=sI(c)).length,f,d=!1,h;for(n==null&&(o=i(h=s())),l=0;l<=u;++l)!(l<u&&r(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(h)return o=null,h+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:kr(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:kr(+c),a):t},a.defined=function(c){return arguments.length?(r=typeof c=="function"?c:kr(!!c),a):r},a.curve=function(c){return arguments.length?(i=c,n!=null&&(o=i(n)),a):i},a.context=function(c){return arguments.length?(c==null?n=o=null:o=i(n=c),a):n},a}function yp(e,t,r){var n=null,i=kr(!0),o=null,s=Kc,a=null,c=oI(l);e=typeof e=="function"?e:e===void 0?aI:kr(+e),t=typeof t=="function"?t:t===void 0?kr(0):kr(+t),r=typeof r=="function"?r:r===void 0?cI:kr(+r);function l(f){var d,h,p,m=(f=sI(f)).length,y,g=!1,b,x=new Array(m),_=new Array(m);for(o==null&&(a=s(b=c())),d=0;d<=m;++d){if(!(d<m&&i(y=f[d],d,f))===g)if(g=!g)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],_[p]);a.lineEnd(),a.areaEnd()}g&&(x[d]=+e(y,d,f),_[d]=+t(y,d,f),a.point(n?+n(y,d,f):x[d],r?+r(y,d,f):_[d]))}if(b)return a=null,b+""||null}function u(){return pb().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:kr(+f),n=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:kr(+f),l):e},l.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:kr(+f),l):n},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:kr(+f),r=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:kr(+f),l):t},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:kr(+f),l):r},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(r)},l.lineX1=function(){return u().x(n).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:kr(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}var lI=class{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}};function tN(e){return new lI(e,!0)}function eN(e){return new lI(e,!1)}var oat=ve(3),mb={draw(e,t){let r=ve(t+pp(t/28,.75))*.59436,n=r/2,i=n*oat;e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-i,-n),e.lineTo(i,n),e.moveTo(-i,n),e.lineTo(i,-n)}};var Qc={draw(e,t){let r=ve(t/od);e.moveTo(r,0),e.arc(0,0,r,0,mp)}};var yb={draw(e,t){let r=ve(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}};var Yz=ve(1/3),sat=Yz*2,gb={draw(e,t){let r=ve(t/sat),n=r*Yz;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}};var bb={draw(e,t){let r=ve(t)*.62625;e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.closePath()}};var xb={draw(e,t){let r=ve(t-pp(t/7,2))*.87559;e.moveTo(-r,0),e.lineTo(r,0),e.moveTo(0,r),e.lineTo(0,-r)}};var _b={draw(e,t){let r=ve(t),n=-r/2;e.rect(n,n,r,r)}};var wb={draw(e,t){let r=ve(t)*.4431;e.moveTo(r,r),e.lineTo(r,-r),e.lineTo(-r,-r),e.lineTo(-r,r),e.closePath()}};var aat=.8908130915292852,Wz=hb(od/10)/hb(7*od/10),cat=hb(mp/10)*Wz,lat=-QO(mp/10)*Wz,vb={draw(e,t){let r=ve(t*aat),n=cat*r,i=lat*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){let s=mp*o/5,a=QO(s),c=hb(s);e.lineTo(c*r,-a*r),e.lineTo(a*n-c*i,c*n+a*i)}e.closePath()}};var rN=ve(3),Sb={draw(e,t){let r=-ve(t/(rN*3));e.moveTo(0,r*2),e.lineTo(-rN*r,-r),e.lineTo(rN*r,-r),e.closePath()}};var uat=ve(3),Ib={draw(e,t){let r=ve(t)*.6824,n=r/2,i=r*uat/2;e.moveTo(0,-r),e.lineTo(i,n),e.lineTo(-i,n),e.closePath()}};var Bo=-.5,Oo=ve(3)/2,nN=1/ve(12),fat=(nN/2+1)*3,Tb={draw(e,t){let r=ve(t/fat),n=r/2,i=r*nN,o=n,s=r*nN+r,a=-o,c=s;e.moveTo(n,i),e.lineTo(o,s),e.lineTo(a,c),e.lineTo(Bo*n-Oo*i,Oo*n+Bo*i),e.lineTo(Bo*o-Oo*s,Oo*o+Bo*s),e.lineTo(Bo*a-Oo*c,Oo*a+Bo*c),e.lineTo(Bo*n+Oo*i,Bo*i-Oo*n),e.lineTo(Bo*o+Oo*s,Bo*s-Oo*o),e.lineTo(Bo*a+Oo*c,Bo*c-Oo*a),e.closePath()}};var gp={draw(e,t){let r=ve(t-pp(t/6,1.7))*.6189;e.moveTo(-r,-r),e.lineTo(r,r),e.moveTo(-r,r),e.lineTo(r,-r)}};var uI=[Qc,yb,gb,_b,vb,Sb,Tb],iN=[Qc,xb,gp,Ib,mb,wb,bb];function No(){}function bp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Ab(e){this._context=e}Ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oN(e){return new Ab(e)}function Gz(e){this._context=e}Gz.prototype={areaStart:No,areaEnd:No,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:bp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sN(e){return new Gz(e)}function Xz(e){this._context=e}Xz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:bp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aN(e){return new Xz(e)}function Hz(e,t){this._basis=new Ab(e),this._beta=t}Hz.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],i=t[0],o=e[r]-n,s=t[r]-i,a=-1,c;++a<=r;)c=a/r,this._basis.point(this._beta*e[a]+(1-this._beta)*(n+c*o),this._beta*t[a]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var cN=function e(t){function r(n){return t===1?new Ab(n):new Hz(n,t)}return r.beta=function(n){return e(+n)},r}(.85);function xp(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function fI(e,t){this._context=e,this._k=(1-t)/6}fI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xp(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:xp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lN=function e(t){function r(n){return new fI(n,t)}return r.tension=function(n){return e(+n)},r}(0);function dI(e,t){this._context=e,this._k=(1-t)/6}dI.prototype={areaStart:No,areaEnd:No,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var uN=function e(t){function r(n){return new dI(n,t)}return r.tension=function(n){return e(+n)},r}(0);function hI(e,t){this._context=e,this._k=(1-t)/6}hI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fN=function e(t){function r(n){return new hI(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Mb(e,t,r){var n=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>JO){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>JO){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*l+e._y1*e._l23_2a-r*e._l12_2a)/u}e._context.bezierCurveTo(n,i,o,s,e._x2,e._y2)}function Zz(e,t){this._context=e,this._alpha=t}Zz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Mb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dN=function e(t){function r(n){return t?new Zz(n,t):new fI(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Kz(e,t){this._context=e,this._alpha=t}Kz.prototype={areaStart:No,areaEnd:No,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Mb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var hN=function e(t){function r(n){return t?new Kz(n,t):new dI(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Qz(e,t){this._context=e,this._alpha=t}Qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var pN=function e(t){function r(n){return t?new Qz(n,t):new hI(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Jz(e){this._context=e}Jz.prototype={areaStart:No,areaEnd:No,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mN(e){return new Jz(e)}function tV(e){return e<0?-1:1}function eV(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(tV(o)+tV(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function rV(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function yN(e,t,r){var n=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-n)/3;e._context.bezierCurveTo(n+a,i+a*t,o-a,s-a*r,o,s)}function pI(e){this._context=e}pI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yN(this,this._t0,rV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yN(this,rV(this,r=eV(this,e,t)),r);break;default:yN(this,this._t0,r=eV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function nV(e){this._context=new iV(e)}(nV.prototype=Object.create(pI.prototype)).point=function(e,t){pI.prototype.point.call(this,t,e)};function iV(e){this._context=e}iV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}};function gN(e){return new pI(e)}function bN(e){return new nV(e)}function sV(e){this._context=e}sV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=oV(e),i=oV(t),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function oV(e){var t,r=e.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function xN(e){return new sV(e)}function mI(e,t){this._context=e,this._t=t}mI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function _N(e){return new mI(e,.5)}function wN(e){return new mI(e,0)}function vN(e){return new mI(e,1)}var Eb=e=>()=>e;function SN(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function Gi(e,t,r){this.k=e,this.x=t,this.y=r}Gi.prototype={constructor:Gi,scale:function(e){return e===1?this:new Gi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Db=new Gi(1,0,0);IN.prototype=Gi.prototype;function IN(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Db;return e.__zoom}function yI(e){e.stopImmediatePropagation()}function _p(e){e.preventDefault(),e.stopImmediatePropagation()}function dat(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hat(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function aV(){return this.__zoom||Db}function pat(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mat(){return navigator.maxTouchPoints||"ontouchstart"in this}function yat(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],o=e.invertY(t[0][1])-r[0][1],s=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function TN(){var e=dat,t=hat,r=yat,n=pat,i=mat,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=QD,l=Ff("start","zoom","end"),u,f,d,h=500,p=150,m=0,y=10;function g(S){S.property("__zoom",aV).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(S,M,D,C){var U=S.selection?S.selection():S;U.property("__zoom",aV),S!==U?v(S,M,D,C):U.interrupt().each(function(){w(this,arguments).event(C).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},g.scaleBy=function(S,M,D,C){g.scaleTo(S,function(){var U=this.__zoom.k,k=typeof M=="function"?M.apply(this,arguments):M;return U*k},D,C)},g.scaleTo=function(S,M,D,C){g.transform(S,function(){var U=t.apply(this,arguments),k=this.__zoom,$=D==null?_(U):typeof D=="function"?D.apply(this,arguments):D,z=k.invert($),V=typeof M=="function"?M.apply(this,arguments):M;return r(x(b(k,V),$,z),U,s)},D,C)},g.translateBy=function(S,M,D,C){g.transform(S,function(){return r(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),s)},null,C)},g.translateTo=function(S,M,D,C,U){g.transform(S,function(){var k=t.apply(this,arguments),$=this.__zoom,z=C==null?_(k):typeof C=="function"?C.apply(this,arguments):C;return r(Db.translate(z[0],z[1]).scale($.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof D=="function"?-D.apply(this,arguments):-D),k,s)},C,U)};function b(S,M){return M=Math.max(o[0],Math.min(o[1],M)),M===S.k?S:new Gi(M,S.x,S.y)}function x(S,M,D){var C=M[0]-D[0]*S.k,U=M[1]-D[1]*S.k;return C===S.x&&U===S.y?S:new Gi(S.k,C,U)}function _(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function v(S,M,D,C){S.on("start.zoom",function(){w(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(C).end()}).tween("zoom",function(){var U=this,k=arguments,$=w(U,k).event(C),z=t.apply(U,k),V=D==null?_(z):typeof D=="function"?D.apply(U,k):D,Q=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),st=U.__zoom,ct=typeof M=="function"?M.apply(U,k):M,ut=c(st.invert(V).concat(Q/st.k),ct.invert(V).concat(Q/ct.k));return function(X){if(X===1)X=ct;else{var lt=ut(X),Y=Q/lt[2];X=new Gi(Y,V[0]-lt[0]*Y,V[1]-lt[1]*Y)}$.zoom(null,X)}})}function w(S,M,D){return!D&&S.__zooming||new T(S,M)}function T(S,M){this.that=S,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,M),this.taps=0}T.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,M){return this.mouse&&S!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var M=ae(this.that).datum();l.call(S,this.that,new SN(S,{sourceEvent:this.sourceEvent,target:g,type:S,transform:this.that.__zoom,dispatch:l}),M)}};function E(S,...M){if(!e.apply(this,arguments))return;var D=w(this,M).event(S),C=this.__zoom,U=Math.max(o[0],Math.min(o[1],C.k*Math.pow(2,n.apply(this,arguments)))),k=En(S);if(D.wheel)(D.mouse[0][0]!==k[0]||D.mouse[0][1]!==k[1])&&(D.mouse[1]=C.invert(D.mouse[0]=k)),clearTimeout(D.wheel);else{if(C.k===U)return;D.mouse=[k,C.invert(k)],ua(this),D.start()}_p(S),D.wheel=setTimeout($,p),D.zoom("mouse",r(x(b(C,U),D.mouse[0],D.mouse[1]),D.extent,s));function $(){D.wheel=null,D.end()}}function I(S,...M){if(d||!e.apply(this,arguments))return;var D=S.currentTarget,C=w(this,M,!0).event(S),U=ae(S.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",Q,!0),k=En(S,D),$=S.clientX,z=S.clientY;o0(S.view),yI(S),C.mouse=[k,this.__zoom.invert(k)],ua(this),C.start();function V(st){if(_p(st),!C.moved){var ct=st.clientX-$,ut=st.clientY-z;C.moved=ct*ct+ut*ut>m}C.event(st).zoom("mouse",r(x(C.that.__zoom,C.mouse[0]=En(st,D),C.mouse[1]),C.extent,s))}function Q(st){U.on("mousemove.zoom mouseup.zoom",null),s0(st.view,C.moved),_p(st),C.event(st).end()}}function B(S,...M){if(e.apply(this,arguments)){var D=this.__zoom,C=En(S.changedTouches?S.changedTouches[0]:S,this),U=D.invert(C),k=D.k*(S.shiftKey?.5:2),$=r(x(b(D,k),C,U),t.apply(this,M),s);_p(S),a>0?ae(this).transition().duration(a).call(v,$,C,S):ae(this).call(g.transform,$,C,S)}}function A(S,...M){if(e.apply(this,arguments)){var D=S.touches,C=D.length,U=w(this,M,S.changedTouches.length===C).event(S),k,$,z,V;for(yI(S),$=0;$<C;++$)z=D[$],V=En(z,this),V=[V,this.__zoom.invert(V),z.identifier],U.touch0?!U.touch1&&U.touch0[2]!==V[2]&&(U.touch1=V,U.taps=0):(U.touch0=V,k=!0,U.taps=1+!!u);u&&(u=clearTimeout(u)),k&&(U.taps<2&&(f=V[0],u=setTimeout(function(){u=null},h)),ua(this),U.start())}}function O(S,...M){if(this.__zooming){var D=w(this,M).event(S),C=S.changedTouches,U=C.length,k,$,z,V;for(_p(S),k=0;k<U;++k)$=C[k],z=En($,this),D.touch0&&D.touch0[2]===$.identifier?D.touch0[0]=z:D.touch1&&D.touch1[2]===$.identifier&&(D.touch1[0]=z);if($=D.that.__zoom,D.touch1){var Q=D.touch0[0],st=D.touch0[1],ct=D.touch1[0],ut=D.touch1[1],X=(X=ct[0]-Q[0])*X+(X=ct[1]-Q[1])*X,lt=(lt=ut[0]-st[0])*lt+(lt=ut[1]-st[1])*lt;$=b($,Math.sqrt(X/lt)),z=[(Q[0]+ct[0])/2,(Q[1]+ct[1])/2],V=[(st[0]+ut[0])/2,(st[1]+ut[1])/2]}else if(D.touch0)z=D.touch0[0],V=D.touch0[1];else return;D.zoom("touch",r(x($,z,V),D.extent,s))}}function L(S,...M){if(this.__zooming){var D=w(this,M).event(S),C=S.changedTouches,U=C.length,k,$;for(yI(S),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),k=0;k<U;++k)$=C[k],D.touch0&&D.touch0[2]===$.identifier?delete D.touch0:D.touch1&&D.touch1[2]===$.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&($=En($,this),Math.hypot(f[0]-$[0],f[1]-$[1])<y)){var z=ae(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(S){return arguments.length?(n=typeof S=="function"?S:Eb(+S),g):n},g.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Eb(!!S),g):e},g.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Eb(!!S),g):i},g.extent=function(S){return arguments.length?(t=typeof S=="function"?S:Eb([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),g):t},g.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],g):[o[0],o[1]]},g.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(S){return arguments.length?(r=S,g):r},g.duration=function(S){return arguments.length?(a=+S,g):a},g.interpolate=function(S){return arguments.length?(c=S,g):c},g.on=function(){var S=l.on.apply(l,arguments);return S===l?g:S},g.clickDistance=function(S){return arguments.length?(m=(S=+S)*S,g):Math.sqrt(m)},g.tapDistance=function(S){return arguments.length?(y=+S,g):y},g}function wr(e){return e!=null&&!Number.isNaN(e)}function Qr(e,t){return+wr(t)-+wr(e)||ie(e,t)}function sd(e,t){return+wr(t)-+wr(e)||Gn(e,t)}function Bb(e){return e!=null&&`${e}`!=""}function wp(e){return isFinite(e)?e:NaN}function ii(e){return e>0&&isFinite(e)?e:NaN}function hu(e){return e<0&&isFinite(e)?e:NaN}function vp(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;let r=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${gat(e.getUTCFullYear(),4)}-${Jc(e.getUTCMonth()+1,2)}-${Jc(e.getUTCDate(),2)}${r||n||i||o?`T${Jc(r,2)}:${Jc(n,2)}${i||o?`:${Jc(i,2)}${o?`.${Jc(o,3)}`:""}`:""}Z`:""}`}function gat(e){return e<0?`-${Jc(-e,6)}`:e>9999?`+${Jc(e,6)}`:Jc(e,4)}function Jc(e,t){return`${e}`.padStart(t,"0")}var bat=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Ob(e,t){return bat.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function tl(e){if(e==null)return;let t=e[0],r=e[e.length-1];return Gn(t,r)}var Ip=1e3,mu=Ip*60,yu=mu*60,Ia=yu*24,Sa=Ia*7,ad=Ia*30,pu=Ia*365,AN=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ip],["5 seconds",5*Ip],["15 seconds",15*Ip],["30 seconds",30*Ip],["minute",mu],["5 minutes",5*mu],["15 minutes",15*mu],["30 minutes",30*mu],["hour",yu],["3 hours",3*yu],["6 hours",6*yu],["12 hours",12*yu],["day",Ia],["2 days",2*Ia],["week",Sa],["2 weeks",2*Sa],["month",ad],["3 months",3*ad],["6 months",6*ad],["year",pu],["2 years",2*pu],["5 years",5*pu],["10 years",10*pu],["20 years",20*pu],["50 years",50*pu],["100 years",100*pu]],MN=new Map([["second",Ip],["minute",mu],["hour",yu],["day",Ia],["monday",Sa],["tuesday",Sa],["wednesday",Sa],["thursday",Sa],["friday",Sa],["saturday",Sa],["sunday",Sa],["week",Sa],["month",ad],["year",pu]]),lV=new Map([["second",Zr],["minute",Yc],["hour",Gc],["day",Do],["monday",fu],["tuesday",RS],["wednesday",LS],["thursday",_a],["friday",kS],["saturday",CS],["sunday",Yi],["week",Yi],["month",Hc],["year",Fn]]),EN=new Map([["second",Zr],["minute",Wc],["hour",Xc],["day",rd],["monday",du],["tuesday",US],["wednesday",PS],["thursday",wa],["friday",$S],["saturday",zS],["sunday",Wi],["week",Wi],["month",Zc],["year",Rn]]),Tp=Symbol("intervalDuration"),bI=Symbol("intervalType");for(let[e,t]of lV)t[Tp]=MN.get(e),t[bI]="time";for(let[e,t]of EN)t[Tp]=MN.get(e),t[bI]="utc";var Nb=[["year",Rn,"utc"],["month",Zc,"utc"],["day",rd,"utc",6*ad],["hour",Xc,"utc",3*Ia],["minute",Wc,"utc",6*yu],["second",Zr,"utc",30*mu]],gI=[["year",Fn,"time"],["month",Hc,"time"],["day",Do,"time",6*ad],["hour",Gc,"time",3*Ia],["minute",Yc,"time",6*yu],["second",Zr,"time",30*mu]],xat=[Nb[0],gI[0],Nb[1],gI[1],Nb[2],gI[2],...Nb.slice(3)];function xI(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let r=1,n=/^(?:(\d+)\s+)/.exec(t);switch(n&&(t=t.slice(n[0].length),r=+n[1]),t){case"quarter":t="month",r*=3;break;case"half":t="month",r*=6;break}let i=EN.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(r>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,r]}function DN(e){return uV(xI(e),"time")}function Fb(e){return uV(xI(e),"utc")}function uV([e,t],r){let n=(r==="time"?lV:EN).get(e);return t>1&&(n=n.every(t),n[Tp]=MN.get(e)*t,n[bI]=r),n}function BN(e,t){if(!(t>1))return;let r=e[Tp];if(!AN.some(([,i])=>i===r)||r%Ia===0&&Ia<r&&r<ad)return;let[n]=AN[Bc(([,i])=>Math.log(i)).center(AN,Math.log(r*t))];return(e[bI]==="time"?DN:Fb)(n)}function cV(e,t,r){let n=t==="time"?fp:va;if(r==null)return n(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");let i=_at(r);switch(e){case"millisecond":return Sp(n(".%L"),n(":%M:%S"),i);case"second":return Sp(n(":%S"),n("%-I:%M"),i);case"minute":return Sp(n("%-I:%M"),n("%p"),i);case"hour":return Sp(n("%-I %p"),n("%b %-d"),i);case"day":return Sp(n("%-d"),n("%b"),i);case"month":return Sp(n("%b"),n("%Y"),i);case"year":return n("%Y")}throw new Error("unable to format time ticks")}function _at(e){return e==="left"||e==="right"?(t,r)=>`
${t}
${r}`:e==="top"?(t,r)=>`${r}
${t}`:(t,r)=>`${t}
${r}`}function wat(e){return e==="time"?gI:e==="utc"?Nb:xat}function fV(e,t,r){let n=he(hv(t,(i,o)=>Math.abs(o-i)));if(n<1e3)return cV("millisecond","utc",r);for(let[i,o,s,a]of wat(e)){if(n>a||i==="hour"&&!n)break;if(t.every(c=>o.floor(c)>=c))return cV(i,s,r)}}function Sp(e,t,r){return(n,i,o)=>{let s=e(n,i),a=t(n,i),c=i-tl(o);return i!==c&&o[c]!==void 0&&a===t(o[c],c)?s:r(s,a)}}var cd=Object.getPrototypeOf(Uint8Array),vat=Object.prototype.toString,ON=Symbol("reindex");function At(e,t,r){let n=typeof t;return n==="string"?dV(e,NN(t),r):n==="function"?dV(e,t,r):n==="number"||t instanceof Date||n==="boolean"?fe(e,Jr(t),r):typeof t?.transform=="function"?hV(t.transform(e),r):Sat(hV(t,r),e?.[ON])}function Sat(e,t){return t?Lb(e,t):e}function dV(e,t,r){return fe(e,r?.prototype instanceof cd?Iat(t):t,r)}function hV(e,t){return t===void 0?Sr(e):e instanceof t?e:t.prototype instanceof cd&&!(e instanceof cd)?t.from(e,FN):t.from(e)}function Iat(e){return(t,r)=>FN(e(t,r))}var gu=[null],NN=e=>t=>t[e],nr={transform:oi},K={transform:e=>e};var Rb=()=>1,pV=()=>!0,vr=e=>e==null?e:`${e}`,Wt=e=>e==null?e:+e;var ld=e=>e?e[0]:void 0,bu=e=>e?e[1]:void 0,mV=e=>e?e[2]:void 0,Jr=e=>()=>e;function Ap(e){let t=+`${e}`.slice(1)/100;return(r,n)=>Zn(r,t,n)}function Cr(e){return e instanceof cd?e:fe(e,FN,Float64Array)}function FN(e){return e==null?NaN:Number(e)}function yV(e){return fe(e,RN)}function RN(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Ob(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function cr(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:wu(e)?[void 0,e]:[e,void 0]}function Ae(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function LN(e,t,r){if(e!=null)return Yr(e,t,r)}function Yr(e,t,r){let n=`${e}`.toLowerCase();if(!r.includes(n))throw new Error(`invalid ${t}: ${e}`);return n}function Sr(e){return e==null||e instanceof Array||e instanceof cd?e:Array.from(e)}function fe(e,t,r=Array){return e==null?e:e instanceof r?e.map(t):r.from(e,t)}function xu(e,t=Array){return e instanceof t?e.slice():t.from(e)}function kN({x:e,x1:t,x2:r}){return e!==void 0||t!==void 0||r!==void 0}function CN({y:e,y1:t,y2:r}){return e!==void 0||t!==void 0||r!==void 0}function Mp(e){return kN(e)||CN(e)||e.interval!==void 0}function tn(e){return e?.toString===vat}function Ta(e){return tn(e)&&(e.type!==void 0||e.domain!==void 0)}function Xi(e){return tn(e)&&typeof e.transform!="function"}function Aa(e){return Xi(e)&&e.value===void 0&&e.channel===void 0}function UN(e,t,r,n=K){return t===void 0&&r===void 0?(t=0,r=e===void 0?n:e):t===void 0?t=e===void 0?0:e:r===void 0&&(r=e===void 0?0:e),[t,r]}function br(e,t){return e===void 0&&t===void 0?[ld,bu]:[e,t]}function Ln({z:e,fill:t,stroke:r}={}){return e===void 0&&([e]=cr(t)),e===void 0&&([e]=cr(r)),e}function oi(e){let t=e.length,r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return r}function Lb(e,t){return fe(t,r=>e[r],e.constructor)}function Ep(e){return e.length===1?(t,r)=>e(Lb(r,t)):e}function el(e,t,r){return e.subarray?e.subarray(t,r):e.slice(t,r)}function rl(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _I(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function en(e){let t;return[{transform:()=>t,label:Sn(e)},r=>t=r]}function vn(e){return e==null?[e]:en(e)}function Sn(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Dp(e,t){return{transform(r){let n=e.transform(r),i=t.transform(r);return lr(n)||lr(i)?fe(n,(o,s)=>new Date((+n[s]+ +i[s])/2)):fe(n,(o,s)=>(+n[s]+ +i[s])/2,Float64Array)},label:e.label}}function ud(e,t){let r=PN(t?.interval,t?.type);return r?fe(e,r):e}function PN(e,t){let r=Bp(e,t);return r&&(n=>wr(n)?r.floor(n):n)}function Bp(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);let r=Math.abs(e);return e<0?{floor:n=>Math.floor(n*r)/r,offset:n=>(n*r+1)/r,range:(n,i)=>_r(Math.ceil(n*r),i*r).map(o=>o/r)}:{floor:n=>Math.floor(n/r)*r,offset:n=>n+r,range:(n,i)=>_r(Math.ceil(n/r),i/r).map(o=>o*r)}}if(typeof e=="string")return(t==="time"?DN:Fb)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Ma(e,t){if(e=Bp(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function gV(e,t){if(e=Ma(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function bV(e){return _u(e)&&typeof e?.floor=="function"&&e.floor()instanceof Date}function _u(e){return typeof e?.range=="function"}function Fo(e){return e===void 0||Xi(e)?e:{value:e}}function xV(e){return e==null?null:{transform:t=>At(t,e,Float64Array),label:Sn(e)}}function _V(e){if(!si(e))return!1;for(let t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function si(e){return e&&typeof e[Symbol.iterator]=="function"}function wI(e){for(let t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function ir(e){for(let t of e){if(t==null)continue;let r=typeof t;return r==="string"||r==="boolean"}}function lr(e){for(let t of e)if(t!=null)return t instanceof Date}function wV(e){for(let t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Ob(t)}function vV(e){for(let t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function nl(e){for(let t of e)if(t!=null)return typeof t=="number"}function vI(e,t){let r;for(let n of e)if(n!=null){if(!t(n))return!1;r=!0}return r}var Tat=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function wu(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Tat.has(e))}function SV(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Se(e){return e==null||il(e)}function il(e){return/^\s*none\s*$/i.test(e)}function IV(e){return/^\s*round\s*$/i.test(e)}function SI(e,t){return LN(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Ea(e="middle"){return SI(e,"frameAnchor")}function TV(e={},...t){let r=e;for(let n of t)for(let i in n)if(r[i]===void 0){let o=n[i];r===e?r={...r,[i]:o}:r[i]=o}return r}function Aat(e){console.warn("named iterables are deprecated; please use an object instead");let t=new Set;return Object.fromEntries(Array.from(e,r=>{let{name:n}=r;if(n==null)throw new Error("missing name");let i=`${n}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[n,r]}))}function kb(e){return si(e)?Aat(e):e}function II(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Yr(e,"clip",["frame","sphere"])),e}var Ro=Symbol("position"),Hi=Symbol("color"),fd=Symbol("radius"),dd=Symbol("length"),hd=Symbol("opacity"),Op=Symbol("symbol"),AV=Symbol("projection"),Fe=new Map([["x",Ro],["y",Ro],["fx",Ro],["fy",Ro],["r",fd],["color",Hi],["opacity",hd],["symbol",Op],["length",dd],["projection",AV]]);function MV(e){return e===Ro||e===AV}function EV(e){return e===Ro||e===fd||e===dd||e===hd}var $N=Math.sqrt(3),zN=2/$N,Mat={draw(e,t){let r=Math.sqrt(t/Math.PI),n=r*zN,i=n/2;e.moveTo(0,n),e.lineTo(r,i),e.lineTo(r,-i),e.lineTo(0,-n),e.lineTo(-r,-i),e.lineTo(-r,i),e.closePath()}},VN=new Map([["asterisk",mb],["circle",Qc],["cross",yb],["diamond",gb],["diamond2",bb],["hexagon",Mat],["plus",xb],["square",_b],["square2",wb],["star",vb],["times",gp],["triangle",Sb],["triangle2",Ib],["wye",Tb]]);function jN(e){return e&&typeof e.draw=="function"}function DV(e){return jN(e)?!0:typeof e!="string"?!1:VN.has(e.toLowerCase())}function Np(e){if(e==null||jN(e))return e;let t=VN.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function BV(e){if(e==null||jN(e))return[void 0,e];if(typeof e=="string"){let t=VN.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function rn({filter:e,sort:t,reverse:r,transform:n,initializer:i,...o}={},s){if(n===void 0&&(e!=null&&(n=WN(e)),t!=null&&!Aa(t)&&(n=qN(n,XN(t))),r&&(n=qN(n,GN))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||Aa(t))&&{sort:t},transform:qN(n,s)}}function Qe({filter:e,sort:t,reverse:r,initializer:n,...i}={},o){return n===void 0&&(e!=null&&(n=WN(e)),t!=null&&!Aa(t)&&(n=YN(n,XN(t))),r&&(n=YN(n,GN))),{...i,...(t===null||Aa(t))&&{sort:t},initializer:YN(n,o)}}function qN(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(r,n,i){return{data:r,facets:n}=e.call(this,r,n,i),t.call(this,Sr(r),n,i)}}function YN(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(r,n,i,...o){let s,a,c,l,u,f;return{data:a=r,facets:c=n,channels:s}=e.call(this,r,n,i,...o),{data:u=a,facets:f=c,channels:l}=t.call(this,a,c,{...i,...s},...o),{data:u,facets:f,channels:{...s,...l}}}}function TI(e,t){return(e.initializer!=null?Qe:rn)(e,t)}function OV(e,t){return TI(t,WN(e))}function WN(e){return(t,r)=>{let n=At(t,e);return{data:t,facets:r.map(i=>i.filter(o=>n[o]))}}}function NV({sort:e,...t}={}){return{...TI(t,GN),sort:Aa(e)?e:null}}function GN(e,t){return{data:e,facets:t.map(r=>r.slice().reverse())}}function FV({seed:e,sort:t,...r}={}){return{...TI(r,RV(e==null?Math.random:Zf(e))),sort:Aa(t)?t:null}}function AI(e,{sort:t,...r}={}){return{...(Xi(e)&&e.channel!==void 0?Qe:TI)(r,XN(e)),sort:Aa(t)?t:null}}function XN(e){return(typeof e=="function"&&e.length!==1?Eat:RV)(e)}function Eat(e){return(t,r)=>{let n=(i,o)=>e(t[i],t[o]);return{data:t,facets:r.map(i=>i.slice().sort(n))}}}function RV(e){let t,r;({channel:t,value:e,order:r}={...Fo(e)});let n=t?.startsWith("-");if(n&&(t=t.slice(1)),r===void 0&&(r=n?sd:Qr),typeof r!="function")switch(`${r}`.toLowerCase()){case"ascending":r=Qr;break;case"descending":r=sd;break;default:throw new Error(`invalid order: ${r}`)}return(i,o,s)=>{let a;if(t===void 0)a=At(i,e);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(a=s[t],!a)return{};a=a.value}let c=(l,u)=>r(a[l],a[u]);return{data:i,facets:o.map(l=>l.slice().sort(c))}}}function Ub(e,t){return MI(null,null,e,t)}function Su(e={y:"count"},t={}){let{x:r=K}=t;if(r==null)throw new Error("missing channel: x");return MI(r,null,e,t)}function Iu(e={x:"count"},t={}){let{y:r=K}=t;if(r==null)throw new Error("missing channel: y");return MI(null,r,e,t)}function Pb(e={fill:"count"},t={}){let{x:r,y:n}=t;if([r,n]=br(r,n),r==null)throw new Error("missing channel: x");if(n==null)throw new Error("missing channel: y");return MI(r,n,e,t)}function MI(e,t,{data:r=BI,filter:n,sort:i,reverse:o,...s}={},a={}){s=ZN(s,a),r=PV(r,K),i=i==null?void 0:CV("sort",i,a),n=n==null?void 0:UV("filter",n,a);let[c,l]=vn(e),[u,f]=vn(t),{z:d,fill:h,stroke:p,x1:m,x2:y,y1:g,y2:b,...x}=a,[_,v]=vn(d),[w]=cr(h),[T]=cr(p),[E,I]=vn(w),[B,A]=vn(T);return{..."z"in a&&{z:_||d},..."fill"in a&&{fill:E||h},..."stroke"in a&&{stroke:B||p},...rn(x,(O,L,S)=>{let M=ud(At(O,e),S?.x),D=ud(At(O,t),S?.y),C=At(O,d),U=At(O,w),k=At(O,T),$=$b(s,{z:C,fill:U,stroke:k}),z=[],V=[],Q=M&&l([]),st=D&&f([]),ct=C&&v([]),ut=U&&I([]),X=k&&A([]),lt=0;for(let Y of s)Y.initialize(O);i&&i.initialize(O),n&&n.initialize(O);for(let Y of L){let tt=[];for(let at of s)at.scope("facet",Y);i&&i.scope("facet",Y),n&&n.scope("facet",Y);for(let[at,j]of vu(Y,$))for(let[Qt,gt]of vu(j,D))for(let[de,pe]of vu(gt,M)){let nt={data:O};if(M&&(nt.x=de),D&&(nt.y=Qt),$&&(nt.z=at),!(n&&!n.reduce(pe,nt))){tt.push(lt++),V.push(r.reduceIndex(pe,O,nt)),M&&Q.push(de),D&&st.push(Qt),C&&ct.push($===C?at:C[pe[0]]),U&&ut.push($===U?at:U[pe[0]]),k&&X.push($===k?at:k[pe[0]]);for(let Me of s)Me.reduce(pe,nt);i&&i.reduce(pe,nt)}}z.push(tt)}return KN(z,i,o),{data:V,facets:z}}),...!Da(s,"x")&&(c?{x:c}:{x1:m,x2:y}),...!Da(s,"y")&&(u?{y:u}:{y1:g,y2:b}),...Object.fromEntries(s.map(({name:O,output:L})=>[O,L]))}}function Da(e,...t){for(let{name:r}of e)if(t.includes(r))return!0;return!1}function HN(e,t,r=EI){let n=Object.entries(e);return t.title!=null&&e.title===void 0&&n.push(["title",Rat]),t.href!=null&&e.href===void 0&&n.push(["href",OI]),n.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?Dat(i):r(i,o,t))}function EI(e,t,r,n=DI){let i;tn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);let o=n(e,t,r),[s,a]=en(o.label),c;return{name:e,output:i===void 0?s:{value:s,scale:i},initialize(l){o.initialize(l),c=a([])},scope(l,u){o.scope(l,u)},reduce(l,u){c.push(o.reduce(l,u))}}}function Dat(e){return{name:e,initialize(){},scope(){},reduce(){}}}function DI(e,t,r,n=Fp){let i=_I(e,r),o=n(t,i),s,a;return{label:Sn(o===Cb?null:i,o.label),initialize(c){s=i===void 0?c:At(c,i),o.scope==="data"&&(a=o.reduceIndex(oi(c),s))},scope(c,l){o.scope===c&&(a=o.reduceIndex(l,s))},reduce(c,l){return o.scope==null?o.reduceIndex(c,s,l):o.reduceIndex(c,s,a,l)}}}function vu(e,t){return t?Xr(e,r=>t[r]):[[,e]]}function Fp(e,t,r=Bat){if(e==null)return r(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&tn(e))return Nat(e);if(typeof e=="function")return Fat(e);if(/^p\d{2}$/i.test(e))return ol(Ap(e));switch(`${e}`.toLowerCase()){case"first":return OI;case"last":return Lat;case"identity":return BI;case"count":return Cb;case"distinct":return kat;case"sum":return t==null?Cb:Cat;case"proportion":return kV(t,"data");case"proportion-facet":return kV(t,"facet");case"deviation":return ol(vo);case"min":return ol(Oe);case"min-index":return ol(uv);case"max":return ol(he);case"max-index":return ol(lv);case"mean":return LV(Rc);case"median":return LV(ps);case"variance":return ol(Kl);case"mode":return ol(Lh)}return r(e)}function Bat(e){throw new Error(`invalid reduce: ${e}`)}function ZN(e,t){return HN(e,t,CV)}function CV(e,t,r){return EI(e,t,r,UV)}function UV(e,t,r){return DI(e,t,r,PV)}function PV(e,t){return Fp(e,t,Oat)}function Oat(e){switch(`${e}`.toLowerCase()){case"x":return Uat;case"y":return Pat;case"z":return QN}throw new Error(`invalid group reduce: ${e}`)}function $b(e,t){for(let r in t){let n=t[r];if(n!==void 0&&!e.some(i=>i.name===r))return n}}function KN(e,t,r){if(t){let n=t.output.transform(),i=(o,s)=>Qr(n[o],n[s]);e.forEach(o=>o.sort(i))}r&&e.forEach(n=>n.reverse())}function Nat(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Fat(e){return{reduceIndex(t,r,n){return e(Lb(r,t),n)}}}function ol(e){return{reduceIndex(t,r){return e(t,n=>r[n])}}}function LV(e){return{reduceIndex(t,r){let n=e(t,i=>r[i]);return lr(r)?new Date(n):n}}}var BI={reduceIndex(e,t){return Lb(t,e)}},OI={reduceIndex(e,t){return t[e[0]]}},Rat={reduceIndex(e,t){let n=Nc(hs(e,o=>o.length,o=>t[o]),bu),i=n.slice(-5).reverse();if(i.length<n.length){let o=n.slice(0,-4);i[4]=[`\u2026 ${o.length.toLocaleString("en-US")} more`,bn(o,bu)]}return i.map(([o,s])=>`${o} (${s.toLocaleString("en-US")})`).join(`
`)}},Lat={reduceIndex(e,t){return t[e[e.length-1]]}},Cb={label:"Frequency",reduceIndex(e){return e.length}},kat={label:"Distinct",reduceIndex(e,t){let r=new Hn;for(let n of e)r.add(t[n]);return r.size}},Cat=ol(bn);function kV(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(r,n,i=1)=>r.length/i}:{scope:t,reduceIndex:(r,n,i=1)=>bn(r,o=>n[o])/i}}var Uat={reduceIndex(e,t,{x:r}){return r}},Pat={reduceIndex(e,t,{y:r}){return r}},QN={reduceIndex(e,t,{z:r}){return r}};function $V(e){if(typeof e!="function")throw new Error(`invalid test function: ${e}`);return{reduceIndex(t,r,{data:n}){return r[t.find(i=>e(n[i],i,n))]}}}function Rp(e,{scale:t,type:r,value:n,filter:i,hint:o,label:s=Sn(n)},a){return o===void 0&&typeof n?.transform=="function"&&(o=n.hint),t3(a,{scale:t,type:r,value:At(e,n),label:s,filter:i,hint:o})}function NI(e,t){return Object.fromEntries(Object.entries(e).map(([r,n])=>[r,Rp(t,n,r)]))}function Lp(e,t){let r=Object.fromEntries(Object.entries(e).map(([n,{scale:i,value:o}])=>{let s=i==null?null:t[i];return[n,s==null?o:fe(o,s)]}));return r.channels=e,r}function t3(e,t){let{scale:r,value:n}=t;if(r===!0||r==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=r!==!0&&vI(n,wu)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=r!==!0&&vI(n,SV)?null:"opacity";break;case"symbol":r!==!0&&vI(n,DV)?(t.scale=null,t.value=fe(n,Np)):t.scale="symbol";break;default:t.scale=Fe.has(e)?e:null;break}else if(r===!1)t.scale=null;else if(r!=null&&!Fe.has(r))throw new Error(`unknown scale: ${r}`);return t}function VV(e,t,r,n,i){let{order:o,reverse:s,reduce:a=!0,limit:c}=i;for(let l in i){if(!Fe.has(l))continue;let{value:u,order:f=o,reverse:d=s,reduce:h=a,limit:p=c}=Fo(i[l]),m=u?.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?qV:jV:Vat(f),h==null||h===!1)continue;let y=l==="fx"||l==="fy"?zat(t,n[l]):$at(r,l);if(!y)throw new Error(`missing channel for scale: ${l}`);let g=y.value,[b=0,x=1/0]=si(p)?p:p<0?[p]:[0,p];if(u==null)y.domain=()=>{let _=Array.from(new Hn(g));return d&&(_=_.reverse()),(b!==0||x!==1/0)&&(_=_.slice(b,x)),_};else{let _=u==="data"?e:u==="height"?zV(r,"y1","y2"):u==="width"?zV(r,"x1","x2"):JN(r,u,u==="y"?"y2":u==="x"?"x2":void 0),v=Fp(h===!0?"max":h,_);y.domain=()=>{let w=MD(oi(g),T=>v.reduceIndex(T,_),T=>g[T]);return f&&w.sort(f),d&&w.reverse(),(b!==0||x!==1/0)&&(w=w.slice(b,x)),w.map(ld)}}}}function $at(e,t){for(let r in e){let n=e[r];if(n.scale===t)return n}}function zat(e,t){let r=e.original;if(r===e)return t;let n=t.value,i=t.value=[];for(let o=0;o<r.length;++o){let s=n[r[o][0]];for(let a of e[o])i[a]=s}return t}function zV(e,t,r){let n=JN(e,t),i=JN(e,r);return fe(i,(o,s)=>Math.abs(o-n[s]),Float64Array)}function JN(e,t,r){let n=e[t];if(!n&&r!==void 0&&(n=e[r]),n)return n.value;throw new Error(`missing channel: ${t}`)}function Vat(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return jV;case"descending":return qV}throw new Error(`invalid order: ${e}`)}function jV([e,t],[r,n]){return Qr(t,n)||Qr(e,r)}function qV([e,t],[r,n]){return sd(t,n)||Qr(e,r)}function zb(e,t){let r=e[t];if(r){for(;r.source;)r=r.source;return r.source===null?null:r}}function Tu(e={}){let{document:t=typeof window<"u"?window.document:void 0,clip:r}=e;return{document:t,clip:II(r)}}function pt(e,{document:t}){return ae(kc(e).call(t.documentElement))}var e3=0,r3;function YV(){let e=e3;return e3=0,r3=void 0,e}function kn(e){e!==r3&&(r3=e,console.warn(e),++e3)}var GV=Math.PI,sl=2*GV,WV=.618;function XV({projection:e,inset:t=0,insetTop:r=t,insetRight:n=t,insetBottom:i=t,insetLeft:o=t}={},s){if(e==null)return;if(typeof e.stream=="function")return e;let a,c,l="frame";if(tn(e)){let v;if({type:e,domain:c,inset:v,insetTop:r=v!==void 0?v:r,insetRight:n=v!==void 0?v:n,insetBottom:i=v!==void 0?v:i,insetLeft:o=v!==void 0?v:o,clip:l=l,...a}=e,e==null)return}typeof e!="function"&&({type:e}=HV(e));let{width:u,height:f,marginLeft:d,marginRight:h,marginTop:p,marginBottom:m}=s,y=u-d-h-o-n,g=f-p-m-r-i;if(e=e?.({width:y,height:g,clip:l,...a}),e==null)return;l=jat(l,d,p,u-h,f-m);let b=d+o,x=p+r,_;if(c!=null){let[[v,w],[T,E]]=_n(e).bounds(c),I=Math.min(y/(T-v),g/(E-w));I>0?(b-=(I*(v+T)-y)/2,x-=(I*(w+E)-g)/2,_=Xf({point(B,A){this.stream.point(B*I+b,A*I+x)}})):kn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??=b===0&&x===0?ZV():Xf({point(v,w){this.stream.point(v+b,w+x)}}),{stream:v=>e.stream(_.stream(l(v)))}}function HV(e){switch(`${e}`.toLowerCase()){case"albers-usa":return bs(JB,.7463,.4673);case"albers":return FI(V0,.7463,.4673);case"azimuthal-equal-area":return bs(eO,4,4);case"azimuthal-equidistant":return bs(nO,sl,sl);case"conic-conformal":return FI(sO,sl,sl);case"conic-equal-area":return FI(cu,6.1702,2.9781);case"conic-equidistant":return FI(cO,7.312,3.6282);case"equal-earth":return bs(uO,5.4133,2.6347);case"equirectangular":return bs(aO,sl,GV);case"gnomonic":return bs(dO,3.4641,3.4641);case"identity":return{type:ZV};case"reflect-y":return{type:qat};case"mercator":return bs(iO,sl,sl);case"orthographic":return bs(pO,2,2);case"stereographic":return bs(yO,2,2);case"transverse-mercator":return bs(bO,sl,sl);default:throw new Error(`unknown projection type: ${e}`)}}function jat(e,t,r,n,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return tp(t,r,n,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function bs(e,t,r){return{type:({width:n,height:i,rotate:o,precision:s=.15,clip:a})=>{let c=e();return s!=null&&c.precision?.(s),o!=null&&c.rotate?.(o),typeof a=="number"&&c.clipAngle?.(a),c.scale(Math.min(n/t,i/r)),c.translate([n/2,i/2]),c},aspectRatio:r/t}}function FI(e,t,r){let{type:n,aspectRatio:i}=bs(e,t,r);return{type:o=>{let{parallels:s,domain:a,width:c,height:l}=o,u=n(o);return s!=null&&(u.parallels(s),a===void 0&&u.fitSize([c,l],{type:"Sphere"})),u},aspectRatio:i}}var ZV=Jr({stream:e=>e}),qat=Jr(Xf({point(e,t){this.stream.point(e,-t)}}));function n3(e,t,r,n){let i=r[e],o=r[t],s=i.length,a=r[e]=new Float64Array(s).fill(NaN),c=r[t]=new Float64Array(s).fill(NaN),l,u=n.stream({point(f,d){a[l]=f,c[l]=d}});for(l=0;l<s;++l)u.point(i[l],o[l])}function KV({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(tn(e)&&(e=e.type),e!=null)}function QV(e){if(typeof e?.stream=="function")return WV;if(tn(e)&&(e=e.type),e!=null){if(typeof e!="function"){let{aspectRatio:t}=HV(e);if(t)return t}return WV}}function Au(e,t,{projection:r}){let{x:n,y:i}=e,o={};return n&&(o.x=n),i&&(o.y=i),o=Lp(o,t),r&&n?.scale==="x"&&i?.scale==="y"&&n3("x","y",o,r),n&&(o.x=Cr(o.x)),i&&(o.y=Cr(o.y)),o}function JV(e){let t=[],r=[],n={scale:"x",value:t},i={scale:"y",value:r},o={point(s,a){t.push(s),r.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(let s of e.value)qi(s,o);return[n,i]}var ij=new Map([["accent",VO],["category10",zO],["dark2",jO],["observable10",qO],["paired",YO],["pastel1",WO],["pastel2",GO],["set1",XO],["set2",HO],["set3",ZO],["tableau10",KO]]);function oj(e){return e!=null&&ij.has(`${e}`.toLowerCase())}var tj=new Map([...ij,["brbg",al(HS,ZS)],["prgn",al(KS,QS)],["piyg",al(JS,t2)],["puor",al(e2,r2)],["rdbu",al(fb,dp)],["rdgy",al(n2,i2)],["rdylbu",al(db,hp)],["rdylgn",al(o2,s2)],["spectral",al(a2,c2)],["burd",ej(fb,dp)],["buylrd",ej(db,hp)],["blues",nn(F2,R2)],["greens",nn(L2,k2)],["greys",nn(C2,U2)],["oranges",nn(j2,q2)],["purples",nn(P2,$2)],["reds",nn(z2,V2)],["turbo",cl(J2)],["viridis",cl(eI)],["magma",cl(rI)],["inferno",cl(nI)],["plasma",cl(iI)],["cividis",cl(Y2)],["cubehelix",cl(W2)],["warm",cl(X2)],["cool",cl(H2)],["bugn",nn(l2,u2)],["bupu",nn(f2,d2)],["gnbu",nn(h2,p2)],["orrd",nn(m2,y2)],["pubu",nn(x2,_2)],["pubugn",nn(g2,b2)],["purd",nn(w2,v2)],["rdpu",nn(S2,I2)],["ylgn",nn(M2,E2)],["ylgnbu",nn(T2,A2)],["ylorbr",nn(D2,B2)],["ylorrd",nn(O2,N2)],["rainbow",rj(Z2)],["sinebow",rj(Q2)]]);function nn(e,t){return({length:r})=>r===1?[e[3][1]]:r===2?[e[3][1],e[3][2]]:(r=Math.max(3,Math.floor(r)),r>9?Dn(t,r):e[r])}function al(e,t){return({length:r})=>r===2?[e[3][0],e[3][2]]:(r=Math.max(3,Math.floor(r)),r>11?Dn(t,r):e[r])}function ej(e,t){return({length:r})=>r===2?[e[3][2],e[3][0]]:(r=Math.max(3,Math.floor(r)),r>11?Dn(n=>t(1-n),r):e[r].slice().reverse())}function cl(e){return({length:t})=>Dn(e,Math.max(2,Math.floor(t)))}function rj(e){return({length:t})=>Dn(e,Math.floor(t)+1).slice(0,-1)}function i3(e){let t=`${e}`.toLowerCase();if(!tj.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return tj.get(t)}function Vb(e,t){let r=i3(e),n=typeof r=="function"?r({length:t}):r;return n.length!==t?n.slice(0,t):n}function sj(e,t="greys"){let r=new Set,[n,i]=Vb(t,2);for(let o of e)if(o!=null)if(o===!0)r.add(i);else if(o===!1)r.add(n);else return;return[...r]}var nj=new Map([["brbg",ZS],["prgn",QS],["piyg",t2],["puor",r2],["rdbu",dp],["rdgy",i2],["rdylbu",hp],["rdylgn",s2],["spectral",c2],["burd",e=>dp(1-e)],["buylrd",e=>hp(1-e)],["blues",R2],["greens",k2],["greys",U2],["purples",$2],["reds",V2],["oranges",q2],["turbo",J2],["viridis",eI],["magma",rI],["inferno",nI],["plasma",iI],["cividis",Y2],["cubehelix",W2],["warm",X2],["cool",H2],["bugn",u2],["bupu",d2],["gnbu",p2],["orrd",y2],["pubugn",b2],["pubu",_2],["purd",v2],["rdpu",I2],["ylgnbu",A2],["ylgn",E2],["ylorbr",B2],["ylorrd",N2],["rainbow",Z2],["sinebow",Q2]]);function kp(e){let t=`${e}`.toLowerCase();if(!nj.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return nj.get(t)}var Yat=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function aj(e){return e!=null&&Yat.has(`${e}`.toLowerCase())}var s3=e=>t=>e(1-t),o3=[0,1],cj=new Map([["number",Ze],["rgb",Io],["hsl",JD],["hcl",tB],["lab",Nv]]);function a3(e){let t=`${e}`.toLowerCase();if(!cj.has(t))throw new Error(`unknown interpolator: ${t}`);return cj.get(t)}function Up(e,t,r,{type:n,nice:i,clamp:o,zero:s,domain:a=yj(e,r),unknown:c,round:l,scheme:u,interval:f,range:d=Fe.get(e)===fd?Hat(r,a):Fe.get(e)===dd?Zat(r,a):Fe.get(e)===hd?o3:void 0,interpolate:h=Fe.get(e)===Hi?u==null&&d!==void 0?Io:kp(u!==void 0?u:n==="cyclical"?"rainbow":"turbo"):l?Pf:Ze,reverse:p}){if(f=Ma(f,n),(n==="cyclical"||n==="sequential")&&(n="linear"),typeof h!="function"&&(h=a3(h)),p=!!p,d!==void 0){let m=(a=Sr(a)).length,y=(d=Sr(d)).length;if(m!==y){if(h.length===1)throw new Error("invalid piecewise interpolator");h=la(h,d),d=void 0}}if(h.length===1?(p&&(h=s3(h),p=!1),d===void 0&&(d=Float64Array.from(a,(m,y)=>y/(a.length-1)),d.length===2&&(d=o3)),t.interpolate((d===o3?Jr:jb)(h))):t.interpolate(h),s){let[m,y]=Be(a);(m>0||y<0)&&(a=xu(a),tl(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return p&&(a=Jl(a)),t.domain(a).unknown(c),i&&(t.nice(Wat(i,n)),a=t.domain()),d!==void 0&&t.range(d),o&&t.clamp(o),{type:n,domain:a,range:d,scale:t,interpolate:h,interval:f}}function Wat(e,t){return e===!0?void 0:typeof e=="number"?e:gV(e,t)}function lj(e,t,r){return Up(e,qc(),t,r)}function uj(e,t,r){return c3(e,t,{...r,exponent:.5})}function c3(e,t,{exponent:r=1,...n}){return Up(e,tb().exponent(r),t,{...n,type:"pow"})}function fj(e,t,{base:r=10,domain:n=Kat(t),...i}){return Up(e,Q0().base(r),t,{...i,domain:n})}function dj(e,t,{constant:r=1,...n}){return Up(e,J0().constant(r),t,n)}function hj(e,t,{range:r,quantiles:n=r===void 0?5:(r=[...r]).length,n:i=n,scheme:o="rdylbu",domain:s=Qat(t),unknown:a,interpolate:c,reverse:l}){return r===void 0&&(r=c!==void 0?Dn(c,i):Fe.get(e)===Hi?Vb(o,i):void 0),s.length>0&&(s=eb(s,r===void 0?{length:i}:r).quantiles()),RI(e,t,{domain:s,range:r,reverse:l,unknown:a})}function pj(e,t,{range:r,n=r===void 0?5:(r=[...r]).length,scheme:i="rdylbu",domain:o=yj(e,t),unknown:s,interpolate:a,reverse:c}){let[l,u]=Be(o),f;return r===void 0?(f=gn(l,u,n),f[0]<=l&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),n=f.length+1,r=a!==void 0?Dn(a,n):Fe.get(e)===Hi?Vb(i,n):void 0):(f=Dn(Ze(l,u),n+1).slice(1,-1),l instanceof Date&&(f=f.map(d=>new Date(d)))),tl(Sr(o))<0&&f.reverse(),RI(e,t,{domain:f,range:r,reverse:c,unknown:s})}function RI(e,t,{domain:r=[0],unknown:n,scheme:i="rdylbu",interpolate:o,range:s=o!==void 0?Dn(o,r.length+1):Fe.get(e)===Hi?Vb(i,r.length+1):void 0,reverse:a}){r=Sr(r);let c=tl(r);if(!isNaN(c)&&!Gat(r,c))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(s=Jl(s)),{type:"threshold",scale:rb(c<0?Jl(r):r,s===void 0?[]:s).unknown(n),domain:r,range:s}}function Gat(e,t){for(let r=1,n=e.length,i=e[0];r<n;++r){let o=Gn(i,i=e[r]);if(o!==0&&o!==t)return!1}return!0}function mj(e){return{type:"identity",scale:EV(Fe.get(e))?Z0():t=>t}}function Cp(e,t=wp){return e.length?[Oe(e,({value:r})=>r===void 0?r:Oe(r,t)),he(e,({value:r})=>r===void 0?r:he(r,t))]:[0,1]}function yj(e,t){let r=Fe.get(e);return(r===fd||r===hd||r===dd?Xat:Cp)(t)}function Xat(e){return[0,e.length?he(e,({value:t})=>t===void 0?t:he(t,wp)):1]}function Hat(e,t){let r=e.find(({radius:s})=>s!==void 0);if(r!==void 0)return[0,r.radius];let n=Zn(e,.5,({value:s})=>s===void 0?NaN:Zn(s,.25,ii)),i=t.map(s=>3*Math.sqrt(s/n)),o=30/he(i);return o<1?i.map(s=>s*o):i}function Zat(e,t){let r=ps(e,({value:o})=>o===void 0?NaN:ps(o,Math.abs)),n=t.map(o=>12*o/r),i=60/he(n);return i<1?n.map(o=>o*i):n}function Kat(e){for(let{value:t}of e)if(t!==void 0)for(let r of t){if(r>0)return Cp(e,ii);if(r<0)return Cp(e,hu)}return[1,10]}function Qat(e){let t=[];for(let{value:r}of e)if(r!==void 0)for(let n of r)t.push(n);return t}function jb(e){return(t,r)=>n=>e(t+n*(r-t))}function LI(e,t,r,n,{type:i,nice:o,clamp:s,domain:a=Cp(n),unknown:c,pivot:l=0,scheme:u,range:f,symmetric:d=!0,interpolate:h=Fe.get(e)===Hi?u==null&&f!==void 0?Io:kp(u!==void 0?u:"rdbu"):Ze,reverse:p}){l=+l,a=Sr(a);let[m,y]=a;if(a.length>2&&kn(`Warning: the diverging ${e} scale domain contains extra elements.`),Gn(m,y)<0&&([m,y]=[y,m],p=!p),m=Math.min(m,l),y=Math.max(y,l),typeof h!="function"&&(h=a3(h)),f!==void 0&&(h=h.length===1?jb(h)(...f):la(h,f)),p&&(h=s3(h)),d){let g=r.apply(l),b=g-r.apply(m),x=r.apply(y)-g;b<x?m=r.invert(g-x):b>x&&(y=r.invert(g+b))}return t.domain([m,l,y]).unknown(c).interpolator(h),s&&t.clamp(s),o&&t.nice(o),{type:i,domain:[m,y],pivot:l,interpolate:h,scale:t}}function gj(e,t,r){return LI(e,ub(),Jat,t,r)}function bj(e,t,r){return l3(e,t,{...r,exponent:.5})}function l3(e,t,{exponent:r=1,...n}){return LI(e,XS().exponent(r=+r),rct(r),t,{...n,type:"diverging-pow"})}function xj(e,t,{base:r=10,pivot:n=1,domain:i=Cp(t,n<0?hu:ii),...o}){return LI(e,WS().base(r=+r),tct,t,{domain:i,pivot:n,...o})}function _j(e,t,{constant:r=1,...n}){return LI(e,GS().constant(r=+r),nct(r),t,n)}var Jat={apply(e){return e},invert(e){return e}},tct={apply:Math.log,invert:Math.exp},ect={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function rct(e){return e===.5?ect:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function nct(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function wj(e,t,r,n){return Up(e,t,r,n)}function vj(e,t,r){return wj(e,jS(),t,r)}function Sj(e,t,r){return wj(e,qS(),t,r)}var Pp=Symbol("ordinal");function Tj(e,t,r,{type:n,interval:i,domain:o,range:s,reverse:a,hint:c}){return i=Ma(i,n),o===void 0&&(o=Bj(r,i,e)),(n==="categorical"||n===Pp)&&(n="ordinal"),a&&(o=Jl(o)),o=t.domain(o).domain(),s!==void 0&&(typeof s=="function"&&(s=s(o)),t.range(s)),{type:n,domain:o,range:s,scale:t,hint:c,interval:i}}function Aj(e,t,{type:r,interval:n,domain:i,range:o,scheme:s,unknown:a,...c}){n=Ma(n,r),i===void 0&&(i=Bj(t,n,e));let l;if(Fe.get(e)===Op)l=ict(t),o=o===void 0?oct(l):fe(o,Np);else if(Fe.get(e)===Hi&&(o===void 0&&(r==="ordinal"||r===Pp)&&(o=sj(i,s),o!==void 0&&(s=void 0)),s===void 0&&o===void 0&&(s=r==="ordinal"?"turbo":"observable10"),s!==void 0))if(o!==void 0){let u=kp(s),f=o[0],d=o[1]-o[0];o=({length:h})=>Dn(p=>u(f+d*p),h)}else o=i3(s);if(a===X0)throw new Error(`implicit unknown on ${e} scale is not supported`);return Tj(e,Kf().unknown(a),t,{...c,type:r,domain:i,range:o,hint:l})}function Mj(e,t,{align:r=.5,padding:n=.5,...i}){return Dj(TO().align(r).padding(n),t,i,e)}function Ej(e,t,{align:r=.5,padding:n=.1,paddingInner:i=n,paddingOuter:o=e==="fx"||e==="fy"?0:n,...s}){return Dj(uu().align(r).paddingInner(i).paddingOuter(o),t,s,e)}function Dj(e,t,r,n){let{round:i}=r;return i!==void 0&&e.round(i=!!i),e=Tj(n,e,t,r),e.round=i,e}function Bj(e,t,r){let n=new Hn;for(let{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(let s of i)n.add(s)}if(t!==void 0){let[i,o]=Be(n).map(t.floor,t);return t.range(i,t.offset(o))}if(n.size>1e4&&Fe.get(r)===Ro)throw new Error(`implicit ordinal domain of ${r} scale has more than 10,000 values`);return Nc(n,Qr)}function Ij(e,t){let r;for(let{hint:n}of e){let i=n?.[t];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}function ict(e){return{fill:Ij(e,"fill"),stroke:Ij(e,"stroke")}}function oct(e){return Se(e.fill)?iN:uI}function qb(e,{label:t,inset:r=0,insetTop:n=r,insetRight:i=r,insetBottom:o=r,insetLeft:s=r,round:a,nice:c,clamp:l,zero:u,align:f,padding:d,projection:h,facet:{label:p=t}={},...m}={}){let y={};for(let[g,b]of e){let x=m[g],_=Uj(g,b,{round:Fe.get(g)===Ro?a:void 0,nice:c,clamp:l,zero:u,align:f,padding:d,projection:h,...x});if(_){let{label:v=g==="fx"||g==="fy"?p:t,percent:w,transform:T,inset:E,insetTop:I=E!==void 0?E:g==="y"?n:0,insetRight:B=E!==void 0?E:g==="x"?i:0,insetBottom:A=E!==void 0?E:g==="y"?o:0,insetLeft:O=E!==void 0?E:g==="x"?s:0}=x||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");_.percent=!!w,_.label=v===void 0?sct(b,_):v,_.transform=T,g==="x"||g==="fx"?(_.insetLeft=+O,_.insetRight=+B):(g==="y"||g==="fy")&&(_.insetTop=+I,_.insetBottom=+A),y[g]=_}}return y}function f3(e){let t={},r={scales:t};for(let[n,i]of Object.entries(e)){let{scale:o,type:s,interval:a,label:c}=i;t[n]=$j(i),r[n]=o,o.type=s,a!=null&&(o.interval=a),c!=null&&(o.label=c)}return r}function Lj(e,t){let{x:r,y:n,fx:i,fy:o}=e,s=i||o?UI(t):t;i&&Oj(i,s),o&&Nj(o,s);let a=i||o?d3(e,t):t;r&&Oj(r,a),n&&Nj(n,a)}function sct(e=[],t){let r;for(let{label:n}of e)if(n!==void 0){if(r===void 0)r=n;else if(r!==n)return}if(r!==void 0)return!Ba(t)&&t.percent&&(r=`${r} (%)`),{inferred:!0,toString:()=>r}}function CI(e){return Math.sign(tl(e.domain()))*Math.sign(tl(e.range()))}function UI(e){let{marginTop:t,marginRight:r,marginBottom:n,marginLeft:i,width:o,height:s,facet:{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(r,c),marginBottom:Math.max(n,l),marginLeft:Math.max(i,u),width:o,height:s}}function d3({fx:e,fy:t},r){let{marginTop:n,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:c}=UI(r);return{marginTop:n,marginRight:i,marginBottom:o,marginLeft:s,width:e?e.scale.bandwidth()+s+i:a,height:t?t.scale.bandwidth()+n+o:c,facet:{width:a,height:c}}}function Oj(e,t){if(e.range===void 0){let{insetLeft:r,insetRight:n}=e,{width:i,marginLeft:o=0,marginRight:s=0}=t,a=o+r,c=i-s-n;e.range=[a,Math.max(a,c)],Ba(e)||(e.range=Cj(e)),e.scale.range(e.range)}kj(e)}function Nj(e,t){if(e.range===void 0){let{insetTop:r,insetBottom:n}=e,{height:i,marginTop:o=0,marginBottom:s=0}=t,a=o+r,c=i-s-n;e.range=[Math.max(a,c),a],Ba(e)?e.range.reverse():e.range=Cj(e),e.scale.range(e.range)}kj(e)}function kj(e){e.round===void 0&&lct(e)&&act(e)<=30&&e.scale.round(!0)}function act({scale:e}){let t=e.domain().length,[r,n]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),s=t-i,a=Math.abs(n-r)/Math.max(1,s+o*2);return(a-Math.floor(a))*s}function Cj(e){let t=e.scale.domain().length+h3(e);if(!(t>2))return e.range;let[r,n]=e.range;return Array.from({length:t},(i,o)=>r+o/(t-1)*(n-r))}function PI(e,t,r){return Uj(e,r===void 0?void 0:[{hint:r}],{...t})}function Uj(e,t=[],r={}){let n=cct(e,t,r);if(r.type===void 0&&r.domain===void 0&&r.range===void 0&&r.interval==null&&e!=="fx"&&e!=="fy"&&Ba({type:n})){let i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(lr)?kn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${$p(n)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${$p(n)}".`):i.some(wV)?kn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${$p(n)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${$p(n)}".`):i.some(vV)&&kn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${$p(n)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${$p(n)}".`)}switch(r.type=n,n){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":r=kI(t,r,Cr);break;case"identity":switch(Fe.get(e)){case Ro:r=kI(t,r,Cr);break;case Op:r=kI(t,r,uct);break}break;case"utc":case"time":r=kI(t,r,yV);break}switch(n){case"diverging":return gj(e,t,r);case"diverging-sqrt":return bj(e,t,r);case"diverging-pow":return l3(e,t,r);case"diverging-log":return xj(e,t,r);case"diverging-symlog":return _j(e,t,r);case"categorical":case"ordinal":case Pp:return Aj(e,t,r);case"cyclical":case"sequential":case"linear":return lj(e,t,r);case"sqrt":return uj(e,t,r);case"threshold":return RI(e,t,r);case"quantile":return hj(e,t,r);case"quantize":return pj(e,t,r);case"pow":return c3(e,t,r);case"log":return fj(e,t,r);case"symlog":return dj(e,t,r);case"utc":return Sj(e,t,r);case"time":return vj(e,t,r);case"point":return Mj(e,t,r);case"band":return Ej(e,t,r);case"identity":return mj(e);case void 0:return;default:throw new Error(`unknown scale type: ${n}`)}}function $p(e){return typeof e=="symbol"?e.description:e}function Fj(e){return typeof e=="string"?`${e}`.toLowerCase():e}var Rj={toString:()=>"projection"};function cct(e,t,{type:r,domain:n,range:i,scheme:o,pivot:s,projection:a}){if(r=Fj(r),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(r=Rj);for(let l of t){let u=Fj(l.type);if(u!==void 0){if(r===void 0)r=u;else if(r!==u)throw new Error(`scale incompatible with channel: ${r} !== ${u}`)}}if(r===Rj)return;if(r!==void 0)return r;if(n===void 0&&!t.some(({value:l})=>l!==void 0))return;let c=Fe.get(e);if(c===fd)return"sqrt";if(c===hd||c===dd)return"linear";if(c===Op)return"ordinal";if((n||i||[]).length>2)return u3(c);if(n!==void 0){if(ir(n))return u3(c);if(lr(n))return"utc"}else{let l=t.map(({value:u})=>u).filter(u=>u!==void 0);if(l.some(ir))return u3(c);if(l.some(lr))return"utc"}if(c===Hi){if(s!=null||aj(o))return"diverging";if(oj(o))return"categorical"}return"linear"}function u3(e){switch(e){case Ro:return"point";case Hi:return Pp;default:return"ordinal"}}function Ba({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Pp}function h3({type:e}){return e==="threshold"}function lct({type:e}){return e==="point"||e==="band"}function ai(e){if(e===void 0)return!0;let t=e.domain(),r=e(t[0]);for(let n=1,i=t.length;n<i;++n)if(e(t[n])-r)return!1;return!0}function kI(e,{domain:t,...r},n){for(let i of e)i.value!==void 0&&(t===void 0&&(t=i.value?.domain),i.value=n(i.value));return{domain:t===void 0?t:n(t),...r}}function uct(e){return fe(e,Np)}function Mu(e={}){let t;for(let r in e)if(Fe.has(r)&&Ta(e[r])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=$j(PI(r,e[r]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function Pj(e){return t=>{if(!Fe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function $j({scale:e,type:t,domain:r,range:n,interpolate:i,interval:o,transform:s,percent:a,pivot:c}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};let l=e.unknown?e.unknown():void 0;return{type:t,domain:xu(r),...n!==void 0&&{range:xu(n)},...s!==void 0&&{transform:s},...a&&{percent:a},...l!==void 0&&{unknown:l},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function $I(e){let t,r;return(...n)=>((r?.length!==n.length||r.some((i,o)=>i!==n[o]))&&(r=n,t=e(...n)),t)}var fct=$I(e=>new Intl.NumberFormat(e)),dct=$I((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),hct=$I((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function pct(e="en-US"){let t=fct(e);return r=>r!=null&&!isNaN(r)?t.format(r):void 0}function zj(e="en-US",t="short"){let r=dct(e,t);return n=>n!=null&&!isNaN(n=+new Date(Date.UTC(2e3,+n)))?r.format(n):void 0}function Vj(e="en-US",t="short"){let r=hct(e,t);return n=>n!=null&&!isNaN(n=+new Date(Date.UTC(2001,0,+n)))?r.format(n):void 0}function p3(e){return vp(e,"Invalid Date")}function mct(e="en-US"){let t=pct(e);return r=>(r instanceof Date?p3:typeof r=="number"?t:vr)(r)}var xs=mct();var ur=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5,yct=0;function zI(){return`plot-clip-${++yct}`}function VI(e,{title:t,href:r,ariaLabel:n,ariaDescription:i,ariaHidden:o,target:s,fill:a,fillOpacity:c,stroke:l,strokeWidth:u,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:h,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:y,opacity:g,mixBlendMode:b,imageFilter:x,paintOrder:_,pointerEvents:v,shapeRendering:w,channels:T},{ariaLabel:E,fill:I="currentColor",fillOpacity:B,stroke:A="none",strokeOpacity:O,strokeWidth:L,strokeLinecap:S,strokeLinejoin:M,strokeMiterlimit:D,paintOrder:C}){I===null&&(a=null,c=null),A===null&&(l=null,f=null),Se(I)?!Se(A)&&(!Se(a)||T?.fill)&&(A="none"):Se(A)&&(!Se(l)||T?.stroke)&&(I="none");let[U,k]=cr(a,I),[$,z]=Ae(c,B),[V,Q]=cr(l,A),[st,ct]=Ae(f,O),[ut,X]=Ae(g);il(Q)||(u===void 0&&(u=L),h===void 0&&(h=S),d===void 0&&(d=M),p===void 0&&!IV(d)&&(p=D),!il(k)&&_===void 0&&(_=C));let[lt,Y]=Ae(u);return I!==null&&(e.fill=Ne(k,"currentColor"),e.fillOpacity=Yb(z,1)),A!==null&&(e.stroke=Ne(Q,"none"),e.strokeWidth=Yb(Y,1),e.strokeOpacity=Yb(ct,1),e.strokeLinejoin=Ne(d,"miter"),e.strokeLinecap=Ne(h,"butt"),e.strokeMiterlimit=Yb(p,4),e.strokeDasharray=Ne(m,"none"),e.strokeDashoffset=Ne(y,"0")),e.target=vr(s),e.ariaLabel=vr(E),e.ariaDescription=vr(i),e.ariaHidden=vr(o),e.opacity=Yb(X,1),e.mixBlendMode=Ne(b,"normal"),e.imageFilter=Ne(x,"none"),e.paintOrder=Ne(_,"normal"),e.pointerEvents=Ne(v,"auto"),e.shapeRendering=Ne(w,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:r,optional:!0,filter:null},ariaLabel:{value:n,optional:!0,filter:null},fill:{value:U,scale:"auto",optional:!0},fillOpacity:{value:$,scale:"auto",optional:!0},stroke:{value:V,scale:"auto",optional:!0},strokeOpacity:{value:st,scale:"auto",optional:!0},strokeWidth:{value:lt,optional:!0},opacity:{value:ut,scale:"auto",optional:!0}}}function gct(e,t){t&&e.filter(r=>Bb(t[r])).append("title").call(xct,t)}function bct(e,t){t&&e.filter(([r])=>Bb(t[r])).append("title").call(_ct,t)}function xct(e,t){t&&e.text(r=>xs(t[r]))}function _ct(e,t){t&&e.text(([r])=>xs(t[r]))}function ye(e,{target:t,tip:r},{ariaLabel:n,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){n&&yt(e,"aria-label",d=>n[d]),o&&yt(e,"fill",d=>o[d]),s&&yt(e,"fill-opacity",d=>s[d]),a&&yt(e,"stroke",d=>a[d]),c&&yt(e,"stroke-opacity",d=>c[d]),l&&yt(e,"stroke-width",d=>l[d]),u&&yt(e,"opacity",d=>u[d]),f&&jj(e,d=>f[d],t),r||gct(e,i)}function pd(e,{target:t,tip:r},{ariaLabel:n,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:c,strokeWidth:l,opacity:u,href:f}){n&&yt(e,"aria-label",([d])=>n[d]),o&&yt(e,"fill",([d])=>o[d]),s&&yt(e,"fill-opacity",([d])=>s[d]),a&&yt(e,"stroke",([d])=>a[d]),c&&yt(e,"stroke-opacity",([d])=>c[d]),l&&yt(e,"stroke-width",([d])=>l[d]),u&&yt(e,"opacity",([d])=>u[d]),f&&jj(e,([d])=>f[d],t),r||bct(e,i)}function wct({ariaLabel:e,title:t,fill:r,fillOpacity:n,stroke:i,strokeOpacity:o,strokeWidth:s,opacity:a,href:c},{tip:l}){return[e,l?void 0:t,r,n,i,o,s,a,c].filter(u=>u!==void 0)}function Wb(e,t,r){let n=Xr(e,i=>t[i]);return r===void 0&&n.size>1+e.length>>1&&kn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),n.values()}function*jI(e,t,r,n){let{z:i}=r,{z:o}=n,s=wct(n,r),a=[...t,...s];for(let c of o?Wb(e,o,i):[e]){let l,u;t:for(let f of c){for(let d of a)if(!wr(d[f])){u&&u.push(-1);continue t}if(l===void 0){u&&(yield u),l=s.map(d=>rl(d[f])),u=[f];continue}u.push(f);for(let d=0;d<s.length;++d)if(rl(s[d][f])!==l[d]){yield u,l=s.map(p=>rl(p[f])),u=[f];continue t}}u&&(yield u)}}function vct(e,t,r,n){let i,{clip:o=n.clip}=t;switch(o){case"frame":{let{width:s,height:a,marginLeft:c,marginRight:l,marginTop:u,marginBottom:f}=r,d=zI();i=`url(#${d})`,e=pt("svg:g",n).call(h=>h.append("svg:clipPath").attr("id",d).append("rect").attr("x",c).attr("y",u).attr("width",s-l-c).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{let{projection:s}=n;if(!s)throw new Error('the "sphere" clip option requires a projection');let a=zI();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",_n(s)({type:"Sphere"}));break}}yt(e,"aria-label",t.ariaLabel),yt(e,"aria-description",t.ariaDescription),yt(e,"aria-hidden",t.ariaHidden),yt(e,"clip-path",i)}function Kt(e,t,r,n){vct(e,t,r,n),yt(e,"fill",t.fill),yt(e,"fill-opacity",t.fillOpacity),yt(e,"stroke",t.stroke),yt(e,"stroke-width",t.strokeWidth),yt(e,"stroke-opacity",t.strokeOpacity),yt(e,"stroke-linejoin",t.strokeLinejoin),yt(e,"stroke-linecap",t.strokeLinecap),yt(e,"stroke-miterlimit",t.strokeMiterlimit),yt(e,"stroke-dasharray",t.strokeDasharray),yt(e,"stroke-dashoffset",t.strokeDashoffset),yt(e,"shape-rendering",t.shapeRendering),yt(e,"filter",t.imageFilter),yt(e,"paint-order",t.paintOrder);let{pointerEvents:i=n.pointerSticky===!1?"none":void 0}=t;yt(e,"pointer-events",i)}function Gt(e,t){Sct(e,"mix-blend-mode",t.mixBlendMode),yt(e,"opacity",t.opacity)}function jj(e,t,r){e.each(function(n){let i=t(n);if(i!=null){let o=this.ownerDocument.createElementNS(So.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(So.xlink,"href",i),r!=null&&o.setAttribute("target",r),this.parentNode.insertBefore(o,this).appendChild(this)}})}function yt(e,t,r){r!=null&&e.attr(t,r)}function Sct(e,t,r){r!=null&&e.style(t,r)}function Pt(e,t,{x:r,y:n},i=ur,o=ur){i+=t.dx,o+=t.dy,r?.bandwidth&&(i+=r.bandwidth()/2),n?.bandwidth&&(o+=n.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function Ne(e,t){if((e=vr(e))!==t)return e}function Yb(e,t){if((e=Wt(e))!==t)return e}var Ict=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function zp(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!Ict.test(e))throw new Error(`invalid class name: ${e}`);return e}function Vp(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(let r of e)Object.assign(r.style,t)}function on({frameAnchor:e},{width:t,height:r,marginTop:n,marginRight:i,marginBottom:o,marginLeft:s}){return[/left$/.test(e)?s:/right$/.test(e)?t-i:(s+t-i)/2,/^top/.test(e)?n:/^bottom/.test(e)?r-o:(n+r-o)/2]}function Yj(e,t,r={}){let n=.5-ur,i=.5+ur,o=.5+ur,s=.5-ur;for(let{marginTop:m,marginRight:y,marginBottom:g,marginLeft:b}of t)m>n&&(n=m),y>i&&(i=y),g>o&&(o=g),b>s&&(s=b);let{margin:a,marginTop:c=a!==void 0?a:n,marginRight:l=a!==void 0?a:i,marginBottom:u=a!==void 0?a:o,marginLeft:f=a!==void 0?a:s}=r;c=+c,l=+l,u=+u,f=+f;let{width:d=640,height:h=Tct(e,r,{width:d,marginTopDefault:n,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:s})+Math.max(0,c-n+u-o)}=r;d=+d,h=+h;let p={width:d,height:h,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:y=m!==void 0?m:c,marginRight:g=m!==void 0?m:l,marginBottom:b=m!==void 0?m:u,marginLeft:x=m!==void 0?m:f}=r.facet??{};y=+y,g=+g,b=+b,x=+x,p.facet={marginTop:y,marginRight:g,marginBottom:b,marginLeft:x}}return p}function Tct({x:e,y:t,fy:r,fx:n},{projection:i,aspectRatio:o},{width:s,marginTopDefault:a,marginRightDefault:c,marginBottomDefault:l,marginLeftDefault:u}){let f=r?r.scale.domain().length:1,d=QV(i);if(d){let p=n?n.scale.domain().length:1,m=(1.1*f-.1)/(1.1*p-.1)*d,y=Math.max(.1,Math.min(10,m));return Math.round((s-u-c)*y+a+l)}let h=t?Ba(t)?t.scale.domain().length:Math.max(7,17/f):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);let p=qj("y",t)/(qj("x",e)*o),m=n?n.scale.bandwidth():1,y=r?r.scale.bandwidth():1,g=m*(s-u-c)-e.insetLeft-e.insetRight;return(p*g+t.insetTop+t.insetBottom)/y+a+l}return!!(t||r)*Math.max(1,Math.min(60,h*f))*20+!!n*30+60}function qj(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);let{type:r,domain:n}=t,i;switch(r){case"linear":case"utc":case"time":i=Number;break;case"pow":{let a=t.scale.exponent();i=c=>Math.pow(c,a);break}case"log":i=Math.log;break;case"point":case"band":return n.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${r}`)}let[o,s]=Be(n);return Math.abs(i(s)-i(o))}function Gj(e,t){let{fx:r,fy:n}=qb(e,t),i=r?.scale.domain(),o=n?.scale.domain();return i&&o?sv(i,o).map(([s,a],c)=>({x:s,y:a,i:c})):i?i.map((s,a)=>({x:s,i:a})):o?o.map((s,a)=>({y:s,i:a})):void 0}function Xj(e,{x:t,y:r}){return t&&=x3(t),r&&=x3(r),e.filter(t&&r?n=>t.has(n.x)&&r.has(n.y):t?n=>t.has(n.x):n=>r.has(n.y)).sort(t&&r?(n,i)=>t.get(n.x)-t.get(i.x)||r.get(n.y)-r.get(i.y):t?(n,i)=>t.get(n.x)-t.get(i.x):(n,i)=>r.get(n.y)-r.get(i.y))}function YI(e,{fx:t,fy:r}){let n=oi(e),i=t?.value,o=r?.value;return t&&r?hs(n,s=>(s.fx=i[s[0]],s.fy=o[s[0]],s),s=>i[s],s=>o[s]):t?hs(n,s=>(s.fx=i[s[0]],s),s=>i[s]):hs(n,s=>(s.fy=o[s[0]],s),s=>o[s])}function Hj(e,t,{marginTop:r,marginLeft:n}){return e&&t?({x:i,y:o})=>`translate(${e(i)-n},${t(o)-r})`:e?({x:i})=>`translate(${e(i)-n},0)`:({y:i})=>`translate(0,${t(i)-r})`}function Zj(e){let t=[],r=new Uint32Array(bn(e,n=>n.length));for(let n of e){let i=0;for(let o of e)n!==o&&(r.set(o,i),i+=o.length);t.push(r.slice(0,i))}return t}var Act=new Map([["top",m3],["right",b3],["bottom",y3],["left",g3],["top-left",qI(m3,g3)],["top-right",qI(m3,b3)],["bottom-left",qI(y3,g3)],["bottom-right",qI(y3,b3)],["top-empty",Ect],["right-empty",Oct],["bottom-empty",Dct],["left-empty",Bct],["empty",Nct]]);function Kj(e){if(e==null)return null;let t=Act.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}var Wj=new WeakMap;function x3(e){let t=Wj.get(e);return t||Wj.set(e,t=new Xn(fe(e,(r,n)=>[r,n]))),t}function Eu(e,t){return x3(e).get(t)}function Mct(e,t,r){return t=rl(t),r=rl(r),e.find(n=>Object.is(rl(n.x),t)&&Object.is(rl(n.y),r))}function WI(e,t,r){return Mct(e,t,r)?.empty}function m3(e,{y:t},{y:r}){return t?Eu(t,r)===0:!0}function y3(e,{y:t},{y:r}){return t?Eu(t,r)===t.length-1:!0}function g3(e,{x:t},{x:r}){return t?Eu(t,r)===0:!0}function b3(e,{x:t},{x:r}){return t?Eu(t,r)===t.length-1:!0}function Ect(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let o=Eu(t,n);if(o>0)return WI(e,r,t[o-1])}function Dct(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let o=Eu(t,n);if(o<t.length-1)return WI(e,r,t[o+1])}function Bct(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let o=Eu(t,r);if(o>0)return WI(e,t[o-1],n)}function Oct(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;let o=Eu(t,r);if(o<t.length-1)return WI(e,t[o+1],n)}function Nct(e,t,{empty:r}){return r}function qI(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function GI(e,{channels:{fx:t,fy:r},groups:n}){return t&&r?e.map(({x:i,y:o})=>n.get(i)?.get(o)??[]):t?e.map(({x:i})=>n.get(i)??[]):e.map(({y:i})=>n.get(i)??[])}var Ft=class{constructor(t,r={},n={},i){let{facet:o="auto",facetAnchor:s,fx:a,fy:c,sort:l,dx:u=0,dy:f=0,margin:d=0,marginTop:h=d,marginRight:p=d,marginBottom:m=d,marginLeft:y=d,clip:g=i?.clip,channels:b,tip:x,render:_}=n;if(this.data=t,this.sort=Aa(l)?l:null,this.initializer=Qe(n).initializer,this.transform=this.initializer?n.transform:rn(n).transform,o===null||o===!1?this.facet=null:(this.facet=Yr(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===gu&&typeof a=="string"?[a]:a,this.fy=t===gu&&typeof c=="string"?[c]:c),this.facetAnchor=Kj(s),r=kb(r),b!==void 0&&(r={...Fct(b),...r}),i!==void 0&&(r={...VI(this,n,i),...r}),this.channels=Object.fromEntries(Object.entries(r).map(([v,w])=>{if(Xi(w.value)){let{value:T,label:E=w.label,scale:I=w.scale}=w.value;w={...w,label:E,scale:I,value:T}}if(t===gu&&typeof w.value=="string"){let{value:T}=w;w={...w,value:[T]}}return[v,w]}).filter(([v,{value:w,optional:T}])=>{if(w!=null)return!0;if(T)return!1;throw new Error(`missing channel value: ${v}`)})),this.dx=+u,this.dy=+f,this.marginTop=+h,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+y,this.clip=II(g),this.tip=Rct(x),this.facet==="super"){if(a||c)throw new Error("super-faceting cannot use fx or fy");for(let v in this.channels){let{scale:w}=r[v];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=jp(_,this.render))}initialize(t,r,n){let i=Sr(this.data);t===void 0&&i!=null&&(t=[oi(i)]);let o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,n),i=Sr(i)),t!==void 0&&(t.original=o);let s=NI(this.channels,i);return this.sort!=null&&VV(i,t,s,r,this.sort),{data:i,facets:t,channels:s}}filter(t,r,n){for(let i in r){let{filter:o=wr}=r[i];if(o!==null){let s=n[i];t=t.filter(a=>o(s[a]))}}return t}project(t,r,n){for(let i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){let o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&n3(i,o,r,n.projection)}}scale(t,r,n){let i=Lp(t,r);return n.projection&&this.project(t,i,n),i}};function Ur(...e){return e.plot=Ft.prototype.plot,e}function jp(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(r,n,i,o,s,a){return e.call(this,r,n,i,o,s,(c,l,u,f,d)=>t.call(this,c,l,u,f,d,a))}}function Fct(e){return Object.fromEntries(Object.entries(kb(e)).map(([t,r])=>(r=typeof r=="string"?{value:r,label:t}:Fo(r),r.filter===void 0&&r.scale==null&&(r={...r,filter:null}),[t,r])))}function Rct(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Yr(e,"tip",["x","y","xy"]):e}function _s(e,t){return e?.tip===!0?{...e,tip:t}:tn(e?.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}var Qj=new WeakMap;function _3(e,t,{x:r,y:n,px:i,py:o,maxRadius:s=40,channels:a,render:c,...l}={}){return s=+s,i!=null&&(r??=null,a={...a,px:{value:i,scale:"x"}}),o!=null&&(n??=null,a={...a,py:{value:o,scale:"y"}}),{x:r,y:n,channels:a,...l,render:jp(function(u,f,d,h,p,m){p={...p,pointerSticky:!1};let y=p.ownerSVGElement,{data:g}=p.getMarkState(this),b=Qj.get(y);b||Qj.set(y,b={sticky:!1,roots:[],renders:[]});let x=b.renders.push(Q)-1,{x:_,y:v,fx:w,fy:T}=f,E=w?w(u.fx)-h.marginLeft:0,I=T?T(u.fy)-h.marginTop:0;_?.bandwidth&&(E+=_.bandwidth()/2),v?.bandwidth&&(I+=v.bandwidth()/2);let B=u.fi!=null,A;if(B){let X=b.facetStates;X||(b.facetStates=X=new Map),A=X.get(this),A||X.set(this,A=new Map)}let[O,L]=on(this,h),{px:S,py:M}=d,D=S?X=>S[X]:w3(d,O),C=M?X=>M[X]:v3(d,L),U,k,$,z;function V(X,lt){if(B)if(z&&(z=cancelAnimationFrame(z)),X==null)A.delete(u.fi);else{A.set(u.fi,lt),z=requestAnimationFrame(()=>{z=null;for(let[Y,tt]of A)if(tt<lt||tt===lt&&Y<u.fi){X=null;break}Q(X)});return}Q(X)}function Q(X){if(U===X&&$===b.sticky)return;U=X,$=p.pointerSticky=b.sticky;let lt=U==null?[]:[U];B&&(lt.fx=u.fx,lt.fy=u.fy,lt.fi=u.fi);let Y=m(lt,f,d,h,p);if(k){if(B){let tt=k.parentNode,at=k.getAttribute("transform"),j=Y.getAttribute("transform");at?Y.setAttribute("transform",at):Y.removeAttribute("transform"),j?tt.setAttribute("transform",j):tt.removeAttribute("transform"),Y.removeAttribute("aria-label"),Y.removeAttribute("aria-description"),Y.removeAttribute("aria-hidden")}k.replaceWith(Y)}return b.roots[x]=k=Y,U==null&&A?.size>1||p.dispatchValue(U==null?null:g[U]),Y}function st(X){if(b.sticky||X.pointerType==="mouse"&&X.buttons===1)return;let[lt,Y]=En(X);lt-=E,Y-=I;let tt=lt<h.marginLeft||lt>h.width-h.marginRight?1:e,at=Y<h.marginTop||Y>h.height-h.marginBottom?1:t,j=null,Qt=s*s;for(let gt of u){let de=tt*(D(gt)-lt),pe=at*(C(gt)-Y),nt=de*de+pe*pe;nt<=Qt&&(j=gt,Qt=nt)}if(j!=null&&(e!==1||t!==1)){let gt=D(j)-lt,de=C(j)-Y;Qt=gt*gt+de*de}V(j,Qt)}function ct(X){X.pointerType==="mouse"&&U!=null&&(b.sticky&&b.roots.some(lt=>lt?.contains(X.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(lt=>lt(null))):(b.sticky=!0,Q(U)),X.stopImmediatePropagation()))}function ut(X){X.pointerType==="mouse"&&(b.sticky||V(null))}return y.addEventListener("pointerenter",st),y.addEventListener("pointermove",st),y.addEventListener("pointerdown",ct),y.addEventListener("pointerleave",ut),Q(null)},c)}}function qp(e){return _3(1,1,e)}function Yp(e){return _3(1,.01,e)}function md(e){return _3(.01,1,e)}function w3({x1:e,x2:t,x:r=e},n){return e&&t?i=>(e[i]+t[i])/2:r?i=>r[i]:()=>n}function v3({y1:e,y2:t,y:r=e},n){return e&&t?i=>(e[i]+t[i])/2:r?i=>r[i]:()=>n}function XI(e){return Ba(e)&&e.interval===void 0?void 0:"tabular-nums"}function Jj(e,t){let{label:r=e.label,tickSize:n=6,width:i=240,height:o=44+n,marginTop:s=18,marginRight:a=0,marginBottom:c=16+n,marginLeft:l=0,style:u,ticks:f=(i-l-a)/64,tickFormat:d,fontVariant:h=XI(e),round:p=!0,opacity:m,className:y}=t,g=Tu(t);y=zp(y),m=Ae(m)[1],d===null&&(d=()=>null);let b=pt("svg",g).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(O=>O.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(Vp,u),x=O=>O.selectAll(".tick line").attr("y1",s+c-o),_,v=p?(O,L)=>O.rangeRound(L):(O,L)=>O.range(L),{type:w,domain:T,range:E,interpolate:I,scale:B,pivot:A}=e;if(I){let O=E===void 0?I:la(I.length===1?jb(I):I,E);_=v(B.copy(),Dn(Ze(l,i-a),Math.min(T.length+(A!==void 0),E===void 0?1/0:E.length)));let L=256,S=g.document.createElement("canvas");S.width=L,S.height=1;let M=S.getContext("2d");for(let D=0,C=L-1;D<L;++D)M.fillStyle=O(D/C),M.fillRect(D,0,1,1);b.append("image").attr("opacity",m).attr("x",l).attr("y",s).attr("width",i-l-a).attr("height",o-s-c).attr("preserveAspectRatio","none").attr("xlink:href",S.toDataURL())}else if(w==="threshold"){let O=T,L=d===void 0?S=>S:typeof d=="string"?Mo(d):d;_=v(qc().domain([-1,E.length-1]),[l,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",(S,M)=>_(M-1)).attr("y",s).attr("width",(S,M)=>_(M)-_(M-1)).attr("height",o-s-c).attr("fill",S=>S),f=fe(O,(S,M)=>M),d=S=>L(O[S],S)}else _=v(uu().domain(T),[l,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",_).attr("y",s).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-s-c).attr("fill",B),x=()=>{};return b.append("g").attr("transform",`translate(0,${o-c})`).call(RD(_).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(n).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ne(h,"normal")).call(x).call(O=>O.select(".domain").remove()),r!==void 0&&b.append("text").attr("x",l).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(r),b.node()}var Wp=Math.PI/180;function ws(e,{marker:t,markerStart:r=t,markerMid:n=t,markerEnd:i=t}={}){e.markerStart=S3(r),e.markerMid=S3(n),e.markerEnd=S3(i)}function S3(e){if(e==null||e===!1)return null;if(e===!0)return eq;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return tq("auto");case"arrow-reverse":return tq("auto-start-reverse");case"dot":return Lct;case"circle":case"circle-fill":return eq;case"circle-stroke":return kct;case"tick":return I3("auto");case"tick-x":return I3(90);case"tick-y":return I3(0)}throw new Error(`invalid marker: ${e}`)}function tq(e){return(t,r)=>pt("svg:marker",r).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(n=>n.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Lct(e,t){return pt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(r=>r.append("circle").attr("r",2.5)).node()}function eq(e,t){return pt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(r=>r.append("circle").attr("r",3)).node()}function kct(e,t){return pt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(r=>r.append("circle").attr("r",3)).node()}function I3(e){return(t,r)=>pt("svg:marker",r).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(n=>n.append("path").attr("d","M0,-3v6")).node()}var Cct=0;function ll(e,t,{stroke:r},n){return nq(e,t,r&&(i=>r[i]),n)}function rq(e,t,{stroke:r},n){return nq(e,t,r&&(([i])=>r[i]),n)}function nq(e,{markerStart:t,markerMid:r,markerEnd:n,stroke:i},o=()=>i,s){let a=new Map;function c(l){return function(u){let f=o(u),d=a.get(l);d||a.set(l,d=new Map);let h=d.get(f);if(!h){let p=this.parentNode.insertBefore(l(f,s),this),m=`plot-marker-${++Cct}`;p.setAttribute("id",m),d.set(f,h=`url(#${m})`)}return h}}t&&e.attr("marker-start",c(t)),r&&e.attr("marker-mid",c(r)),n&&e.attr("marker-end",c(n))}function yd({inset:e,insetLeft:t,insetRight:r,...n}={}){return[t,r]=iq(e,t,r),{inset:e,insetLeft:t,insetRight:r,...n}}function gd({inset:e,insetTop:t,insetBottom:r,...n}={}){return[t,r]=iq(e,t,r),{inset:e,insetTop:t,insetBottom:r,...n}}function iq(e,t,r){return e===void 0&&t===void 0&&r===void 0?ur?[1,0]:[.5,.5]:[t,r]}function oq(e,{interval:t}){return e={...Fo(e)},e.interval=Bp(e.interval===void 0?t:e.interval),e}function HI(e,t,r,n){let{[e]:i,[`${e}1`]:o,[`${e}2`]:s}=r,{value:a,interval:c}=oq(i,r);if(a==null||c==null&&!n)return r;let l=Sn(i);if(c==null){let h,p={transform:m=>h||(h=At(m,a)),label:l};return{...r,[e]:void 0,[`${e}1`]:o===void 0?p:o,[`${e}2`]:s===void 0&&!(o===s&&n)?p:s}}let u,f;function d(h){return f!==void 0&&h===u?f:f=fe(At(u=h,a),p=>c.floor(p))}return t({...r,[e]:void 0,[`${e}1`]:o===void 0?{transform:d,label:l}:o,[`${e}2`]:s===void 0?{transform:h=>d(h).map(p=>c.offset(p)),label:l}:s})}function sq(e,t,r){let{[e]:n}=r,{value:i,interval:o}=oq(n,r);return i==null||o==null?r:t({...r,[e]:{label:Sn(n),transform:s=>{let a=fe(At(s,i),l=>o.floor(l)),c=a.map(l=>o.offset(l));return a.map(lr(a)?(l,u)=>l==null||isNaN(l=+l)||(u=c[u],u==null)||isNaN(u=+u)?void 0:new Date((l+u)/2):(l,u)=>l==null||(u=c[u],u==null)?NaN:(+l+ +u)/2)}}})}function T3(e={}){return HI("x",yd,e,!0)}function A3(e={}){return HI("y",gd,e,!0)}function ZI(e={}){return HI("x",yd,e)}function KI(e={}){return HI("y",gd,e)}function QI(e={}){return sq("x",yd,e)}function JI(e={}){return sq("y",gd,e)}var aq={ariaLabel:"rule",fill:null,stroke:"currentColor"},Gb=class extends Ft{constructor(t,r={}){let{x:n,y1:i,y2:o,inset:s=0,insetTop:a=s,insetBottom:c=s}=r;super(t,{x:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},_s(r,"x"),aq),this.insetTop=Wt(a),this.insetBottom=Wt(c),ws(this,r)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y1:l,y2:u}=n,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetTop:g,insetBottom:b}=this;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s},ur,0).call(x=>x.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",c?_=>c[_]:(m+f-p)/2).attr("x2",c?_=>c[_]:(m+f-p)/2).attr("y1",l&&!ai(a)?_=>l[_]+g:h+g).attr("y2",u&&!ai(a)?a.bandwidth?_=>u[_]+a.bandwidth()-b:_=>u[_]-b:d-y-b).call(ye,this,n).call(ll,this,n,o)).node()}},Xb=class extends Ft{constructor(t,r={}){let{x1:n,x2:i,y:o,inset:s=0,insetRight:a=s,insetLeft:c=s}=r;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},_s(r,"y"),aq),this.insetRight=Wt(a),this.insetLeft=Wt(c),ws(this,r)}render(t,r,n,i,o){let{x:s,y:a}=r,{y:c,x1:l,x2:u}=n,{width:f,height:d,marginTop:h,marginRight:p,marginLeft:m,marginBottom:y}=i,{insetLeft:g,insetRight:b}=this;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{y:c&&a},0,ur).call(x=>x.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",l&&!ai(s)?_=>l[_]+g:m+g).attr("x2",u&&!ai(s)?s.bandwidth?_=>u[_]+s.bandwidth()-b:_=>u[_]-b:f-p-b).attr("y1",c?_=>c[_]:(h+d-y)/2).attr("y2",c?_=>c[_]:(h+d-y)/2).call(ye,this,n).call(ll,this,n,o)).node()}};function Zi(e,t){let{x:r=K,y:n,y1:i,y2:o,...s}=KI(t);return[i,o]=cq(n,i,o),new Gb(e,{...s,x:r,y1:i,y2:o})}function Ki(e,t){let{y:r=K,x:n,x1:i,x2:o,...s}=ZI(t);return[i,o]=cq(n,i,o),new Xb(e,{...s,y:r,x1:i,x2:o})}function cq(e,t,r){if(e==null){if(t===void 0){if(r!==void 0)return[0,r]}else if(r===void 0)return[0,t]}else{if(t===void 0)return r===void 0?[0,e]:[e,r];if(r===void 0)return[e,t]}return[t,r]}function Du(e,...t){let r=t.length;for(let n=0,i=!0;n<r;++n)typeof t[n]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(n,2,e[n]+t[n]+e[n+1]),t.splice(n,1),--n,--r);return n=>{let i=e[0];for(let o=0;o<r;++o)i+=t[o](n)+e[o+1];return i}}var Uct={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},hq="\xAD",xd=class extends Ft{constructor(t,r={}){let{x:n,y:i,text:o=si(t)&&wI(t)?K:nr,frameAnchor:s,textAnchor:a=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:c=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:l=1,lineWidth:u=1/0,textOverflow:f,monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:y,fontWeight:g,rotate:b}=r,[x,_]=Ae(b,0),[v,w]=Vct(p);if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:xV(x),optional:!0},text:{value:o,filter:Bb,optional:!0}},r,Uct),this.rotate=_,this.textAnchor=Ne(a,"middle"),this.lineAnchor=Yr(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+u,this.textOverflow=E3(f),this.monospace=!!d,this.fontFamily=vr(h),this.fontSize=w,this.fontStyle=vr(m),this.fontVariant=vr(y),this.fontWeight=vr(g),this.frameAnchor=Ea(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=B3(this),this.clipLine=O3(this)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,rotate:u,text:f,title:d,fontSize:h}=n,{rotate:p}=this,[m,y]=on(this,i);return pt("svg:g",o).call(Kt,this,i,o).call(D3,this,f,i).call(Pt,this,{x:c&&s,y:l&&a}).call(g=>g.selectAll().data(t).enter().append("text").call(Gt,this).call(Pct,this,f,d).attr("transform",Du`translate(${c?b=>c[b]:m},${l?b=>l[b]:y})${u?b=>` rotate(${u[b]})`:p?` rotate(${p})`:""}`).call(yt,"font-size",h&&(b=>h[b])).call(ye,this,n)).node()}};function E3(e){return e==null?null:Yr(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Pct(e,t,r,n){if(!r)return;let{lineAnchor:i,lineHeight:o,textOverflow:s,splitLines:a,clipLine:c}=t;e.each(function(l){let u=a(xs(r[l])??"").map(c),f=u.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let h=0;for(let p=0;p<f;++p){if(++h,!u[p])continue;let m=this.ownerDocument.createElementNS(So.svg,"tspan");m.setAttribute("x",0),p===h-1?m.setAttribute("y",`${(d+p)*o}em`):m.setAttribute("dy",`${h*o}em`),m.textContent=u[p],this.appendChild(m),h=0}}else d&&this.setAttribute("y",`${d*o}em`),this.textContent=u[0];if(s&&!n&&u[0]!==r[l]){let h=this.ownerDocument.createElementNS(So.svg,"title");h.textContent=r[l],this.appendChild(h)}})}function Oa(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=br(t,r)),new xd(e,{...n,x:t,y:r})}function tT(e,{x:t=K,...r}={}){return new xd(e,JI({...r,x:t}))}function eT(e,{y:t=K,...r}={}){return new xd(e,QI({...r,y:t}))}function D3(e,t,r){yt(e,"text-anchor",t.textAnchor),yt(e,"font-family",t.fontFamily),yt(e,"font-size",t.fontSize),yt(e,"font-style",t.fontStyle),yt(e,"font-variant",t.fontVariant===void 0?$ct(r):t.fontVariant),yt(e,"font-weight",t.fontWeight)}function $ct(e){return e&&(nl(e)||lr(e))?"tabular-nums":void 0}var zct=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Vct(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),zct.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function jct(e,t,r){let n=[],i,o=0;for(let[s,a,c]of qct(e)){if(i===void 0&&(i=s),o>i&&r(e,i,a)>t&&(n.push(e.slice(i,o)+(e[o-1]===hq?"-":"")),i=s),c){n.push(e.slice(i,a)),i=void 0;continue}o=a}return n}function*qct(e){let t=0,r=0,n=e.length;for(;r<n;){let i=1;switch(e[r]){case hq:case"-":++r,yield[t,r,!1],t=r;break;case" ":for(yield[t,r,!1];e[++r]===" ";);t=r;break;case"\r":e[r+1]===`
`&&++i;case`
`:yield[t,r,!0],r+=i,t=r;break;default:++r;break}}yield[t,r,!0]}var lq={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"\u2018":31,"\u2019":31,"\u201C":47,"\u201D":47,"\u2026":82};function rT(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=Gp(e,i))n+=lq[e[i]]??(mq(e,i)?120:lq.e);return n}function nT(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=Gp(e,i))n+=mq(e,i)?126:63;return n}function B3({monospace:e,lineWidth:t,textOverflow:r}){if(r!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);let n=e?nT:rT,i=t*100;return o=>jct(o,i,n)}function O3({monospace:e,lineWidth:t,textOverflow:r}){if(r==null||t==1/0)return o=>o;let n=e?nT:rT,i=t*100;switch(r){case"clip-start":return o=>fq(o,i,n,"");case"clip-end":return o=>uq(o,i,n,"");case"ellipsis-start":return o=>fq(o,i,n,bd);case"ellipsis-middle":return o=>Yct(o,i,n,bd);case"ellipsis-end":return o=>uq(o,i,n,bd)}}var bd="\u2026";function _d(e,t,r,n){let i=[],o=0;for(let s=0,a=0,c=e.length;s<c;s=a){a=Gp(e,s);let l=r(e,s,a);if(o+l>t){for(o+=n;o>t&&s>0;)a=s,s=i.pop(),o-=r(e,s,a);return[s,t-o]}o+=l,i.push(s)}return[-1,0]}function uq(e,t,r,n){e=e.trim();let i=r(n),[o]=_d(e,t,r,i);return o<0?e:e.slice(0,o).trimEnd()+n}function Yct(e,t,r,n){e=e.trim();let i=r(e);if(i<=t)return e;let o=r(n)/2,[s,a]=_d(e,t/2,r,o),[c]=_d(e,i-t/2-a+o,r,-o);return c<0?n:e.slice(0,s).trimEnd()+n+e.slice(Gp(e,c)).trimStart()}function fq(e,t,r,n){e=e.trim();let i=r(e);if(i<=t)return e;let o=r(n),[s]=_d(e,i-t+o,r,-o);return s<0?n:n+e.slice(Gp(e,s)).trimStart()}var M3=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,dq=/\p{Extended_Pictographic}/uy;function Gp(e,t){return t+=Wct(e,t)?2:1,Xct(e,t)&&(t=M3.lastIndex),Gct(e,t)?Gp(e,t+1):t}function pq(e,t){return e.charCodeAt(t)<128}function Wct(e,t){let r=e.charCodeAt(t);if(r>=55296&&r<56320){let n=e.charCodeAt(t+1);return n>=56320&&n<57344}return!1}function Gct(e,t){return e.charCodeAt(t)===8205}function Xct(e,t){return pq(e,t)?!1:(M3.lastIndex=t,M3.test(e))}function mq(e,t){return pq(e,t)?!1:(dq.lastIndex=t,dq.test(e))}var yq={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},gq=3.5,Hct=gq*5,bq={draw(e,t,r){let n=t*r/Hct;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-n,n-t),e.lineTo(0,-t),e.lineTo(n,n-t)}},xq={draw(e,t,r){e.moveTo(-r,0),e.lineTo(0,-t),e.lineTo(r,0)}},Zct=new Map([["arrow",bq],["spike",xq]]);function Kct(e){return e&&typeof e.draw=="function"}function Qct(e){if(Kct(e))return e;let t=Zct.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}var wd=class extends Ft{constructor(t,r={}){let{x:n,y:i,r:o=gq,length:s,rotate:a,shape:c=bq,anchor:l="middle",frameAnchor:u}=r,[f,d]=Ae(s,12),[h,p]=Ae(a,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:h,optional:!0}},r,yq),this.r=+o,this.length=d,this.rotate=p,this.shape=Qct(c),this.anchor=Yr(l,"anchor",["start","middle","end"]),this.frameAnchor=Ea(u)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,length:u,rotate:f}=n,{length:d,rotate:h,anchor:p,shape:m,r:y}=this,[g,b]=on(this,i);return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(x=>x.selectAll().data(t).enter().append("path").call(Gt,this).attr("transform",Du`translate(${c?_=>c[_]:g},${l?_=>l[_]:b})${f?_=>` rotate(${f[_]})`:h?` rotate(${h})`:""}${p==="start"?"":p==="end"?u?_=>` translate(0,${u[_]})`:` translate(0,${d})`:u?_=>` translate(0,${u[_]/2})`:` translate(0,${d/2})`}`).attr("d",u?_=>{let v=Jn();return m.draw(v,u[_],y),v}:(()=>{let _=Jn();return m.draw(_,d,y),_})()).call(ye,this,n)).node()}};function N3(e,t={}){let{x:r,y:n,...i}=t;return t.frameAnchor===void 0&&([r,n]=br(r,n)),new wd(e,{...i,x:r,y:n})}function iT(e,t={}){let{x:r=K,...n}=t;return new wd(e,{...n,x:r})}function oT(e,t={}){let{y:r=K,...n}=t;return new wd(e,{...n,y:r})}function _q(e,t={}){let{shape:r=xq,stroke:n=yq.stroke,strokeWidth:i=1,fill:o=n,fillOpacity:s=.3,anchor:a="start",...c}=t;return N3(e,{...c,shape:r,stroke:n,strokeWidth:i,fill:o,fillOpacity:s,anchor:a})}function Bu(e,t){return arguments.length<2&&!si(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function sT({anchor:e}={},t){return e===void 0?t[0]:Yr(e,"anchor",t)}function wq(e){return sT(e,["left","right"])}function vq(e){return sT(e,["right","left"])}function Sq(e){return sT(e,["bottom","top"])}function Iq(e){return sT(e,["top","bottom"])}function Hb(){let[e,t]=Bu(...arguments);return Tq("y",wq(t),e,t)}function aT(){let[e,t]=Bu(...arguments);return Tq("fy",vq(t),e,t)}function Zb(){let[e,t]=Bu(...arguments);return Aq("x",Sq(t),e,t)}function cT(){let[e,t]=Bu(...arguments);return Aq("fx",Iq(t),e,t)}function Tq(e,t,r,{color:n="currentColor",opacity:i=1,stroke:o=n,strokeOpacity:s=i,strokeWidth:a=1,fill:c=n,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="y"?6:0,tickPadding:m,tickRotate:y,x:g,margin:b,marginTop:x=b===void 0?20:b,marginRight:_=b===void 0?t==="right"?40:0:b,marginBottom:v=b===void 0?20:b,marginLeft:w=b===void 0?t==="left"?40:0:b,label:T,labelAnchor:E,labelArrow:I,labelOffset:B,...A}){return p=Wt(p),m=Wt(m),y=Wt(y),E!==void 0&&(E=Yr(E,"labelAnchor",["center","top","bottom"])),I=Rq(I),Ur(p&&!Se(o)?Jct(e,t,r,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,x:g,...A}):null,Se(c)?null:elt(e,t,r,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,x:g,marginTop:x,marginRight:_,marginBottom:v,marginLeft:w,...A}),!Se(c)&&T!==null?Oa([],Bq({fill:c,fillOpacity:l,...A},function(O,L,S,M,D){let C=M[e],{marginTop:U,marginRight:k,marginBottom:$,marginLeft:z}=e==="y"&&D.inset||D,V=E??(C.bandwidth?"center":"top"),Q=B??(t==="right"?k:z)-3;return V==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=V,this.frameAnchor=`${V}-${t}`,this.rotate=0),this.dy=V==="top"?3-U:V==="bottom"?$-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Fq(e,C,{anchor:t,label:T,labelAnchor:V,labelArrow:I})]}}}})):null)}function Aq(e,t,r,{color:n="currentColor",opacity:i=1,stroke:o=n,strokeOpacity:s=i,strokeWidth:a=1,fill:c=n,fillOpacity:l=i,textAnchor:u,textStroke:f,textStrokeOpacity:d,textStrokeWidth:h,tickSize:p=e==="x"?6:0,tickPadding:m,tickRotate:y,y:g,margin:b,marginTop:x=b===void 0?t==="top"?30:0:b,marginRight:_=b===void 0?20:b,marginBottom:v=b===void 0?t==="bottom"?30:0:b,marginLeft:w=b===void 0?20:b,label:T,labelAnchor:E,labelArrow:I,labelOffset:B,...A}){return p=Wt(p),m=Wt(m),y=Wt(y),E!==void 0&&(E=Yr(E,"labelAnchor",["center","left","right"])),I=Rq(I),Ur(p&&!Se(o)?tlt(e,t,r,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,y:g,...A}):null,Se(c)?null:rlt(e,t,r,{fill:c,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:h,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,y:g,marginTop:x,marginRight:_,marginBottom:v,marginLeft:w,...A}),!Se(c)&&T!==null?Oa([],Bq({fill:c,fillOpacity:l,...A},function(O,L,S,M,D){let C=M[e],{marginTop:U,marginRight:k,marginBottom:$,marginLeft:z}=e==="x"&&D.inset||D,V=E??(C.bandwidth?"center":"right"),Q=B??(t==="top"?U:$)-3;return V==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${V}`,this.textAnchor=V==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=V==="right"?k-3:V==="left"?3-z:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Fq(e,C,{anchor:t,label:T,labelAnchor:V,labelArrow:I})]}}}})):null)}function Jct(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetLeft:u=l,insetRight:f=l,dx:d=0,y:h=e==="y"?void 0:null,...p}){return Xp(oT,e,r,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:n,strokeLinecap:i,strokeLinejoin:o,facetAnchor:s,frameAnchor:a,y:h,...p,dx:t==="left"?+d-ur+ +u:+d+ur-f,anchor:"start",length:c,shape:t==="left"?slt:alt})}function tlt(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:c,inset:l=0,insetTop:u=l,insetBottom:f=l,dy:d=0,x:h=e==="x"?void 0:null,...p}){return Xp(iT,e,r,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:n,strokeLinejoin:o,strokeLinecap:i,facetAnchor:s,frameAnchor:a,x:h,...p,dy:t==="bottom"?+d-ur-f:+d+ur+ +u,anchor:"start",length:c,shape:t==="bottom"?ilt:olt})}function elt(e,t,r,{facetAnchor:n=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>60?4*Math.cos(s*Wp):0),text:c,textAnchor:l=Math.abs(s)>60?"middle":t==="left"?"end":"start",lineAnchor:u=s>60?"top":s<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:h=d,insetRight:p=d,dx:m=0,y=e==="y"?void 0:null,...g}){return Xp(eT,e,r,{ariaLabel:`${e}-axis tick label`},{facetAnchor:n,frameAnchor:i,text:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:s,y,...g,dx:t==="left"?+m-o-a+ +h:+m+ +o+ +a-p},function(b,x,_,v,w){f===void 0&&(this.fontVariant=Nq(b)),c===void 0&&(w.text=Oq(b,x,_,v,t))})}function rlt(e,t,r,{facetAnchor:n=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>=10?4*Math.cos(s*Wp):0),text:c,textAnchor:l=Math.abs(s)>=10?s<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(s)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:h=d,insetBottom:p=d,dy:m=0,x:y=e==="x"?void 0:null,...g}){return Xp(tT,e,r,{ariaLabel:`${e}-axis tick label`},{facetAnchor:n,frameAnchor:i,text:c===void 0?null:c,textAnchor:l,lineAnchor:u,fontVariant:f,rotate:s,x:y,...g,dy:t==="bottom"?+m+ +o+ +a-p:+m-o-a+ +h},function(b,x,_,v,w){f===void 0&&(this.fontVariant=Nq(b)),c===void 0&&(w.text=Oq(b,x,_,v,t))})}function lT(){let[e,t]=Bu(...arguments);return Mq("y",wq(t),e,t)}function uT(){let[e,t]=Bu(...arguments);return Mq("fy",vq(t),e,t)}function fT(){let[e,t]=Bu(...arguments);return Eq("x",Sq(t),e,t)}function dT(){let[e,t]=Bu(...arguments);return Eq("fx",Iq(t),e,t)}function Mq(e,t,r,{y:n=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:s=t==="right"?i:null,...a}){return Xp(Ki,e,r,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:n,x1:o,x2:s,...Dq(a)})}function Eq(e,t,r,{x:n=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:s=t==="bottom"?i:null,...a}){return Xp(Zi,e,r,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:n,y1:o,y2:s,...Dq(a)})}function Dq({color:e="currentColor",opacity:t=.1,stroke:r=e,strokeOpacity:n=t,strokeWidth:i=1,...o}){return{stroke:r,strokeOpacity:n,strokeWidth:i,...o}}function Bq({fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:l,clip:u=!1},f){return[,e]=cr(e),[,t]=Ae(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:c,shapeRendering:l,clip:u,initializer:f}}function Xp(e,t,r,n,i,o){let s;function a(u,f,d,h,p,m){let y=u==null&&(t==="fx"||t==="fy"),{[t]:g}=h;if(!g)throw new Error(`missing scale: ${t}`);let b=g.domain(),{interval:x,ticks:_,tickFormat:v,tickSpacing:w=t==="x"?80:35}=i;if(typeof _=="string"&&Lq(g)&&(x=_,_=void 0),_===void 0&&(_=Ma(x,g.type)??nlt(g,w)),u==null){if(si(_))u=Sr(_);else if(_u(_))u=F3(_,...Be(b));else if(g.interval){let E=g.interval;if(g.ticks){let[I,B]=Be(b),A=(B-I)/E[Tp];E=BN(E,A/_)??E,u=F3(E,I,B)}else{u=b;let I=u.length;E=BN(E,I/_)??E,E!==g.interval&&(u=F3(E,...Be(u)))}if(E===g.interval){let I=Math.round(u.length/_);I>1&&(u=u.filter((B,A)=>A%I===0))}}else g.ticks?u=g.ticks(_):u=b;if(!g.ticks&&u.length&&u!==b){let E=new Hn(b);u=u.filter(I=>E.has(I)),u.length||kn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?f=[oi(u)]:s[t]={scale:t,value:K}}o?.call(this,g,u,_,v,s);let T=Object.fromEntries(Object.entries(s).map(([E,I])=>[E,{...I,value:At(u,I.value)}]));return y&&(f=m.filterFacets(u,T)),{data:u,facets:f,channels:T}}let c=Qe(i).initializer,l=e(r,Qe({...i,initializer:a},c));return r==null?(s=l.channels,l.channels={}):s={},n!==void 0&&Object.assign(l,n),l.clip===void 0&&(l.clip=!1),l}function nlt(e,t){let[r,n]=Be(e.range());return(n-r)/t}function Oq(e,t,r,n,i){return{value:Kb(e,t,r,n,i)}}function Kb(e,t,r,n,i){return typeof n=="function"?n:n===void 0&&t&&lr(t)?fV(e.type,t,i)??xs:e.tickFormat?e.tickFormat(typeof r=="number"?r:null,n):n===void 0?xs:typeof n=="string"?(lr(e.domain())?va:Mo)(n):Jr(n)}function F3(e,t,r){return e.range(t,e.offset(e.floor(r)))}var ilt={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},olt={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},slt={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},alt={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Nq(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Fq(e,t,{anchor:r,label:n=t.label,labelAnchor:i,labelArrow:o}={}){if(!(n==null||n.inferred&&Lq(t)&&/^(date|time|year)$/i.test(n))){if(n=String(n),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(n)),!o)return n;if(o===!0){let s=CI(t);s&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===s<0?"left":"right":s<0?"up":"down")}switch(o){case"left":return`\u2190 ${n}`;case"right":return`${n} \u2192`;case"up":return r==="right"?`${n} \u2191`:`\u2191 ${n}`;case"down":return r==="right"?`${n} \u2193`:`\u2193 ${n}`}return n}}function Rq(e="auto"){return Se(e)?!1:typeof e=="boolean"?e:Yr(e,"labelArrow",["auto","up","right","down","left"])}function Lq(e){return lr(e.domain())}function kq(e,t){if(t==null)return t;let r=e(t);if(!r)throw new Error(`scale not found: ${t}`);return r}function Cq(e,{opacity:t,...r}={}){if(!Ba(e)&&!h3(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Pq(e,r,(n,i,o,s)=>n.append("svg").attr("width",o).attr("height",s).attr("fill",i.scale).attr("fill-opacity",Ae(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Uq(e,{fill:t=e.hint?.fill!==void 0?e.hint.fill:"none",fillOpacity:r=1,stroke:n=e.hint?.stroke!==void 0?e.hint.stroke:Se(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:s=4.5,...a}={},c){let[l,u]=cr(t),[f,d]=cr(n),h=kq(c,l),p=kq(c,f),m=s*s*Math.PI;return r=Ae(r)[1],i=Ae(i)[1],o=Ae(o)[1],Pq(e,a,(y,g,b,x)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",b).attr("height",x).attr("fill",l==="color"?_=>h.scale(_):u).attr("fill-opacity",r).attr("stroke",f==="color"?_=>p.scale(_):d).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",_=>{let v=Jn();return e.scale(_).draw(v,m),v}))}function Pq(e,t={},r){let{columns:n,tickFormat:i,fontVariant:o=XI(e),swatchSize:s=15,swatchWidth:a=s,swatchHeight:c=s,marginLeft:l=0,className:u,style:f,width:d}=t,h=Tu(t);u=zp(u),i=Kb(e.scale,e.domain,void 0,i);let p=pt("div",h).attr("class",`${u}-swatches ${u}-swatches-${n!=null?"columns":"wrap"}`),m;return n!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",n).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(r,e,a,c).call(y=>y.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(r,e,a,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(y=>y.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",l?`${+l}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Ne(o,"normal")).call(Vp,f).node()}var hT=new Map([["symbol",Uq],["color",Vq],["opacity",clt]]);function $q(e={}){for(let[t,r]of hT){let n=e[t];if(Ta(n)){let i=Tu(e),o;if(t==="symbol"){let{fill:s,stroke:a=s===void 0&&Ta(e.color)?"color":void 0}=e;o={fill:s,stroke:a}}return r(PI(t,n,o),R3(i,n,e),s=>Ta(e[s])?PI(s,e[s]):null)}}throw new Error("unknown legend type; no scale found")}function zq(e,t,r={}){return(n,i)=>{if(!hT.has(n))throw new Error(`unknown legend type: ${n}`);if(n in e)return hT.get(n)(e[n],R3(t,r[n],i),o=>e[o])}}function R3({className:e,...t},{label:r,ticks:n,tickFormat:i}={},o){return TV(o,{className:e,...t},{label:r,ticks:n,tickFormat:i})}function Vq(e,{legend:t=!0,...r}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Cq(e,r);case"ramp":return Jj(e,r);default:throw new Error(`unknown legend type: ${t}`)}}function clt({type:e,interpolate:t,...r},{legend:n=!0,color:i=jr(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(n===!0&&(n="ramp"),`${n}`.toLowerCase()!=="ramp")throw new Error(`${n} opacity legends are not supported`);return Vq({type:e,...r,interpolate:llt(i)},{legend:n,...o})}function llt(e){let{r:t,g:r,b:n}=jr(e)||jr(0,0,0);return i=>`rgba(${t},${r},${n},${i})`}function jq(e,t,r){let n=[];for(let[i,o]of hT){let s=r[i];if(s?.legend&&i in e){let a=o(e[i],R3(t,e[i],s),c=>e[c]);a!=null&&n.push(a)}}return n}var ult={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},flt={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1},Qb=class extends Ft{constructor(t={}){let{anchor:r=null,inset:n=0,insetTop:i=n,insetRight:o=n,insetBottom:s=n,insetLeft:a=n,rx:c,ry:l}=t;super(gu,void 0,t,r==null?ult:flt),this.anchor=LN(r,"anchor",["top","right","bottom","left"]),this.insetTop=Wt(i),this.insetRight=Wt(o),this.insetBottom=Wt(s),this.insetLeft=Wt(a),this.rx=Wt(c),this.ry=Wt(l)}render(t,r,n,i,o){let{marginTop:s,marginRight:a,marginBottom:c,marginLeft:l,width:u,height:f}=i,{anchor:d,insetTop:h,insetRight:p,insetBottom:m,insetLeft:y,rx:g,ry:b}=this,x=l+y,_=u-a-p,v=s+h,w=f-c-m;return pt(d?"svg:line":"svg:rect",o).datum(0).call(Kt,this,i,o).call(Gt,this).call(ye,this,n).call(Pt,this,{}).call(d==="left"?T=>T.attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",w):d==="right"?T=>T.attr("x1",_).attr("x2",_).attr("y1",v).attr("y2",w):d==="top"?T=>T.attr("x1",x).attr("x2",_).attr("y1",v).attr("y2",v):d==="bottom"?T=>T.attr("x1",x).attr("x2",_).attr("y1",w).attr("y2",w):T=>T.attr("x",x).attr("y",v).attr("width",_-x).attr("height",w-v).attr("rx",g).attr("ry",b)).node()}};function Hp(e){return new Qb(e)}var L3={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},dlt=new Set(["geometry","href","src","ariaLabel","scales"]),Jb=class extends Ft{constructor(t,r={}){r.tip&&(r={...r,tip:!1}),r.title===void 0&&si(t)&&wI(t)&&(r={...r,title:K});let{x:n,y:i,x1:o,x2:s,y1:a,y2:c,anchor:l,preferredAnchor:u="bottom",monospace:f,fontFamily:d=f?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:p,fontVariant:m,fontWeight:y,lineHeight:g=1,lineWidth:b=20,frameAnchor:x,format:_,textAnchor:v="start",textOverflow:w,textPadding:T=8,title:E,pointerSize:I=12,pathFilter:B="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=r;super(t,{x:{value:o!=null&&s!=null?null:n,scale:"x",optional:!0},y:{value:a!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:s==null},y1:{value:a,scale:"y",optional:c==null},x2:{value:s,scale:"x",optional:o==null},y2:{value:c,scale:"y",optional:a==null},title:{value:E,optional:!0}},r,L3),this.anchor=SI(l,"anchor"),this.preferredAnchor=SI(u,"preferredAnchor"),this.frameAnchor=Ea(x),this.textAnchor=Ne(v,"middle"),this.textPadding=+T,this.pointerSize=+I,this.pathFilter=vr(B),this.lineHeight=+g,this.lineWidth=+b,this.textOverflow=E3(w),this.monospace=!!f,this.fontFamily=vr(d),this.fontSize=Wt(h),this.fontStyle=vr(p),this.fontVariant=vr(m),this.fontWeight=vr(y);for(let A in L3)A in this.channels&&(this[A]=L3[A]);this.splitLines=B3(this),this.clipLine=O3(this),this.format={..._}}render(t,r,n,i,o){let s=this,{x:a,y:c,fx:l,fy:u}=r,{ownerSVGElement:f,document:d}=o,{anchor:h,monospace:p,lineHeight:m,lineWidth:y}=this,{textPadding:g,pointerSize:b,pathFilter:x}=this,{marginTop:_,marginLeft:v}=i,{x1:w,y1:T,x2:E,y2:I,x:B=w??E,y:A=T??I}=n,O=l?l(t.fx)-v:0,L=u?u(t.fy)-_:0,[S,M]=on(this,i),D=w3(n,S),C=v3(n,M),U=p?nT:rT,k=U(bd),$,z;"title"in n?($=n.channels,z=glt):($=ylt.call(this,n,r),z=blt);let V=pt("svg:g",o).call(Kt,this,i,o).call(D3,this).call(Pt,this,{x:B&&a,y:A&&c}).call(ct=>ct.selectAll().data(t).enter().append("g").attr("transform",ut=>`translate(${Math.round(D(ut))},${Math.round(C(ut))})`).call(Gt,this).call(ut=>ut.append("path").attr("filter",x)).call(ut=>ut.append("text").each(function(X){let lt=ae(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");let Y=z.call(s,X,t,$,r,n);if(typeof Y=="string")for(let tt of s.splitLines(Y))Q(lt,{value:s.clipLine(tt)});else{let tt=new Set;for(let at of Y){let{label:j=""}=at;j&&tt.has(j)||(tt.add(j),Q(lt,at))}}})));function Q(ct,{label:ut,value:X,color:lt,opacity:Y}){ut??="",X??="";let tt=lt!=null||Y!=null,at,j=y*100,[Qt]=_d(ut,j,U,k);if(Qt>=0)ut=ut.slice(0,Qt).trimEnd()+bd,at=X.trim(),X="";else{(ut||!X&&!tt)&&(X=" "+X);let[de]=_d(X,j-U(ut),U,k);de>=0&&(at=X.trim(),X=X.slice(0,de).trimEnd()+bd)}let gt=ct.append("tspan").attr("x",0).attr("dy",`${m}em`).text("\u200B");ut&&gt.append("tspan").attr("font-weight","bold").text(ut),X&&gt.append(()=>d.createTextNode(X)),tt&&gt.append("tspan").text(" \u25A0").attr("fill",lt).attr("fill-opacity",Y).style("user-select","none"),at&&gt.append("title").text(at)}function st(){let{width:ct,height:ut}=i.facet??i;V.selectChildren().each(function(X){let{x:lt,width:Y,height:tt}=this.getBBox();Y=Math.round(Y),tt=Math.round(tt);let at=h;if(at===void 0){let gt=D(X)+O,de=C(X)+L,pe=gt+Y+b+g*2<ct,nt=gt-Y-b-g*2>0,Me=de+tt+b+g*2<ut,Ai=de-tt-b-g*2>0;at=pe&&nt?Me&&Ai?s.preferredAnchor:Ai?"bottom":"top":Me&&Ai?pe?"left":"right":(pe||nt)&&(Me||Ai)?`${Ai?"bottom":"top"}-${pe?"left":"right"}`:s.preferredAnchor}let j=this.firstChild,Qt=this.lastChild;if(j.setAttribute("d",mlt(at,b,g,Y,tt)),lt)for(let gt of Qt.childNodes)gt.setAttribute("x",-lt);Qt.setAttribute("y",`${+hlt(at,Qt.childNodes.length,m).toFixed(6)}em`),Qt.setAttribute("transform",`translate(${plt(at,b,g,Y,tt)})`)}),V.attr("visibility",null)}return t.length&&(V.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(st):typeof requestAnimationFrame<"u"&&requestAnimationFrame(st)),V.node()}};function mT(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=br(t,r)),new Jb(e,{...n,x:t,y:r})}function hlt(e,t,r){return/^top(?:-|$)/.test(e)?.94-r:-.29-t*r}function plt(e,t,r,n,i){switch(e){case"middle":return[-n/2,i/2];case"top-left":return[r,t+r];case"top":return[-n/2,t/2+r];case"top-right":return[-n-r,t+r];case"right":return[-t/2-n-r,i/2];case"bottom-left":return[r,-t-r];case"bottom":return[-n/2,-t/2-r];case"bottom-right":return[-n-r,-t-r];case"left":return[r+t/2,i/2]}}function mlt(e,t,r,n,i){let o=n+r*2,s=i+r*2;switch(e){case"middle":return`M${-o/2},${-s/2}h${o}v${s}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${s}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${s}h${-o}v${-s}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${s}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-s/2}h${-o}v${s}h${o}v${t/2-s/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-s}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-s}h${-o}v${s}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-s}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-s/2}h${o}v${s}h${-o}v${t/2-s/2}z`}}function ylt({channels:e},t){let r={},n=this.format;n=qq(n,e,"x"),n=qq(n,e,"y"),this.format=n;for(let i in n){let o=n[i];if(!(o===null||o===!1))if(i==="fx"||i==="fy")r[i]=!0;else{let s=zb(e,i);s&&(r[i]=s)}}for(let i in e){if(i in r||i in n||dlt.has(i))continue;let o=zb(e,i);o&&(r[i]=o)}this.facet&&(t.fx&&!("fx"in n)&&(r.fx=!0),t.fy&&!("fy"in n)&&(r.fy=!0));for(let i in r){let o=this.format[i];if(typeof o=="string"){let s=r[i]?.value??t[i]?.domain()??[];this.format[i]=(lr(s)?va:Mo)(o)}else if(o===void 0||o===!0){let s=t[i];this.format[i]=s?.bandwidth?Kb(s,s.domain()):xs}}return r}function qq(e,t,r){if(!(r in e))return e;let n=`${r}1`,i=`${r}2`;if((n in e||!(n in t))&&(i in e||!(i in t)))return e;let o=Object.entries(e),s=e[r];return o.splice(o.findIndex(([a])=>a===r)+1,0,[n,s],[i,s]),Object.fromEntries(o)}function glt(e,t,{title:r}){return xs(r.value[e],e)}function*blt(e,t,r,n,i){for(let o in r){if(o==="fx"||o==="fy"){yield{label:pT(n,r,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in r||o==="y1"&&"y2"in r)continue;let s=r[o];if(o==="x2"&&"x1"in r)yield{label:Wq(n,r,"x"),value:Yq(this.format.x2,r.x1,s,e)};else if(o==="y2"&&"y1"in r)yield{label:Wq(n,r,"y"),value:Yq(this.format.y2,r.y1,s,e)};else{let a=s.value[e],c=s.scale;if(!wr(a)&&c==null)continue;yield{label:pT(n,r,o),value:this.format[o](a,e),color:c==="color"?i[o][e]:null,opacity:c==="opacity"?i[o][e]:null}}}}function Yq(e,t,r,n){return r.hint?.length?`${e(r.value[n]-t.value[n],n)}`:`${e(t.value[n],n)}\u2013${e(r.value[n],n)}`}function Wq(e,t,r){let n=pT(e,t,`${r}1`,r),i=pT(e,t,`${r}2`,r);return n===i?n:`${n}\u2013${i}`}function pT(e,t,r,n=r){let i=t[r],o=e[i?.scale??r];return String(o?.label??i?.label??n)}function ex(e={}){let{facet:t,style:r,title:n,subtitle:i,caption:o,ariaLabel:s,ariaDescription:a}=e,c=zp(e.className),l=e.marks===void 0?[]:Xq(e.marks);l.push(...Tlt(l));let u=Slt(t,e),f=new Map;for(let k of l){let $=Hq(k,u,e);$&&f.set(k,$)}let d=new Map;u&&tx(d,[u],e),tx(d,f,e);let h=Xq(Alt(l,d,e));for(let k of h){let $=Hq(k,u,e);$&&f.set(k,$)}l.unshift(...h);let p=Gj(d,e);if(p!==void 0){let k=u?GI(p,u):void 0;for(let z of l){if(z.facet===null||z.facet==="super")continue;let V=f.get(z);V!==void 0&&(V.facetsIndex=z.fx!=null||z.fy!=null?GI(p,V):k)}let $=new Set;for(let{facetsIndex:z}of f.values())z?.forEach((V,Q)=>{V?.length>0&&$.add(Q)});p.forEach(0<$.size&&$.size<p.length?(z,V)=>z.empty=!$.has(V):z=>z.empty=!1);for(let z of l)if(z.facet==="exclude"){let V=f.get(z);V!==void 0&&(V.facetsIndex=Zj(V.facetsIndex))}}for(let k of Fe.keys())Ta(e[k])&&k!=="fx"&&k!=="fy"&&d.set(k,[]);let m=new Map;for(let k of l){if(m.has(k))throw new Error("duplicate mark; each mark must be unique");let{facetsIndex:$,channels:z}=f.get(k)??{},{data:V,facets:Q,channels:st}=k.initialize($,z,e);U3(st,e),m.set(k,{data:V,facets:Q,channels:st})}let y=qb(tx(d,m,e),e),g=Yj(y,l,e);Lj(y,g);let b=f3(y),{fx:x,fy:_}=b,v=x||_?d3(y,g):g,w=x||_?Flt(b,g):g,T=Tu(e),E=T.document,I=kc("svg").call(E.documentElement),B=I;T.ownerSVGElement=I,T.className=c,T.projection=XV(e,v),T.filterFacets=(k,$)=>GI(p,{channels:$,groups:YI(k,$)}),T.getMarkState=k=>{let $=m.get(k),z=f.get(k);return{...$,channels:{...$.channels,...z?.channels}}},T.dispatchValue=k=>{B.value!==k&&(B.value=k,B.dispatchEvent(new Event("input",{bubbles:!0})))};let A=new Set;for(let[k,$]of m)if(k.initializer!=null){let z=k.facet==="super"?w:v,V=k.initializer($.data,$.facets,$.channels,b,z,T);if(V.data!==void 0&&($.data=V.data),V.facets!==void 0&&($.facets=V.facets),V.channels!==void 0){let{fx:Q,fy:st,...ct}=V.channels;vlt(ct),Object.assign($.channels,ct);for(let ut of Object.values(ct)){let{scale:X}=ut;X!=null&&!MV(Fe.get(X))&&(Qq(ut,e),A.add(X))}(Q!=null||st!=null)&&f.set(k,!0)}}if(A.size){let k=new Map;tx(k,m,e,Q=>A.has(Q)),tx(d,m,e,Q=>A.has(Q));let $=Nlt(qb(k,e),y),{scales:z,...V}=f3($);Object.assign(y,$),Object.assign(b,V),Object.assign(b.scales,z)}let O,L;p!==void 0&&(O={x:x?.domain(),y:_?.domain()},p=Xj(p,O),L=Hj(x,_,g));for(let[k,$]of m)$.values=k.scale($.channels,b,T);let{width:S,height:M}=g;ae(I).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",S).attr("height",M).attr("viewBox",`0 0 ${S} ${M}`).attr("aria-label",s).attr("aria-description",a).call(k=>k.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(Vp,r);for(let k of l){let{channels:$,values:z,facets:V}=m.get(k);if(p===void 0||k.facet==="super"){let Q=null;if(V&&(Q=V[0],Q=k.filter(Q,$,z),Q.length===0))continue;let st=k.render(Q,b,z,w,T);if(st==null)continue;I.appendChild(st)}else{let Q;for(let st of p){if(!(k.facetAnchor?.(p,O,st)??!st.empty))continue;let ct=null;if(V){let X=f.has(k);if(ct=V[X?st.i:0],ct=k.filter(ct,$,z),ct.length===0)continue;!X&&ct===V[0]&&(ct=el(ct)),ct.fx=st.x,ct.fy=st.y,ct.fi=st.i}let ut=k.render(ct,b,z,v,T);if(ut!=null){(Q??=ae(I).append("g")).append(()=>ut).datum(st);for(let X of["aria-label","aria-description","aria-hidden","transform"])ut.hasAttribute(X)&&(Q.attr(X,ut.getAttribute(X)),ut.removeAttribute(X))}}Q?.selectChildren().attr("transform",L)}}let D=jq(y,T,e),{figure:C=n!=null||i!=null||o!=null||D.length>0}=e;C&&(B=E.createElement("figure"),B.className=`${c}-figure`,B.style.maxWidth="initial",n!=null&&B.append(Gq(E,n,"h2")),i!=null&&B.append(Gq(E,i,"h3")),B.append(...D,I),o!=null&&B.append(xlt(E,o))),B.scale=Pj(b.scales),B.legend=zq(y,T,e);let U=YV();return U>0&&ae(I).append("text").attr("x",S).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("\u26A0\uFE0F").append("title").text(`${U.toLocaleString("en-US")} warning${U===1?"":"s"}. Please check the console.`),B}function Gq(e,t,r){if(t.ownerDocument)return t;let n=e.createElement(r);return n.append(t),n}function xlt(e,t){let r=e.createElement("figcaption");return r.append(t),r}function _lt({marks:e=[],...t}={}){return ex({...t,marks:[...e,this]})}Ft.prototype.plot=_lt;function Xq(e){return e.flat(1/0).filter(t=>t!=null).map(wlt)}function wlt(e){return typeof e.render=="function"?e:new C3(e)}var C3=class extends Ft{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}};function U3(e,t){for(let r in e)Qq(e[r],t);return e}function Qq(e,t){let{scale:r,transform:n=!0}=e;if(r==null||!n)return;let{type:i,percent:o,interval:s,transform:a=o?c=>c*100:PN(s,i)}=t[r]??{};a!=null&&(e.value=fe(e.value,a),e.transform=!1)}function vlt(e){for(let t in e)t3(t,e[t])}function tx(e,t,r,n=pV){for(let{channels:i}of t.values())for(let o in i){let s=i[o],{scale:a}=s;if(a!=null&&n(a))if(a==="projection"){if(!KV(r)){let c=r.x?.domain===void 0,l=r.y?.domain===void 0;if(c||l){let[u,f]=JV(s);c&&k3(e,"x",u),l&&k3(e,"y",f)}}}else k3(e,a,s)}return e}function k3(e,t,r){let n=e.get(t);n!==void 0?n.push(r):e.set(t,[r])}function Slt(e,t){if(e==null)return;let{x:r,y:n}=e;if(r==null&&n==null)return;let i=Sr(e.data);if(i==null)throw new Error("missing facet data");let o={};r!=null&&(o.fx=Rp(i,{value:r,scale:"fx"})),n!=null&&(o.fy=Rp(i,{value:n,scale:"fy"})),U3(o,t);let s=YI(i,o);return{channels:o,groups:s,data:e.data}}function Hq(e,t,r){if(e.facet===null||e.facet==="super")return;let{fx:n,fy:i}=e;if(n!=null||i!=null){let c=Sr(e.data??n??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;let l={};return n!=null&&(l.fx=Rp(c,{value:n,scale:"fx"})),i!=null&&(l.fy=Rp(c,{value:i,scale:"fy"})),U3(l,r),{channels:l,groups:YI(c,l)}}if(t===void 0)return;let{channels:o,groups:s,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:o,groups:s};a.length>0&&(s.size>1||s.size===1&&o.fx&&o.fy&&[...s][0][1].size>1)&&Sr(e.data)?.length===a.length&&kn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn\u2019t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Ilt(e,t={}){return Qe({...t,x:null,y:null},(r,n,i,o,s,a)=>a.getMarkState(e))}function Tlt(e){let t=[];for(let r of e){let n=r.tip;if(n){n===!0?n={}:typeof n=="string"&&(n={pointer:n});let{pointer:i,preferredAnchor:o}=n;i=/^x$/i.test(i)?Yp:/^y$/i.test(i)?md:qp,n=i(Ilt(r,n)),n.title=null,o===void 0&&(n.preferredAnchor=i===md?"left":"bottom");let s=mT(r.data,n);s.facet=r.facet,s.facetAnchor=r.facetAnchor,t.push(s)}}return t}function Alt(e,t,r){let{projection:n,x:i={},y:o={},fx:s={},fy:a={},axis:c,grid:l,facet:u={},facet:{axis:f=c,grid:d}=u,x:{axis:h=c,grid:p=h===null?null:l}=i,y:{axis:m=c,grid:y=m===null?null:l}=o,fx:{axis:g=f,grid:b=g===null?null:d}=s,fy:{axis:x=f,grid:_=x===null?null:d}=a}=r;(n||!Ta(i)&&!Zq("x",e))&&(h=p=null),(n||!Ta(o)&&!Zq("y",e))&&(m=y=null),t.has("fx")||(g=b=null),t.has("fy")||(x=_=null),h===void 0&&(h=!bT(e,"x")),m===void 0&&(m=!bT(e,"y")),g===void 0&&(g=!bT(e,"fx")),x===void 0&&(x=!bT(e,"fy")),h===!0&&(h="bottom"),m===!0&&(m="left"),g===!0&&(g=h==="top"||h===null?"bottom":"top"),x===!0&&(x=m==="right"||m===null?"left":"right");let v=[];return gT(v,_,uT,a),yT(v,x,aT,"right","left",u,a),gT(v,b,dT,s),yT(v,g,cT,"top","bottom",u,s),gT(v,y,lT,o),yT(v,m,Hb,"left","right",r,o),gT(v,p,fT,i),yT(v,h,Zb,"bottom","top",r,i),v}function yT(e,t,r,n,i,o,s){if(!t)return;let a=Mlt(t);s=Elt(a?n:t,o,s);let{line:c}=s;(r===Hb||r===Zb)&&c&&!il(c)&&e.push(Hp(Dlt(s))),e.push(r(s)),a&&e.push(r({...s,anchor:i,label:null}))}function gT(e,t,r,n){!t||il(t)||e.push(r(Blt(t,n)))}function Mlt(e){return/^\s*both\s*$/i.test(e)}function Elt(e,t,{line:r=t.line,ticks:n,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:d=t.label,labelAnchor:h,labelArrow:p=t.labelArrow,labelOffset:m}){return{anchor:e,line:r,ticks:n,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:f,label:d,labelAnchor:h,labelArrow:p,labelOffset:m}}function Dlt(e){let{anchor:t,line:r}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:r===!0?void 0:r}}function Blt(e,{stroke:t=wu(e)?e:void 0,ticks:r=Olt(e)?e:void 0,tickSpacing:n,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:r,tickSpacing:n,ariaLabel:i,ariaDescription:o}}function Olt(e){switch(typeof e){case"number":return!0;case"string":return!wu(e)}return si(e)||typeof e?.range=="function"}function bT(e,t){let r=`${t}-axis `;return e.some(n=>n.ariaLabel?.startsWith(r))}function Zq(e,t){for(let r of t)for(let n in r.channels){let{scale:i}=r.channels[n];if(i===e||i==="projection")return!0}return!1}function Nlt(e,t){for(let r in e){let n=e[r],i=t[r];n.label===void 0&&i&&(n.label=i.label)}return e}function Flt({fx:e,fy:t},r){let{marginTop:n,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:c}=UI(r),l=e&&Kq(e),u=t&&Kq(t);return{marginTop:t?u[0]:n,marginRight:e?a-l[1]:i,marginBottom:t?c-u[1]:o,marginLeft:e?l[0]:s,inset:{marginTop:r.marginTop,marginRight:r.marginRight,marginBottom:r.marginBottom,marginLeft:r.marginLeft},width:a,height:c}}function Kq(e){let t=e.domain(),r=e(t[0]),n=e(t[t.length-1]);return n<r&&([r,n]=[n,r]),[r,n+e.bandwidth()]}var Rlt=new Map([["basis",oN],["basis-closed",sN],["basis-open",aN],["bundle",cN],["bump-x",tN],["bump-y",eN],["cardinal",lN],["cardinal-closed",uN],["cardinal-open",fN],["catmull-rom",dN],["catmull-rom-closed",hN],["catmull-rom-open",pN],["linear",Kc],["linear-closed",mN],["monotone-x",gN],["monotone-y",bN],["natural",xN],["step",_N],["step-after",vN],["step-before",wN]]);function rx(e=Kc,t){if(typeof e=="function")return e;let r=Rlt.get(`${e}`.toLowerCase());if(!r)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in r)return r.beta(t);if("tension"in r)return r.tension(t);if("alpha"in r)return r.alpha(t)}return r}function xT(e=Ou,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Ou:rx(e,t)}function Ou(e){return Kc(e)}function Na(e={y:"count"},t={}){[e,t]=$3(e,t);let{x:r,y:n}=t;return P3(_T(r,t,K),null,null,n,e,yd(t))}function Fa(e={x:"count"},t={}){[e,t]=$3(e,t);let{x:r,y:n}=t;return P3(null,_T(n,t,K),r,null,e,gd(t))}function ul(e={fill:"count"},t={}){[e,t]=$3(e,t);let{x:r,y:n}=Llt(t);return P3(r,n,null,null,e,yd(gd(t)))}function eY(e,t,r={}){if(r?.interval==null)return r;let{reduce:n=OI}=r,i={filter:null};return r[t]!=null&&(i[t]=n),r[`${t}1`]!=null&&(i[`${t}1`]=n),r[`${t}2`]!=null&&(i[`${t}2`]=n),e(i,r)}function Zp(e={}){return eY(Na,"y",_s(e,"x"))}function Kp(e={}){return eY(Fa,"x",_s(e,"y"))}function P3(e,t,r,n,{data:i=BI,filter:o=Cb,sort:s,reverse:a,...c}={},l={}){e=Jq(e),t=Jq(t),c=klt(c,l),i=iY(i,K),s=s==null?void 0:rY("sort",s,l),o=o==null?void 0:nY("filter",o,l),r!=null&&Da(c,"x","x1","x2")&&(r=null),n!=null&&Da(c,"y","y1","y2")&&(n=null);let[u,f]=vn(e),[d,h]=vn(e),[p,m]=vn(t),[y,g]=vn(t),[b,x]=r!=null?[r,"x"]:n!=null?[n,"y"]:[],[_,v]=vn(b),{x:w,y:T,z:E,fill:I,stroke:B,x1:A,x2:O,y1:L,y2:S,domain:M,cumulative:D,thresholds:C,interval:U,...k}=l,[$,z]=vn(E),[V]=cr(I),[Q]=cr(B),[st,ct]=vn(V),[ut,X]=vn(Q);return{..."z"in l&&{z:$||E},..."fill"in l&&{fill:st||I},..."stroke"in l&&{stroke:ut||B},...rn(k,(lt,Y,tt)=>{let at=ud(At(lt,b),tt?.[x]),j=At(lt,E),Qt=At(lt,V),gt=At(lt,Q),de=$b(c,{z:j,fill:Qt,stroke:gt}),pe=[],nt=[],Me=at&&v([]),Ai=j&&z([]),Ss=Qt&&ct([]),JG=gt&&X([]),ik=e&&f([]),tX=e&&h([]),ok=t&&m([]),eX=t&&g([]),rX=Plt(e,t,lt),nX=0;for(let Od of c)Od.initialize(lt);s&&s.initialize(lt),o&&o.initialize(lt);for(let Od of Y){let sk=[];for(let Nd of c)Nd.scope("facet",Od);s&&s.scope("facet",Od),o&&o.scope("facet",Od);for(let[Nd,iX]of vu(Od,de))for(let[oX,t_]of vu(iX,at))for(let[Is,Pa]of rX(t_))if(de&&(Pa.z=Nd),!(o&&!o.reduce(Is,Pa))){sk.push(nX++),nt.push(i.reduceIndex(Is,lt,Pa)),at&&Me.push(oX),j&&Ai.push(de===j?Nd:j[(Is.length>0?Is:t_)[0]]),Qt&&Ss.push(de===Qt?Nd:Qt[(Is.length>0?Is:t_)[0]]),gt&&JG.push(de===gt?Nd:gt[(Is.length>0?Is:t_)[0]]),ik&&(ik.push(Pa.x1),tX.push(Pa.x2)),ok&&(ok.push(Pa.y1),eX.push(Pa.y2));for(let sX of c)sX.reduce(Is,Pa);s&&s.reduce(Is,Pa)}pe.push(sk)}return KN(pe,s,a),{data:nt,facets:pe}}),...!Da(c,"x")&&(u?{x1:u,x2:d,x:Dp(u,d)}:{x:w,x1:A,x2:O}),...!Da(c,"y")&&(p?{y1:p,y2:y,y:Dp(p,y)}:{y:T,y1:L,y2:S}),..._&&{[x]:_},...Object.fromEntries(c.map(({name:lt,output:Y})=>[lt,Y]))}}function $3({cumulative:e,domain:t,thresholds:r,interval:n,...i},o){return[i,{cumulative:e,domain:t,thresholds:r,interval:n,...o}]}function _T(e,{cumulative:t,domain:r,thresholds:n,interval:i},o){return e={...Fo(e)},e.domain===void 0&&(e.domain=r),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=n),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=z3(e.thresholds,e.interval),e}function Llt(e){let{x:t,y:r}=e;return t=_T(t,e),r=_T(r,e),[t.value,r.value]=br(t.value,r.value),{x:t,y:r}}function Jq(e){if(e==null)return;let{value:t,cumulative:r,domain:n=Be,thresholds:i}=e,o=s=>{let a=At(s,t),c;if(lr(a)||Ult(i)){a=fe(a,RN,Float64Array);let[u,f]=typeof n=="function"?n(a):n,d=typeof i=="function"&&!_u(i)?i(a,u,f):i;typeof d=="number"&&(d=ob(u,f,d)),_u(d)&&(n===Be&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f))),c=d}else{a=Cr(a);let[u,f]=typeof n=="function"?n(a):n,d=typeof i=="function"&&!_u(i)?i(a,u,f):i;if(typeof d=="number")if(n===Be){let h=Fc(u,f,d);if(isFinite(h))if(h>0){let p=Math.round(u/h),m=Math.round(f/h);p*h<=u||--p,m*h>f||++m;let y=m-p+1;d=new Float64Array(y);for(let g=0;g<y;++g)d[g]=(p+g)*h}else if(h<0){h=-h;let p=Math.round(u*h),m=Math.round(f*h);p/h<=u||--p,m/h>f||++m;let y=m-p+1;d=new Float64Array(y);for(let g=0;g<y;++g)d[g]=(p+g)/h}else d=[u];else d=[u]}else d=gn(u,f,d);else _u(d)&&(n===Be&&(u=d.floor(u),f=d.offset(d.floor(f))),d=d.range(u,d.offset(f)));c=d}let l=[];if(c.length===1)l.push([c[0],c[0]]);else for(let u=1;u<c.length;++u)l.push([c[u-1],c[u]]);return l.bin=(r<0?zlt:r>0?$lt:V3)(l,c,a),l};return o.label=Sn(t),o}function z3(e,t,r=tY){if(e===void 0)return t===void 0?r:Ma(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return dv;case"scott":return t0;case"sturges":return Ql;case"auto":return tY}return Fb(e)}return e}function klt(e,t){return HN(e,t,rY)}function rY(e,t,r){return EI(e,t,r,nY)}function nY(e,t,r){return DI(e,t,r,iY)}function iY(e,t){return Fp(e,t,Clt)}function Clt(e){switch(`${e}`.toLowerCase()){case"x":return Vlt;case"x1":return qlt;case"x2":return Ylt;case"y":return jlt;case"y1":return Wlt;case"y2":return Glt;case"z":return QN}throw new Error(`invalid bin reduce: ${e}`)}function tY(e,t,r){return Math.min(200,t0(e,t,r))}function Ult(e){return bV(e)||si(e)&&lr(e)}function Plt(e,t,r){let n=e?.(r),i=t?.(r);return n&&i?function*(o){let s=n.bin(o);for(let[a,[c,l]]of n.entries()){let u=i.bin(s[a]);for(let[f,[d,h]]of i.entries())yield[u[f],{data:r,x1:c,y1:d,x2:l,y2:h}]}}:n?function*(o){let s=n.bin(o);for(let[a,[c,l]]of n.entries())yield[s[a],{data:r,x1:c,x2:l}]}:function*(o){let s=i.bin(o);for(let[a,[c,l]]of i.entries())yield[s[a],{data:r,y1:c,y2:l}]}}function V3(e,t,r){return t=Cr(t),n=>{let i=e.map(()=>[]);for(let o of n)i[Oc(t,r[o])-1]?.push(o);return i}}function $lt(e,t,r){let n=V3(e,t,r);return i=>{let o=n(i);for(let s=1,a=o.length;s<a;++s){let c=o[s-1],l=o[s];for(let u of c)l.push(u)}return o}}function zlt(e,t,r){let n=V3(e,t,r);return i=>{let o=n(i);for(let s=o.length-2;s>=0;--s){let a=o[s+1],c=o[s];for(let l of a)c.push(l)}return o}}function oY(e,t){let r=(+e+ +t)/2;return e instanceof Date?new Date(r):r}var Vlt={reduceIndex(e,t,{x1:r,x2:n}){return oY(r,n)}},jlt={reduceIndex(e,t,{y1:r,y2:n}){return oY(r,n)}},qlt={reduceIndex(e,t,{x1:r}){return r}},Ylt={reduceIndex(e,t,{x2:r}){return r}},Wlt={reduceIndex(e,t,{y1:r}){return r}},Glt={reduceIndex(e,t,{y2:r}){return r}};function Qp(e={}){return kN(e)?e:{...e,x:K}}function Jp(e={}){return CN(e)?e:{...e,y:K}}function sY(e,t){if(t.length===1)return{data:e,facets:t};let r=e.length,n=new Uint8Array(r),i=0;for(let a of t)for(let c of a)n[c]&&++i,n[c]=1;if(i===0)return{data:e,facets:t};e=xu(e);let o=e[ON]=new Uint32Array(r+i);t=t.map(a=>xu(a,Uint32Array));let s=r;n.fill(0);for(let a of t)for(let c=0,l=a.length;c<l;++c){let u=a[c];n[u]?(a[c]=s,e[s]=e[u],o[s]=u,++s):o[u]=u,n[u]=1}return{data:e,facets:t}}function j3(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{y1:r,y:n=r,x:i,...o}=t,[s,a,c,l]=nm(n,i,"y","x",e,o);return{...s,y1:r,y:a,x1:c,x2:l,x:Dp(c,l)}}function lY(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{y1:r,y:n=r,x:i}=t,[o,s,a]=nm(n,i,"y","x",e,t);return{...o,y1:r,y:s,x:a}}function uY(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{y1:r,y:n=r,x:i}=t,[o,s,,a]=nm(n,i,"y","x",e,t);return{...o,y1:r,y:s,x:a}}function q3(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{x1:r,x:n=r,y:i,...o}=t,[s,a,c,l]=nm(n,i,"x","y",e,o);return{...s,x1:r,x:a,y1:c,y2:l,y:Dp(c,l)}}function fY(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{x1:r,x:n=r,y:i}=t,[o,s,a]=nm(n,i,"x","y",e,t);return{...o,x1:r,x:s,y:a}}function dY(e={},t={}){arguments.length===1&&([e,t]=rm(e));let{x1:r,x:n=r,y:i}=t,[o,s,,a]=nm(n,i,"x","y",e,t);return{...o,x1:r,x:s,y:a}}function tm({x:e,x1:t,x2:r,...n}={}){return n=_s(n,"y"),t===void 0&&r===void 0?j3({x:e,...n}):([t,r]=UN(e,t,r),{...n,x1:t,x2:r})}function em({y:e,y1:t,y2:r,...n}={}){return n=_s(n,"x"),t===void 0&&r===void 0?q3({y:e,...n}):([t,r]=UN(e,t,r),{...n,y1:t,y2:r})}function rm(e){let{offset:t,order:r,reverse:n,...i}=e;return[{offset:t,order:r,reverse:n},i]}var Xlt={length:!0};function nm(e,t=Rb,r,n,{offset:i,order:o,reverse:s},a){if(t===null)throw new Error(`stack requires ${n}`);let c=Ln(a),[l,u]=vn(e),[f,d]=en(t),[h,p]=en(t);return f.hint=h.hint=Xlt,i=Hlt(i),o=Qlt(o,i,n),[rn(a,(m,y,g)=>{({data:m,facets:y}=sY(m,y));let b=e==null?void 0:u(ud(At(m,e),g?.[r])),x=At(m,t,Float64Array),_=At(m,c),v=o&&o(m,b,x,_),w=m.length,T=d(new Float64Array(w)),E=p(new Float64Array(w)),I=[];for(let B of y){let A=b?Array.from(Xr(B,O=>b[O]).values()):[B];if(v)for(let O of A)O.sort(v);for(let O of A){let L=0,S=0;s&&O.reverse();for(let M of O){let D=x[M];D<0?L=E[M]=(T[M]=L)+D:D>0?S=E[M]=(T[M]=S)+D:E[M]=T[M]=S}}I.push(A)}return i&&i(I,T,E,_),{data:m,facets:y}}),l,f,h]}function Hlt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Zlt;case"center":case"silhouette":return Klt;case"wiggle":return pY}throw new Error(`unknown offset: ${e}`)}}function hY(e,t){let r=0,n=0;for(let i of e){let o=t[i];o<r&&(r=o),o>n&&(n=o)}return[r,n]}function Zlt(e,t,r){for(let n of e)for(let i of n){let[o,s]=hY(i,r);for(let a of i){let c=1/(s-o||1);t[a]=c*(t[a]-o),r[a]=c*(r[a]-o)}}}function Klt(e,t,r){for(let n of e){for(let i of n){let[o,s]=hY(i,r);for(let a of i){let c=(s+o)/2;t[a]-=c,r[a]-=c}}mY(n,t,r)}yY(e,t,r)}function pY(e,t,r,n){for(let i of e){let o=new Xn,s=0;for(let a of i){let c=-1,l=a.map(h=>Math.abs(r[h]-t[h])),u=a.map(h=>{c=n?n[h]:++c;let p=r[h]-t[h],m=o.has(c)?p-o.get(c):0;return o.set(c,p),m}),f=[0,...av(u)];for(let h of a)t[h]+=s,r[h]+=s;let d=bn(l);d&&(s-=bn(l,(h,p)=>(u[p]/2+f[p])*h)/d)}mY(i,t,r)}yY(e,t,r)}function mY(e,t,r){let n=Oe(e,i=>Oe(i,o=>t[o]));for(let i of e)for(let o of i)t[o]-=n,r[o]-=n}function yY(e,t,r){let n=e.length;if(n===1)return;let i=e.map(a=>a.flat()),o=i.map(a=>(Oe(a,c=>t[c])+he(a,c=>r[c]))/2),s=Oe(o);for(let a=0;a<n;a++){let c=s-o[a];for(let l of i[a])t[l]+=c,r[l]+=c}}function Qlt(e,t,r){if(e===void 0&&t===pY)return aY(Qr);if(e!=null){if(typeof e=="string"){let n=e.startsWith("-"),i=n?sd:Qr;switch((n?e.slice(1):e).toLowerCase()){case"value":case r:return Jlt(i);case"z":return tut(i);case"sum":return eut(i);case"appearance":return rut(i);case"inside-out":return aY(i)}return cY(NN(e))}if(typeof e=="function")return(e.length===1?cY:nut)(e);if(Array.isArray(e))return iut(e);throw new Error(`invalid order: ${e}`)}}function Jlt(e){return(t,r,n)=>(i,o)=>e(n[i],n[o])}function tut(e){return(t,r,n,i)=>(o,s)=>e(i[o],i[s])}function eut(e){return wT(e,(t,r,n,i)=>Oh(oi(t),o=>bn(o,s=>n[s]),o=>i[o]))}function rut(e){return wT(e,(t,r,n,i)=>Oh(oi(t),o=>r[Nf(o,s=>n[s])],o=>i[o]))}function aY(e){return wT(e,(t,r,n,i)=>{let o=oi(t),s=Oh(o,f=>r[Nf(f,d=>n[d])],f=>i[f]),a=hs(o,f=>bn(f,d=>n[d]),f=>i[f]),c=[],l=[],u=0;for(let f of s)u<0?(u+=a.get(f),c.push(f)):(u-=a.get(f),l.push(f));return l.reverse().concat(c)})}function cY(e){return t=>{let r=At(t,e);return(n,i)=>Qr(r[n],r[i])}}function nut(e){return t=>(r,n)=>e(t[r],t[n])}function iut(e){return wT(Qr,()=>e)}function wT(e,t){return(r,n,i,o)=>{if(!o)throw new Error("missing channel: z");let s=new Xn(t(r,n,i,o).map((a,c)=>[a,c]));return(a,c)=>e(s.get(o[a]),s.get(o[c]))}}var out={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},vd=class extends Ft{constructor(t,r={}){let{x1:n,y1:i,x2:o,y2:s,z:a,curve:c,tension:l}=r;super(t,{x1:{value:n,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0},z:{value:Ln(r),optional:!0}},r,out),this.z=a,this.curve=rx(c,l)}filter(t){return t}render(t,r,n,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a}=n;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r,0,0).call(u=>u.selectAll().data(jI(t,[s,a,c,l],this,n)).enter().append("path").call(Gt,this).call(pd,this,n).attr("d",yp().curve(this.curve).defined(f=>f>=0).x0(f=>s[f]).y0(f=>a[f]).x1(f=>c[f]).y1(f=>l[f]))).node()}};function nx(e,t){return t===void 0?fl(e,{x:ld,y:bu}):new vd(e,t)}function Nu(e,t){let{y:r=nr,...n}=Kp(t);return new vd(e,tm(Qp({...n,y1:r,y2:void 0})))}function fl(e,t){let{x:r=nr,...n}=Zp(t);return new vd(e,em(Jp({...n,x1:r,x2:void 0})))}var sut={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},ix=class extends Ft{constructor(t,r={}){let{x1:n,y1:i,x2:o,y2:s,curve:a,tension:c}=r;super(t,{x1:{value:n,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},r,sut),this.curve=xT(a,c),ws(this,r)}project(t,r,n){this.curve!==Ou&&super.project(t,r,n)}render(t,r,n,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a}=n,{curve:u}=this;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(f=>f.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",u===Ou&&o.projection?aut(o.projection,s,a,c,l):d=>{let h=Jn(),p=u(h);return p.lineStart(),p.point(s[d],a[d]),p.point(c[d],l[d]),p.lineEnd(),h}).call(ye,this,n).call(ll,this,n,o)).node()}};function aut(e,t,r,n,i){let o=_n(e);return t=Cr(t),r=Cr(r),n=Cr(n),i=Cr(i),s=>o({type:"LineString",coordinates:[[t[s],r[s]],[n[s],i[s]]]})}function vT(e,{x:t,x1:r,x2:n,y:i,y1:o,y2:s,...a}={}){return[r,n]=ox(t,r,n),[o,s]=ox(i,o,s),new ix(e,{...a,x1:r,x2:n,y1:o,y2:s})}function ox(e,t,r){if(e===void 0){if(t===void 0){if(r!==void 0)return[r]}else if(r===void 0)return[t]}else{if(t===void 0)return r===void 0?[e]:[e,r];if(r===void 0)return[e,t]}return[t,r]}var cut={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5},sx=class extends Ft{constructor(t,r={}){let{x1:n,y1:i,x2:o,y2:s,bend:a=0,headAngle:c=60,headLength:l=8,inset:u=0,insetStart:f=u,insetEnd:d=u,sweep:h}=r;super(t,{x1:{value:n,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},r,cut),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+c,this.headLength=+l,this.insetStart=+f,this.insetEnd=+d,this.sweep=lut(h)}render(t,r,n,i,o){let{x1:s,y1:a,x2:c=s,y2:l=a,SW:u}=n,{strokeWidth:f,bend:d,headAngle:h,headLength:p,insetStart:m,insetEnd:y}=this,g=u?_=>u[_]:Jr(f===void 0?1:f),b=h*Wp/2,x=p/1.5;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(_=>_.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",v=>{let w=s[v],T=a[v],E=c[v],I=l[v],B=Math.hypot(E-w,I-T);if(B<=m+y)return null;let A=Math.atan2(I-T,E-w),O=Math.min(x*g(v),B/3),L=this.sweep(w,T,E,I)*d*Wp,S=Math.hypot(B/Math.tan(L),B)/2;if(m||y)if(S<1e5){let st=Math.sign(L),[ct,ut]=uut([w,T],[E,I],S,st);if(m&&([w,T]=gY([ct,ut,S],[w,T,m],-st*Math.sign(m))),y){let[X,lt]=gY([ct,ut,S],[E,I,y],st*Math.sign(y));A+=Math.atan2(lt-ut,X-ct)-Math.atan2(I-ut,E-ct),E=X,I=lt}}else{let st=E-w,ct=I-T,ut=Math.hypot(st,ct);m&&(w+=st/ut*m,T+=ct/ut*m),y&&(E-=st/ut*y,I-=ct/ut*y)}let M=A+L,D=M+b,C=M-b,U=E-O*Math.cos(D),k=I-O*Math.sin(D),$=E-O*Math.cos(C),z=I-O*Math.sin(C),V=S<1e5?`A${S},${S} 0,0,${L>0?1:0} `:"L",Q=O?`M${U},${k}L${E},${I}L${$},${z}`:"";return`M${w},${T}${V}${E},${I}${Q}`}).call(ye,this,n)).node()}};function lut(e=1){if(typeof e=="number")return Jr(Math.sign(e));if(typeof e=="function")return(t,r,n,i)=>Math.sign(e(t,r,n,i));switch(Yr(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,r,n)=>ie(t,n);case"-x":return(t,r,n)=>Gn(t,n);case"+y":return(t,r,n,i)=>ie(r,i);case"-y":return(t,r,n,i)=>Gn(r,i)}}function uut([e,t],[r,n],i,o){let s=r-e,a=n-t,c=Math.hypot(s,a),l=o*Math.sqrt(i*i-c*c/4)/c;return[(e+r)/2-a*l,(t+n)/2+s*l]}function gY([e,t,r],[n,i,o],s){let a=n-e,c=i-t,l=Math.hypot(a,c),u=(a*a+c*c-o*o+r*r)/(2*l),f=s*Math.sqrt(r*r-u*u);return[e+(a*u+c*f)/l,t+(c*u-a*f)/l]}function bY(e,{x:t,x1:r,x2:n,y:i,y1:o,y2:s,...a}={}){return[r,n]=ox(t,r,n),[o,s]=ox(i,o,s),new sx(e,{...a,x1:r,x2:n,y1:o,y2:s})}var im=class extends Ft{constructor(t,r,n={},i){super(t,r,n,i);let{inset:o=0,insetTop:s=o,insetRight:a=o,insetBottom:c=o,insetLeft:l=o,rx:u,ry:f}=n;this.insetTop=Wt(s),this.insetRight=Wt(a),this.insetBottom=Wt(c),this.insetLeft=Wt(l),this.rx=Ne(u,"auto"),this.ry=Ne(f,"auto")}render(t,r,n,i,o){let{rx:s,ry:a}=this;return pt("svg:g",o).call(Kt,this,i,o).call(this._transform,this,r).call(c=>c.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",this._x(r,n,i)).attr("width",this._width(r,n,i)).attr("y",this._y(r,n,i)).attr("height",this._height(r,n,i)).call(yt,"rx",s).call(yt,"ry",a).call(ye,this,n)).node()}_x(t,{x:r},{marginLeft:n}){let{insetLeft:i}=this;return r?o=>r[o]+i:n+i}_y(t,{y:r},{marginTop:n}){let{insetTop:i}=this;return r?o=>r[o]+i:n+i}_width({x:t},{x:r},{marginRight:n,marginLeft:i,width:o}){let{insetLeft:s,insetRight:a}=this,c=r&&t?t.bandwidth():o-n-i;return Math.max(0,c-s-a)}_height({y:t},{y:r},{marginTop:n,marginBottom:i,height:o}){let{insetTop:s,insetBottom:a}=this,c=r&&t?t.bandwidth():o-n-i;return Math.max(0,c-s-a)}},xY={ariaLabel:"bar"},ax=class extends im{constructor(t,r={}){let{x1:n,x2:i,y:o}=r;super(t,{x1:{value:n,scale:"x"},x2:{value:i,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},r,xY)}_transform(t,r,{x:n}){t.call(Pt,r,{x:n},0,0)}_x({x:t},{x1:r,x2:n},{marginLeft:i}){let{insetLeft:o}=this;return ai(t)?i+o:s=>Math.min(r[s],n[s])+o}_width({x:t},{x1:r,x2:n},{marginRight:i,marginLeft:o,width:s}){let{insetLeft:a,insetRight:c}=this;return ai(t)?s-i-o-a-c:l=>Math.max(0,Math.abs(n[l]-r[l])-a-c)}},cx=class extends im{constructor(t,r={}){let{x:n,y1:i,y2:o}=r;super(t,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:n,scale:"x",type:"band",optional:!0}},r,xY)}_transform(t,r,{y:n}){t.call(Pt,r,{y:n},0,0)}_y({y:t},{y1:r,y2:n},{marginTop:i}){let{insetTop:o}=this;return ai(t)?i+o:s=>Math.min(r[s],n[s])+o}_height({y:t},{y1:r,y2:n},{marginTop:i,marginBottom:o,height:s}){let{insetTop:a,insetBottom:c}=this;return ai(t)?s-i-o-a-c:l=>Math.max(0,Math.abs(n[l]-r[l])-a-c)}};function Ra(e,t={}){return Mp(t)||(t={...t,y:nr,x2:K}),new ax(e,tm(ZI(Qp(t))))}function La(e,t={}){return Mp(t)||(t={...t,x:nr,y2:K}),new cx(e,em(KI(Jp(t))))}var fut={ariaLabel:"cell"},Sd=class extends im{constructor(t,{x:r,y:n,...i}={}){super(t,{x:{value:r,scale:"x",type:"band",optional:!0},y:{value:n,scale:"y",type:"band",optional:!0}},i,fut)}_transform(t,r){t.call(Pt,r,{},0,0)}};function Fu(e,{x:t,y:r,...n}={}){return[t,r]=br(t,r),new Sd(e,{...n,x:t,y:r})}function _Y(e,{x:t=nr,fill:r,stroke:n,...i}={}){return r===void 0&&cr(n)[0]===void 0&&(r=K),new Sd(e,{...i,x:t,fill:r,stroke:n})}function wY(e,{y:t=nr,fill:r,stroke:n,...i}={}){return r===void 0&&cr(n)[0]===void 0&&(r=K),new Sd(e,{...i,y:t,fill:r,stroke:n})}var dut={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function lx(e){return e.sort===void 0&&e.reverse===void 0?AI({channel:"-r"},e):e}var Id=class extends Ft{constructor(t,r={}){let{x:n,y:i,r:o,rotate:s,symbol:a=Qc,frameAnchor:c}=r,[l,u]=Ae(s,0),[f,d]=BV(a),[h,p]=Ae(o,f==null?3:4.5);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:h,scale:"r",filter:ii,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},lx(r),dut),this.r=p,this.rotate=u,this.symbol=d,this.frameAnchor=Ea(c);let{channels:m}=this,{symbol:y}=m;if(y){let{fill:g,stroke:b}=m;y.hint={fill:g?g.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,r:u,rotate:f,symbol:d}=n,{r:h,rotate:p,symbol:m}=this,[y,g]=on(this,i),b=m===Qc,x=u?void 0:h*h*Math.PI;return hu(h)&&(t=[]),pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(_=>_.selectAll().data(t).enter().append(b?"circle":"path").call(Gt,this).call(b?v=>{v.attr("cx",c?w=>c[w]:y).attr("cy",l?w=>l[w]:g).attr("r",u?w=>u[w]:h)}:v=>{v.attr("transform",Du`translate(${c?w=>c[w]:y},${l?w=>l[w]:g})${f?w=>` rotate(${f[w]})`:p?` rotate(${p})`:""}`).attr("d",u&&d?w=>{let T=Jn();return d[w].draw(T,u[w]*u[w]*Math.PI),T}:u?w=>{let T=Jn();return m.draw(T,u[w]*u[w]*Math.PI),T}:d?w=>{let T=Jn();return d[w].draw(T,x),T}:(()=>{let w=Jn();return m.draw(w,x),w})())}).call(ye,this,n)).node()}};function Lo(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=br(t,r)),new Id(e,{...n,x:t,y:r})}function vY(e,{x:t=K,...r}={}){return new Id(e,JI({...r,x:t}))}function SY(e,{y:t=K,...r}={}){return new Id(e,QI({...r,y:t}))}function IY(e,t){return Lo(e,{...t,symbol:"circle"})}function TY(e,t){return Lo(e,{...t,symbol:"hexagon"})}var hut={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},Td=class extends Ft{constructor(t,r={}){let{x:n,y:i,z:o,curve:s,tension:a}=r;super(t,{x:{value:n,scale:"x"},y:{value:i,scale:"y"},z:{value:Ln(r),optional:!0}},r,hut),this.z=o,this.curve=xT(s,a),ws(this,r)}filter(t){return t}project(t,r,n){this.curve!==Ou&&super.project(t,r,n)}render(t,r,n,i,o){let{x:s,y:a}=n,{curve:c}=this;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(l=>l.selectAll().data(jI(t,[s,a],this,n)).enter().append("path").call(Gt,this).call(pd,this,n).call(rq,this,n,o).attr("d",c===Ou&&o.projection?put(o.projection,s,a):pb().curve(c).defined(u=>u>=0).x(u=>s[u]).y(u=>a[u]))).node()}};function put(e,t,r){let n=_n(e);return t=Cr(t),r=Cr(r),i=>{let o=[],s=[o];for(let a of i)a===-1?(o=[],s.push(o)):o.push([t[a],r[a]]);return n({type:"MultiLineString",coordinates:s})}}function Ad(e,{x:t,y:r,...n}={}){return[t,r]=br(t,r),new Td(e,{...n,x:t,y:r})}function Ru(e,{x:t=K,y:r=nr,...n}={}){return new Td(e,Kp({...n,x:t,y:r}))}function Lu(e,{x:t=nr,y:r=K,...n}={}){return new Td(e,Zp({...n,x:t,y:r}))}var mut={ariaLabel:"rect"},Md=class extends Ft{constructor(t,r={}){let{x1:n,y1:i,x2:o,y2:s,inset:a=0,insetTop:c=a,insetRight:l=a,insetBottom:u=a,insetLeft:f=a,rx:d,ry:h}=r;super(t,{x1:{value:n,scale:"x",type:n!=null&&o==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},r,mut),this.insetTop=Wt(c),this.insetRight=Wt(l),this.insetBottom=Wt(u),this.insetLeft=Wt(f),this.rx=Ne(d,"auto"),this.ry=Ne(h,"auto")}render(t,r,n,i,o){let{x:s,y:a}=r,{x1:c,y1:l,x2:u,y2:f}=n,{marginTop:d,marginRight:h,marginBottom:p,marginLeft:m,width:y,height:g}=i,{projection:b}=o,{insetTop:x,insetRight:_,insetBottom:v,insetLeft:w,rx:T,ry:E}=this,I=(s?.bandwidth?s.bandwidth():0)-w-_,B=(a?.bandwidth?a.bandwidth():0)-x-v;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{},0,0).call(A=>A.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",c&&(b||!ai(s))?u?O=>Math.min(c[O],u[O])+w:O=>c[O]+w:m+w).attr("y",l&&(b||!ai(a))?f?O=>Math.min(l[O],f[O])+x:O=>l[O]+x:d+x).attr("width",c&&(b||!ai(s))?u?O=>Math.max(0,Math.abs(u[O]-c[O])+I):I:y-h-m-_-w).attr("height",l&&(b||!ai(a))?f?O=>Math.max(0,Math.abs(l[O]-f[O])+B):B:g-d-p-x-v).call(yt,"rx",T).call(yt,"ry",E).call(ye,this,n)).node()}};function ux(e,t){return new Md(e,T3(A3(t)))}function om(e,t={}){return Mp(t)||(t={...t,y:nr,x2:K,interval:1}),new Md(e,tm(A3(Qp(t))))}function sm(e,t={}){return Mp(t)||(t={...t,x:nr,y2:K,interval:1}),new Md(e,em(T3(Jp(t))))}function W3(e,t){t=yut(t);let{x:r,y:n,color:i,size:o}=t,s=ST(e,r),a=ST(e,n),c=ST(e,i),l=ST(e,o),{fx:u,fy:f,x:{value:d,reduce:h,zero:p,...m},y:{value:y,reduce:g,zero:b,...x},color:{value:_,color:v,reduce:w},size:{value:T,reduce:E},mark:I}=t;if(h===void 0&&(h=g==null&&d==null&&T==null&&y!=null?"count":null),g===void 0&&(g=h==null&&y==null&&T==null&&d!=null?"count":null),E===void 0&&T==null&&w==null&&h==null&&g==null&&(d==null||ir(s))&&(y==null||ir(a))&&(E="count"),p===void 0&&(p=IT(h)?!0:void 0),b===void 0&&(b=IT(g)?!0:void 0),d==null&&y==null)throw new Error("must specify x or y");if(h!=null&&y==null)throw new Error("reducing x requires y");if(g!=null&&d==null)throw new Error("reducing y requires x");I===void 0&&(I=T!=null||E!=null?"dot":IT(h)||IT(g)||w!=null?"bar":d!=null&&y!=null?ir(s)||ir(a)||h==null&&g==null&&!fx(s)&&!fx(a)?"dot":"line":d!=null||y!=null?"rule":null);let B,A,O;switch(I){case"dot":O=Lo,A="stroke";break;case"line":O=s&&a||h!=null||g!=null?b||g!=null||s&&fx(s)?Lu:p||h!=null||a&&fx(a)?Ru:Ad:s?Ru:Lu,A="stroke",MY(c)&&(B=null);break;case"area":O=!(b||g!=null)&&(p||h!=null||a&&fx(a))?Nu:fl,A="fill",MY(c)&&(B=null);break;case"rule":O=s?Zi:Ki,A="stroke";break;case"bar":O=h!=null?ir(a)?AY(h)&&s&&ir(s)?Fu:Ra:om:g!=null?ir(s)?AY(g)&&a&&ir(a)?Fu:La:sm:w!=null||E!=null?s&&ir(s)&&a&&ir(a)?Fu:s&&ir(s)?La:a&&ir(a)?Ra:ux:s&&nl(s)&&!(a&&nl(a))?Ra:a&&nl(a)&&!(s&&nl(s))?La:Fu,A="fill";break;default:throw new Error(`invalid mark: ${I}`)}let L={fx:u,fy:f,x:s??void 0,y:a??void 0,[A]:c??v,z:B,r:l??void 0,tip:!0},S,M={[A]:w??void 0,r:E??void 0};if(h!=null&&g!=null)throw new Error("cannot reduce both x and y");return g!=null?(M.y=g,S=ir(s)?Su:Na):h!=null?(M.x=h,S=ir(a)?Iu:Fa):(w!=null||E!=null)&&(s&&a?S=ir(s)&&ir(a)?Pb:ir(s)?Fa:ir(a)?Na:ul:s?S=ir(s)?Su:Na:a&&(S=ir(a)?Iu:Fa)),(S===ul||S===Na)&&(L.x={value:s,...m}),(S===ul||S===Fa)&&(L.y={value:a,...x}),p===void 0&&(p=s&&!(S===ul||S===Na)&&(O===Ra||O===Nu||O===om||O===Ki)),b===void 0&&(b=a&&!(S===ul||S===Fa)&&(O===La||O===fl||O===sm||O===Zi)),{fx:u??null,fy:f??null,x:{value:d??null,reduce:h??null,zero:!!p,...m},y:{value:y??null,reduce:g??null,zero:!!b,...x},color:{value:_??null,reduce:w??null,...v!==void 0&&{color:v}},size:{value:T??null,reduce:E??null},mark:I,markImpl:EY[O],markOptions:L,transformImpl:EY[S],transformOptions:M,colorMode:A}}function DY(e,t){let r=W3(e,t),{fx:n,fy:i,x:{zero:o},y:{zero:s},markOptions:a,transformOptions:c,colorMode:l}=r,u=Y3[r.markImpl],f=Y3[r.transformImpl],d=n!=null||i!=null?Hp({strokeOpacity:.1}):null,h=[o?Zi([0]):null,s?Ki([0]):null],p=u(e,f?f(c,a):a);return l==="stroke"?Ur(d,h,p):Ur(d,p,h)}function fx(e){let t,r;for(let n of e){if(n==null)continue;if(t===void 0){t=n;continue}let i=Math.sign(ie(t,n));if(i){if(r!==void 0&&i!==r)return!1;t=n,r=i}}return!0}function yut({x:e,y:t,color:r,size:n,fx:i,fy:o,mark:s}={}){return Xi(e)||(e=am(e)),Xi(t)||(t=am(t)),Xi(r)||(r=wu(r)?{color:r}:am(r)),Xi(n)||(n=am(n)),Xi(i)&&({value:i}=am(i)),Xi(o)&&({value:o}=am(o)),s!=null&&(s=`${s}`.toLowerCase()),{x:e,y:t,color:r,size:n,fx:i,fy:o,mark:s}}function ST(e,t){let r=At(e,t.value);return r&&(r.label=Sn(t.value)),r}function am(e){return gut(e)?{reduce:e}:{value:e}}function IT(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function AY(e){return/^(?:first|last|mode)$/i.test(e)}function gut(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&tn(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function MY(e){return e?new Hn(e).size>e.length>>1:!1}var Y3={dot:Lo,line:Ad,lineX:Ru,lineY:Lu,areaX:Nu,areaY:fl,ruleX:Zi,ruleY:Ki,barX:Ra,barY:La,rect:ux,rectX:om,rectY:sm,cell:Fu,bin:ul,binX:Na,binY:Fa,group:Pb,groupX:Su,groupY:Iu},EY=Object.fromEntries(Object.entries(Y3).map(([e,t])=>[t,e]));function cm(e,t={}){let{x:r,x1:n,x2:i}=t;r===void 0&&n===void 0&&i===void 0&&(t={...t,x:r=K});let o={};return r!=null&&(o.x=e),n!=null&&(o.x1=e),i!=null&&(o.x2=e),Ti(o,t)}function lm(e,t={}){let{y:r,y1:n,y2:i}=t;r===void 0&&n===void 0&&i===void 0&&(t={...t,y:r=K});let o={};return r!=null&&(o.y=e),n!=null&&(o.y1=e),i!=null&&(o.y2=e),Ti(o,t)}function Ti(e={},t={}){let r=Ln(t),n=Object.entries(e).map(([i,o])=>{let s=_I(i,t);if(s==null)throw new Error(`missing channel: ${i}`);let[a,c]=en(s);return{key:i,input:s,output:a,setOutput:c,map:but(o)}});return{...rn(t,(i,o)=>{let s=At(i,r),a=n.map(({input:l})=>At(i,l)),c=n.map(({setOutput:l})=>l(new Array(i.length)));for(let l of o)for(let u of s?Xr(l,f=>s[f]).values():[l])n.forEach(({map:f},d)=>f.mapIndex(u,a[d],c[d]));return{data:i,facets:o}}),...Object.fromEntries(n.map(({key:i,output:o})=>[i,o]))}}function but(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&tn(e))return xut(e);if(typeof e=="function")return G3(Ep(e));switch(`${e}`.toLowerCase()){case"cumsum":return wut;case"rank":return G3((t,r)=>e0(t,n=>r[n]));case"quantile":return G3((t,r)=>_ut(t,n=>r[n]))}throw new Error(`invalid map: ${e}`)}function xut(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function _ut(e,t){let r=oa(e,t)-1;return e0(e,t).map(n=>n/r)}function G3(e){return{mapIndex(t,r,n){let i=e(t,r);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let o=0,s=t.length;o<s;++o)n[t[o]]=i[o]}}}var wut={mapIndex(e,t,r){let n=0;for(let i of e)r[i]=n+=t[i]}};function BY(e={},t){return arguments.length===1&&(t=e),cm(um(e),t)}function OY(e={},t){return arguments.length===1&&(t=e),lm(um(e),t)}function um(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:r,shift:n,anchor:i,strict:o}=e;if(i===void 0&&n!==void 0&&(i=Sut(n),kn(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Iut(r)(t,vut(i,t),o)}function vut(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Sut(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Iut(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return TT(Ap(e));switch(e.toLowerCase()){case"deviation":return TT(vo);case"max":return AT((t,r)=>he(t,n=>r[n]));case"mean":return Tut;case"median":return TT(ps);case"min":return AT((t,r)=>Oe(t,n=>r[n]));case"mode":return AT((t,r)=>Lh(t,n=>r[n]));case"sum":return NY;case"variance":return TT(Kl);case"difference":return Eut;case"ratio":return Dut;case"first":return But;case"last":return Out}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return AT(Ep(e))}function TT(e){return(t,r,n)=>n?{mapIndex(i,o,s){let a=l=>o[l]==null?NaN:+o[l],c=0;for(let l=0;l<t-1;++l)isNaN(a(l))&&++c;for(let l=0,u=i.length-t+1;l<u;++l)isNaN(a(l+t-1))&&++c,s[i[l+r]]=c===0?e(el(i,l,l+t),a):NaN,isNaN(a(l))&&--c}}:{mapIndex(i,o,s){let a=c=>o[c]==null?NaN:+o[c];for(let c=-r;c<0;++c)s[i[c+r]]=e(el(i,0,c+t),a);for(let c=0,l=i.length-r;c<l;++c)s[i[c+r]]=e(el(i,c,c+t),a)}}}function AT(e){return(t,r,n)=>n?{mapIndex(i,o,s){let a=0;for(let c=0;c<t-1;++c)a+=wr(o[i[c]]);for(let c=0,l=i.length-t+1;c<l;++c)a+=wr(o[i[c+t-1]]),a===t&&(s[i[c+r]]=e(el(i,c,c+t),o)),a-=wr(o[i[c]])}}:{mapIndex(i,o,s){for(let a=-r;a<0;++a)s[i[a+r]]=e(el(i,0,a+t),o);for(let a=0,c=i.length-r;a<c;++a)s[i[a+r]]=e(el(i,a,a+t),o)}}}function NY(e,t,r){return r?{mapIndex(n,i,o){let s=0,a=0;for(let c=0;c<e-1;++c){let l=i[n[c]];l===null||isNaN(l)?++s:a+=+l}for(let c=0,l=n.length-e+1;c<l;++c){let u=i[n[c]],f=i[n[c+e-1]];f===null||isNaN(f)?++s:a+=+f,o[n[c+t]]=s===0?a:NaN,u===null||isNaN(u)?--s:a-=+u}}}:{mapIndex(n,i,o){let s=0,a=n.length;for(let c=0,l=Math.min(a,e-t-1);c<l;++c)s+=+i[n[c]]||0;for(let c=-t,l=a-t;c<l;++c)s+=+i[n[c+e-1]]||0,o[n[c+t]]=s,s-=+i[n[c]]||0}}}function Tut(e,t,r){if(r){let n=NY(e,t,r);return{mapIndex(i,o,s){n.mapIndex(i,o,s);for(let a=0,c=i.length-e+1;a<c;++a)s[i[a+t]]/=e}}}else return{mapIndex(n,i,o){let s=0,a=0,c=n.length;for(let l=0,u=Math.min(c,e-t-1);l<u;++l){let f=i[n[l]];f!==null&&!isNaN(f=+f)&&(s+=f,++a)}for(let l=-t,u=c-t;l<u;++l){let f=i[n[l+e-1]],d=i[n[l]];f!==null&&!isNaN(f=+f)&&(s+=f,++a),o[n[l+t]]=s/a,d!==null&&!isNaN(d=+d)&&(s-=d,--a)}}}}function Aut(e,t,r,n){for(let i=r+n;r<i;++r){let o=e[t[r]];if(wr(o))return o}}function Mut(e,t,r,n){for(let i=r+n-1;i>=r;--i){let o=e[t[i]];if(wr(o))return o}}function FY(e,t,r,n){for(let i=r+n;r<i;++r){let o=e[t[r]];if(o!==null&&!isNaN(o=+o))return o}}function RY(e,t,r,n){for(let i=r+n-1;i>=r;--i){let o=e[t[i]];if(o!==null&&!isNaN(o=+o))return o}}function Eut(e,t,r){return r?{mapIndex(n,i,o){for(let s=0,a=n.length-e;s<a;++s){let c=i[n[s]],l=i[n[s+e-1]];o[n[s+t]]=c===null||l===null?NaN:l-c}}}:{mapIndex(n,i,o){for(let s=-t,a=n.length-e+t+1;s<a;++s)o[n[s+t]]=RY(i,n,s,e)-FY(i,n,s,e)}}}function Dut(e,t,r){return r?{mapIndex(n,i,o){for(let s=0,a=n.length-e;s<a;++s){let c=i[n[s]],l=i[n[s+e-1]];o[n[s+t]]=c===null||l===null?NaN:l/c}}}:{mapIndex(n,i,o){for(let s=-t,a=n.length-e+t+1;s<a;++s)o[n[s+t]]=RY(i,n,s,e)/FY(i,n,s,e)}}}function But(e,t,r){return r?{mapIndex(n,i,o){for(let s=0,a=n.length-e;s<a;++s)o[n[s+t]]=i[n[s]]}}:{mapIndex(n,i,o){for(let s=-t,a=n.length-e+t+1;s<a;++s)o[n[s+t]]=Aut(i,n,s,e)}}}function Out(e,t,r){return r?{mapIndex(n,i,o){for(let s=0,a=n.length-e;s<a;++s)o[n[s+t]]=i[n[s+e-1]]}}:{mapIndex(n,i,o){for(let s=-t,a=n.length-e+t+1;s<a;++s)o[n[s+t]]=Mut(i,n,s,e)}}}var dl={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function LY(e,{x:t=K,y:r,k:n=dl.k,color:i=dl.color,opacity:o=dl.opacity,fill:s=i,fillOpacity:a=o,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return Ur(Se(s)?null:Nu(e,Ti({x1:ku({k:-n,...f}),x2:ku({k:n,...f})},{x1:t,x2:t,y:r,fill:s,fillOpacity:a,...f})),Se(c)?null:Ru(e,Ti({x:ku(f)},{x:t,y:r,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function kY(e,{x:t,y:r=K,k:n=dl.k,color:i=dl.color,opacity:o=dl.opacity,fill:s=i,fillOpacity:a=o,stroke:c=i,strokeOpacity:l,strokeWidth:u,...f}={}){return Ur(Se(s)?null:fl(e,Ti({y1:ku({k:-n,...f}),y2:ku({k:n,...f})},{x:t,y1:r,y2:r,fill:s,fillOpacity:a,...f})),Se(c)?null:Lu(e,Ti({y:ku(f)},{x:t,y:r,stroke:c,strokeOpacity:l,strokeWidth:u,...f})))}function ku({n:e=dl.n,k:t=0,strict:r=dl.strict,anchor:n=dl.anchor}={}){return um({k:e,reduce:i=>Rc(i)+t*(vo(i)||0),strict:r,anchor:n})}var Nut={ariaLabel:"tick",fill:null,stroke:"currentColor"},MT=class extends Ft{constructor(t,r,n){super(t,r,n,Nut),ws(this,n)}render(t,r,n,i,o){return pt("svg:g",o).call(Kt,this,i,o).call(this._transform,this,r).call(s=>s.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",this._x1(r,n,i)).attr("x2",this._x2(r,n,i)).attr("y1",this._y1(r,n,i)).attr("y2",this._y2(r,n,i)).call(ye,this,n).call(ll,this,n,o)).node()}},dx=class extends MT{constructor(t,r={}){let{x:n,y:i,inset:o=0,insetTop:s=o,insetBottom:a=o}=r;super(t,{x:{value:n,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},r),this.insetTop=Wt(s),this.insetBottom=Wt(a)}_transform(t,r,{x:n}){t.call(Pt,r,{x:n},ur,0)}_x1(t,{x:r}){return n=>r[n]}_x2(t,{x:r}){return n=>r[n]}_y1({y:t},{y:r},{marginTop:n}){let{insetTop:i}=this;return r&&t?o=>r[o]+i:n+i}_y2({y:t},{y:r},{height:n,marginBottom:i}){let{insetBottom:o}=this;return r&&t?s=>r[s]+t.bandwidth()-o:n-i-o}},hx=class extends MT{constructor(t,r={}){let{x:n,y:i,inset:o=0,insetRight:s=o,insetLeft:a=o}=r;super(t,{y:{value:i,scale:"y"},x:{value:n,scale:"x",type:"band",optional:!0}},r),this.insetRight=Wt(s),this.insetLeft=Wt(a)}_transform(t,r,{y:n}){t.call(Pt,r,{y:n},0,ur)}_x1({x:t},{x:r},{marginLeft:n}){let{insetLeft:i}=this;return r&&t?o=>r[o]+i:n+i}_x2({x:t},{x:r},{width:n,marginRight:i}){let{insetRight:o}=this;return r&&t?s=>r[s]+t.bandwidth()-o:n-i-o}_y1(t,{y:r}){return n=>r[n]}_y2(t,{y:r}){return n=>r[n]}};function ET(e,{x:t=K,...r}={}){return new dx(e,{...r,x:t})}function DT(e,{y:t=K,...r}={}){return new hx(e,{...r,y:t})}function CY(e,{x:t=K,y:r=null,fill:n="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:s,strokeWidth:a=2,sort:c,...l}={}){let u=r!=null?Iu:Ub;return Ur(Ki(e,u({x1:X3,x2:H3},{x:t,y:r,stroke:o,strokeOpacity:s,...l})),Ra(e,u({x1:"p25",x2:"p75"},{x:t,y:r,fill:n,fillOpacity:i,...l})),ET(e,u({x:"p50"},{x:t,y:r,stroke:o,strokeOpacity:s,strokeWidth:a,sort:c,...l})),Lo(e,Ti({x:PY},{x:t,y:r,z:r,stroke:o,strokeOpacity:s,...l})))}function UY(e,{y:t=K,x:r=null,fill:n="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:s,strokeWidth:a=2,sort:c,...l}={}){let u=r!=null?Su:Ub;return Ur(Zi(e,u({y1:X3,y2:H3},{x:r,y:t,stroke:o,strokeOpacity:s,...l})),La(e,u({y1:"p25",y2:"p75"},{x:r,y:t,fill:n,fillOpacity:i,...l})),DT(e,u({y:"p50"},{x:r,y:t,stroke:o,strokeOpacity:s,strokeWidth:a,sort:c,...l})),Lo(e,Ti({y:PY},{x:r,y:t,z:r,stroke:o,strokeOpacity:s,...l})))}function PY(e){let t=X3(e),r=H3(e);return e.map(n=>n<t||n>r?n:NaN)}function X3(e){let t=$Y(e)*2.5-zY(e)*1.5;return Oe(e,r=>r>=t?r:NaN)}function H3(e){let t=zY(e)*2.5-$Y(e)*1.5;return he(e,r=>r<=t?r:NaN)}function $Y(e){return Zn(e,.25)}function zY(e){return Zn(e,.75)}var Fut={ariaLabel:"raster",stroke:null,pixelSize:1};function fm(e,t){let r=+e;if(isNaN(r))throw new Error(`invalid ${t}: ${e}`);return r}function VY(e,t){let r=Math.floor(e);if(isNaN(r))throw new Error(`invalid ${t}: ${e}`);return r}var mx=class extends Ft{constructor(t,r,n={},i){let{width:o,height:s,x:a,y:c,x1:l=a==null?0:void 0,y1:u=c==null?0:void 0,x2:f=a==null?o:void 0,y2:d=c==null?s:void 0,pixelSize:h=i.pixelSize,blur:p=0,interpolate:m}=n;if(o!=null&&(o=VY(o,"width")),s!=null&&(s=VY(s,"height")),l!=null&&(l=fm(l,"x1")),u!=null&&(u=fm(u,"y1")),f!=null&&(f=fm(f,"x2")),d!=null&&(d=fm(d,"y2")),a==null&&(l==null||f==null))throw new Error("missing x");if(c==null&&(u==null||d==null))throw new Error("missing y");t!=null&&o!=null&&s!=null&&(a===void 0&&l!=null&&f!=null&&(a=zut(l,f,o,s)),c===void 0&&u!=null&&d!=null&&(c=Vut(u,d,o,s))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:c,scale:"y",optional:!0},x1:{value:l==null?null:[l],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:d==null?null:[d],scale:"y",optional:!0,filter:null},...r},n,i),this.width=o,this.height=s,this.pixelSize=fm(h,"pixelSize"),this.blur=fm(p,"blur"),this.interpolate=a==null||c==null?null:Rut(m)}},yx=class extends mx{constructor(t,r={}){let{imageRendering:n}=r;if(t==null){let{fill:i,fillOpacity:o}=r;Ae(o)[0]!==void 0&&(r=BT("fillOpacity",r)),cr(i)[0]!==void 0&&(r=BT("fill",r))}super(t,void 0,r,Fut),this.imageRendering=Ne(n,"auto")}scale(t,{color:r,...n},i){return super.scale(t,n,i)}render(t,r,n,i,o){let s=r[n.channels.fill?.scale]??(M=>M),{x:a,y:c}=n,{document:l}=o,[u,f,d,h]=qY(n,i,o),p=d-u,m=h-f,{pixelSize:y,width:g=Math.round(Math.abs(p)/y),height:b=Math.round(Math.abs(m)/y)}=this,x=g*b,{fill:_,fillOpacity:v}=n,w=0;if(this.interpolate){let M=g/p,D=b/m,C=fe(a,k=>(k-u)*M,Float64Array),U=fe(c,k=>(k-f)*D,Float64Array);_&&(_=this.interpolate(t,g,b,C,U,_)),v&&(v=this.interpolate(t,g,b,C,U,v))}else this.data==null&&t&&(w=t.fi*x);let T=l.createElement("canvas");T.width=g,T.height=b;let E=T.getContext("2d"),I=E.createImageData(g,b),B=I.data,{r:A,g:O,b:L}=jr(this.fill)??{r:0,g:0,b:0},S=(this.fillOpacity??1)*255;for(let M=0;M<x;++M){let D=M<<2;if(_){let C=s(_[M+w]);if(C==null){B[D+3]=0;continue}({r:A,g:O,b:L}=jr(C))}v&&(S=v[M+w]*255),B[D+0]=A,B[D+1]=O,B[D+2]=L,B[D+3]=S}return this.blur>0&&TD(I,this.blur),E.putImageData(I,0,0),pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(M=>M.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(d-u)},${Math.sign(h-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(yt,"image-rendering",this.imageRendering).call(Gt,this).attr("xlink:href",T.toDataURL())).node()}};function Z3(e,t,r){arguments.length<3&&(r=t,t=null);let{x:n,y:i,[e]:o,...s}=r;return n===void 0&&i===void 0&&_V(t)&&(n=ld,i=bu,o===void 0&&(o=mV)),[t,{...s,x:n,y:i,[e]:o}]}function jY(){let[e,t]=Z3("fill",...arguments);return new yx(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:K})}function qY({x1:e,y1:t,x2:r,y2:n},i,{projection:o}){let{width:s,height:a,marginTop:c,marginRight:l,marginBottom:u,marginLeft:f}=i;return[e&&o==null?e[0]:f,t&&o==null?t[0]:c,r&&o==null?r[0]:s-l,n&&o==null?n[0]:a-u]}function K3({x1:e,y1:t,x2:r,y2:n},i,o,s){let a={};return e&&(a.x1=e),t&&(a.y1=t),r&&(a.x2=r),n&&(a.y2=n),qY(Lp(a,i),o,s)}function BT(e,t={}){let{[e]:r}=t;if(typeof r!="function")throw new Error(`invalid ${e}: not a function`);return Qe({...t,[e]:void 0},function(n,i,o,s,a,c){let{x:l,y:u}=s;if(!l)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");let[f,d,h,p]=K3(o,s,a,c),m=h-f,y=p-d,{pixelSize:g}=this,{width:b=Math.round(Math.abs(m)/g),height:x=Math.round(Math.abs(y)/g)}=t,_=new Array(b*x*(i?i.length:1)),v=m/b,w=y/x,T=0;for(let E of i??[void 0])for(let I=.5;I<x;++I)for(let B=.5;B<b;++B,++T)_[T]=r(l.invert(f+B*v),u.invert(d+I*w),E);return{data:_,facets:i,channels:{[e]:{value:_,scale:"auto"}}}})}function Rut(e){if(typeof e=="function")return e;if(e==null)return OT;switch(`${e}`.toLowerCase()){case"none":return OT;case"nearest":return bx;case"barycentric":return gx();case"random-walk":return xx()}throw new Error(`invalid interpolate: ${e}`)}function OT(e,t,r,n,i,o){let s=new Array(t*r);for(let a of e)n[a]<0||n[a]>=t||i[a]<0||i[a]>=r||(s[Math.floor(i[a])*t+Math.floor(n[a])]=o[a]);return s}function gx({random:e=Zf(42)}={}){return(t,r,n,i,o,s)=>{let{points:a,triangles:c,hull:l}=Ao.from(t,h=>i[h],h=>o[h]),u=new s.constructor(r*n).fill(NaN),f=new Uint8Array(r*n),d=$ut(s,e);for(let h=0;h<c.length;h+=3){let p=c[h],m=c[h+1],y=c[h+2],g=a[2*p],b=a[2*m],x=a[2*y],_=a[2*p+1],v=a[2*m+1],w=a[2*y+1],T=Math.min(g,b,x),E=Math.max(g,b,x),I=Math.min(_,v,w),B=Math.max(_,v,w),A=(v-w)*(g-x)+(_-w)*(x-b);if(!A)continue;let O=s[t[p]],L=s[t[m]],S=s[t[y]];for(let M=Math.floor(T);M<E;++M)for(let D=Math.floor(I);D<B;++D){if(M<0||M>=r||D<0||D>=n)continue;let C=M+.5,U=D+.5,k=((v-w)*(C-x)+(U-w)*(x-b))/A;if(k<0)continue;let $=((w-_)*(C-x)+(U-w)*(g-x))/A;if($<0)continue;let z=1-k-$;if(z<0)continue;let V=M+r*D;u[V]=d(O,k,L,$,S,z,M,D),f[V]=1}}return Lut(u,f,i,o,s,r,n,l,t,d),u}}function Lut(e,t,r,n,i,o,s,a,c,l){r=Float64Array.from(a,h=>r[c[h]]),n=Float64Array.from(a,h=>n[c[h]]),i=Array.from(a,h=>i[c[h]]);let u=r.length,f=Array.from({length:u},(h,p)=>Cut(p,r,n)),d=0;for(let h=0;h<s;++h){let p=h+.5;for(let m=0;m<o;++m){let y=m+o*h;if(!t[y]){let g=m+.5;for(let b=0;b<u;++b){let x=(u+d+(b%2?(b+1)/2:-b/2))%u;if(f[x](g,p)){let _=kut(r.at(x-1),n.at(x-1),r[x],n[x],g,p);e[y]=l(i.at(x-1),_,i[x],1-_,i[x],0,m,h),d=x;break}}}}}}function kut(e,t,r,n,i,o){let s=r-e,a=n-t,c=s*(r-i)+a*(n-o),l=s*(i-e)+a*(o-t);return c>0&&l>0?c/(c+l):+(c>l)}function px(e,t,r,n){return e*n-r*t}function Cut(e,t,r){let n=t.length,i=t.at(e-2),o=r.at(e-2),s=t.at(e-1),a=r.at(e-1),c=t[e],l=r[e],u=t.at(e+1-n),f=r.at(e+1-n),d=s-c,h=a-l,p=i-s,m=o-a,y=c-u,g=l-f,b=Math.hypot(d,h),x=Math.hypot(p,m),_=Math.hypot(y,g);return(v,w)=>{let T=v-s,E=w-a,I=v-c,B=w-l;return px(T,E,I,B)>-1e-6&&px(T,E,d,h)*x-px(T,E,p,m)*b>-1e-6&&px(I,B,y,g)*b-px(I,B,d,h)*_<=0}}function bx(e,t,r,n,i,o){let s=new o.constructor(t*r),a=Ao.from(e,u=>n[u],u=>i[u]),c,l;for(let u=.5,f=0;u<r;++u){l=c;for(let d=.5;d<t;++d,++f)l=a.find(d,u,l),d===.5&&(c=l),s[f]=o[e[l]]}return s}function xx({random:e=Zf(42),minDistance:t=.5,maxSteps:r=2}={}){return(n,i,o,s,a,c)=>{let l=new c.constructor(i*o),u=Ao.from(n,p=>s[p],p=>a[p]),f,d,h;for(let p=.5,m=0;p<o;++p){d=f;for(let y=.5;y<i;++y,++m){let g=y,b=p;h=d=u.find(g,b,d),y===.5&&(f=d);let x,_=0;for(;(x=Math.hypot(s[n[h]]-g,a[n[h]]-b))>t&&_<r;){let v=e(y,p,_)*2*Math.PI;g+=Math.cos(v)*x,b+=Math.sin(v)*x,h=u.find(g,b,h),++_}l[m]=c[n[h]]}}return l}}function Uut(e,t,r,n,i,o){return t*e+n*r+o*i}function Put(e){return(t,r,n,i,o,s,a,c)=>{let l=e(a,c);return l<r?t:l<r+i?n:o}}function $ut(e,t){return nl(e)||lr(e)?Uut:Put(t)}function zut(e,t,r){return{transform(n){let i=n.length,o=new Float64Array(i),s=(t-e)/r,a=e+s/2;for(let c=0;c<i;++c)o[c]=c%r*s+a;return o}}}function Vut(e,t,r,n){return{transform(i){let o=i.length,s=new Float64Array(o),a=(t-e)/n,c=e+a/2;for(let l=0;l<o;++l)s[l]=Math.floor(l/r)%n*a+c;return s}}}var YY={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2},_x=class extends mx{constructor(t,{smooth:r=!0,value:n,...i}={}){let o=VI({},i,YY);if(n===void 0){for(let a in o)if(o[a].value!=null){if(n!==void 0)throw new Error("ambiguous contour value");n=i[a],i[a]="value"}}if(n!=null){let a={transform:c=>c.map(l=>l.value),label:Sn(n)};for(let c in o)i[c]==="value"&&(i[c]=a)}if(t==null){if(n==null)throw new Error("missing contour value");i=BT("value",{value:n,...i}),n=null}else{let{interpolate:a}=i;n===void 0&&(n=K),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:n,optional:!0}},jut(i),YY);let s={geometry:{value:K}};for(let a in this.channels){let c=this.channels[a],{scale:l}=c;l==="x"||l==="y"||a==="value"||(s[a]=c,delete this.channels[a])}this.contourChannels=s,this.smooth=!!r}filter(t,{x:r,y:n,value:i,...o},s){return super.filter(t,o,s)}render(t,r,n,i,o){let{geometry:s}=n,a=_n();return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(c=>{c.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",l=>a(s[l])).call(ye,this,n)}).node()}};function jut({thresholds:e,interval:t,...r}){return e=z3(e,t,Ql),Qe(r,function(n,i,o,s,a,c){let[l,u,f,d]=K3(o,s,a,c),h=f-l,p=d-u,{pixelSize:m,width:y=Math.round(Math.abs(h)/m),height:g=Math.round(Math.abs(p)/m)}=this,b=y/h,x=g/p,_=o.value.value,v=[];if(this.interpolate){let{x:B,y:A}=Au(o,s,c),O=fe(B,D=>(D-l)*b,Float64Array),L=fe(A,D=>(D-u)*x,Float64Array),S=[o.x,o.y,o.value],M=[O,L,_];for(let D of i){let C=this.filter(D,S,M);v.push(this.interpolate(C,y,g,O,L,_))}}else if(i){let B=y*g,A=i.length;for(let O=0;O<A;++O)v.push(_.slice(O*B,O*B+B))}else v.push(_);if(this.blur>0)for(let B of v)Zg({data:B,width:y,height:g},this.blur);let w=qut(e,_,...Yut(v));if(w===null)throw new Error(`unsupported thresholds: ${e}`);let{contour:T}=ou().size([y,g]).smooth(this.smooth),E=[],I=[];for(let B of v)I.push(_r(E.length,E.push(...fe(w,A=>T(B,A)))));for(let{coordinates:B}of E)for(let A of B)for(let O of A)for(let L of O)L[0]=L[0]/b+l,L[1]=L[1]/x+u;return{data:E,facets:I,channels:NI(this.contourChannels,E)}})}function qut(e,t,r,n){if(typeof e?.range=="function")return e.range(e.floor(r),n);if(typeof e=="function"&&(e=e(t,r,n)),typeof e!="number")return Sr(e);let i=gn(...Fh(r,n,e),e);for(;i[i.length-1]>=n;)i.pop();for(;i[1]<r;)i.shift();return i}function GY(){return new _x(...Z3("value",...arguments))}function Yut(e){return[Oe(e,t=>Oe(t,WY)),he(e,t=>he(t,WY))]}function WY(e){return isFinite(e)?e:NaN}function ZY(e,t){return Q3(qp,e,t)}function KY(e,t={}){return Q3(Yp,e,t)}function QY(e,t={}){return Q3(md,e,t)}function Q3(e,t,r={}){let{x:n,y:i,maxRadius:o}=r,s=e({px:n,py:i,maxRadius:o}),a=[];n!=null&&a.push(Zi(t,XY("x",{...s,inset:-6},r))),i!=null&&a.push(Ki(t,XY("y",{...s,inset:-6},r))),n!=null&&a.push(Oa(t,HY("x",{...s,dy:9,frameAnchor:"bottom",lineAnchor:"top"},r))),i!=null&&a.push(Oa(t,HY("y",{...s,dx:-9,frameAnchor:"left",textAnchor:"end"},r)));for(let c of a)c.ariaLabel=`crosshair ${c.ariaLabel}`;return Ur(...a)}function JY(e,{channels:t,...r},{facet:n,facetAnchor:i,fx:o,fy:s,[e]:a,channels:c,transform:l,initializer:u}){return{...r,facet:n,facetAnchor:i,fx:o,fy:s,[e]:a,channels:{...t,...c},transform:l,initializer:Wut(e,u)}}function Wut(e,t){return t==null?t:function(r,n,{x:i,y:o,px:s,py:a,...c},...l){let{channels:{x:u,y:f,...d}={},...h}=t.call(this,r,n,{...c,x:s,y:a},...l);return{channels:{...d,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...h}}}function XY(e,t,r){let{color:n="currentColor",opacity:i=.2,ruleStroke:o=n,ruleStrokeOpacity:s=i,ruleStrokeWidth:a}=r;return{...JY(e,t,r),stroke:o,strokeOpacity:s,strokeWidth:a}}function HY(e,t,r){let{color:n="currentColor",textFill:i=n,textFillOpacity:o,textStroke:s="var(--plot-background)",textStrokeOpacity:a,textStrokeWidth:c=5}=r;return{...JY(e,t,Gut(e,r)),fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:c}}function Gut(e,t){return Qe(t,(r,n,i)=>({channels:{text:{value:zb(i,e)?.value}}}))}var Xut={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Hut={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Zut={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Kut={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Qut={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},J3=class extends Ft{constructor(t,r={}){let{x:n,y:i,z:o,curve:s,tension:a}=r;super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},r,Xut),this.curve=rx(s,a),ws(this,r)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,z:u}=n,{curve:f}=this,[d,h]=on(this,i),p=c?b=>c[b]:Jr(d),m=l?b=>l[b]:Jr(h),y=this;function g(b){let x=-1,_=[],v={};for(let S in n)v[S]=[];let w=[],T=[],E=[],I=[];function B(S,M){S=b[S],M=b[M],_.push(++x),w[x]=p(S),E[x]=m(S),T[x]=p(M),I[x]=m(M);for(let D in n)v[D].push(n[D][M])}let{halfedges:A,hull:O,triangles:L}=Ao.from(b,p,m);for(let S=0;S<A.length;++S){let M=A[S];M>S&&B(L[S],L[M])}for(let S=0;S<O.length;++S)B(O[S],O[(S+1)%O.length]);ae(this).selectAll().data(_).enter().append("path").call(Gt,y).attr("d",S=>{let M=Jn(),D=f(M);return D.lineStart(),D.point(w[S],E[S]),D.point(T[S],I[S]),D.lineEnd(),M}).call(ye,y,v).call(ll,y,v,o)}return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(u?b=>b.selectAll().data(Xr(t,x=>u[x]).values()).enter().append("g").each(g):b=>b.datum(t).each(g)).node()}},wx=class extends Ft{constructor(t,r={},n,i=({z:o})=>o){let{x:o,y:s}=r;super(t,{x:{value:o,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},z:{value:i(r),optional:!0}},r,n)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,z:u}=n,[f,d]=on(this,i),h=c?g=>c[g]:Jr(f),p=l?g=>l[g]:Jr(d),m=this;function y(g){let b=Ao.from(g,h,p);ae(this).append("path").datum(g[0]).call(Gt,m).attr("d",m._render(b,i)).call(ye,m,n)}return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(u?g=>g.selectAll().data(Xr(t,b=>u[b]).values()).enter().append("g").each(y):g=>g.datum(t).each(y)).node()}},tF=class extends wx{constructor(t,r={}){super(t,r,Hut),this.fill="none"}_render(t){return t.render()}},eF=class extends wx{constructor(t,r={}){super(t,r,Zut,Ln)}_render(t){return t.renderHull()}},rF=class extends Ft{constructor(t,r={}){let{x:n,y:i,z:o}=r;super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},r,Kut)}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,z:u}=n,[f,d]=on(this,i),h=c?g=>c[g]:Jr(f),p=l?g=>l[g]:Jr(d),m=this;function y(g){let b=Ao.from(g,h,p),x=tW(b,i);ae(this).selectAll().data(g).enter().append("path").call(Gt,m).attr("d",(_,v)=>x.renderCell(v)).call(ye,m,n)}return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(u?g=>g.selectAll().data(Xr(t,b=>u[b]).values()).enter().append("g").each(y):g=>g.datum(t).each(y)).node()}},nF=class extends wx{constructor(t,r){super(t,r,Qut),this.fill="none"}_render(t,r){return tW(t,r).render()}};function tW(e,t){let{width:r,height:n,marginTop:i,marginRight:o,marginBottom:s,marginLeft:a}=t;return e.voronoi([a,i,r-o,n-s])}function vx(e,t,{x:r,y:n,...i}={}){return[r,n]=br(r,n),new e(t,{...i,x:r,y:n})}function eW(e,t){return vx(J3,e,t)}function rW(e,t){return vx(tF,e,t)}function nW(e,t){return vx(eF,e,t)}function iW(e,t){return vx(rF,e,t)}function oW(e,t){return vx(nF,e,t)}var Jut={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Sx=class extends Ft{constructor(t,{x:r,y:n,z:i,weight:o,fill:s,stroke:a,...c}={}){let l=sW(s)&&(s="currentColor",!0),u=sW(a)&&(a="currentColor",!0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},z:{value:Ln({z:i,fill:s,stroke:a}),optional:!0},weight:{value:o,optional:!0}},eft({...c,fill:s,stroke:a},l,u),Jut),l&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,r,n,i,o){let{contours:s}=n,a=_n();return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{}).call(c=>c.selectAll().data(t).enter().append("path").call(Gt,this).call(ye,this,n).attr("d",l=>a(s[l]))).node()}};function aW(e,{x:t,y:r,...n}={}){return[t,r]=br(t,r),new Sx(e,{...n,x:t,y:r})}var tft=new Set(["x","y","z","weight"]);function eft(e,t,r){let{bandwidth:i,thresholds:o}=e;return i=i===void 0?20:+i,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?Cr(o):+o,Qe(e,function(s,a,c,l,u,f){let d=c.weight?Cr(c.weight.value):null,h=c.z?.value,{z:p}=this,[m,y]=on(this,u),{width:g,height:b}=u,{x,y:_}=Au(c,l,f),v=Object.fromEntries(Object.entries(c).filter(([L])=>!tft.has(L)).map(([L,S])=>[L,{...S,value:[]}])),w=t&&[],T=r&&[],E=hB().x(x?L=>x[L]:m).y(_?L=>_[L]:y).weight(d?L=>d[L]:1).size([g,b]).bandwidth(i),I=[];for(let L of a){let S=[];I.push(S);for(let M of h?Wb(L,h,p):[L]){let D=E.contours(M);S.push([M,D])}}let B=o;if(!(B instanceof cd)){let L=0;for(let S of I)for(let[,M]of S){let D=M.max;D>L&&(L=D)}B=Float64Array.from({length:o-1},(S,M)=>L*100*(M+1)/o)}let A=[],O=[];for(let L of I){let S=[];A.push(S);for(let[M,D]of L)for(let C of B){S.push(O.length),O.push(D(C/100)),w&&w.push(C),T&&T.push(C);for(let U in v)v[U].value.push(c[U].value[M[0]])}}return w&&w.push(0),T&&T.push(0),{data:s,facets:A,channels:{...v,...w&&{fill:{value:w,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:O}}}})}function sW(e){return/^density$/i.test(e)}function uW(e,{x1:t,x2:r,y1:n,y2:i,x:o=t===void 0&&r===void 0?nr:void 0,y:s=n===void 0&&i===void 0?K:void 0,fill:a,positiveFill:c="#3ca951",negativeFill:l="#4269d0",fillOpacity:u=1,positiveFillOpacity:f=u,negativeFillOpacity:d=u,stroke:h,strokeOpacity:p,z:m=cr(h)[0],clip:y,tip:g,render:b,...x}={}){return[t,r]=cW(o,t,r),[n,i]=cW(s,n,i),t===r&&n===i&&(n=Cu(0)),{tip:g}=_s({tip:g},"x"),Ur(Se(c)?null:Object.assign(nx(e,{x1:t,x2:r,y1:n,y2:i,z:m,fill:c,fillOpacity:f,render:jp(b,lW(!0)),clip:y,...x}),{ariaLabel:"positive difference"}),Se(l)?null:Object.assign(nx(e,{x1:t,x2:r,y1:n,y2:i,z:m,fill:l,fillOpacity:d,render:jp(b,lW(!1)),clip:y,...x}),{ariaLabel:"negative difference"}),Ad(e,{x:r,y:i,z:m,stroke:h,strokeOpacity:p,tip:g,clip:!0,...x}))}function cW(e,t,r){return t===void 0&&r===void 0?t=r=Cu(e):t===void 0?(r=Cu(r),t=e===void 0?r:Cu(e)):r===void 0?(t=Cu(t),r=e===void 0?t:Cu(e)):(t=Cu(t),r=Cu(r)),[t,r]}function Cu(e){let t,{value:r,label:n=Sn(r)}=Fo(e);return{transform:i=>t||(t=At(i,r)),label:n}}function lW(e){return(t,r,n,i,o,s)=>{let{x1:a,x2:c}=n,{height:l}=i,u=new Float32Array(a.length),f=new Float32Array(c.length);(e===CI(r.y)<0?u:f).fill(l);let d=s(t,r,{...n,x2:a,y2:f},i,o),h=s(t,r,{...n,x1:c,y1:u},i,o),p=d.querySelector("g")??d,m=h.querySelector("g")??h;for(let y=0;p.firstChild;y+=2){let g=zI(),b=pt("svg:clipPath",o).attr("id",g).node();b.appendChild(p.firstChild),m.childNodes[y].setAttribute("clip-path",`url(#${g})`),m.insertBefore(b,m.childNodes[y])}return h}}var rft={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},Ix=class extends Ft{constructor(t,r={}){let[n,i]=Ae(r.r,3);super(t,{geometry:{value:r.geometry,scale:"projection"},r:{value:n,scale:"r",filter:ii,optional:!0}},lx(r),rft),this.r=i}render(t,r,n,i,o){let{geometry:s,r:a}=n,c=_n(o.projection??nft(r)),{r:l}=this;return hu(l)?t=[]:l!==void 0&&c.pointRadius(l),pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(u=>{u.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",a?f=>c.pointRadius(a[f])(s[f]):f=>c(s[f])).call(ye,this,n)}).node()}};function nft({x:e,y:t}){if(e||t)return e??=r=>r,t??=r=>r,Xf({point(r,n){this.stream.point(e(r),t(n))}})}function NT(e,{geometry:t=K,...r}={}){switch(e?.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new Ix(e,{geometry:t,...r})}function fW({strokeWidth:e=1.5,...t}={}){return NT({type:"Sphere"},{strokeWidth:e,...t})}function dW({strokeOpacity:e=.1,...t}={}){return NT(LB(),{strokeOpacity:e,...t})}var dm=.5,hm=0;function hW(e={fill:"count"},{binWidth:t,...r}={}){let{z:n}=r;return t=t===void 0?20:Wt(t),e=ZN(e,r),Da(e,"fill")&&(r.channels={...r.channels,fill:{value:[]}}),r.symbol===void 0&&(r.symbol="hexagon"),r.r===void 0&&!Da(e,"r")&&(r.r=t/2),Qe(r,(i,o,s,a,c,l)=>{let{x:u,y:f,z:d,fill:h,stroke:p,symbol:m}=s;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Au(s,a,l)),d=d?d.value:At(i,n),h=h?.value,p=p?.value,m=m?.value;let y=$b(e,{z:d,fill:h,stroke:p,symbol:m}),g=d&&[],b=h&&[],x=p&&[],_=m&&[],v=[],w=[],T=[],E=-1;for(let O of e)O.initialize(i);for(let O of o){let L=[];for(let S of e)S.scope("facet",O);for(let[S,M]of vu(O,y))for(let{index:D,extent:C}of ift(i,M,u,f,t)){L.push(++E),w.push(C.x),T.push(C.y),d&&g.push(y===d?S:d[D[0]]),h&&b.push(y===h?S:h[D[0]]),p&&x.push(y===p?S:p[D[0]]),m&&_.push(y===m?S:m[D[0]]);for(let U of e)U.reduce(D,C)}v.push(L)}let I=s.x.scale,B=s.y.scale,A={x:{value:w,source:a[I]?{value:fe(w,a[I].invert),scale:I}:null},y:{value:T,source:a[B]?{value:fe(T,a[B].invert),scale:B}:null},...d&&{z:{value:g}},...h&&{fill:{value:b,scale:"auto"}},...p&&{stroke:{value:x,scale:"auto"}},...m&&{symbol:{value:_,scale:"auto"}},...Object.fromEntries(e.map(({name:O,output:L})=>[O,{scale:"auto",label:L.label,radius:O==="r"?t/2:void 0,value:L.transform()}]))};return{data:i,facets:v,channels:A}})}function ift(e,t,r,n,i){let o=i*(1.5/$N),s=new Map;for(let a of t){let c=r[a],l=n[a];if(isNaN(c)||isNaN(l))continue;let u=Math.round(l=(l-hm)/o),f=Math.round(c=(c-dm)/i-(u&1)/2),d=l-u;if(Math.abs(d)*3>1){let m=c-f,y=f+(c<f?-1:1)/2,g=u+(l<u?-1:1),b=c-y,x=l-g;m*m+d*d>b*b+x*x&&(f=y+(u&1?1:-1)/2,u=g)}let h=`${f},${u}`,p=s.get(h);p===void 0&&(p={index:[],extent:{data:e,x:(f+(u&1)/2)*i+dm,y:u*o+hm}},s.set(h,p)),p.index.push(a)}return s.values()}var oft={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function pW(e){return new Tx(e)}var Tx=class extends Ft{constructor({binWidth:t=20,clip:r=!0,...n}={}){super(gu,void 0,{clip:r,...n},oft),this.binWidth=Wt(t)}render(t,r,n,i,o){let{binWidth:s}=this,{marginTop:a,marginRight:c,marginBottom:l,marginLeft:u,width:f,height:d}=i,h=u-dm,p=f-c-dm,m=a-hm,y=d-l-hm,g=s/2,b=g*zN,x=b/2,_=g*2,v=b*1.5,w=Math.floor(h/_),T=Math.ceil(p/_),E=Math.floor((m+x)/v),I=Math.ceil((y-x)/v)+1,B=`m0,${Uu(-b)}l${Uu(g)},${Uu(x)}v${Uu(b)}l${Uu(-g)},${Uu(x)}`,A=B;for(let O=E;O<I;++O)for(let L=w;L<T;++L)A+=`M${Uu(L*_+(O&1)*g)},${Uu(O*v)}${B}`;return pt("svg:g",o).datum(0).call(Kt,this,i,o).call(Pt,this,{},ur+dm,ur+hm).call(O=>O.append("path").call(Gt,this).call(ye,this,n).attr("d",A)).node()}};function Uu(e){return Math.round(e*1e3)/1e3}var sft={ariaLabel:"image",fill:null,stroke:null};function aft(e){return/^\.*\//.test(e)}function cft(e){return/^(blob|data|file|http|https):/i.test(e)}function lft(e){return typeof e=="string"&&(aft(e)||cft(e))?[void 0,e]:[e,void 0]}var Ax=class extends Ft{constructor(t,r={}){let{x:n,y:i,r:o,width:s,height:a,rotate:c,src:l,preserveAspectRatio:u,crossOrigin:f,frameAnchor:d,imageRendering:h}=r;o==null&&(o=void 0),o===void 0&&s===void 0&&a===void 0?s=a=16:s===void 0&&a!==void 0?s=a:a===void 0&&s!==void 0&&(a=s);let[p,m]=lft(l),[y,g]=Ae(o),[b,x]=Ae(s,g!==void 0?g*2:void 0),[_,v]=Ae(a,g!==void 0?g*2:void 0),[w,T]=Ae(c,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:y,scale:"r",filter:ii,optional:!0},width:{value:b,filter:ii,optional:!0},height:{value:_,filter:ii,optional:!0},rotate:{value:w,optional:!0},src:{value:p,optional:!0}},lx(r),sft),this.src=m,this.width=x,this.rotate=T,this.height=v,this.r=g,this.preserveAspectRatio=Ne(u,"xMidYMid"),this.crossOrigin=vr(f),this.frameAnchor=Ea(d),this.imageRendering=Ne(h,"auto")}render(t,r,n,i,o){let{x:s,y:a}=r,{x:c,y:l,width:u,height:f,r:d,rotate:h,src:p}=n,{r:m,width:y,height:g,rotate:b}=this,[x,_]=on(this,i);return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,{x:c&&s,y:l&&a}).call(v=>v.selectAll().data(t).enter().append("image").call(Gt,this).attr("x",mW(c,u,d,x,y,m)).attr("y",mW(l,f,d,_,g,m)).attr("width",u?w=>u[w]:y!==void 0?y:d?w=>d[w]*2:m*2).attr("height",f?w=>f[w]:g!==void 0?g:d?w=>d[w]*2:m*2).attr("transform",h?w=>`rotate(${h[w]})`:b?`rotate(${b})`:null).attr("transform-origin",h||b?Du`${c?w=>c[w]:x}px ${l?w=>l[w]:_}px`:null).call(yt,"href",p?w=>p[w]:this.src).call(yt,"preserveAspectRatio",this.preserveAspectRatio).call(yt,"crossorigin",this.crossOrigin).call(yt,"image-rendering",this.imageRendering).call(yt,"clip-path",d?w=>`circle(${d[w]}px)`:m!==void 0?`circle(${m}px)`:null).call(ye,this,n)).node()}};function mW(e,t,r,n,i,o){return t&&e?s=>e[s]-t[s]/2:t?s=>n-t[s]/2:e&&i!==void 0?s=>e[s]-i/2:i!==void 0?n-i/2:r&&e?s=>e[s]-r[s]:r?s=>n-r[s]:e?s=>e[s]-o:n-o}function yW(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=br(t,r)),new Ax(e,{...n,x:t,y:r})}function uft(e,t,r){var n=1e-8,i=t-1,o=r-1,s=0,a,c,l,u,f,d,h,p,m,y,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,m=2/(1/(2*t-1)+1/(2*r-1)),y=h*Math.sqrt(p+m)/m-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*m)),h=t/(t+r*Math.exp(2*y))):(a=Math.log(t/(t+r)),c=Math.log(r/(t+r)),u=Math.exp(t*a)/t,f=Math.exp(r*c)/r,y=u+f,e<u/y?h=Math.pow(t*y*e,1/t):h=1-Math.pow(r*y*(1-e),1/r)),g=-pm(t)-pm(r)+pm(t+r);s<10;s++){if(h===0||h===1)return h;if(d=fft(h,t,r)-e,u=Math.exp(i*Math.log(h)+o*Math.log(1-h)+g),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-o/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<n*h&&s>0)break}return h}function fft(e,t,r){var n=e===0||e===1?0:Math.exp(pm(t+r)-pm(t)-pm(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*gW(e,t,r)/t:1-n*gW(1-e,r,t)/r}function gW(e,t,r){var n=1e-30,i=1,o=t+r,s=t+1,a=t-1,c=1,l=1-o*e/s,u,f,d,h;for(Math.abs(l)<n&&(l=n),l=1/l,h=l;i<=100&&(u=2*i,f=i*(r-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<n&&(l=n),c=1+f/c,Math.abs(c)<n&&(c=n),l=1/l,h*=l*c,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),l=1+f*l,Math.abs(l)<n&&(l=n),c=1+f/c,Math.abs(c)<n&&(c=n),l=1/l,d=l*c,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function pm(e){var t=0,r=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)n+=r[t]/++o;return Math.log(2.506628274631*n/i)-s}function bW(e,t){var r=uft(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}var dft={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1},FT=class extends Ft{constructor(t,r={}){let{x:n,y:i,z:o,ci:s=.95,precision:a=4}=r;if(super(t,{x:{value:n,scale:"x"},y:{value:i,scale:"y"},z:{value:Ln(r),optional:!0}},r,dft),this.z=o,this.ci=+s,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${s}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,r,n,i,o){let{x:s,y:a,z:c}=n,{ci:l}=this;return pt("svg:g",o).call(Kt,this,i,o).call(Pt,this,r).call(u=>u.selectAll().data(c?Wb(t,c,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(Gt,this).call(pd,this,{...n,fill:null,fillOpacity:null}).attr("d",d=>this._renderLine(d,s,a)).call(l&&!il(this.fill)?d=>d.select(hft).attr("stroke","none").call(Gt,this).call(pd,this,{...n,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,s,a)):()=>{}))).node()}};function hft(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(So.svg,"path"),this)}var iF=class extends FT{constructor(t,r){super(t,r)}_renderBand(t,r,n){let{ci:i,precision:o}=this,[s,a]=Be(t,u=>n[u]),c=RT(t,n,r),l=wW(t,n,r,(1-i)/2,c);return yp().y(u=>u).x0(u=>l(u,-1)).x1(u=>l(u,1))(_r(s,a-o/2,o).concat(a))}_renderLine(t,r,n){let[i,o]=Be(t,a=>n[a]),s=RT(t,n,r);return`M${s(i)},${i}L${s(o)},${o}`}},oF=class extends FT{constructor(t,r){super(t,r)}_renderBand(t,r,n){let{ci:i,precision:o}=this,[s,a]=Be(t,u=>r[u]),c=RT(t,r,n),l=wW(t,r,n,(1-i)/2,c);return yp().x(u=>u).y0(u=>l(u,-1)).y1(u=>l(u,1))(_r(s,a-o/2,o).concat(a))}_renderLine(t,r,n){let[i,o]=Be(t,a=>r[a]),s=RT(t,r,n);return`M${i},${s(i)}L${o},${s(o)}`}};function xW(e,{y:t=nr,x:r=K,stroke:n,fill:i=Se(n)?"currentColor":n,...o}={}){return new iF(e,Kp({...o,x:r,y:t,fill:i,stroke:n}))}function _W(e,{x:t=nr,y:r=K,stroke:n,fill:i=Se(n)?"currentColor":n,...o}={}){return new oF(e,Zp({...o,x:t,y:r,fill:i,stroke:n}))}function RT(e,t,r){let n=0,i=0,o=0,s=0;for(let u of e){let f=t[u],d=r[u];n+=f,i+=d,o+=f*d,s+=f*f}let a=e.length,c=(a*o-n*i)/(a*s-n*n),l=(i-c*n)/a;return u=>c*u+l}function wW(e,t,r,n,i){let o=bn(e,u=>t[u])/e.length,s=0,a=0;for(let u of e)s+=(t[u]-o)**2,a+=(r[u]-i(t[u]))**2;let c=Math.sqrt(a/(e.length-2)),l=bW(n,e.length-2);return(u,f)=>{let d=i(u),h=c*Math.sqrt(1/e.length+(u-o)**2/s);return d+f*l*h}}function Mx({path:e=K,delimiter:t,frameAnchor:r,treeLayout:n=Hf,treeSort:i,treeSeparation:o,treeAnchor:s,treeFilter:a,...c}={}){s=UT(s),i=IW(i),a!=null&&(a=aF(a)),r===void 0&&(r=s.frameAnchor);let l=TW(t),u=NW(c,aF),[f,d]=en(),[h,p]=en();return{x:f,y:h,frameAnchor:r,...rn(c,(m,y)=>{let g=l(At(m,e)),b=d([]),x=p([]),_=-1,v=[],w=[],T=NS().path(I=>g[I]),E=n();E.nodeSize&&E.nodeSize([1,1]),E.separation&&o!==void 0&&E.separation(o??Rb);for(let I of u)I[kT]=I[BW]([]);for(let I of y){let B=[],A=T(I.filter(O=>g[O]!=null)).each(O=>O.data=m[O.data]);i!=null&&A.sort(i),E(A);for(let O of A.descendants())if(!(a!=null&&!a(O))){B.push(++_),v[_]=O.data,s.position(O,_,b,x);for(let L of u)L[kT][_]=L[OW](O)}w.push(B)}return{data:v,facets:w}}),...Object.fromEntries(u)}}function CT({path:e=K,delimiter:t,curve:r="bump-x",stroke:n="#555",strokeWidth:i=1.5,strokeOpacity:o=.5,treeLayout:s=Hf,treeSort:a,treeSeparation:c,treeAnchor:l,treeFilter:u,...f}={}){l=UT(l),a=IW(a),u!=null&&(u=SW(u)),f={curve:r,stroke:n,strokeWidth:i,strokeOpacity:o,...f};let d=TW(t),h=NW(f,SW),[p,m]=en(),[y,g]=en(),[b,x]=en(),[_,v]=en();return{x1:p,x2:y,y1:b,y2:_,...rn(f,(w,T)=>{let E=d(At(w,e)),I=m([]),B=g([]),A=x([]),O=v([]),L=-1,S=[],M=[],D=NS().path(U=>E[U]),C=s();C.nodeSize&&C.nodeSize([1,1]),C.separation&&c!==void 0&&C.separation(c??Rb);for(let U of h)U[kT]=U[BW]([]);for(let U of T){let k=[],$=D(U.filter(z=>E[z]!=null)).each(z=>z.data=w[z.data]);a!=null&&$.sort(a),C($);for(let{source:z,target:V}of $.links())if(!(u!=null&&!u(V,z))){k.push(++L),S[L]=V.data,l.position(z,L,I,A),l.position(V,L,B,O);for(let Q of h)Q[kT][L]=Q[OW](V,z)}M.push(k)}return{data:S,facets:M}}),...Object.fromEntries(h)}}function UT(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return pft;case"right":return mft}throw new Error(`invalid tree anchor: ${e}`)}var pft={frameAnchor:"left",dx:6,position({x:e,y:t},r,n,i){n[r]=t,i[r]=-e}},mft={frameAnchor:"right",dx:-6,position({x:e,y:t},r,n,i){n[r]=-t,i[r]=-e}};function IW(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?vW(aF(e)):vW(yft(e))}function vW(e){return(t,r)=>Qr(e(t),e(r))}function yft(e){return t=>t.data?.[e]}function TW(e="/"){if(e=`${e}`,e==="/")return r=>r;if(e.length!==1)throw new Error("delimiter must be exactly one character");let t=e.charCodeAt(0);return r=>r.map(n=>gft(n,t))}var sF=92,AW=47;function gft(e,t){if(t===sF)throw new Error("delimiter cannot be backslash");let r=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case sF:if(!r){r=!0;continue}break;case t:r?(e=e.slice(0,n-1)+e.slice(n),--n,--i):e=e.slice(0,n)+"/"+e.slice(n+1);break;case AW:r?(e=e.slice(0,n)+"\\\\"+e.slice(n),n+=2,i+=2):(e=e.slice(0,n)+"\\"+e.slice(n),++n,++i);break}r=!1}return e}function bft(e){let t=!1;for(let r=0,n=e.length;r<n;++r){switch(e.charCodeAt(r)){case sF:if(!t){t=!0;continue}case AW:t&&(e=e.slice(0,r-1)+e.slice(r),--r,--n);break}t=!1}return e}function MW(e){return tn(e)&&typeof e.node=="function"}function xft(e){return tn(e)&&typeof e.link=="function"}function aF(e){if(MW(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return lF;case"node:path":return cF;case"node:internal":return EW;case"node:external":return DW;case"node:depth":return uF;case"node:height":return fF}throw new Error(`invalid node value: ${e}`)}}function SW(e){if(MW(e))return e.node;if(xft(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return LT(lF);case"parent:path":return LT(cF);case"parent:depth":return LT(uF);case"parent:height":return LT(fF);case"node:name":return lF;case"node:path":return cF;case"node:internal":return EW;case"node:external":return DW;case"node:depth":return uF;case"node:height":return fF}throw new Error(`invalid link value: ${e}`)}}function cF(e){return e.id}function lF(e){return _ft(e.id)}function uF(e){return e.depth}function fF(e){return e.height}function EW(e){return!!e.children}function DW(e){return!e.children}function LT(e){return(t,r)=>r==null?void 0:e(r)}function _ft(e){let t=e.length;for(;--t>0&&!wft(e,t););return bft(e.slice(t+1))}function wft(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if(!(r&1))return!0}return!1}var BW=2,OW=3,kT=4;function NW(e,t){let r=[];for(let n in e){let i=e[n],o=t(i);o!==void 0&&r.push([n,...en(i),o])}return r}function dF(e,{fill:t,stroke:r,strokeWidth:n,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,marker:u,markerStart:f=u,markerEnd:d=u,dot:h=Se(f)&&Se(d),text:p="node:name",textStroke:m="var(--plot-background)",title:y="node:path",dx:g,dy:b,textAnchor:x,treeLayout:_=Hf,textLayout:v=_===Hf||_===BS?"mirrored":"normal",tip:w,...T}={}){if(g===void 0&&(g=UT(T.treeAnchor).dx),x!==void 0)throw new Error("textAnchor is not a configurable tree option");v=Yr(v,"textLayout",["mirrored","normal"]);function E(I){return Oa(e,Mx({treeLayout:_,text:p,fill:t===void 0?"currentColor":t,stroke:m,dx:g,dy:b,title:y,...I,...T}))}return Ur(vT(e,CT({treeLayout:_,markerStart:f,markerEnd:d,stroke:r!==void 0?r:t===void 0?"node:internal":t,strokeWidth:n,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:c,strokeDashoffset:l,...T})),h?Lo(e,Mx({treeLayout:_,fill:t===void 0?"node:internal":t,title:y,tip:w,...T})):null,p!=null?v==="mirrored"?[E({textAnchor:"start",treeFilter:"node:external"}),E({textAnchor:"end",treeFilter:"node:internal",dx:-g})]:E():null)}function FW(e,t){return dF(e,{...t,treeLayout:BS})}function RW({geometry:e=K,...t}={}){return Qe({...t,x:null,y:null},(r,n,i,o,s,{projection:a})=>{let c=At(r,e),l=c.length,u=new Float64Array(l),f=new Float64Array(l),d=_n(a);for(let h=0;h<l;++h)[u[h],f[h]]=d.centroid(c[h]);return{data:r,facets:n,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function LW({geometry:e=K,...t}={}){let r;return{...t,x:{transform:n=>Float64Array.from(r=At(At(n,e),DB),([i])=>i)},y:{transform:()=>Float64Array.from(r,([,n])=>n)}}}var WW=hX(YW(),1);var Dft=({marginLeft:e})=>[1,e],Bft=({width:e,marginRight:t})=>[-1,e-t],Oft=({width:e,marginLeft:t,marginRight:r})=>[0,(t+e-r)/2],Nft=({marginTop:e})=>[1,e],Fft=({height:e,marginBottom:t})=>[-1,e-t],Rft=({height:e,marginTop:t,marginBottom:r})=>[0,(t+e-r)/2];function GW(e){return typeof e=="string"?{anchor:e}:e}function XW(e={},t={}){arguments.length===1&&([e,t]=ZW(e));let{anchor:r="left",padding:n=1,r:i=t.r}=GW(e);switch(`${r}`.toLowerCase()){case"left":r=Dft;break;case"right":r=Bft;break;case"middle":r=Oft;break;default:throw new Error(`unknown dodge anchor: ${r}`)}return KW("x","y",r,Wt(n),i,t)}function HW(e={},t={}){arguments.length===1&&([e,t]=ZW(e));let{anchor:r="bottom",padding:n=1,r:i=t.r}=GW(e);switch(`${r}`.toLowerCase()){case"top":r=Nft;break;case"bottom":r=Fft;break;case"middle":r=Rft;break;default:throw new Error(`unknown dodge anchor: ${r}`)}return KW("y","x",r,Wt(n),i,t)}function ZW(e){let{anchor:t,padding:r,...n}=e,{r:i}=n;return[{anchor:t,padding:r,r:i},n]}function KW(e,t,r,n,i,o){if(i!=null&&typeof i!="number"){let{channels:s,sort:a,reverse:c}=o;s=kb(s),s?.r===void 0&&(o={...o,channels:{...s,r:{value:i,scale:"r"}}}),a===void 0&&c===void 0&&(o.sort={channel:"-r"})}return Qe(o,function(s,a,c,l,u,f){let{[t]:d,r:h}=c;if(!c[t])throw new Error(`missing channel: ${t}`);({[t]:d}=Au(c,l,f));let p=h?void 0:i!==void 0?Wt(i):this.r!==void 0?this.r:3;h&&(h=At(h.value,l[h.scale]||K,Float64Array));let[m,y]=r(u),g=m?kft:Lft,b=new Float64Array(d.length),x=h?_=>h[_]:()=>p;for(let _ of a){let v=(0,WW.default)();_=_.filter(h?T=>wp(d[T])&&ii(h[T]):T=>wp(d[T]));let w=new Float64Array(2*_.length+2);for(let T of _){let E=x(T),I=m?E+n:0,B=d[T]-E,A=d[T]+E,O=2;v.queryInterval(B-n,A+n,([,,S])=>{let M=b[S]-I,D=d[T]-d[S],C=n+(h?h[T]+h[S]:2*p),U=Math.sqrt(C*C-D*D);w[O++]=M-U,w[O++]=M+U});let L=w.slice(0,O);m&&(L=L.filter(S=>S>=0));t:for(let S of L.sort(g)){for(let M=0;M<O;M+=2)if(w[M]+1e-6<S&&S<w[M+1]-1e-6)continue t;b[T]=S+I;break}v.insert([B,A,T])}}m||(m=1);for(let _ of a)for(let v of _)b[v]=b[v]*m+y;return{data:s,facets:a,channels:{[e]:{value:b,source:null},[t]:{value:d,source:c[t]},...h&&{r:{value:h,source:c.r}}}}})}function Lft(e,t){return Math.abs(e)-Math.abs(t)}function kft(e,t){return e-t}function JW(e,t){return arguments.length===1&&({basis:e,...t}=e),cm(zT(e),t)}function tG(e,t){return arguments.length===1&&({basis:e,...t}=e),lm(zT(e),t)}function zT(e){if(e===void 0)return QW;if(typeof e=="function")return VT(Ep(e));if(/^p\d{2}$/i.test(e))return bm(Ap(e));switch(`${e}`.toLowerCase()){case"deviation":return Pft;case"first":return QW;case"last":return Uft;case"max":return $ft;case"mean":return zft;case"median":return Vft;case"min":return jft;case"sum":return qft;case"extent":return Cft}throw new Error(`invalid basis: ${e}`)}function VT(e){return{mapIndex(t,r,n){let i=+e(t,r);for(let o of t)n[o]=r[o]===null?NaN:r[o]/i}}}function bm(e){return VT((t,r)=>e(t,n=>r[n]))}var Cft={mapIndex(e,t,r){let[n,i]=Be(e,s=>t[s]),o=i-n;for(let s of e)r[s]=t[s]===null?NaN:(t[s]-n)/o}},QW=VT((e,t)=>{for(let r=0;r<e.length;++r){let n=t[e[r]];if(wr(n))return n}}),Uft=VT((e,t)=>{for(let r=e.length-1;r>=0;--r){let n=t[e[r]];if(wr(n))return n}}),Pft={mapIndex(e,t,r){let n=Rc(e,o=>t[o]),i=vo(e,o=>t[o]);for(let o of e)r[o]=t[o]===null?NaN:i?(t[o]-n)/i:0}},$ft=bm(he),zft=bm(Rc),Vft=bm(ps),jft=bm(Oe),qft=bm(bn);function eG(e,t){return Yft("x",e,t)}function Yft(e,t,r={}){let n,i=1;if(typeof t=="number")i=t,n=(l,u)=>+l+u;else{if(typeof t=="string"){let l=t.startsWith("-")?-1:1;[t,i]=xI(t.replace(/^[+-]/,"")),i*=l}t=Bp(t),n=(l,u)=>t.offset(l,u)}let o=`${e}1`,s=`${e}2`,a=Ti({[o]:l=>l.map(u=>n(u,i)),[s]:l=>l},r),c=a[s].transform;return a[s].transform=()=>{let l=c(),[u,f]=Be(l);return l.domain=i<0?[u,n(f,i)]:[n(u,i),f],l},a}function rG(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return bF(t);case"last":return xF(t)}if(typeof e=="function")return Pu(null,e,t);let r,n;for(r in e){if(n!==void 0)throw new Error("ambiguous selector; multiple inputs");n=Wft(e[r])}if(n===void 0)throw new Error(`invalid selector: ${e}`);return Pu(r,n,t)}function Wft(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return _F;case"max":return wF}throw new Error(`unknown selector: ${e}`)}function bF(e){return Pu(null,Gft,e)}function xF(e){return Pu(null,Xft,e)}function nG(e){return Pu("x",_F,e)}function iG(e){return Pu("y",_F,e)}function oG(e){return Pu("x",wF,e)}function sG(e){return Pu("y",wF,e)}function*Gft(e){yield e[0]}function*Xft(e){yield e[e.length-1]}function*_F(e,t){yield pv(e,r=>t[r])}function*wF(e,t){yield Nf(e,r=>t[r])}function Pu(e,t,r){if(e!=null){if(r[e]==null)throw new Error(`missing channel: ${e}`);e=r[e]}let n=Ln(r);return rn(r,(i,o)=>{let s=At(i,n),a=At(i,e),c=[];for(let l of o){let u=[];for(let f of s?Xr(l,d=>s[d]).values():[l])for(let d of t(f,a))u.push(d);c.push(u)}return{data:i,facets:c}})}var Hft=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xReverse","x.reverse"],["xZero","x.zero"],["xBase","x.base"],["xExponent","x.exponent"],["xConstant","x.constant"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yReverse","y.reverse"],["yZero","y.zero"],["yBase","y.base"],["yExponent","y.exponent"],["yConstant","y.constant"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxNice","fx.nice"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyNice","fy.mice"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorN","color.n"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["colorBase","color.base"],["colorExponent","color.exponent"],["colorConstant","color.constant"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["opacityBase","opacity.base"],["opacityExponent","opacity.exponent"],["opacityConstant","opacity.constant"],["symbolScale","symbol.type"],["symbolDomain","symbol.domain"],["symbolRange","symbol.range"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rZero","r.zero"],["rBase","r.base"],["rExponent","r.exponent"],["rConstant","r.constant"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthZero","length.zero"],["lengthBase","length.base"],["lengthExponent","length.exponent"],["lengthConstant","length.constant"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]);function Zft(e,t,r){for(let n=0;n<t.length;++n){let i=t[n];n===t.length-1?e[i]=r:e=e[i]||(e[i]={})}}function aG(e,t,r){for(let n in e){let i=Hft.get(n);if(i==null)throw new Error(`Unrecognized plot attribute: ${n}`);let o=e[n];typeof o=="symbol"?r.push(n):o!==void 0&&Zft(t,i.split("."),o)}}var Kft=new Set(["frame","hexgrid","sphere","graticule"]);async function lG(e){let t={marks:[]},r=[],{attributes:n,marks:i}=e;aG(n,t,r);let o=[];for(let a of i)for(let{type:c,data:l,options:u}of a.plotSpecs()){if(Kft.has(c))t.marks.push(Bx[c](u));else if(Wy(l)){let f=Object.fromEntries(Object.entries(u).map(([d,h])=>{let p=h;if(typeof h=="string")p=l.getChild(h)??h;else if(typeof h=="object"){let m=l.getChild(h.value);p=m?{value:m}:h}return[d,p]}));t.marks.push(Bx[c]({length:l.numRows},f))}else t.marks.push(Bx[c](l,u));o.push(a.index)}Jft(t,e);let s=ex(t);tdt(s,o),Qft(e,s,n,r);for(let a of e.interactors)await a.init(s);return s}function Qft(e,t,r,n){n.forEach(i=>{let o=r[i];if(o===ia){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);let s=i.slice(0,-6),a=t.scale(s);a?.domain&&e.setAttribute(i,r[`${s}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${o}`)})}function Jft(e,t){let{marks:r}=t;jT("x",e,r),jT("y",e,r),jT("fx",e,r),jT("fy",e,r)}function jT(e,t,r){let n=t[e]||{};if(n.axis===null||n.label!==void 0)return;let i=r.map(l=>l.channelField(e)?.field);if(i.every(l=>l==null))return;let o,s,a;for(let l=0;l<i.length;++l){let{column:u,label:f}=i[l]||{};u===void 0&&f===void 0||(o===void 0&&s===void 0?(o=u,s=f,a=edt(r[l].data,e)||"number"):s!==f?s=void 0:o!==u&&(o=void 0))}let c=s||o;if(c!==void 0){if((a==="number"||a==="date")&&(e==="x"||e==="y")){n.percent&&(c=`${c} (%)`);let l=(e==="x"?1:-1)*(n.reverse?-1:1);e==="x"||n.labelAnchor==="center"?c=e==="x"==l<0?`\u2190 ${c}`:`${c} \u2192`:c=`${l<0?"\u2191 ":"\u2193 "}${c}`}t[e]={...n,label:c}}}function tdt(e,t){let r=e.querySelectorAll('g[aria-label="facet"]');if(r.length)for(let n of r)cG(n,t);else cG(e,t)}function cG(e,t){let r=-1;for(let n of e.children){let i=n.getAttribute("aria-label")||"";n.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||n.setAttribute("data-index",t[++r])}}function edt(e,t){let{columns:r}=e,n=r[t]??r[t+"1"]??r[t+"2"];if(n){for(let i of n)if(i!=null)return i instanceof Date?"date":typeof i}}var rdt={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30},Ox=class{constructor(t){this.attributes={...rdt},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",this.element.value=this,this.params=new Map,this.synch=ID()}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){let{left:t,right:r}=this.margins();return this.getAttribute("width")-t-r}innerHeight(t=400){let{top:r,bottom:n}=this.margins(),i=this.getAttribute("height");return i==null&&t!=null&&(i=t,this.setAttribute("height",i,{silent:!0})),i-r-n}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;let t=await lG(this),r=this.legends.flatMap(({legend:n,include:i})=>{let o=n.init(t);return i?o:[]});this.element.replaceChildren(t,...r),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,r,n){return Xy(this.attributes[t],r)?(r===void 0?delete this.attributes[t]:this.attributes[t]=r,n?.silent||this.listeners?.get(t)?.forEach(i=>i(t,r)),!0):!1}addAttributeListener(t,r){let n=this.listeners||(this.listeners=new Map);return n.has(t)||n.set(t,new Set),n.get(t).add(r),this}removeAttributeListener(t,r){return this.listeners?.get(t)?.delete(r)}addParams(t,r){let{params:n}=this;for(let i of r)n.has(i)?n.get(i).push(t):(n.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(n.get(i).map(o=>o.requestQuery()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,r=!0){t.setPlot(this),this.legends.push({legend:t,include:r})}};function qT(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Vi(e)!==null)}var ndt=new Set(["order","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents","target"]);function uG(e){return ndt.has(e)}var idt=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function fG(e){return idt.has(`${e}`.toLowerCase())}function hl(e){return Wy(e)?odt(e):sdt(e)}function odt(e){let{numRows:t,numCols:r,schema:{fields:n}}=e,i={};for(let o=0;o<r;++o){let s=n[o].name;i[s]?console.warn(`Redundant column name "${s}". Skipping...`):i[s]=pE(e.getChildAt(o))}return{numRows:t,columns:i}}function sdt(e){let t=e.length;if(typeof e[0]=="object"){let r=t?Object.keys(e[0]):[],n={};return r.length>0&&r.forEach(i=>{n[i]=e.map(o=>o[i])}),{numRows:t,columns:n}}else return{numRows:t,values:e}}var dG=e=>e==="stroke"||e==="fill",adt=e=>/opacity$/i.test(e),cdt=e=>e==="symbol",ldt=(e,t)=>e!=="sort"&&e!=="tip"&&t!=null&&!Array.isArray(t),vF=(e,t)=>({channel:e,field:t,as:t instanceof yi?t.column:e}),SF=(e,t)=>({channel:e,value:t}),YT=e=>Array.isArray(e),In=class extends ci{constructor(t,r,n,i={}){super(r?.options?.filterBy),this.type=t,this.reqs=i,this.source=r,YT(this.source)&&(this.data=hl(this.source));let o=this.channels=[],s=this.detail=new Set,a=this.params=new Set,c=(l,u)=>{let f=typeof u;if(l==="channels")for(let d in u)s.add(d),c(d,u[d]);else if(f==="function"&&u[Xg]){let d=u(this,l);for(let h in d)c(h,d[h])}else if(f==="string")uG(l)||dG(l)&&qT(u)||cdt(l)&&fG(u)?o.push(SF(l,u)):o.push(vF(l,El(u)));else if(ec(u))if(Array.isArray(u.columns))o.push(vF(l,u)),a.add(u);else{let d=SF(l,u.value);o.push(d),u.addEventListener("value",h=>(d.value=h,this.update()))}else f==="object"&&ldt(l,u)?o.push(vF(l,u)):u!==void 0&&o.push(SF(l,u))};for(let l in n)c(l,n[l])}setPlot(t,r){this.plot=t,this.index=r,t.addParams(this,this.params),this.source?.table&&this.queryPending()}hasOwnData(){return this.source==null||YT(this.source)}hasFieldInfo(){return!!this._fieldInfo}channel(t){return this.channels.find(r=>r.channel===t)}channelField(t,{exact:r=!1}={}){let n=r?this.channel(t):this.channels.find(i=>i.channel.startsWith(t));return n?.field?n:null}fields(){if(this.hasOwnData())return null;let{source:{table:t},channels:r,reqs:n}=this,i=new Map;for(let{channel:o,field:s}of r){if(!s)continue;let a=s.stats?.stats||[],c=s.stats?.column??s,l=i.get(c)??i.set(c,new Set).get(c);a.forEach(u=>l.add(u)),n[o]?.forEach(u=>l.add(u))}return Array.from(i,([o,s])=>({table:t,column:o,stats:s}))}fieldInfo(t){let r=Object.fromEntries(t.map(n=>[n.column,n]));for(let n of this.channels){let{field:i}=n;i&&Object.assign(n,r[i.stats?.column??i])}return this._fieldInfo=!0,this}query(t=[]){if(this.hasOwnData())return null;let{channels:r,source:{table:n}}=this;return IF(r,n).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=hl(t),this}update(){return this.plot.update(this)}plotSpecs(){let{type:t,detail:r,channels:n}=this,{numRows:i,values:o,columns:s}=this.data||{},a={},c={};for(let f of n){let d=r.has(f.channel)?c:a;d[f.channel]=Cn(f,s)}r.size&&(a.channels=c);let l=o??(this.data?{length:i}:null);return[{type:t,data:l,options:a}]}};function Cn(e,t){let r=t?.[e.as]??e.as;return Object.hasOwn(e,"value")?e.value:dG(e.channel)?{value:r,scale:"color"}:adt(e.channel)?{value:r,scale:"opacity"}:r}function IF(e,t,r=[]){let n=bt.from({source:t}),i=new Set,o=!1;for(let s of e){let{channel:a,field:c,as:l}=s;if(!r.includes(a)){if(a==="orderby")n.orderby(s.value);else if(c){if(c.aggregate)o=!0;else{if(i.has(l))continue;i.add(l)}n.select({[l]:c})}}}return o&&n.groupby(Array.from(i)),n}function Dd(e,t){let{plot:r}=e,n=r.getAttribute(`${t}Scale`);if(!n){let{type:o}=e.channelField(t);n=o==="date"?"time":"linear"}let i={type:n};switch(n){case"log":i.base=r.getAttribute(`${t}Base`)??10;break;case"pow":i.exponent=r.getAttribute(`${t}Exponent`)??1;break;case"symlog":i.constant=r.getAttribute(`${t}Constant`)??1;break}return Yy(i)}function Qi(e,t,r,n,i=1,o){let{field:s}=e.channelField(t);o=o??s;let{type:a,apply:c,sqlApply:l}=Dd(e,t),u=!!e.plot.getAttribute(`${t}Reverse`),[f,d]=n.map(b=>c(b)),h=l(o),p=a==="time"||a==="utc"?h:o,m=d===f?0:(r-i)/(d-f),y=m!==1?` * ${m}::DOUBLE`:"";return[u?q`(${d} - ${h}::DOUBLE)${y}`:q`(${h}::DOUBLE - ${f})${y}`,p]}var TF={x:["min","max"]},AF={y:["min","max"]},WT={...TF,...AF};function hG(e,t,r,n,i){let{plot:o}=e,s=o.getAttribute(n),a=o.getAttribute(i);if(Array.isArray(s)&&!s[mn])return s;{let{column:c,min:l,max:u}=e.channelField(r),f=MF(t,c)||(a?qc().domain([l,u]).nice().domain():[l,u]);return s!==ia&&(f[mn]=!0),o.setAttribute(n,f,{silent:!0}),f}}function ka(e,t){return hG(e,t,"x","xDomain","xNice")}function Ca(e,t){return hG(e,t,"y","yDomain","yNice")}function MF(e,t){if(!e)return;let r,n,i=(o,s)=>{if(o==="BETWEEN"&&`${s.field}`===t){let{range:a}=s;a&&(r==null||a[0]<r)&&(r=a[0]),a&&(n==null||a[1]>n)&&(n=a[1])}};return Array.isArray(e)?e.forEach(o=>o.visit?.(i)):e.visit&&e.visit(i),r!=null&&n!=null&&r!==n?[r,n]:void 0}var Nx=class extends In{constructor(t,r,n){let i=t.endsWith("X")?"y":t.endsWith("Y")?"x":null,o=i?{[i]:["min","max"]}:void 0;super(t,r,n,o),this.dim=i}query(t=[]){let{plot:r,dim:n,source:i}=this,{optimize:o=!0}=i.options||{},s=super.query(t);if(!n)return s;let a=n==="x"?"y":"x",c=this.channelField(a,{exact:!0})?.as,{field:l,as:u,type:f,min:d,max:h}=this.channelField(n);if(o&&(f==="date"||f==="number")&&c){let m=n==="x"?r.innerWidth():r.innerHeight(),[y,g]=MF(t,l)||[d,h],[b]=Qi(this,n,m,[y,g],1,u),x=s.select().map(_=>_.as).filter(_=>_!==u&&_!==c);return udt(s,b,u,c,x)}else return s.orderby(l)}};function udt(e,t,r,n,i=[]){let o=q`FLOOR(${t})::INTEGER`,s=a=>bt.from(e).select(a).groupby(o,i);return bt.union(s([{[r]:ho(r),[n]:nh(n,r)},...i]),s([{[r]:fo(r),[n]:ih(n,r)},...i]),s([{[r]:nh(r,n),[n]:ho(n)},...i]),s([{[r]:ih(r,n),[n]:fo(n)},...i])).orderby(i,r)}function pG(e,t=[]){return new t.constructor(e)}function mG(e,t,r){let n=pG(e,r),i=r.length;for(let o=0;o<i;++o)n[t[o]]=r[o];return n}function yG(e,t,r,n,i,o,s){let a=r.length,c=e*t,l=i.map(h=>n[h]),u={},f=[],d=new Int32Array(a);if(o?.length){let h=o.map(m=>n[m]),p={};for(let m=0;m<a;++m){let y=h.map(g=>g[m]);d[m]=p[y]??=f.push(y)-1}for(let m=0;m<o.length;++m)u[o[m]]=f.map(y=>y[m])}else f.push([]);if(s){let h=r.map(y=>y%e),p=r.map(y=>Math.floor(y/e)),m=f.map(()=>[]);for(let y=0;y<a;++y)m[d[y]].push(y);i.forEach((y,g)=>{let b=l[g];u[y]=f.map((x,_)=>s(m[_],e,t,h,p,b))})}else i.forEach((h,p)=>{let m=l[p],y=u[h]=f.map(()=>pG(c,m));for(let g=0;g<a;++g)y[d[g]][r[g]]=m[g]});return{numRows:f.length,columns:u}}function Fx(e){let t=1/0,r=-1/0;return e.forEach(n=>{let i=n.length;for(let o=0;o<i;++o){let s=n[o];s<t&&(t=s),s>r&&(r=s)}}),Number.isFinite(t)&&Number.isFinite(r)?[t,r]:[0,1]}function gG(e){let t=new Hn;return e.forEach(r=>{let n=r.length;for(let i=0;i<n;++i)t.add(r[i])}),Array.from(t).sort(ie)}function Wr(e,t){return gi(e)?(e.addEventListener("value",t),e.value):e}function Rx(e,t=!1){let r=new Float64Array(5),n=new Float64Array(4);fdt(r,n,e);let i=Float64Array.of(0,n[1]-r[1]*n[0],n[2]-r[2]*n[0],n[3]-r[3]*n[0],-r[4]*n[0]),o=1+r[1]+r[2]+r[3]+r[4],s=(n[0]+n[1]+n[2]+n[3])/o,a=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:r,b_causal:n,b_anticausal:i,sum_causal:s,sum_anticausal:a}}function fdt(e,t,r){let i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/r),s=Math.exp(-1.723/r),a=.6318/r,c=1.997/r,l=Float64Array.of(-o*Math.cos(a),o*Math.sin(a),-o*Math.cos(-a),o*Math.sin(-a),-s*Math.cos(c),s*Math.sin(c),-s*Math.cos(-c),s*Math.sin(-c)),u=r*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),d=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0),h,p;for(p=2;p<8;p+=2){for(f[p]=l[p]*f[p-2]-l[p+1]*f[p-1],f[p+1]=l[p]*f[p-1]+l[p+1]*f[p-2],h=p-2;h>0;h-=2)f[h]+=l[p]*f[h-2]-l[p+1]*f[h-1],f[h+1]+=l[p]*f[h-1]+l[p+1]*f[h-2];for(h=0;h<=p;h+=2)f[h]+=i[p]*d[h]-i[p+1]*d[h+1],f[h+1]+=i[p]*d[h+1]+i[p+1]*d[h];for(d[p+2]=l[p]*d[p]-l[p+1]*d[p+1],d[p+3]=l[p]*d[p+1]+l[p+1]*d[p],h=p;h>0;h-=2)d[h]+=l[p]*d[h-2]-l[p+1]*d[h-1],d[h+1]+=l[p]*d[h-1]+l[p+1]*d[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=f[h]/u,e[p+1]=d[h+2]}function bG(e,t,r,[n,i]){let o=new Float64Array(Math.max(n,i)),s=new Float64Array(Math.max(n,i)),a=new Float64Array(5),c=new Float64Array(r.length);for(let l=0,u=0;l<i;++l,u+=n){let f=c.subarray(u);GT(e,r.subarray(u),n,1,o,s,a,f)}for(let l=0;l<n;++l){let u=c.subarray(l);GT(t,u,i,n,o,s,a,u)}return c}function GT(e,t,r,n=1,i=new Float64Array(r),o=new Float64Array(r),s=new Float64Array(5),a=i,c=ddt){let l=n*2,u=n*3,f=n*4,d=n*r,h,p;for(c(i,t,r,n,e.b_causal,3,e.a,4,e.sum_causal,s,e.sigma),p=4,h=f;p<r;++p,h+=n)i[p]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-n]+e.b_causal[2]*t[h-l]+e.b_causal[3]*t[h-u]-e.a[1]*i[p-1]-e.a[2]*i[p-2]-e.a[3]*i[p-3]-e.a[4]*i[p-4];for(c(o,t,r,-n,e.b_anticausal,4,e.a,4,e.sum_anticausal,s,e.sigma),p=4,h=d-n*5;p<r;++p,h-=n)o[p]=e.b_anticausal[1]*t[h+n]+e.b_anticausal[2]*t[h+l]+e.b_anticausal[3]*t[h+u]+e.b_anticausal[4]*t[h+f]-e.a[1]*o[p-1]-e.a[2]*o[p-2]-e.a[3]*o[p-3]-e.a[4]*o[p-4];if(e.negative)for(p=0,h=0;p<r;++p,h+=n)a[h]=i[p]+o[r-p-1];else for(p=0,h=0;p<r;++p,h+=n)a[h]=Math.max(0,i[p]+o[r-p-1]);return a}function ddt(e,t,r,n,i,o,s,a,c,l,u,f=.5){let d=Math.abs(n)*r,h=n<0?d+n:0,p,m,y;for(m=0;m<=a;++m)for(l[m]=m<=o?i[m]:0,y=1;y<=a&&y<=m;++y)l[m]-=s[y]*l[m-y];for(y=0;y<a;++y)for(e[y]=0,m=1;m<=y;++m)p=h+n*m,p>=0&&p<d&&(e[y]+=l[y-m]*t[p]);let g=t[h],b=Math.ceil(u*10);for(m=0;m<b;++m){for(y=0;y<a;++y)e[y]+=l[y]*g;if(c-=Math.abs(l[0]),c<=f)break;for(l[a]=m+a<=o?i[m+a]:0,y=1;y<=a;++y)l[a]-=s[y]*l[a-y];for(y=0;y<a;++y)l[y]=l[y+1]}}var pl="density",vs=class extends In{constructor(t,r,n){let{bandwidth:i=0,interpolate:o="none",pixelSize:s=1,pad:a=1,width:c,height:l,...u}=n,f=hdt(u);super(t,r,u,WT),this.densityMap=f,this.bandwidth=Wr(i,d=>(this.bandwidth=d,this.grids?this.convolve().update():null)),this.interpolate=Wr(o,d=>(this.interpolate=d,this.requestUpdate())),this.pixelSize=Wr(s,d=>(this.pixelSize=d,this.requestUpdate())),this.pad=Wr(a,d=>(this.pad=d,this.requestUpdate())),this.width=Wr(c,d=>(this.width=d,this.requestUpdate())),this.height=Wr(l,d=>(this.height=d,this.requestUpdate()))}setPlot(t,r){let n=()=>{this.hasFieldInfo()&&this.requestUpdate()};t.addAttributeListener("xDomain",n),t.addAttributeListener("yDomain",n),super.setPlot(t,r)}get filterIndexable(){let t=this.plot.getAttribute("xDomain"),r=this.plot.getAttribute("yDomain");return t&&r&&!t[mn]&&!r[mn]}query(t=[]){let{interpolate:r,pad:n,channels:i,densityMap:o,source:s}=this,[a,c]=this.extentX=ka(this,t),[l,u]=this.extentY=Ca(this,t),[f,d]=this.bins=this.binDimensions(),[h,p]=Qi(this,"x",f,[a,c],n),[m,y]=Qi(this,"y",d,[l,u],n),g=n?[tr(p,[+a,+c]),tr(y,[+l,+u])]:[oc(+a,p),ic(p,+c),oc(+l,y),ic(y,+u)],b=bt.from(s.table).where(t.concat(g)),x=this.groupby=[],_={};for(let w of i)if(Object.hasOwn(w,"field")){let{as:T,channel:E,field:I}=w;I.aggregate?(_[E]=I,o[E]=!0):E==="weight"?_[pl]=Li(I):E!=="x"&&E!=="y"&&(b.select({[T]:I}),x.push(T))}let v=this.aggr=Object.keys(_);if(_.density&&v.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(v.length||(v.push(pl),_.density=Ri()),r==="linear"){if(v.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!_.density)throw new Error("Linear binning not applicable to custom aggregates.");return ydt(b,h,m,_[pl],f,x)}else return mdt(b,h,m,_,f,x)}binDimensions(){let{plot:t,pixelSize:r,width:n,height:i}=this;return[n??Math.round(t.innerWidth()/r),i??Math.round(t.innerHeight()/r)]}queryResult(t){let[r,n]=this.bins,i=pdt(this.interpolate),{columns:o}=hl(t);return this.grids0=yG(r,n,o.index,o,this.aggr,this.groupby,i),this.convolve()}convolve(){let{aggr:t,bandwidth:r,bins:n,grids0:i,plot:o}=this;if(this.grids=i,r>0){let s=t.length===1?t[0]:t.includes(pl)?pl:null;if(!s)return console.warn("No compatible grid found for smoothing."),this;let a=i.columns[s],c=o.innerWidth(),l=o.innerHeight(),[u,f]=n,d=a.some(m=>m.some(y=>y<0)),h=Rx(r*(u-1)/c,d),p=Rx(r*(f-1)/l,d);this.grids={numRows:i.numRows,columns:{...i.columns,[s]:a.map(m=>bG(h,p,m,n))}}}return this}};function hdt(e){let t={};for(let r in e)e[r]==="density"&&(delete e[r],t[r]=!0);return t}function pdt(e="none"){if(typeof e=="function")return e;switch(e.toLowerCase()){case"none":case"linear":return;case"nearest":return bx;case"barycentric":return gx();case"random-walk":return xx()}throw new Error(`invalid interpolate: ${e}`)}function mdt(e,t,r,n,i,o){return e.select({index:q`FLOOR(${t})::INTEGER + FLOOR(${r})::INTEGER * ${i}`,...n}).groupby("index",o)}function ydt(e,t,r,n,i,o){let s=n?.column?`* ${n.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:r,i:d,w:h}),c=a(q`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),l=a(q`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${s}`),u=a(q`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),f=a(q`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${s}`);return bt.from(bt.unionAll(c,l,u,f)).select({index:"i",density:Li("w")},o).groupby("index",o).having(ff("density",0))}var Lx=class extends vs{constructor(t,r){let{thresholds:n=10,...i}=r;super("geo",t,{bandwidth:20,interpolate:"linear",pixelSize:2,...i}),this.thresholds=Wr(n,o=>(this.thresholds=o,this.grids?this.contours().update():null))}convolve(){return super.convolve().contours()}contours(){let{bins:t,densityMap:r,grids:n,thresholds:i,plot:o}=this,{numRows:s,columns:a}=n,c=i,l;if(Array.isArray(c))l=c;else{let[,A]=Fx(a.density);l=Array.from({length:c-1},(O,L)=>A*(L+1)/c)}(r.fill||r.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);let[u,f]=t,[d,h]=o.getAttribute("xDomain"),[p,m]=o.getAttribute("yDomain"),y=(h-d)/u,g=(m-p)/f,b=+d,x=+p,_=A=>b+A*y,v=A=>x+A*g,w=ou().size(t),T=this.contourData=Array(s*l.length),{density:E,...I}=a,B=Object.entries(I);for(let A=0,O=0;A<s;++A){let L=E[A],S=B.reduce((M,[D,C])=>(M[D]=C[A],M),{});for(let M=0;M<l.length;++M,++O)T[O]=Object.assign(gdt(w.contour(L,l[M]),_,v),S)}return this}plotSpecs(){let{type:t,channels:r,densityMap:n,contourData:i}=this,o={};for(let s of r){let{channel:a}=s;a!=="x"&&a!=="y"&&(o[a]=Cn(s))}for(let s in n)n[s]&&(o[s]=Cn({channel:s,as:"value"}));return[{type:t,data:i,options:o}]}};function gdt(e,t,r){function n(s){s.forEach(i)}function i(s){s.forEach(o)}function o(s){s[0]=t(s[0]),s[1]=r(s[1])}return e.coordinates.forEach(n),e}function XT(e,t){if(typeof document<"u"){let r=document.createElement("canvas");return r.setAttribute("width",e),r.setAttribute("height",t),r}throw new Error("Can not create a canvas instance.")}function xG(e=1){let t=255*e|0;return(r,n,i)=>{for(let o=0,s=0;o<i;++o)for(let a=0;a<n;++a,s+=4)r[s+3]=t}}function _G(e){let{apply:t}=e;return(r,n,i,o)=>{for(let s=0,a=0;s<i;++s)for(let c=0,l=(i-s-1)*n;c<n;++c,a+=4)r[a+3]=255*t(o[c+l])|0}}function wG(e={}){let{r:t=0,g:r=0,b:n=0,opacity:i=1}=typeof e=="string"?jr(e):e,o=new Uint8ClampedArray([t,r,n,255*i|0]);return(s,a,c)=>{for(let l=0,u=0;l<c;++l)for(let f=0;f<a;++f,u+=4)s[u+0]=o[0],s[u+1]=o[1],s[u+2]=o[2],s[u+3]=o[3]}}function vG(e){let{domain:t,range:r}=e,n=Object.create(null),i=new Uint8ClampedArray(4*t.length),o=t.length-1,s=r.length;for(let a=0;a<=o;++a){let c=r[a%s],{r:l,g:u,b:f,opacity:d=1}=typeof c=="string"?jr(c):c,h=a<<2;i[h+0]=l,i[h+1]=u,i[h+2]=f,i[h+3]=255*d|0,n[t[a]]=h}return(a,c,l,u)=>{if(u.map)for(let f=0,d=0;f<l;++f)for(let h=0,p=(l-f-1)*c;h<c;++h,d+=4){let m=n[u[h+p]];a[d+0]=i[m+0],a[d+1]=i[m+1],a[d+2]=i[m+2],a[d+3]=i[m+3]}else{let f=n[u];for(let d=0,h=0;d<l;++d)for(let p=0;p<c;++p,h+=4)a[h+0]=i[f+0],a[h+1]=i[f+1],a[h+2]=i[f+2],a[h+3]=i[f+3]}}}function SG(e,t,r){let{interpolate:n}=t,i=new Uint8ClampedArray(4*e),o=e-1;for(let s=0;s<=o;++s){let a=n(s/o),{r:c,g:l,b:u,opacity:f=1}=typeof a=="string"?jr(a):a,d=s<<2;i[d+0]=c,i[d+1]=l,i[d+2]=u,i[d+3]=255*f|0}return(s,a,c,l)=>{for(let u=0,f=0;u<c;++u)for(let d=0,h=(c-u-1)*a;d<a;++d,f+=4){let p=o*r(l[d+h])<<2;s[f+0]=i[p+0],s[f+1]=i[p+1],s[f+2]=i[p+2],s[f+3]=i[p+3]}}}var $u=class extends vs{constructor(t,r){super("image",t,r),this.image=null}setPlot(t,r){let n=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",n),super.setPlot(t,r)}convolve(){return super.convolve().rasterize()}rasterize(){let{bins:t,grids:r}=this,[n,i]=t,{numRows:o,columns:s}=r,{canvas:a,ctx:c,img:l}=wdt(this,n,i),{alpha:u,alphaProp:f,color:d,colorProp:h}=EF(this),p=s[f]??[],m=s[h]??[];return this.data={numRows:o,columns:{src:Array.from({length:o},(y,g)=>(d?.(l.data,n,i,m[g]),u?.(l.data,n,i,p[g]),c.putImageData(l,0,0),a.toDataURL()))}},this}plotSpecs(){let{type:t,plot:r,data:{numRows:n,columns:i}}=this,o={src:i.src,width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:n},options:o}]}},kx=class extends $u{constructor(t,r){super(t,{bandwidth:20,interpolate:"linear",pixelSize:2,...r})}};function EF(e){let{aggr:t,densityMap:r,groupby:n,plot:i}=e,o=t.includes(pl),s=t.includes("fillOpacity"),a=e.channel("fill"),c=e.channel("fillOpacity");if(t.length>2||o&&s)throw new Error("Invalid raster encodings. Try dropping an aggregate?");if(n.includes(c?.as))throw new Error("Raster fillOpacity must be an aggregate or constant.");let l=r.fill||t.includes("fill")?"grid":n.includes(a?.as)?"group":qT(a?.value)?a.value:o&&i.getAttribute("colorScheme")?"grid":void 0,u=r.fillOpacity||t.includes("fillOpacity")?"grid":typeof c?.value=="number"?c.value:o&&l!=="grid"?"grid":void 0;if(l!=="grid"&&u!=="grid")throw new Error("Raster mark missing density values.");let f=a?.as??(l==="grid"?pl:null),d=c?.as??(u==="grid"?pl:null),h=l!=="grid"&&l!=="group"?wG(l):xdt(e,f),p=u!=="grid"?xG(u):bdt(e,d);return{alphaProp:d,colorProp:f,alpha:p,color:h}}function bdt(e,t){let{plot:r,grids:n}=e,i=r.getAttribute("opacityDomain"),o=i===ia,s=i?.[mn],a=!o&&!s&&i||Fx(n.columns[t]);(o||s||!i)&&(o||(a[mn]=!0),r.setAttribute("opacityDomain",a));let c=Mu({opacity:{type:r.getAttribute("opacityScale"),domain:a,clamp:r.getAttribute("opacityClamp"),nice:r.getAttribute("opacityNice"),reverse:r.getAttribute("opacityReverse"),zero:r.getAttribute("opacityZero"),base:r.getAttribute("opacityBase"),exponent:r.getAttribute("opacityExponent"),constant:r.getAttribute("opacityConstant")}});return _G(c)}function xdt(e,t){let{plot:r,grids:n}=e,i=n.columns[t],o=!i[0]?.map,s=o||Array.isArray(i[0]),a=r.getAttribute("colorDomain"),c=a===ia,l=a?.[mn],u=!c&&!l&&a||(o?i.sort(ie):s?gG(i):Fx(i));(c||l||!a)&&(c||(u[mn]=!0),r.setAttribute("colorDomain",u));let f=Mu({color:{type:r.getAttribute("colorScale"),domain:u,range:r.getAttribute("colorRange"),clamp:r.getAttribute("colorClamp"),n:r.getAttribute("colorN"),nice:r.getAttribute("colorNice"),reverse:r.getAttribute("colorReverse"),scheme:r.getAttribute("colorScheme"),interpolate:r.getAttribute("colorInterpolate"),pivot:r.getAttribute("colorPivot"),symmetric:r.getAttribute("colorSymmetric"),zero:r.getAttribute("colorZero"),base:r.getAttribute("colorBase"),exponent:r.getAttribute("colorExponent"),constant:r.getAttribute("colorConstant")}});if(s)return vG(f);{let d=Mu({x:{type:_dt(f.type),domain:f.domain,reverse:f.reverse,range:[0,1],clamp:f.clamp,base:f.base,exponent:f.exponent,constant:f.constant}});return SG(1024,f,d.apply)}}function _dt(e){return e.endsWith("symlog")?"symlog":e.endsWith("log")?"log":e.endsWith("pow")?"pow":e.endsWith("sqrt")?"sqrt":e==="diverging"?"linear":e}function wdt(e,t,r){if(!e.image||e.image.w!==t||e.image.h!==r){let n=XT(t,r),i=n.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,r);e.image={canvas:n,ctx:i,img:o,w:t,h:r}}return e.image}var Cx=class extends $u{constructor(t,r){let{normalize:n=!0,...i}=r;super(t,i),this.normalize=Wr(n,o=>(this.normalize=o,this.requestUpdate()))}query(t=[]){let{channels:r,normalize:n,source:i,pad:o}=this,[s,a]=this.bins=this.binDimensions(),[c]=Qi(this,"x",s,ka(this,t),o),[l]=Qi(this,"y",a,Ca(this,t),o),u=bt.from(i.table).where(vdt(this,t));this.aggr=["density"];let f=this.groupby=[],d=[];for(let h of r)if(Object.hasOwn(h,"field")){let{channel:p,field:m}=h;p==="z"?(u.select({[p]:m}),d.push("z")):p!=="x"&&p!=="y"&&(u.select({[p]:m}),f.push(p))}return Sdt(u,c,l,d,s,a,f,n)}};function vdt(e,t){if(Array.isArray(t)&&!t.length)return t;let{column:r}=e.channelField("x"),{column:n}=e.channelField("y"),i=s=>{let a=`${s.field}`;return s.op!=="BETWEEN"||a!==r&&a!==n},o=s=>s.op==="AND"?zn(s.children.filter(a=>i(a))):s;return Array.isArray(t)?t.filter(s=>i(s)).map(s=>o(s)):o(t)}function Sdt(e,t,r,n,i,o,s=[],a=!0){e.select({x:q`FLOOR(${t})::INTEGER`,y:q`FLOOR(${r})::INTEGER`});let c=s.concat(n),l=c.length?`PARTITION BY ${c.join(", ")} `:"",u=bt.from(e).select(c,{x0:"x",y0:"y",dx:q`(lead(x) OVER sw - x)`,dy:q`(lead(y) OVER sw - y)`}).window({sw:q`${l}ORDER BY x ASC`}).qualify(zn(q`(x0 < ${i} OR x0 + dx < ${i})`,q`(y0 < ${o} OR y0 + dy < ${o})`,q`(x0 > 0 OR x0 + dx > 0)`,q`(y0 > 0 OR y0 + dy > 0)`)),f=bt.select({x:q`GREATEST(MAX(ABS(dx)), MAX(ABS(dy)))`}).from("pairs"),d=bt.select({i:q`UNNEST(range((${f})))::INTEGER`}),h=bt.unionAll(bt.select(c,{x:q`x0 + i`,y:q`y0 + ROUND(i * dy / dx::FLOAT)::INTEGER`}).from("pairs","indices").where(q`ABS(dy) <= ABS(dx) AND i < ABS(dx)`),bt.select(c,{x:q`x0 + ROUND(SIGN(dy) * i * dx / dy::FLOAT)::INTEGER`,y:q`y0 + SIGN(dy) * i`}).from("pairs","indices").where(q`ABS(dy) > ABS(dx) AND i < ABS(dy)`),bt.select(c,{x:"x0",y:"y0"}).from("pairs").where(uf("dx"))),p=["x"].concat(c).join(", "),m=bt.from("raster").select(c,"x","y",a?{w:q`1.0 / COUNT(*) OVER (PARTITION BY ${p})`}:null).where(zn(tr("x",[0,i],!0),tr("y",[0,o],!0)));return bt.with({pairs:u,indices:d,raster:h,points:m}).from("points").select(s,{index:q`x + y * ${i}::INTEGER`,density:a?Li("w"):Ri()}).groupby("index",s)}var xm=class extends In{constructor(t,r,n){let{bins:i=1024,bandwidth:o=20,...s}=n,a=t.endsWith("X")?"y":"x";super(t,r,s,a==="x"?TF:AF),this.dim=a,this.bins=Wr(i,c=>(this.bins=c,this.requestUpdate())),this.bandwidth=Wr(o,c=>(this.bandwidth=c,this.grid?this.convolve().update():null))}get filterIndexable(){let t=this.dim==="x"?"xDomain":"yDomain",r=this.plot.getAttribute(t);return r&&!r[mn]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");let{bins:r,channels:n,dim:i,source:{table:o}}=this,s=this.extent=(i==="x"?ka:Ca)(this,t),[a,c]=Qi(this,i,r,s),l=IF(n,o,[i]).where(t.concat(tr(c,s))),u=this.channelField("weight")?"weight":null;return Idt(l,a,u)}queryResult(t){let{columns:{index:r,density:n}}=hl(t);return this.grid=mG(this.bins,r,n),this.convolve()}convolve(){let{bins:t,bandwidth:r,dim:n,grid:i,plot:o,extent:[s,a]}=this,c=i.some(x=>x<0),l=n==="x"?o.innerWidth():o.innerHeight(),u=Rx(r*(t-1)/l,c),f=GT(u,i,t),d=n==="x"?"y":"x",h=this.channelField(n).as,p=+s,m=(a-p)/(t-1),y=1/m,g=new Float64Array(t),b=new Float64Array(t);for(let x=0;x<t;++x)g[x]=p+x*m,b[x]=f[x]*y;return this.data={numRows:t,columns:{[h]:g,[d]:b}},this}plotSpecs(){let{type:t,data:{numRows:r,columns:n},channels:i,dim:o}=this,s=o==="x"?{y:n.y}:{x:n.x};for(let a of i)s[a.channel]=Cn(a,n);return[{type:t,data:{length:r},options:s}]}};function Idt(e,t,r){let n=r?`* ${r}`:"",i=e.clone().select({p:t,i:q`FLOOR(p)::INTEGER`,w:q`(FLOOR(p) + 1 - p)${n}`}),o=e.clone().select({p:t,i:q`FLOOR(p)::INTEGER + 1`,w:q`(p - FLOOR(p))${n}`});return bt.from(bt.unionAll(i,o)).select({index:"i",density:Li("w")}).groupby("index").having(Uy("density",0))}var Ux=class extends vs{constructor(t,r){let{type:n="dot",...i}=r;super(n,t,{bandwidth:20,interpolate:"linear",pad:0,pixelSize:2,...i})}convolve(){super.convolve();let{bins:t,pad:r,extentX:n,extentY:i}=this,[o,s]=t,a=Dd(this,"x"),c=Dd(this,"y"),[l,u]=n.map(y=>a.apply(y)),[f,d]=i.map(y=>c.apply(y)),h=(u-l)/(o-r),p=(d-f)/(s-r),m=r?0:.5;return this.data=Tdt(this.grids,t,l,f,h,p,a.invert,c.invert,m),this}plotSpecs(){let{type:t,channels:r,densityMap:n,data:{numRows:i,columns:o}}=this,s={};for(let a of r){let{channel:c}=a;s[c]=c==="x"||c==="y"?o[c]:Cn(a,o)}for(let a in n)n[a]&&(s[a]=o.density);return[{type:t,data:{length:i},options:s}]}};function Tdt(e,t,r,n,i,o,s,a,c){let l=1/(i*o),[u,f]=t,d=u*f,h=d*e.numRows,p=new Float64Array(h),m=new Float64Array(h),y=new Float64Array(h),g={x:p,y:m,density:y},{density:b,...x}=e.columns;for(let v in x)g[v]=new x[v].constructor(h);let _=0;for(let v=0;v<e.numRows;++v){for(let T in x)g[T].fill(x[T][v],_,_+d);let w=b[v];for(let T=0,E=0;E<f;++E)for(let I=0;I<u;++I,++_,++T)p[_]=s(r+(I+c)*i),m[_]=a(n+(E+c)*o),y[_]=w[T]*l}return{numRows:h,columns:g}}var Adt="geom",Px=class extends In{constructor(t,r={},n){!YT(t)&&!r?.geometry&&(r.geometry=Vy(Adt)),super("geo",t,r,n)}queryResult(t){super.queryResult(t);let r=this.channelField("geometry")?.as;if(r){let{columns:n}=this.data;typeof n[r][0]=="string"&&(n[r]=n[r].map(i=>JSON.parse(i)))}return this}};var $x=class extends In{constructor(t,r){let{type:n="hexagon",binWidth:i=20,...o}=r;super(n,t,{r:i/2,clip:!0,...o},WT),this.binWidth=Wr(i,s=>(this.binWidth=s,this.requestUpdate()))}get filterIndexable(){let t=this.plot.getAttribute("xDomain"),r=this.plot.getAttribute("yDomain");return t&&r&&!t[mn]&&!r[mn]}query(t=[]){if(this.hasOwnData())return null;let{plot:r,binWidth:n,channels:i,source:o}=this,[s,a]=ka(this,t),[c,l]=Ca(this,t),u=.5-r.getAttribute("marginLeft"),f=0-r.getAttribute("marginTop"),d=`${n}::DOUBLE`,h=`${n*(1.5/Math.sqrt(3))}::DOUBLE`,p=`${r.innerWidth()/(a-s)}::DOUBLE`,m=`${r.innerHeight()/(l-c)}::DOUBLE`,y,g,b=new Set,x={},_;for(let I of i)I.channel==="orderby"?_=I.value:I.channel==="x"?y=I:I.channel==="y"?g=I:Object.hasOwn(I,"field")&&(x[I.as]=I.field,I.field.aggregate&&I.field.columns.forEach(B=>b.add(B)));let v=bt.select({[y.as]:q`${s}::DOUBLE + ((x + 0.5 * (y & 1)) * ${d} + ${u})::DOUBLE / ${p}`,[g.as]:q`${l}::DOUBLE - (y * ${h} + ${f})::DOUBLE / ${m}`,...x}).groupby("x","y");_&&v.orderby(_);let w=`${p} * (${y.field} - ${s}::DOUBLE)`,T=`${m} * (${l}::DOUBLE - ${g.field})`,E=bt.select({py:q`(${T} - ${f}) / ${h}`,pj:q`ROUND(py)::INTEGER`,px:q`(${w} - ${u}) / ${d} - 0.5 * (pj & 1)`,pi:q`ROUND(px)::INTEGER`,tt:q`ABS(py-pj) * 3 > 1 AND (px-pi)**2 + (py-pj)**2 > (px - pi - 0.5 * CASE WHEN px < pi THEN -1 ELSE 1 END)**2 + (py - pj - CASE WHEN py < pj THEN -1 ELSE 1 END)**2`,x:q`CASE WHEN tt THEN (pi + (CASE WHEN px < pi THEN -0.5 ELSE 0.5 END) + (CASE WHEN pj & 1 <> 0 THEN 0.5 ELSE -0.5 END))::INTEGER ELSE pi END`,y:q`CASE WHEN tt THEN (pj + CASE WHEN py < pj THEN -1 ELSE 1 END)::INTEGER ELSE pj END`}).select(Array.from(b)).from(o.table).where(rc(y.field),rc(g.field),t);return v.from(E)}};var zx=class extends vs{constructor(t,r){let{origin:n=[0,0],dim:i="xy",...o}=r;super("image",t,o),this.image=null,this.origin=n,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,r){let n=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",n),super.setPlot(t,r)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){let{interpolate:r,pad:n,channels:i,densityMap:o,source:s}=this,[[a,c],[l,u]]=t,[f,d]=this.bins,[h,p]=Qi(this,"x",f,[a,c],n),[m,y]=Qi(this,"y",d,[l,u],n),g=n?[tr(p,[+a,+c]),tr(y,[+l,+u])]:[oc(+a,p),ic(p,+c),oc(+l,y),ic(y,+u)],b=bt.from(s.table).where(g),x=this.groupby=[],_={};for(let w of i)if(Object.hasOwn(w,"field")){let{as:T,channel:E,field:I}=w;I.aggregate?(_[E]=I,o[E]=!0):E==="weight"?_.density=Li(I):E!=="x"&&E!=="y"&&(b.select({[T]:I}),x.push(T))}let v=this.aggr=Object.keys(_);if(_.density&&v.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(v.length||(v.push("density"),_.density=Ri()),r==="linear"){if(v.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!_.density)throw new Error("Linear binning not applicable to custom aggregates.");return Odt(b,h,m,_.density,f,x)}else return Bdt(b,h,m,_,f,x)}async requestTiles(){let t=po();this.prefetch&&t.cancel(this.prefetch);let{pad:r,tileX:n,tileY:i,origin:[o,s]}=this,[a,c]=this.bins=this.binDimensions(),[l,u]=ka(this,this._filter),[f,d]=Ca(this,this._filter),h=u-l,p=d-f,m=Math.floor((l-o)*(a-r)/h),y=Math.floor((f-s)*(c-r)/p),g=(A,O)=>[[o+A*h,o+(A+1)*h],[s+O*p,s+(O+1)*p]],b=Math.floor((l-o)/h),x=n?IG((u-o)/h):b,_=Math.floor((f-s)/p),v=i?IG((d-s)/p):_,w=[];for(let A=b;A<=x;++A)for(let O=_;O<=v;++O)w.push([A,O]);let T=w.map(([A,O])=>t.query(this.tileQuery(g(A,O)))),E=[];if(n)for(let A=_;A<=v;++A)E.push([x+1,A]),E.push([b-1,A]);if(i){let A=n?b-1:b,O=n?x+1:x;for(let L=A;L<=O;++L)E.push([L,v+1]),E.push([L,_-1])}this.prefetch=E.map(([A,O])=>t.prefetch(this.tileQuery(g(A,O))));let I=await Promise.all(T),B=Mdt(a,c,m,y,w,I);this.grids0={numRows:B.length,columns:{density:[B]}},this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){let{bins:t,grids:r}=this,[n,i]=t,{numRows:o,columns:s}=r,{canvas:a,ctx:c,img:l}=Ddt(this,n,i),{alpha:u,alphaProp:f,color:d,colorProp:h}=EF(this),p=s[f]??[],m=s[h]??[];return this.data={numRows:o,columns:{src:Array.from({length:o},(y,g)=>(d?.(l.data,n,i,m[g]),u?.(l.data,n,i,p[g]),c.putImageData(l,0,0),a.toDataURL()))}},this}plotSpecs(){let{type:t,plot:r,data:{numRows:n,columns:i}}=this,o={src:i.src,width:r.innerWidth(),height:r.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:n},options:o}]}};function Mdt(e,t,r,n,i,o){let s=new Float64Array(e*t);return o.forEach((a,c)=>{let[l,u]=i[c],f=l*e-r,d=u*t-n;Edt(e,t,s,a,f,d)}),s}function Edt(e,t,r,n,i,o){let s=n.numRows;if(s===0)return;let a=n.getChild("index").toArray(),c=n.getChild("density").toArray();for(let l=0;l<s;++l){let u=a[l],f=i+u%e,d=o+Math.floor(u/e);0<=f&&f<e&&0<=d&&d<t&&(r[f+d*e]=c[l])}}function Ddt(e,t,r){if(!e.image||e.image.w!==t||e.image.h!==r){let n=XT(t,r),i=n.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,r);e.image={canvas:n,ctx:i,img:o,w:t,h:r}}return e.image}function Bdt(e,t,r,n,i,o){return e.select({index:q`FLOOR(${t})::INTEGER + FLOOR(${r})::INTEGER * ${i}`,...n}).groupby("index",o)}function Odt(e,t,r,n,i,o){let s=n.column?`* ${n.column}`:"",a=(d,h)=>e.clone().select({xp:t,yp:r,i:d,w:h}),c=a(q`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),l=a(q`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${s}`),u=a(q`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),f=a(q`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,q`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${s}`);return bt.from(bt.unionAll(c,l,u,f)).select({index:"i",density:Li("w")},o).groupby("index",o).having(ff("density",0))}function IG(e){let t=Math.floor(e);return t===e?t-1:t}function Ndt(e,t,r){var n=1e-8,i=t-1,o=r-1,s=0,a,c,l,u,f,d,h,p,m,y,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(l=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(l)),h=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(h=-h),p=(h*h-3)/6,m=2/(1/(2*t-1)+1/(2*r-1)),y=h*Math.sqrt(p+m)/m-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*m)),h=t/(t+r*Math.exp(2*y))):(a=Math.log(t/(t+r)),c=Math.log(r/(t+r)),u=Math.exp(t*a)/t,f=Math.exp(r*c)/r,y=u+f,e<u/y?h=Math.pow(t*y*e,1/t):h=1-Math.pow(r*y*(1-e),1/r)),g=-_m(t)-_m(r)+_m(t+r);s<10;s++){if(h===0||h===1)return h;if(d=Fdt(h,t,r)-e,u=Math.exp(i*Math.log(h)+o*Math.log(1-h)+g),f=d/u,h-=u=f/(1-.5*Math.min(1,f*(i/h-o/(1-h)))),h<=0&&(h=.5*(h+u)),h>=1&&(h=.5*(h+u+1)),Math.abs(u)<n*h&&s>0)break}return h}function Fdt(e,t,r){var n=e===0||e===1?0:Math.exp(_m(t+r)-_m(t)-_m(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?0:e<(t+1)/(t+r+2)?n*TG(e,t,r)/t:1-n*TG(1-e,r,t)/r}function TG(e,t,r){var n=1e-30,i=1,o=t+r,s=t+1,a=t-1,c=1,l=1-o*e/s,u,f,d,h;for(Math.abs(l)<n&&(l=n),l=1/l,h=l;i<=100&&(u=2*i,f=i*(r-i)*e/((a+u)*(t+u)),l=1+f*l,Math.abs(l)<n&&(l=n),c=1+f/c,Math.abs(c)<n&&(c=n),l=1/l,h*=l*c,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),l=1+f*l,Math.abs(l)<n&&(l=n),c=1+f/c,Math.abs(c)<n&&(c=n),l=1/l,d=l*c,h*=d,!(Math.abs(d-1)<3e-7));i++);return h}function _m(e){var t=0,r=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)n+=r[t]/++o;return Math.log(2.506628274631*n/i)-s}function AG(e,t){var r=Ndt(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}var Vx=class extends In{constructor(t,r){let{ci:n=.95,precision:i=4,...o}=r;super("line",t,o);let s=()=>this.modelFit?this.confidenceBand().update():null;this.ci=Wr(n,a=>(this.ci=a,s())),this.precision=Wr(i,a=>(this.precision=a,s()))}query(t=[]){let r=this.channelField("x").as,n=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(o=>this.channelField(o)?.as||[])));return bt.from(super.query(t)).select({intercept:$M(n,r),slope:zM(n,r),n:VM(n,r),ssy:jM(n,r),ssx:qM(n,r),xm:YM(n,r),x0:oh(ho(r).where(rc(n))),x1:oh(fo(r).where(rc(n)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=hl(t),this.lineData=Rdt(this.modelFit),this.confidenceBand()}confidenceBand(){let{ci:t,modelFit:r,precision:n,plot:i}=this,o=i.innerWidth();return this.areaData=t?Ldt(r,t,n,o):null,this}plotSpecs(){let{lineData:t,areaData:r,channels:n,ci:i}=this,o=t.columns,s=i?r.columns:{},a={x:o.x,y:o.y},c={x:s.x,y1:s.y1,y2:s.y2,fillOpacity:.1};for(let l of n)switch(l.channel){case"x":case"y":case"fill":break;case"tip":c.tip=Cn(l,s);break;case"stroke":a.stroke=Cn(l,o),c.fill=Cn(l,s);break;case"strokeOpacity":a.strokeOpacity=Cn(l,o);break;case"fillOpacity":c.fillOpacity=Cn(l,s);break;default:a[l.channel]=Cn(l,o),c[l.channel]=Cn(l,s);break}return[...i?[{type:"areaY",data:{length:r.numRows},options:c}]:[],{type:"line",data:{length:t.numRows},options:a}]}};function DF(e,t){if(e.concat)return e.concat(t);let r=new e.constructor(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}function Rdt(e){let{x0:t,x1:r,xm:n,intercept:i,slope:o,n:s,ssx:a,ssy:c,...l}=e.columns,u=(h,p)=>i[p]+h*o[p],f=DF(t,r),d=DF(t.map(u),r.map(u));for(let h in l)l[h]=DF(l[h],l[h]);return{numRows:f.length,columns:{x:f,y:d,...l}}}function Ldt(e,t,r,n){let i=e.numRows,{x0:o,x1:s,xm:a,intercept:c,slope:l,n:u,ssx:f,ssy:d,...h}=e.columns,p=Object.keys(h),m={x:[],y1:[],y2:[]};p.forEach(y=>m[y]=[]);for(let y=0;y<i;++y){let g=r*(s[y]-o[y])/n,b=AG((1-t)/2,u[y]-2)*Math.sqrt(d[y]/(u[y]-2));_r(o[y],s[y]-g/2,g).concat(s[y]).forEach(x=>{let _=c[y]+x*l[y],v=b*Math.sqrt(1/u[y]+(x-a[y])**2/f[y]);m.x.push(x),m.y1.push(_-v),m.y2.push(_+v),p.forEach(w=>m[w].push(h[w][y]))})}return{numRows:m.x.length,columns:m}}function MG(e){let t=e.toLowerCase(),r=e.length,n="";for(let i=0;i<r;++i)n+=(e[i]!==t[i]?"-":"")+t[i];return n}function wm(e){let t={};for(let r in e)t[MG(r)]=e[r];return t}function kdt(e){let{channels:t}=e,r=new Set,n=!1,i=!1;for(let o of t){let{channel:s,field:a,as:c}=o;if(s==="orderby")n=!0;else if(a)if(a.aggregate)i=!0;else{if(r.has(c))continue;r.add(c)}}return!n&&i&&r.size&&e.channels.push({channel:"orderby",value:Array.from(r)}),e}var jx=class{constructor(t,{selection:r,channels:n={}}){this.mark=kdt(t),this.selection=r;let i=Object.entries(wm(n));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",Am(()=>this.update()))}init(t){this.svg=t;let r=this.values=[],n=this.mark.index,i=this.nodes=t.querySelectorAll(`[data-index="${n}"] > *`),{channels:o}=this;for(let s=0;s<i.length;++s){let a=i[s];r.push(o.map(c=>a.getAttribute(c[0])))}return this.update()}async update(){let{svg:t,nodes:r,channels:n,values:i,mark:o,selection:s}=this;if(!t)return;let a=await Cdt(o,s);for(let c=0;c<r.length;++c){let l=r[c],u=i[c],f=a(l.__data__);for(let d=0;d<n.length;++d){let[h,p]=n[d];l.setAttribute(h,f?u[d]:p)}}}};async function Cdt(e,t){let r=t?.predicate(e);if(!r||r.length===0)return()=>!0;let n=e.filterBy?.predicate(e,!0),i={__:zn(r)},o=e.query(n),s=o.groupby().length?o.select(i):o.$select(i),a=await e.coordinator.query(s),c=a.getChild?.("__");return a.numRows||a.length?c?l=>c.get(l):l=>a[l].__:()=>!1}function BF(e){let t=e.on,r=!0;function n(i){r=!1,i(),r=!0}return e.reset=(...i)=>{n(()=>e.clear(...i))},e.moveSilent=(...i)=>{n(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){let o=i[1];i[1]=(...s)=>r&&o(...s)}return t(...i)},e}function EG(){return BF(cB())}function DG(){return BF(sB())}function BG(){return BF(aB())}function qx(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<1e-12&&Math.abs(e[1]-t[1])<1e-12||!1}function Ua(e,t){let r=e.channelField(t)?.field;return r?.basis||r}function Yx(e,t,r=1){return t.invert(r*Math.floor(e/r))}function HT(){let e=this,t=e.getScreenCTM,r;e.getScreenCTM=()=>e.isConnected?r=t.call(e):r}var zu=class{constructor(t,{channel:r,selection:n,field:i=void 0,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.channel=r,this.pixelSize=o||1,this.selection=n,this.peers=s,this.field=i||Ua(t,r),this.style=a&&wm(a),this.brush=r==="y"?BG():DG(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let r;t&&(r=t.map(n=>Yx(n,this.scale,this.pixelSize)).sort((n,i)=>n-i)),qx(r,this.value)||(this.value=r,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(r)))}clause(t){let{mark:r,pixelSize:n,field:i,scale:o}=this;return{source:this,schema:{type:"interval",pixelSize:n,scales:[o]},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:t?tr(i,t):null}}init(t,r){let{brush:n,channel:i,style:o}=this;this.scale=t.scale(i);let s=t.scale("x").range,a=t.scale("y").range;n.extent([[Oe(s),Oe(a)],[he(s),he(a)]]);let c=ae(t).selectAll('g[aria-label="facet"]');if(r=c.size()?c:ae(r??t),this.g=r.append("g").attr("class",`interval-${i}`).each(HT).call(n).call(n.moveSilent,this.value?.map(this.scale.apply)),o){let l=this.g.selectAll("rect.selection");for(let u in o)l.attr(u,o[u])}t.addEventListener("pointerenter",l=>{l.buttons||this.activate()})}};var ZT=(e,t)=>e-t,Wx=class{constructor(t,{selection:r,xfield:n,yfield:i,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.pixelSize=o||1,this.selection=r,this.peers=s,this.xfield=n||Ua(t,"x"),this.yfield=i||Ua(t,"y"),this.style=a&&wm(a),this.brush=EG(),this.brush.on("brush end",({selection:c})=>this.publish(c))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){let{value:r,pixelSize:n,xscale:i,yscale:o}=this,s,a;if(t){let[c,l]=t;s=[c[0],l[0]].map(u=>Yx(u,i,n)).sort(ZT),a=[c[1],l[1]].map(u=>Yx(u,o,n)).sort(ZT)}(!qx(s,r?.[0])||!qx(a,r?.[1]))&&(this.value=t?[s,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){let{mark:r,pixelSize:n,xfield:i,yfield:o,xscale:s,yscale:a}=this;return{source:this,schema:{type:"interval",pixelSize:n,scales:[s,a]},clients:this.peers?r.plot.markSet:new Set().add(r),value:t,predicate:t?zn(tr(i,t[0]),tr(o,t[1])):null}}init(t){let{brush:r,style:n}=this,i=this.xscale=t.scale("x"),o=this.yscale=t.scale("y"),s=i.range,a=o.range;r.extent([[Oe(s),Oe(a)],[he(s),he(a)]]);let c=ae(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:ae(t);if(this.g=l.append("g").attr("class","interval-xy").each(HT).call(r),n){let u=this.g.selectAll("rect.selection");for(let f in n)u.attr(f,n[f])}if(this.value){let[u,f]=this.value[0].map(i.apply).sort(ZT),[d,h]=this.value[1].map(o.apply).sort(ZT);this.g.call(r.moveSilent,[[u,d],[f,h]])}t.addEventListener("pointerenter",u=>{u.buttons||this.activate()})}};var vm=class{constructor(t,{selection:r,channel:n,field:i}){this.mark=t,this.selection=r,this.clients=new Set().add(t),this.channel=n,this.field=i||Ua(t,[n])}clause(t){let{clients:r,field:n}=this,i=t?nc(n,Fi(t)):null;return{source:this,schema:{type:"point"},clients:r,value:t,predicate:i}}init(t){let r=this,{mark:n,channel:i,selection:o}=this,{data:s}=n,a=n.channelField(i).as,c=ae(t).selectAll('g[aria-label="facet"]'),l=c.size()?c:ae(t),u=t.scale(i),f=!mo(o);l.on("pointerdown pointermove",function(d){let[h,p]=En(d,this),m=Udt(s.columns[a],u.invert(i==="x"?h:p));o.update(f?m:r.clause(m))}),!f&&t.addEventListener("pointerenter",d=>{d.buttons||this.selection.activate(this.clause(0))})}};function Udt(e,t){let r=1/0,n;for(let i=0;i<e.length;++i){let o=Math.abs(e[i]-t);o<r&&(r=o,n=e[i])}return n}var OG=(e,t)=>e-t,Gx=class{constructor(t,{x:r=new sc,y:n=new sc,xfield:i,yfield:o,zoom:s=!0,panx:a=!0,pany:c=!0}){this.mark=t,this.xsel=r,this.ysel=n,this.xfield=i||Ua(t,"x"),this.yfield=o||Ua(t,"y"),this.zoom=OF(s,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&c;let{plot:l}=t;a&&this.xsel.addEventListener("value",u=>{l.setAttribute("xDomain",u)&&l.update()}),c&&this.ysel.addEventListener("value",u=>{l.setAttribute("yDomain",u)&&l.update()})}publish(t){if(this.panx){let r=Pdt(t,this.xscale);this.xsel.update(this.clause(r,this.xfield,this.xscale))}if(this.pany){let r=$dt(t,this.yscale);this.ysel.update(this.clause(r,this.yfield,this.yscale))}}clause(t,r,n){return{source:this,schema:{type:"interval",scales:[n]},clients:this.mark.plot.markSet,value:t,predicate:t?tr(r,t):null}}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;let{panx:r,pany:n,mark:{plot:{element:i}},xsel:o,ysel:s}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");let a=this.xscale.range.slice().sort(OG),c=this.yscale.range.slice().sort(OG),l=OF(r,[-1/0,1/0],a),u=OF(n,[-1/0,1/0],c),f=TN().extent([[a[0],c[0]],[a[1],c[1]]]).scaleExtent(this.zoom).translateExtent([[l[0],u[0]],[l[1],u[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new Gi(1,0,0)).on("zoom",({transform:d})=>this.publish(d));if(ae(i).call(f),r||n){let d=!1;i.addEventListener("pointerenter",h=>{if(!d&&(d=!0,!h.buttons)){if(r){let{xscale:p,xfield:m}=this;o.activate(this.clause(p.domain,m,p))}if(n){let{yscale:p,yfield:m}=this;s.activate(this.clause(p.domain,m,p))}}}),i.addEventListener("pointerleave",()=>d=!1)}}};function OF(e,t,r){return e?Array.isArray(e)?e:t:r}function Pdt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function $dt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}var Bd=class{constructor(t,{selection:r,channels:n,peers:i=!0}){this.value=null,this.mark=t,this.selection=r,this.peers=i,this.channels=n.map(o=>{let s=o==="color"?["color","fill","stroke"]:o==="x"?["x","x1","x2"]:o==="y"?["y","y1","y2"]:[o];for(let a=0;a<s.length;++a){let c=t.channelField(s[a],{exact:!0});if(c)return{field:c.field?.basis||c.field,as:c.as}}throw new Error(`Missing channel: ${o}`)})}clause(t){let{channels:r,mark:n}=this,i=null;if(t){let o=t.map(s=>{let a=s.map((c,l)=>Py(r[l].field,Fi(c)));return a.length>1?zn(a):a[0]});i=o.length>1?lf(o):o[0]}return{source:this,schema:{type:"point"},clients:this.peers?n.plot.markSet:new Set().add(n),value:t,predicate:i}}init(t,r,n){let{mark:i,channels:o,selection:s}=this,{data:{columns:a={}}={}}=i;n??=l=>o.map(u=>a[u.as][l.__data__]),r??=`[data-index="${i.index}"]`;let c=new Set(t.querySelectorAll(r));t.addEventListener("pointerdown",l=>{let u=s.single?s.value:this.value,f=l.target,d=null;if(zdt(c,f)){let h=n(f);(l.shiftKey||l.metaKey)&&u?.length?(d=u.filter(p=>NF(p,h)),d.length===u.length&&d.push(h)):u?.length===1&&!NF(u[0],h)?d=null:d=[h]}this.value=d,Vdt(u,d)&&s.update(this.clause(d))}),t.addEventListener("pointerenter",l=>{l.buttons||this.selection.activate(this.clause([this.channels.map(()=>0)]))})}};function zdt(e,t){return e.has(t)||e.has(t.parentNode)||e.has(t.parentNode?.parentNode)}function Vdt(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((r,n)=>NF(r,t[n]))}function NF(e,t){let r=e.length;if(t.length!==r)return!0;for(let n=0;n<r;++n)if(e[n]!==t[n])return!0;return!1}var FG=":scope > div, :scope > span",KT="swatch",NG="ramp",Sm=class{constructor(t,r){let{as:n,field:i,...o}=r;this.channel=t,this.options={label:null,...o},this.type=null,this.handler=null,this.selection=n,this.field=i,this.legend=null,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),Object.assign(this.element,{value:this})}setPlot(t){this.plot=t}init(t){let r=jdt(this,t);return this.element.replaceChildren(r),this.element}update(){if(!this.legend)return;let{value:t}=this.selection,r=t&&t.length?new Set(t.map(i=>i[0])):null,n=this.legend.querySelectorAll(FG);for(let i of n){let o=r?r.has(i.__data__):!0;i.style.opacity=o?1:.2}}};function jdt(e,t){let{channel:r,options:n,selection:i}=e,o=t.scale(r),s=o.type==="ordinal"?KT:NG,a=s===KT?n:n.label?{tickSize:2,...n}:{tickSize:2,marginTop:1,height:29,...n},c=t.legend(r,a);e.legend=c;let l=!!i;if(l&&s===NG){let u=a.width??240,f=Gdt(o,u);f?c.scale=function(d){return d==="x"?{range:[0,u]}:d==="y"?{range:[-10,0]}:d===r?f:void 0}:l=!1}if(l){let u=qdt(e,s);s===KT?(u.init(c,FG,f=>[f.__data__]),e.update()):u.init(c,c.querySelector("g:last-of-type"))}return c}function qdt(e,t){let{channel:r,handler:n,selection:i}=e;if(n)return n;let o=Ydt(e);if(t===KT)e.handler=new Bd(o,{selection:i,channels:[r]}),i.addEventListener("value",()=>e.update());else{let s={fill:"none",stroke:"currentColor"};e.handler=new zu(o,{selection:i,channel:r,brush:s})}return e.handler}function Ydt(e){let{channel:t,plot:r}=e,n=e.field??Wdt(r.marks,t)??"value";if(n){let i={field:n};return{plot:r,channelField:o=>t===o?i:void 0}}}function Wdt(e,t){let r=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(r==null)return null;for(let n=e.length-1;n>-1;--n)for(let i of r){let o=e[n].channelField(i,{exact:!0});if(o)return o.field}return null}function Gdt(e,t){let{apply:r,invert:n,interpolate:i,...o}=e,s=e.type;s.startsWith("diverging-")&&(s=s.slice(11));let a;switch(s){case"log":case"pow":case"sqrt":case"symlog":a=s;break;case"threshold":case"quantize":case"quantile":return console.warn(`Legends do not yet support ${s} scales.`),null;default:a="linear"}return Mu({x:{...o,type:a,range:[0,t]}})}var Xdt=new Set(["rectY-x","rectX-y","rect-x","rect-y"]);function QT(e,t={steps:25}){let r=(n,i)=>Xdt.has(`${n.type}-${i}`)?{[`${i}1`]:FF(n,i,e,t),[`${i}2`]:FF(n,i,e,{...t,offset:1})}:{[i]:FF(n,i,e,t)};return r[Xg]=!0,r}function FF(e,t,r,n){return{column:r,label:r,get stats(){return{column:r,stats:["min","max"]}},get columns(){return[r]},get basis(){return r},toString(){let{apply:i,sqlApply:o,sqlInvert:s}=Dd(e,t),{min:a,max:c}=e.channelField(t),l=Hdt(i(a),i(c),n),u=o(r),f=l.min===0?u:`(${u} - ${l.min})`,d=`${(l.max-l.min)/l.steps}::DOUBLE`,h=n.offset?`${n.offset} + `:"",p=`${l.min} + ${d} * (${h}FLOOR(${f} / ${d}))`;return`${s(p)}`}}}function Hdt(e,t,r){let{steps:n=25,minstep:i=0,nice:o=!0}=r;if(o!==!1){let s=t-e,a=n,c=Math.LN10,l=Math.ceil(Math.log(a)/c),u=Math.max(i,Math.pow(10,Math.round(Math.log(s)/c)-l));for(;Math.ceil(s/u)>a;)u*=10;let f=[5,2],d;for(let m=0,y=f.length;m<y;++m)d=u/f[m],d>=i&&s/d<=a&&(u=d);d=Math.log(u);let h=d>=0?0:~~(-d/c)+1,p=Math.pow(10,-h-1);d=Math.floor(e/u+p)*u,e=e<d?d-u:d,t=Math.ceil(t/u)*u,n=Math.round((t-e)/u)}return{min:e,max:t,steps:n}}var Zdt=e=>e&&typeof e=="object"&&!Array.isArray(e);var Xx=class extends ci{constructor({element:t,filterBy:r,from:n,column:i,label:o=i,format:s=u=>u,options:a,value:c,as:l}={}){super(r),this.from=n,this.column=i,this.selection=l,this.format=s,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this;let u=document.createElement("label");u.innerText=o||i,this.element.appendChild(u),this.select=document.createElement("select"),a&&(this.data=a.map(f=>Zdt(f)?f:{value:f}),this.update()),c=c??this.selection?.value??this.data?.[0]?.value,this.selection?.value===void 0&&this.publish(c),this.element.appendChild(this.select),this.selection&&(this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),mo(this.selection)||this.selection.addEventListener("value",f=>{f!==this.select.value&&this.selectedValue(f)}))}selectedValue(t){if(arguments.length===0){let r=this.select.selectedIndex;return this.data[r].value}else{let r=this.data?.findIndex(n=>n.value===t);r>=0?this.select.selectedIndex=r:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}publish(t){let{selection:r,column:n}=this;mo(r)?r.update({source:this,schema:{type:"point"},value:t,predicate:t!==""&&t!==void 0?nc(n,Fi(t)):null}):gi(r)&&r.update(t)}query(t=[]){let{from:r,column:n}=this;return r?bt.from(r).select({value:n}).distinct().where(t).orderby(n):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){let{data:t,format:r,select:n}=this;n.replaceChildren();for(let{value:i,label:o}of t){let s=document.createElement("option");s.setAttribute("value",i),s.innerText=o??r(i),this.select.appendChild(s)}return this.selection&&this.selectedValue(this.selection?.value??""),this}};var Kdt={contains:lM,prefix:uM,suffix:fM,regexp:cM},Qdt=0;var Hx=class extends ci{constructor({element:t,filterBy:r,from:n,column:i,label:o,type:s="contains",as:a}={}){if(super(r),this.id="search_"+ ++Qdt,this.type=s,this.from=n,this.column=i,this.selection=a,this.element=t??document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,o){let c=document.createElement("label");c.setAttribute("for",this.id),c.innerText=o,this.element.appendChild(c)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),mo(this.selection)||this.selection.addEventListener("value",c=>{c!==this.searchbox.value&&(this.searchbox.value=c)}))}reset(){this.searchbox.value=""}publish(t){let{selection:r,column:n,type:i}=this;mo(r)?r.update({source:this,schema:{type:i},value:t,predicate:t?Kdt[i](n,Fi(t)):null}):gi(r)&&r.update(t)}query(t=[]){let{from:r,column:n}=this;return r?bt.from(r).select({list:n}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){let t=document.createElement("datalist"),r=`${this.id}_list`;t.setAttribute("id",r);for(let n of this.data){let i=document.createElement("option");i.setAttribute("value",n.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",r),this}};var Jdt=0;var Zx=class extends ci{constructor({element:t,filterBy:r,as:n,min:i,max:o,step:s,from:a,column:c,label:l=c,value:u=n?.value,width:f}={}){if(super(r),this.id="slider_"+ ++Jdt,this.from=a,this.column=c||"value",this.selection=n,this.min=i,this.max=o,this.step=s,this.element=t||document.createElement("div"),this.element.setAttribute("class","input"),this.element.value=this,l){let d=document.createElement("label");d.setAttribute("for",this.id),d.innerText=l,this.element.appendChild(d)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),f!=null&&(this.slider.style.width=`${+f}px`),i!=null&&this.slider.setAttribute("min",i),o!=null&&this.slider.setAttribute("max",o),s!=null&&this.slider.setAttribute("step",s),u!=null&&(this.slider.setAttribute("value",u),this.selection?.value===void 0&&this.publish(u)),this.element.appendChild(this.slider),this.selection&&(this.slider.addEventListener("input",()=>{this.publish(+this.slider.value)}),mo(this.selection)||this.selection.addEventListener("value",d=>{d!==+this.slider.value&&(this.slider.value=d)}))}query(t=[]){let{from:r,column:n}=this;return!r||this.min!=null&&this.max!=null?null:bt.select({min:ho(n),max:fo(n)}).from(r).where(t)}queryResult(t){let{min:r,max:n}=Array.from(t)[0];return this.min==null&&this.slider.setAttribute("min",r),this.max==null&&this.slider.setAttribute("max",n),this.step==null&&this.slider.setAttribute("step",String((n-r)/500)),this}publish(t){let{selection:r,column:n}=this;mo(r)?r.update({source:this,schema:{type:"point"},value:t,predicate:nc(n,Fi(t))}):gi(this.selection)&&r.update(t)}};var LF=RG(e=>{let t=JT(e);return r=>r==null?"":typeof r=="number"?t(r):r instanceof Date?kF(r):`${r}`}),JT=RG(e=>t=>t===0?"0":t.toLocaleString(e)),zce=LF(),Vce=JT();function kF(e){return vp(e,"Invalid Date")}function RG(e){let t=null,r;return(n="en")=>n===t?r:r=e(t=n)}var tht=-1;var Kx=class extends ci{constructor({element:t,filterBy:r,from:n,columns:i=["*"],align:o={},format:s,width:a,maxWidth:c,height:l=500,rowBatch:u=100}={}){super(r),this.id=`table-${++tht}`,this.from=n,this.columns=i,this.format=s,this.align=o,this.widths=typeof a=="object"?a:{},this.offset=0,this.limit=+u,this.pending=!1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,this.element=t||document.createElement("div"),this.element.setAttribute("id",this.id),this.element.value=this,typeof a=="number"&&(this.element.style.width=`${a}px`),c&&(this.element.style.maxWidth=`${c}px`),this.element.style.maxHeight=`${l}px`,this.element.style.overflow="auto";let f=-1;this.element.addEventListener("scroll",d=>{let{pending:h,loaded:p}=this,{scrollHeight:m,scrollTop:y,clientHeight:g}=d.target,b=y<f;f=y,!(b||h||p)&&m-y<2*g&&(this.pending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.style=document.createElement("style"),this.element.appendChild(this.style)}requestData(t=0){this.offset=t;let r=this.query(this.filterBy?.predicate(this));this.requestQuery(r),po().prefetch(r.clone().offset(t+this.limit))}fields(){return this.columns.map(t=>El(this.from,t))}fieldInfo(t){this.schema=t;let r=this.head;r.innerHTML="";let n=document.createElement("tr");for(let{column:i}of t){let o=document.createElement("th");o.addEventListener("click",s=>this.sort(s,i)),o.appendChild(document.createElement("span")),o.appendChild(document.createTextNode(i)),n.appendChild(o)}return r.appendChild(n),this.formats=eht(this.format,t),this.style.innerText=iht(this.id,rht(this.align,t),nht(this.widths,t)),this}query(t=[]){let{from:r,limit:n,offset:i,schema:o,sortColumn:s,sortDesc:a}=this;return bt.from(r).select(o.map(c=>c.column)).where(t).orderby(s?a?nM(s):s:[]).limit(n).offset(i)}queryResult(t){return this.pending||(this.loaded=!1,this.body.replaceChildren()),this.data=t,this}update(){let{body:t,formats:r,data:n,schema:i,limit:o}=this,s=i.length,a=0;for(let c of n){++a;let l=document.createElement("tr");for(let u=0;u<s;++u){let f=c[i[u].column],d=document.createElement("td");d.innerText=f==null?"":r[u](f),l.appendChild(d)}t.appendChild(l)}return a<o&&(this.loaded=!0),this.pending=!1,this}sort(t,r){r===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=r,this.sortDesc=!1);let n=t.currentTarget,i=this.sortHeader;i===n&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=n,n.firstChild.textContent=this.sortDesc?"\u25BE":"\u25B4"),this.requestData()}};function eht(e={},t,r){return t.map(({column:n,type:i})=>{if(n in e)return e[n];switch(i){case"number":return JT(r);case"date":return kF;default:return LF(r)}})}function rht(e={},t){return t.map(({column:r,type:n})=>r in e?e[r]:n==="number"?"right":"left")}function nht(e={},t){return t.map(({column:r})=>e[r])}function iht(e,t,r){let n=[];return t.forEach((i,o)=>{let s=+r[o];if(i!=="left"||s){let a=i!=="left"?`text-align:${i};`:"",c=s?`width:${s}px;max-width:${s}px;`:"";n.push(`#${e} tr>:nth-child(${o+1}) {${a}${c}}`)}}),n.join(" ")}function Qx(e,...t){let r=e?.context?.coordinator??po();for(let n of t)r.connect(n)}function tA(e,t,r){let n=new t(r);return Qx(e,n),n.element}function LG(e){return tA(this,Xx,e)}function kG(e){return tA(this,Hx,e)}function CG(e){return tA(this,Zx,e)}function UG(e){return tA(this,Kx,e)}function PG({direction:e="vertical",wrap:t=!1},r){let n=document.createElement("div");return n.style.display="flex",n.style.flexDirection=e==="vertical"?"column":"row",n.style.flexWrap=t?t===!0?"wrap":t:"nowrap",n.style.justifyContent="flex-start",n.style.alignItems="flex-start",r.forEach(i=>n.appendChild(i)),Object.assign(n,{value:{element:n}}),n}function $G(...e){return PG({direction:"vertical"},e.flat())}function zG(...e){return PG({direction:"horizontal"},e.flat())}function VG({dim:e="width",size:t=10}){let r=document.createElement("span");return r.style.display="inline-block",r.style[e]=Number.isNaN(+t)?t:`${t}px`,Object.assign(r,{value:{element:r}})}function jG(e){return VG({dim:"height",size:e})}function qG(e){return VG({dim:"width",size:e})}var GG={};Ir(GG,{align:()=>KF,aspectRatio:()=>QF,axis:()=>JF,colorBase:()=>CL,colorClamp:()=>AL,colorConstant:()=>PL,colorDomain:()=>IL,colorExponent:()=>UL,colorInterpolate:()=>BL,colorLabel:()=>FL,colorN:()=>ML,colorNice:()=>EL,colorPivot:()=>OL,colorRange:()=>TL,colorReverse:()=>RL,colorScale:()=>SL,colorScheme:()=>DL,colorSymmetric:()=>NL,colorTickFormat:()=>kL,colorZero:()=>LL,facetGrid:()=>wR,facetLabel:()=>vR,facetMargin:()=>yR,facetMarginBottom:()=>bR,facetMarginLeft:()=>xR,facetMarginRight:()=>_R,facetMarginTop:()=>gR,fxAlign:()=>BR,fxAriaDescription:()=>XR,fxAriaLabel:()=>GR,fxAxis:()=>RR,fxDomain:()=>SR,fxFontVariant:()=>WR,fxGrid:()=>zR,fxInset:()=>AR,fxInsetLeft:()=>MR,fxInsetRight:()=>ER,fxLabel:()=>jR,fxLabelAnchor:()=>qR,fxLabelOffset:()=>YR,fxLine:()=>VR,fxNice:()=>TR,fxPadding:()=>OR,fxPaddingInner:()=>NR,fxPaddingOuter:()=>FR,fxRange:()=>IR,fxReverse:()=>HR,fxRound:()=>DR,fxTickFormat:()=>PR,fxTickPadding:()=>UR,fxTickRotate:()=>$R,fxTickSize:()=>kR,fxTickSpacing:()=>CR,fxTicks:()=>LR,fyAlign:()=>nL,fyAriaDescription:()=>wL,fyAriaLabel:()=>_L,fyAxis:()=>aL,fyDomain:()=>ZR,fyFontVariant:()=>xL,fyGrid:()=>pL,fyInset:()=>JR,fyInsetBottom:()=>eL,fyInsetTop:()=>tL,fyLabel:()=>yL,fyLabelAnchor:()=>gL,fyLabelOffset:()=>bL,fyLine:()=>mL,fyNice:()=>QR,fyPadding:()=>iL,fyPaddingInner:()=>oL,fyPaddingOuter:()=>sL,fyRange:()=>KR,fyReverse:()=>vL,fyRound:()=>rL,fyTickFormat:()=>dL,fyTickPadding:()=>fL,fyTickRotate:()=>hL,fyTickSize:()=>lL,fyTickSpacing:()=>uL,fyTicks:()=>cL,grid:()=>e6,height:()=>WF,inset:()=>t6,label:()=>r6,lengthBase:()=>y4,lengthClamp:()=>h4,lengthConstant:()=>b4,lengthDomain:()=>f4,lengthExponent:()=>g4,lengthNice:()=>p4,lengthRange:()=>d4,lengthScale:()=>u4,lengthZero:()=>m4,margin:()=>VF,marginBottom:()=>ZF,marginLeft:()=>GF,marginRight:()=>XF,marginTop:()=>HF,margins:()=>zF,name:()=>PF,opacityBase:()=>HL,opacityClamp:()=>jL,opacityConstant:()=>KL,opacityDomain:()=>zL,opacityExponent:()=>ZL,opacityLabel:()=>YL,opacityNice:()=>qL,opacityRange:()=>VL,opacityReverse:()=>WL,opacityScale:()=>$L,opacityTickFormat:()=>XL,opacityZero:()=>GL,padding:()=>n6,projectionClip:()=>D4,projectionDomain:()=>S4,projectionInset:()=>I4,projectionInsetBottom:()=>E4,projectionInsetLeft:()=>T4,projectionInsetRight:()=>A4,projectionInsetTop:()=>M4,projectionParallels:()=>_4,projectionPrecision:()=>w4,projectionRotate:()=>v4,projectionType:()=>x4,rBase:()=>a4,rClamp:()=>i4,rConstant:()=>l4,rDomain:()=>r4,rExponent:()=>c4,rNice:()=>o4,rRange:()=>n4,rScale:()=>e4,rZero:()=>s4,style:()=>qF,symbolDomain:()=>JL,symbolRange:()=>t4,symbolScale:()=>QL,width:()=>YF,xAlign:()=>h6,xAriaDescription:()=>O6,xAriaLabel:()=>B6,xAxis:()=>g6,xBase:()=>R6,xClamp:()=>f6,xConstant:()=>k6,xDomain:()=>o6,xExponent:()=>L6,xFontVariant:()=>D6,xGrid:()=>I6,xInset:()=>c6,xInsetLeft:()=>l6,xInsetRight:()=>u6,xLabel:()=>A6,xLabelAnchor:()=>M6,xLabelOffset:()=>E6,xLine:()=>T6,xNice:()=>a6,xPadding:()=>p6,xPaddingInner:()=>m6,xPaddingOuter:()=>y6,xRange:()=>s6,xReverse:()=>N6,xRound:()=>d6,xScale:()=>i6,xTickFormat:()=>v6,xTickPadding:()=>w6,xTickRotate:()=>S6,xTickSize:()=>x6,xTickSpacing:()=>_6,xTicks:()=>b6,xZero:()=>F6,xyDomain:()=>jF,yAlign:()=>W6,yAriaDescription:()=>uR,yAriaLabel:()=>lR,yAxis:()=>Z6,yBase:()=>hR,yClamp:()=>q6,yConstant:()=>mR,yDomain:()=>U6,yExponent:()=>pR,yFontVariant:()=>cR,yGrid:()=>nR,yInset:()=>z6,yInsetBottom:()=>j6,yInsetTop:()=>V6,yLabel:()=>oR,yLabelAnchor:()=>sR,yLabelOffset:()=>aR,yLine:()=>iR,yNice:()=>$6,yPadding:()=>G6,yPaddingInner:()=>X6,yPaddingOuter:()=>H6,yRange:()=>P6,yReverse:()=>fR,yRound:()=>Y6,yScale:()=>C6,yTickFormat:()=>eR,yTickPadding:()=>tR,yTickRotate:()=>rR,yTickSize:()=>Q6,yTickSpacing:()=>J6,yTicks:()=>K6,yZero:()=>dR});var Jx=class extends Map{request(t,r){if(this.has(t))r(this.get(t));else{let n=this.waiting||(this.waiting=new Map),i=n.get(t)||[];n.set(t,i.concat(r))}}set(t,r){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);let{waiting:n}=this;return n?.has(t)&&(n.get(t).forEach(i=>i(r)),n.delete(t)),super.set(t,r)}clear(){return this.waiting?.clear(),super.clear()}},CF=new Jx;function UF(e,t,r){(e?.context?.namedPlots??CF).request(t,r)}function YG(e,t,r){(e?.context?.namedPlots??CF).set(t,r)}function PF(e){return t=>YG(this,e,t)}function WG(e,t,r){gi(r)?(r.addEventListener("value",n=>{e.setAttribute(t,n),e.update()}),r.value!==void 0&&e.setAttribute(t,r.value)):e.setAttribute(t,r)}function oht(e,t){return r=>{WG(r,e,t)}}function $F(e){return t=>{for(let[r,n]of Object.entries(e))WG(t,r,n)}}function zF(e){let{top:t,bottom:r,left:n,right:i}=e,o={};return t!==void 0&&(o.marginTop=t),r!==void 0&&(o.marginBottom=r),n!==void 0&&(o.marginLeft=n),i!==void 0&&(o.marginRight=i),$F(o)}function VF(e){return $F({marginTop:e,marginBottom:e,marginLeft:e,marginRight:e})}function jF(e){return $F({xDomain:e,yDomain:e})}var F=e=>t=>oht(e,t),qF=F("style"),YF=F("width"),WF=F("height"),GF=F("marginLeft"),XF=F("marginRight"),HF=F("marginTop"),ZF=F("marginBottom"),KF=F("align"),QF=F("aspectRatio"),JF=F("axis"),t6=F("inset"),e6=F("grid"),r6=F("label"),n6=F("padding"),i6=F("xScale"),o6=F("xDomain"),s6=F("xRange"),a6=F("xNice"),c6=F("xInset"),l6=F("xInsetLeft"),u6=F("xInsetRight"),f6=F("xClamp"),d6=F("xRound"),h6=F("xAlign"),p6=F("xPadding"),m6=F("xPaddingInner"),y6=F("xPaddingOuter"),g6=F("xAxis"),b6=F("xTicks"),x6=F("xTickSize"),_6=F("xTickSpacing"),w6=F("xTickPadding"),v6=F("xTickFormat"),S6=F("xTickRotate"),I6=F("xGrid"),T6=F("xLine"),A6=F("xLabel"),M6=F("xLabelAnchor"),E6=F("xLabelOffset"),D6=F("xFontVariant"),B6=F("xAriaLabel"),O6=F("xAriaDescription"),N6=F("xReverse"),F6=F("xZero"),R6=F("xBase"),L6=F("xExponent"),k6=F("xConstant"),C6=F("yScale"),U6=F("yDomain"),P6=F("yRange"),$6=F("yNice"),z6=F("yInset"),V6=F("yInsetTop"),j6=F("yInsetBottom"),q6=F("yClamp"),Y6=F("yRound"),W6=F("yAlign"),G6=F("yPadding"),X6=F("yPaddingInner"),H6=F("yPaddingOuter"),Z6=F("yAxis"),K6=F("yTicks"),Q6=F("yTickSize"),J6=F("yTickSpacing"),tR=F("yTickPadding"),eR=F("yTickFormat"),rR=F("yTickRotate"),nR=F("yGrid"),iR=F("yLine"),oR=F("yLabel"),sR=F("yLabelAnchor"),aR=F("yLabelOffset"),cR=F("yFontVariant"),lR=F("yAriaLabel"),uR=F("yAriaDescription"),fR=F("yReverse"),dR=F("yZero"),hR=F("yBase"),pR=F("yExponent"),mR=F("yConstant"),yR=F("facetMargin"),gR=F("facetMarginTop"),bR=F("facetMarginBottom"),xR=F("facetMarginLeft"),_R=F("facetMarginRight"),wR=F("facetGrid"),vR=F("facetLabel"),SR=F("fxDomain"),IR=F("fxRange"),TR=F("fxNice"),AR=F("fxInset"),MR=F("fxInsetLeft"),ER=F("fxInsetRight"),DR=F("fxRound"),BR=F("fxAlign"),OR=F("fxPadding"),NR=F("fxPaddingInner"),FR=F("fxPaddingOuter"),RR=F("fxAxis"),LR=F("fxTicks"),kR=F("fxTickSize"),CR=F("fxTickSpacing"),UR=F("fxTickPadding"),PR=F("fxTickFormat"),$R=F("fxTickRotate"),zR=F("fxGrid"),VR=F("fxLine"),jR=F("fxLabel"),qR=F("fxLabelAnchor"),YR=F("fxLabelOffset"),WR=F("fxFontVariant"),GR=F("fxAriaLabel"),XR=F("fxAriaDescription"),HR=F("fxReverse"),ZR=F("fyDomain"),KR=F("fyRange"),QR=F("fyNice"),JR=F("fyInset"),tL=F("fyInsetTop"),eL=F("fyInsetBottom"),rL=F("fyRound"),nL=F("fyAlign"),iL=F("fyPadding"),oL=F("fyPaddingInner"),sL=F("fyPaddingOuter"),aL=F("fyAxis"),cL=F("fyTicks"),lL=F("fyTickSize"),uL=F("fyTickSpacing"),fL=F("fyTickPadding"),dL=F("fyTickFormat"),hL=F("fyTickRotate"),pL=F("fyGrid"),mL=F("fyLine"),yL=F("fyLabel"),gL=F("fyLabelAnchor"),bL=F("fyLabelOffset"),xL=F("fyFontVariant"),_L=F("fyAriaLabel"),wL=F("fyAriaDescription"),vL=F("fyReverse"),SL=F("colorScale"),IL=F("colorDomain"),TL=F("colorRange"),AL=F("colorClamp"),ML=F("colorN"),EL=F("colorNice"),DL=F("colorScheme"),BL=F("colorInterpolate"),OL=F("colorPivot"),NL=F("colorSymmetric"),FL=F("colorLabel"),RL=F("colorReverse"),LL=F("colorZero"),kL=F("colorTickFormat"),CL=F("colorBase"),UL=F("colorExponent"),PL=F("colorConstant"),$L=F("opacityScale"),zL=F("opacityDomain"),VL=F("opacityRange"),jL=F("opacityClamp"),qL=F("opacityNice"),YL=F("opacityLabel"),WL=F("opacityReverse"),GL=F("opacityZero"),XL=F("opacityTickFormat"),HL=F("opacityBase"),ZL=F("opacityExponent"),KL=F("opacityConstant"),QL=F("symbolScale"),JL=F("symbolDomain"),t4=F("symbolRange"),e4=F("rScale"),r4=F("rDomain"),n4=F("rRange"),i4=F("rClamp"),o4=F("rNice"),s4=F("rZero"),a4=F("rBase"),c4=F("rExponent"),l4=F("rConstant"),u4=F("lengthScale"),f4=F("lengthDomain"),d4=F("lengthRange"),h4=F("lengthClamp"),p4=F("lengthNice"),m4=F("lengthZero"),y4=F("lengthBase"),g4=F("lengthExponent"),b4=F("lengthConstant"),x4=F("projectionType"),_4=F("projectionParallels"),w4=F("projectionPrecision"),v4=F("projectionRotate"),S4=F("projectionDomain"),I4=F("projectionInset"),T4=F("projectionInsetLeft"),A4=F("projectionInsetRight"),M4=F("projectionInsetTop"),E4=F("projectionInsetBottom"),D4=F("projectionClip");function XG(e,t){return{table:e,options:t}}var HG={};Ir(HG,{area:()=>O4,areaX:()=>N4,areaY:()=>F4,arrow:()=>I8,axisFx:()=>D8,axisFy:()=>B8,axisX:()=>M8,axisY:()=>E8,barX:()=>C4,barY:()=>U4,cell:()=>P4,cellX:()=>$4,cellY:()=>z4,circle:()=>X4,contour:()=>d8,delaunayLink:()=>w8,delaunayMesh:()=>v8,denseLine:()=>f8,density:()=>u8,densityX:()=>c8,densityY:()=>l8,dot:()=>Y4,dotX:()=>W4,dotY:()=>G4,frame:()=>A8,geo:()=>L8,graticule:()=>C8,gridFx:()=>F8,gridFy:()=>R8,gridX:()=>O8,gridY:()=>N8,heatmap:()=>h8,hexagon:()=>H4,hexbin:()=>y8,hexgrid:()=>g8,hull:()=>S8,image:()=>a8,line:()=>R4,lineX:()=>L4,lineY:()=>k4,link:()=>T8,raster:()=>p8,rasterTile:()=>m8,rect:()=>V4,rectX:()=>j4,rectY:()=>q4,regressionY:()=>b8,ruleX:()=>J4,ruleY:()=>t8,sphere:()=>k8,spike:()=>s8,text:()=>Z4,textX:()=>K4,textY:()=>Q4,tickX:()=>e8,tickY:()=>r8,vector:()=>n8,vectorX:()=>i8,vectorY:()=>o8,voronoi:()=>x8,voronoiMesh:()=>_8});var sht=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function Ct(e,t,r={}){arguments.length===2&&!Array.isArray(t)&&(r=t,t=sht.has(e)?null:[{}]);let n=e.startsWith("area")||e.startsWith("line")?Nx:In;return B4(n,e,t,r)}function B4(e,t,r,n){return i=>{i.addMark(new e(t,r,n))}}function ml(e,t,r){return n=>{n.addMark(new e(t,r))}}var O4=(...e)=>Ct("area",...e),N4=(...e)=>Ct("areaX",...e),F4=(...e)=>Ct("areaY",...e),R4=(...e)=>Ct("line",...e),L4=(...e)=>Ct("lineX",...e),k4=(...e)=>Ct("lineY",...e),C4=(...e)=>Ct("barX",...e),U4=(...e)=>Ct("barY",...e),P4=(...e)=>Ct("cell",...e),$4=(...e)=>Ct("cellX",...e),z4=(...e)=>Ct("cellY",...e),V4=(...e)=>Ct("rect",...e),j4=(...e)=>Ct("rectX",...e),q4=(...e)=>Ct("rectY",...e),Y4=(...e)=>Ct("dot",...e),W4=(...e)=>Ct("dotX",...e),G4=(...e)=>Ct("dotY",...e),X4=(...e)=>Ct("circle",...e),H4=(...e)=>Ct("hexagon",...e),Z4=(...e)=>Ct("text",...e),K4=(...e)=>Ct("textX",...e),Q4=(...e)=>Ct("textY",...e),J4=(...e)=>Ct("ruleX",...e),t8=(...e)=>Ct("ruleY",...e),e8=(...e)=>Ct("tickX",...e),r8=(...e)=>Ct("tickY",...e),n8=(...e)=>Ct("vector",...e),i8=(...e)=>Ct("vectoX",...e),o8=(...e)=>Ct("vectorY",...e),s8=(...e)=>Ct("spike",...e),a8=(...e)=>Ct("image",...e),c8=(...e)=>B4(xm,"areaX",...e),l8=(...e)=>B4(xm,"areaY",...e),u8=(...e)=>ml(Ux,...e),f8=(...e)=>ml(Cx,...e),d8=(...e)=>ml(Lx,...e),h8=(...e)=>ml(kx,...e),p8=(...e)=>ml($u,...e),m8=(...e)=>ml(zx,...e),y8=(...e)=>ml($x,...e),g8=(...e)=>Ct("hexgrid",...e),b8=(...e)=>ml(Vx,...e),x8=(...e)=>Ct("voronoi",...e),_8=(...e)=>Ct("voronoiMesh",...e),w8=(...e)=>Ct("delaunayLink",...e),v8=(...e)=>Ct("delaunayMesh",...e),S8=(...e)=>Ct("hull",...e),I8=(...e)=>Ct("arrow",...e),T8=(...e)=>Ct("link",...e),A8=(...e)=>Ct("frame",...e),M8=(...e)=>Ct("axisX",...e),E8=(...e)=>Ct("axisY",...e),D8=(...e)=>Ct("axisFx",...e),B8=(...e)=>Ct("axisFy",...e),O8=(...e)=>Ct("gridX",...e),N8=(...e)=>Ct("gridY",...e),F8=(...e)=>Ct("gridFx",...e),R8=(...e)=>Ct("gridFy",...e),L8=(...e)=>ml(Px,...e),k8=(...e)=>Ct("sphere",...e),C8=(...e)=>Ct("graticule",...e);var ZG={};Ir(ZG,{highlight:()=>U8,intervalX:()=>q8,intervalXY:()=>W8,intervalY:()=>Y8,nearestX:()=>V8,nearestY:()=>j8,pan:()=>G8,panX:()=>X8,panY:()=>H8,panZoom:()=>Z8,panZoomX:()=>K8,panZoomY:()=>Q8,toggle:()=>Im,toggleColor:()=>z8,toggleX:()=>P8,toggleY:()=>$8});function Vu(e,t){return r=>{let n=r.marks[r.marks.length-1];r.addInteractor(new e(n,t))}}function U8({by:e,...t}){return Vu(jx,{selection:e,channels:t})}function Im({as:e,...t}){return Vu(Bd,{...t,selection:e})}function P8(e){return Im({...e,channels:["x"]})}function $8(e){return Im({...e,channels:["y"]})}function z8(e){return Im({...e,channels:["color"]})}function V8({as:e,...t}){return Vu(vm,{...t,selection:e,channel:"x"})}function j8({as:e,...t}){return Vu(vm,{...t,selection:e,channel:"y"})}function q8({as:e,...t}){return Vu(zu,{...t,selection:e,channel:"x"})}function Y8({as:e,...t}){return Vu(zu,{...t,selection:e,channel:"y"})}function W8({as:e,...t}){return Vu(Wx,{...t,selection:e})}function Tm(e){return Vu(Gx,e)}function G8(e={}){return Tm({...e,zoom:!1})}function X8(e={}){return Tm({...e,zoom:!1,pany:!1})}function H8(e={}){return Tm({...e,zoom:!1,panx:!1})}function Z8(e={}){return Tm(e)}function K8(e={}){return Tm({...e,pany:!1})}function Q8(e={}){return Tm({...e,panx:!1})}var KG={};Ir(KG,{colorLegend:()=>tk,opacityLegend:()=>ek,symbolLegend:()=>rk});function J8(e,t={}){if(t.for){let{for:r,...n}=t,i=new Sm(e,n),o=typeof r,s=a=>a.addLegend(i,!1);return o==="string"?UF(this,r,s):r.value&&s(r.value),i.element}else return r=>r.addLegend(new Sm(e,t))}function tk(e){return J8.call(this,"color",e)}function ek(e){return J8.call(this,"opacity",e)}function rk(e){return J8.call(this,"symbol",e)}function QG(...e){let t=new Ox;return e.flat().forEach(r=>r(t)),Qx(this,...t.marks),t.update(),t.element}function aht({coordinator:e=po(),namedPlots:t=new Jx,extensions:r=null,...n}={}){return{...nk,...r,context:{coordinator:e,namedPlots:t,...n}}}export{Gy as Coordinator,ia as Fixed,ci as MosaicClient,Nl as Param,bt as Query,sc as Selection,IM as agg,KF as align,zn as and,O4 as area,N4 as areaX,F4 as areaY,ih as argmax,nh as argmin,HM as arrayAgg,I8 as arrow,QF as aspectRatio,GG as attributeDirectives,TM as avg,JF as axis,D8 as axisFx,B8 as axisFy,M8 as axisX,E8 as axisY,C4 as barX,U4 as barY,QT as bin,zy as cast,oh as castDouble,ZM as castInteger,P4 as cell,$4 as cellX,z4 as cellY,jy as centroid,eE as centroidX,rE as centroidY,X4 as circle,CL as colorBase,AL as colorClamp,PL as colorConstant,IL as colorDomain,UL as colorExponent,BL as colorInterpolate,FL as colorLabel,tk as colorLegend,ML as colorN,EL as colorNice,OL as colorPivot,TL as colorRange,RL as colorReverse,SL as colorScale,DL as colorScheme,NL as colorSymmetric,kL as colorTickFormat,LL as colorZero,El as column,Qx as connect,d8 as contour,po as coordinator,UM as corr,Ri as count,PM as covarPop,Ol as create,aht as createAPIContext,yM as cume_dist,tE as dateDay,QM as dateMonth,JM as dateMonthDay,w8 as delaunayLink,v8 as delaunayMesh,f8 as denseLine,pM as dense_rank,u8 as density,c8 as densityX,l8 as densityY,Y4 as dot,W4 as dotX,G4 as dotY,LM as entropy,nc as eq,wR as facetGrid,vR as facetLabel,yR as facetMargin,bR as facetMarginBottom,xR as facetMarginLeft,_R as facetMarginRight,gR as facetMarginTop,WM as first,_M as first_value,A8 as frame,XG as from,BR as fxAlign,XR as fxAriaDescription,GR as fxAriaLabel,RR as fxAxis,SR as fxDomain,WR as fxFontVariant,zR as fxGrid,AR as fxInset,MR as fxInsetLeft,ER as fxInsetRight,jR as fxLabel,qR as fxLabelAnchor,YR as fxLabelOffset,VR as fxLine,TR as fxNice,OR as fxPadding,NR as fxPaddingInner,FR as fxPaddingOuter,IR as fxRange,HR as fxReverse,DR as fxRound,PR as fxTickFormat,UR as fxTickPadding,$R as fxTickRotate,kR as fxTickSize,CR as fxTickSpacing,LR as fxTicks,nL as fyAlign,wL as fyAriaDescription,_L as fyAriaLabel,aL as fyAxis,ZR as fyDomain,xL as fyFontVariant,pL as fyGrid,JR as fyInset,eL as fyInsetBottom,tL as fyInsetTop,yL as fyLabel,gL as fyLabelAnchor,bL as fyLabelOffset,mL as fyLine,QR as fyNice,iL as fyPadding,oL as fyPaddingInner,sL as fyPaddingOuter,KR as fyRange,vL as fyReverse,rL as fyRound,dL as fyTickFormat,fL as fyTickPadding,hL as fyTickRotate,lL as fyTickSize,uL as fyTickSpacing,cL as fyTicks,L8 as geo,Vy as geojson,C8 as graticule,e6 as grid,F8 as gridFx,R8 as gridFy,O8 as gridX,N8 as gridY,Uy as gt,oM as gte,zG as hconcat,h8 as heatmap,WF as height,H4 as hexagon,y8 as hexbin,g8 as hexgrid,U8 as highlight,qG as hspace,S8 as hull,a8 as image,t6 as inset,ZG as interactorDirectives,q8 as intervalX,W8 as intervalXY,Y8 as intervalY,tr as isBetween,sM as isDistinct,aM as isNotBetween,Py as isNotDistinct,rc as isNotNull,uf as isNull,RM as kurtosis,r6 as label,bM as lag,GM as last,wM as last_value,xM as lead,KG as legendDirectives,y4 as lengthBase,h4 as lengthClamp,b4 as lengthConstant,f4 as lengthDomain,g4 as lengthExponent,p4 as lengthNice,d4 as lengthRange,u4 as lengthScale,m4 as lengthZero,R4 as line,L4 as lineX,k4 as lineY,T8 as link,Fi as literal,sE as loadCSV,iE as loadExtension,aE as loadJSON,uE as loadObjects,cE as loadParquet,lE as loadSpatial,ic as lt,oc as lte,AM as mad,VF as margin,ZF as marginBottom,GF as marginLeft,XF as marginRight,HF as marginTop,zF as margins,HG as markDirectives,fo as max,EM as median,LG as menu,ho as min,BM as mode,PF as name,CF as namedPlots,V8 as nearestX,j8 as nearestY,ff as neq,iM as not,vM as nth_value,gM as ntile,HL as opacityBase,jL as opacityClamp,KL as opacityConstant,zL as opacityDomain,ZL as opacityExponent,YL as opacityLabel,ek as opacityLegend,qL as opacityNice,VL as opacityRange,WL as opacityReverse,$L as opacityScale,XL as opacityTickFormat,GL as opacityZero,lf as or,n6 as padding,G8 as pan,X8 as panX,H8 as panY,Z8 as panZoom,K8 as panZoomX,Q8 as panZoomY,mM as percent_rank,QG as plot,MM as product,D4 as projectionClip,S4 as projectionDomain,I4 as projectionInset,E4 as projectionInsetBottom,T4 as projectionInsetLeft,A4 as projectionInsetRight,M4 as projectionInsetTop,_4 as projectionParallels,w4 as projectionPrecision,v4 as projectionRotate,x4 as projectionType,DM as quantile,a4 as rBase,i4 as rClamp,l4 as rConstant,r4 as rDomain,c4 as rExponent,o4 as rNice,n4 as rRange,e4 as rScale,s4 as rZero,hM as rank,p8 as raster,m8 as rasterTile,V4 as rect,j4 as rectX,q4 as rectY,b8 as regressionY,UF as requestNamedPlot,MU as restConnector,dM as row_number,J4 as ruleX,t8 as ruleY,kG as search,FM as skewness,CG as slider,S1 as socketConnector,k8 as sphere,s8 as spike,q as sql,NM as stddev,CM as stddevPop,XM as stringAgg,qF as style,Li as sum,JL as symbolDomain,rk as symbolLegend,t4 as symbolRange,QL as symbolScale,UG as table,Z4 as text,K4 as textX,Q4 as textY,e8 as tickX,r8 as tickY,Im as toggle,z8 as toggleColor,P8 as toggleX,$8 as toggleY,kM as varPop,OM as variance,$G as vconcat,n8 as vector,i8 as vectorX,o8 as vectorY,x8 as voronoi,_8 as voronoiMesh,jG as vspace,SP as wasmConnector,YF as width,h6 as xAlign,O6 as xAriaDescription,B6 as xAriaLabel,g6 as xAxis,R6 as xBase,f6 as xClamp,k6 as xConstant,o6 as xDomain,L6 as xExponent,D6 as xFontVariant,I6 as xGrid,c6 as xInset,l6 as xInsetLeft,u6 as xInsetRight,A6 as xLabel,M6 as xLabelAnchor,E6 as xLabelOffset,T6 as xLine,a6 as xNice,p6 as xPadding,m6 as xPaddingInner,y6 as xPaddingOuter,s6 as xRange,N6 as xReverse,d6 as xRound,i6 as xScale,v6 as xTickFormat,w6 as xTickPadding,S6 as xTickRotate,x6 as xTickSize,_6 as xTickSpacing,b6 as xTicks,F6 as xZero,jF as xyDomain,W6 as yAlign,uR as yAriaDescription,lR as yAriaLabel,Z6 as yAxis,hR as yBase,q6 as yClamp,mR as yConstant,U6 as yDomain,pR as yExponent,cR as yFontVariant,nR as yGrid,z6 as yInset,j6 as yInsetBottom,V6 as yInsetTop,oR as yLabel,sR as yLabelAnchor,aR as yLabelOffset,iR as yLine,$6 as yNice,G6 as yPadding,X6 as yPaddingInner,H6 as yPaddingOuter,P6 as yRange,fR as yReverse,Y6 as yRound,C6 as yScale,eR as yTickFormat,tR as yTickPadding,rR as yTickRotate,Q6 as yTickSize,J6 as yTickSpacing,K6 as yTicks,dR as yZero};
